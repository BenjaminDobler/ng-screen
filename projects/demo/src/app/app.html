<div style="display: flex; width: 100%; height: 100%; overflow: hidden">
  <div style="display: flex; flex-direction: column; width: 100%; overflow: hidden; height: 100%">
    <div style="padding: 40px; background: #222; overflow: hidden; flex: 1; display: flex; align-items: center; justify-content: center">
      <app-editor
        (scaleChange)="settings.scale.set($event)"
        style="width: 100%"
        [background]="settings.backgroundColor()"
        [contentWidth]="settings.recordingWidth()"
        [contentHeight]="settings.recordingHeight()"
      >
        @for (video of recordingService.videos(); track $index) {
          <app-video
            (selected)="settings.setSelectedVideo($event)"
            [scale]="settings.scale()"
            [width]="settings.recordingWidth()"
            #screenVideo
            [srcObject]="video.stream"
            [videoDO]="video"
          ></app-video>
        }
      </app-editor>
    </div>
    <app-controls></app-controls>
  </div>

  <app-sidebar></app-sidebar>
</div>

@if (currentVideo()) {
  <h3>Playback</h3>
  <video #playbackVideo controls [src]="currentVideo()"></video>
}

<app-editor
  style="width: 100%; display: none"
  [background]="settings.backgroundColor()"
  [contentWidth]="settings.recordingWidth()"
  [contentHeight]="settings.recordingHeight()"
>
  <app-canvas
    [background]="settings.backgroundColor()"
    [canvasHeight]="settings.recordingHeight()"
    [canvasWidth]="settings.recordingWidth()"
    #canvasComponent
    [videos]="recordingService.videos()"
  ></app-canvas>
</app-editor>
