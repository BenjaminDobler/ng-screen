var Q$=Object.create;var op=Object.defineProperty,J$=Object.defineProperties,eV=Object.getOwnPropertyDescriptor,tV=Object.getOwnPropertyDescriptors,nV=Object.getOwnPropertyNames,rp=Object.getOwnPropertySymbols,rV=Object.getPrototypeOf,Qy=Object.prototype.hasOwnProperty,bD=Object.prototype.propertyIsEnumerable;var vD=(e,t,n)=>t in e?op(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||={})Qy.call(t,n)&&vD(e,n,t[n]);if(rp)for(var n of rp(t))bD.call(t,n)&&vD(e,n,t[n]);return e},fe=(e,t)=>J$(e,tV(t));var wD=(e,t)=>{var n={};for(var r in e)Qy.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rp)for(var r of rp(e))t.indexOf(r)<0&&bD.call(e,r)&&(n[r]=e[r]);return n};var wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),He=(e,t)=>{for(var n in t)op(e,n,{get:t[n],enumerable:!0})},oV=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of nV(t))!Qy.call(e,o)&&o!==n&&op(e,o,{get:()=>t[o],enumerable:!(r=eV(t,o))||r.enumerable});return e};var Jy=(e,t,n)=>(n=e!=null?Q$(rV(e)):{},oV(t||!e||!e.__esModule?op(n,"default",{value:e,enumerable:!0}):n,e));var KO=wr((hme,qO)=>{"use strict";qO.exports=yt;var qr=null;try{qr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function yt(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}yt.prototype.__isLong__;Object.defineProperty(yt.prototype,"__isLong__",{value:!0});function pr(e){return(e&&e.__isLong__)===!0}yt.isLong=pr;var $O={},VO={};function $a(e,t){var n,r,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(r=VO[e],r)?r:(n=vt(e,(e|0)<0?-1:0,!0),o&&(VO[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(r=$O[e],r)?r:(n=vt(e,e<0?-1:0,!1),o&&($O[e]=n),n))}yt.fromInt=$a;function Kr(e,t){if(isNaN(e))return t?La:Yr;if(t){if(e<0)return La;if(e>=UO)return WO}else{if(e<=-BO)return fr;if(e+1>=BO)return GO}return e<0?Kr(-e,t).neg():vt(e%Tc|0,e/Tc|0,t)}yt.fromNumber=Kr;function vt(e,t,n){return new yt(e,t,n)}yt.fromBits=vt;var Vm=Math.pow;function MS(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Yr;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return MS(e.substring(1),t,n).neg();for(var o=Kr(Vm(n,8)),i=Yr,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),n);if(a<8){var c=Kr(Vm(n,a));i=i.mul(c).add(Kr(l))}else i=i.mul(o),i=i.add(Kr(l))}return i.unsigned=t,i}yt.fromString=MS;function mo(e,t){return typeof e=="number"?Kr(e,t):typeof e=="string"?MS(e,t):vt(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}yt.fromValue=mo;var jO=65536,JG=1<<24,Tc=jO*jO,UO=Tc*Tc,BO=UO/2,HO=$a(JG),Yr=$a(0);yt.ZERO=Yr;var La=$a(0,!0);yt.UZERO=La;var xc=$a(1);yt.ONE=xc;var zO=$a(1,!0);yt.UONE=zO;var AS=$a(-1);yt.NEG_ONE=AS;var GO=vt(-1,2147483647,!1);yt.MAX_VALUE=GO;var WO=vt(-1,-1,!0);yt.MAX_UNSIGNED_VALUE=WO;var fr=vt(0,-2147483648,!1);yt.MIN_VALUE=fr;var X=yt.prototype;X.toInt=function(){return this.unsigned?this.low>>>0:this.low};X.toNumber=function(){return this.unsigned?(this.high>>>0)*Tc+(this.low>>>0):this.high*Tc+(this.low>>>0)};X.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(fr)){var n=Kr(t),r=this.div(n),o=r.mul(n).sub(this);return r.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Kr(Vm(t,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(t);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};X.getHighBits=function(){return this.high};X.getHighBitsUnsigned=function(){return this.high>>>0};X.getLowBits=function(){return this.low};X.getLowBitsUnsigned=function(){return this.low>>>0};X.getNumBitsAbs=function(){if(this.isNegative())return this.eq(fr)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&(t&1<<n)==0;n--);return this.high!=0?n+33:n+1};X.isZero=function(){return this.high===0&&this.low===0};X.eqz=X.isZero;X.isNegative=function(){return!this.unsigned&&this.high<0};X.isPositive=function(){return this.unsigned||this.high>=0};X.isOdd=function(){return(this.low&1)===1};X.isEven=function(){return(this.low&1)===0};X.equals=function(t){return pr(t)||(t=mo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};X.eq=X.equals;X.notEquals=function(t){return!this.eq(t)};X.neq=X.notEquals;X.ne=X.notEquals;X.lessThan=function(t){return this.comp(t)<0};X.lt=X.lessThan;X.lessThanOrEqual=function(t){return this.comp(t)<=0};X.lte=X.lessThanOrEqual;X.le=X.lessThanOrEqual;X.greaterThan=function(t){return this.comp(t)>0};X.gt=X.greaterThan;X.greaterThanOrEqual=function(t){return this.comp(t)>=0};X.gte=X.greaterThanOrEqual;X.ge=X.greaterThanOrEqual;X.compare=function(t){if(pr(t)||(t=mo(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};X.comp=X.compare;X.negate=function(){return!this.unsigned&&this.eq(fr)?fr:this.not().add(xc)};X.neg=X.negate;X.add=function(t){pr(t)||(t=mo(t));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=t.high>>>16,a=t.high&65535,l=t.low>>>16,c=t.low&65535,u=0,f=0,p=0,m=0;return m+=i+c,p+=m>>>16,m&=65535,p+=o+l,f+=p>>>16,p&=65535,f+=r+a,u+=f>>>16,f&=65535,u+=n+s,u&=65535,vt(p<<16|m,u<<16|f,this.unsigned)};X.subtract=function(t){return pr(t)||(t=mo(t)),this.add(t.neg())};X.sub=X.subtract;X.multiply=function(t){if(this.isZero())return Yr;if(pr(t)||(t=mo(t)),qr){var n=qr.mul(this.low,this.high,t.low,t.high);return vt(n,qr.get_high(),this.unsigned)}if(t.isZero())return Yr;if(this.eq(fr))return t.isOdd()?fr:Yr;if(t.eq(fr))return this.isOdd()?fr:Yr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(HO)&&t.lt(HO))return Kr(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=t.high>>>16,l=t.high&65535,c=t.low>>>16,u=t.low&65535,f=0,p=0,m=0,w=0;return w+=s*u,m+=w>>>16,w&=65535,m+=i*u,p+=m>>>16,m&=65535,m+=s*c,p+=m>>>16,m&=65535,p+=o*u,f+=p>>>16,p&=65535,p+=i*c,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u+o*c+i*l+s*a,f&=65535,vt(m<<16|w,f<<16|p,this.unsigned)};X.mul=X.multiply;X.divide=function(t){if(pr(t)||(t=mo(t)),t.isZero())throw Error("division by zero");if(qr){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?qr.div_u:qr.div_s)(this.low,this.high,t.low,t.high);return vt(n,qr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?La:Yr;var r,o,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return La;if(t.gt(this.shru(1)))return zO;i=La}else{if(this.eq(fr)){if(t.eq(xc)||t.eq(AS))return fr;if(t.eq(fr))return xc;var s=this.shr(1);return r=s.div(t).shl(1),r.eq(Yr)?t.isNegative()?xc:AS:(o=this.sub(t.mul(r)),i=r.add(o.div(t)),i)}else if(t.eq(fr))return this.unsigned?La:Yr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Yr}for(o=this;o.gte(t);){r=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Vm(2,a-48),c=Kr(r),u=c.mul(t);u.isNegative()||u.gt(o);)r-=l,c=Kr(r,this.unsigned),u=c.mul(t);c.isZero()&&(c=xc),i=i.add(c),o=o.sub(u)}return i};X.div=X.divide;X.modulo=function(t){if(pr(t)||(t=mo(t)),qr){var n=(this.unsigned?qr.rem_u:qr.rem_s)(this.low,this.high,t.low,t.high);return vt(n,qr.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};X.mod=X.modulo;X.rem=X.modulo;X.not=function(){return vt(~this.low,~this.high,this.unsigned)};X.and=function(t){return pr(t)||(t=mo(t)),vt(this.low&t.low,this.high&t.high,this.unsigned)};X.or=function(t){return pr(t)||(t=mo(t)),vt(this.low|t.low,this.high|t.high,this.unsigned)};X.xor=function(t){return pr(t)||(t=mo(t)),vt(this.low^t.low,this.high^t.high,this.unsigned)};X.shiftLeft=function(t){return pr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?vt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):vt(0,this.low<<t-32,this.unsigned)};X.shl=X.shiftLeft;X.shiftRight=function(t){return pr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?vt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):vt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};X.shr=X.shiftRight;X.shiftRightUnsigned=function(t){if(pr(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return vt(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?vt(n,0,this.unsigned):vt(n>>>t-32,0,this.unsigned)};X.shru=X.shiftRightUnsigned;X.shr_u=X.shiftRightUnsigned;X.toSigned=function(){return this.unsigned?vt(this.low,this.high,!1):this};X.toUnsigned=function(){return this.unsigned?this:vt(this.low,this.high,!0)};X.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};X.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};X.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};yt.fromBytes=function(t,n,r){return r?yt.fromBytesLE(t,n):yt.fromBytesBE(t,n)};yt.fromBytesLE=function(t,n){return new yt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};yt.fromBytesBE=function(t,n){return new yt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)}});var $R=wr((kc,LR)=>{"use strict";var QW=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Wa=QW();LR.exports=kc=Wa.fetch;Wa.fetch&&(kc.default=Wa.fetch.bind(Wa));kc.Headers=Wa.Headers;kc.Request=Wa.Request;kc.Response=Wa.Response});var VR=wr(()=>{"use strict"});var QR=wr((ZR,vT)=>{"use strict";(function(e,t,n){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var f=.02519603282416938*a;a=f>>>0,f-=a,f*=a,a=f>>>0,f-=a,a+=f*4294967296}return(a>>>0)*23283064365386963e-26};return l}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(ZR,typeof vT=="object"&&vT,typeof define=="function"&&define)});var eP=wr((JR,bT)=>{"use strict";(function(e,t,n){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(JR,typeof bT=="object"&&bT,typeof define=="function"&&define)});var nP=wr((tP,wT)=>{"use strict";(function(e,t,n){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(tP,typeof wT=="object"&&wT,typeof define=="function"&&define)});var oP=wr((rP,_T)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,f,p,m;return f=c[u],f^=f>>>7,p=f^f<<24,f=c[u+1&7],p^=f^f>>>10,f=c[u+3&7],p^=f^f>>>3,f=c[u+4&7],p^=f^f<<7,f=c[u+7&7],f=f^f<<13,p^=f^f<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var f,p,m=[];if(u===(u|0))p=m[0]=u;else for(u=""+u,f=0;f<u.length;++f)m[f&7]=m[f&7]<<15^u.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?p=m[7]=-1:p=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(rP,typeof _T=="object"&&_T,typeof define=="function"&&define)});var sP=wr((iP,ET)=>{"use strict";(function(e,t,n){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,f=a.i,p,m;return a.w=c=c+1640531527|0,m=u[f+34&127],p=u[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=u[f]=m^p,a.i=f,m+(c^c>>>16)|0};function l(c,u){var f,p,m,w,x,T=[],D=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,D=Math.max(D,u.length)),m=0,w=-32;w<D;++w)u&&(p^=u.charCodeAt((w+32)%u.length)),w===0&&(x=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,w>=0&&(x=x+1640531527|0,f=T[w&127]^=p+x,m=f==0?m+1:0);for(m>=128&&(T[(u&&u.length||0)&127]=-1),m=127,w=512;w>0;--w)p=T[m+34&127],f=T[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,T[m]=p^f;c.w=x,c.X=T,c.i=m}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(iP,typeof ET=="object"&&ET,typeof define=="function"&&define)});var lP=wr((aP,ST)=>{"use strict";(function(e,t,n){function r(s){var a=this,l="";a.next=function(){var u=a.b,f=a.c,p=a.d,m=a.a;return u=u<<25^u>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-u|0,a.b=u=u<<20^u>>>12^f,a.c=f=f-p|0,a.d=p<<16^f>>>16^m,a.a=m-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(aP,typeof ST=="object"&&ST,typeof define=="function"&&define)});var cP=wr(()=>{"use strict"});var dP=wr((uP,sg)=>{"use strict";(function(e,t,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),l=n.pow(2,i),c=l*2,u=r-1,f;function p(A,M,$){var L=[];M=M==!0?{entropy:!0}:M||{};var H=T(x(M.entropy?[A,P(t)]:A??D(),3),L),G=new m(L),W=function(){for(var K=G.g(o),U=a,ue=0;K<l;)K=(K+ue)*r,U*=r,ue=G.g(1);for(;K>=c;)K/=2,U/=2,ue>>>=1;return(K+ue)/U};return W.int32=function(){return G.g(4)|0},W.quick=function(){return G.g(4)/4294967296},W.double=W,T(P(G.S),t),(M.pass||$||function(K,U,ue,se){return se&&(se.S&&w(se,G),K.state=function(){return w(G,{})}),ue?(n[s]=K,U):K})(W,H,"global"in M?M.global:this==n,M.state)}function m(A){var M,$=A.length,L=this,H=0,G=L.i=L.j=0,W=L.S=[];for($||(A=[$++]);H<r;)W[H]=H++;for(H=0;H<r;H++)W[H]=W[G=u&G+A[H%$]+(M=W[H])],W[G]=M;(L.g=function(K){for(var U,ue=0,se=L.i,Oe=L.j,Le=L.S;K--;)U=Le[se=u&se+1],ue=ue*r+Le[u&(Le[se]=Le[Oe=u&Oe+U])+(Le[Oe]=U)];return L.i=se,L.j=Oe,ue})(r)}function w(A,M){return M.i=A.i,M.j=A.j,M.S=A.S.slice(),M}function x(A,M){var $=[],L=typeof A,H;if(M&&L=="object")for(H in A)try{$.push(x(A[H],M-1))}catch{}return $.length?$:L=="string"?A:A+"\0"}function T(A,M){for(var $=A+"",L,H=0;H<$.length;)M[u&H]=u&(L^=M[u&H]*19)+$.charCodeAt(H++);return P(M)}function D(){try{var A;return f&&(A=f.randomBytes)?A=A(r):(A=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(A)),P(A)}catch{var M=e.navigator,$=M&&M.plugins;return[+new Date,e,$,e.screen,P(t)]}}function P(A){return String.fromCharCode.apply(0,A)}if(T(n.random(),t),typeof sg=="object"&&sg.exports){sg.exports=p;try{f=cP()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+s]=p})(typeof self<"u"?self:uP,[],Math)});var pP=wr((O1e,fP)=>{"use strict";var Bq=QR(),Hq=eP(),Uq=nP(),zq=oP(),Gq=sP(),Wq=lP(),Ja=dP();Ja.alea=Bq;Ja.xor128=Hq;Ja.xorwow=Uq;Ja.xorshift7=zq;Ja.xor4096=Gq;Ja.tychei=Wq;fP.exports=Ja});var MF=wr(AF=>{"use strict";(function(){"use strict";var e;function t(d){var h=0;return function(){return h<d.length?{done:!1,value:d[h++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,h,v){return d==Array.prototype||d==Object.prototype||(d[h]=v.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<d.length;++h){var v=d[h];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=r(this);function i(d,h){if(h)e:{var v=o;d=d.split(".");for(var E=0;E<d.length-1;E++){var I=d[E];if(!(I in v))break e;v=v[I]}d=d[d.length-1],E=v[d],h=h(E),h!=E&&h!=null&&n(v,d,{configurable:!0,writable:!0,value:h})}}i("Symbol",function(d){function h(N){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new v(E+(N||"")+"_"+I++,N)}function v(N,C){this.h=N,n(this,"description",{configurable:!0,writable:!0,value:C})}if(d)return d;v.prototype.toString=function(){return this.h};var E="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",I=0;return h}),i("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<h.length;v++){var E=o[h[v]];typeof E=="function"&&typeof E.prototype[d]!="function"&&n(E.prototype,d,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return d});function s(d){return d={next:d},d[Symbol.iterator]=function(){return this},d}function a(d){var h=typeof Symbol<"u"&&Symbol.iterator&&d[Symbol.iterator];return h?h.call(d):{next:t(d)}}function l(d){if(!(d instanceof Array)){d=a(d);for(var h,v=[];!(h=d.next()).done;)v.push(h.value);d=v}return d}var c=typeof Object.assign=="function"?Object.assign:function(d,h){for(var v=1;v<arguments.length;v++){var E=arguments[v];if(E)for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(d[I]=E[I])}return d};i("Object.assign",function(d){return d||c});var u=typeof Object.create=="function"?Object.create:function(d){function h(){}return h.prototype=d,new h},f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var p;e:{var m={a:!0},w={};try{w.__proto__=m,p=w.a;break e}catch{}p=!1}f=p?function(d,h){if(d.__proto__=h,d.__proto__!==h)throw new TypeError(d+" is not extensible");return d}:null}var x=f;function T(d,h){if(d.prototype=u(h.prototype),d.prototype.constructor=d,x)x(d,h);else for(var v in h)if(v!="prototype")if(Object.defineProperties){var E=Object.getOwnPropertyDescriptor(h,v);E&&Object.defineProperty(d,v,E)}else d[v]=h[v];d.za=h.prototype}function D(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function P(d){if(d.m)throw new TypeError("Generator is already running");d.m=!0}D.prototype.u=function(d){this.i=d};function A(d,h){d.l={ma:h,na:!0},d.h=d.s||d.v}D.prototype.return=function(d){this.l={return:d},this.h=this.v};function M(d,h,v){return d.h=v,{value:h}}function $(d){this.h=new D,this.i=d}function L(d,h){P(d.h);var v=d.h.j;return v?H(d,"return"in v?v.return:function(E){return{value:E,done:!0}},h,d.h.return):(d.h.return(h),G(d))}function H(d,h,v,E){try{var I=h.call(d.h.j,v);if(!(I instanceof Object))throw new TypeError("Iterator result "+I+" is not an object");if(!I.done)return d.h.m=!1,I;var N=I.value}catch(C){return d.h.j=null,A(d.h,C),G(d)}return d.h.j=null,E.call(d.h,N),G(d)}function G(d){for(;d.h.h;)try{var h=d.i(d.h);if(h)return d.h.m=!1,{value:h.value,done:!1}}catch(v){d.h.i=void 0,A(d.h,v)}if(d.h.m=!1,d.h.l){if(h=d.h.l,d.h.l=null,h.na)throw h.ma;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function W(d){this.next=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.next,h,d.h.u):(d.h.u(h),h=G(d)),h},this.throw=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.throw,h,d.h.u):(A(d.h,h),h=G(d)),h},this.return=function(h){return L(d,h)},this[Symbol.iterator]=function(){return this}}function K(d){function h(E){return d.next(E)}function v(E){return d.throw(E)}return new Promise(function(E,I){function N(C){C.done?E(C.value):Promise.resolve(C.value).then(h,v).then(N,I)}N(d.next())})}function U(d){return K(new W(new $(d)))}i("Promise",function(d){function h(C){this.i=0,this.j=void 0,this.h=[],this.u=!1;var k=this.l();try{C(k.resolve,k.reject)}catch(F){k.reject(F)}}function v(){this.h=null}function E(C){return C instanceof h?C:new h(function(k){k(C)})}if(d)return d;v.prototype.i=function(C){if(this.h==null){this.h=[];var k=this;this.j(function(){k.m()})}this.h.push(C)};var I=o.setTimeout;v.prototype.j=function(C){I(C,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var C=this.h;this.h=[];for(var k=0;k<C.length;++k){var F=C[k];C[k]=null;try{F()}catch(z){this.l(z)}}}this.h=null},v.prototype.l=function(C){this.j(function(){throw C})},h.prototype.l=function(){function C(z){return function(Y){F||(F=!0,z.call(k,Y))}}var k=this,F=!1;return{resolve:C(this.I),reject:C(this.m)}},h.prototype.I=function(C){if(C===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(C instanceof h)this.L(C);else{e:switch(typeof C){case"object":var k=C!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.F(C):this.s(C)}},h.prototype.F=function(C){var k=void 0;try{k=C.then}catch(F){this.m(F);return}typeof k=="function"?this.M(k,C):this.s(C)},h.prototype.m=function(C){this.v(2,C)},h.prototype.s=function(C){this.v(1,C)},h.prototype.v=function(C,k){if(this.i!=0)throw Error("Cannot settle("+C+", "+k+"): Promise already settled in state"+this.i);this.i=C,this.j=k,this.i===2&&this.K(),this.H()},h.prototype.K=function(){var C=this;I(function(){if(C.D()){var k=o.console;typeof k<"u"&&k.error(C.j)}},1)},h.prototype.D=function(){if(this.u)return!1;var C=o.CustomEvent,k=o.Event,F=o.dispatchEvent;return typeof F>"u"?!0:(typeof C=="function"?C=new C("unhandledrejection",{cancelable:!0}):typeof k=="function"?C=new k("unhandledrejection",{cancelable:!0}):(C=o.document.createEvent("CustomEvent"),C.initCustomEvent("unhandledrejection",!1,!0,C)),C.promise=this,C.reason=this.j,F(C))},h.prototype.H=function(){if(this.h!=null){for(var C=0;C<this.h.length;++C)N.i(this.h[C]);this.h=null}};var N=new v;return h.prototype.L=function(C){var k=this.l();C.T(k.resolve,k.reject)},h.prototype.M=function(C,k){var F=this.l();try{C.call(k,F.resolve,F.reject)}catch(z){F.reject(z)}},h.prototype.then=function(C,k){function F(ie,Q){return typeof ie=="function"?function(ve){try{z(ie(ve))}catch($e){Y($e)}}:Q}var z,Y,ye=new h(function(ie,Q){z=ie,Y=Q});return this.T(F(C,z),F(k,Y)),ye},h.prototype.catch=function(C){return this.then(void 0,C)},h.prototype.T=function(C,k){function F(){switch(z.i){case 1:C(z.j);break;case 2:k(z.j);break;default:throw Error("Unexpected state: "+z.i)}}var z=this;this.h==null?N.i(F):this.h.push(F),this.u=!0},h.resolve=E,h.reject=function(C){return new h(function(k,F){F(C)})},h.race=function(C){return new h(function(k,F){for(var z=a(C),Y=z.next();!Y.done;Y=z.next())E(Y.value).T(k,F)})},h.all=function(C){var k=a(C),F=k.next();return F.done?E([]):new h(function(z,Y){function ye(ve){return function($e){ie[ve]=$e,Q--,Q==0&&z(ie)}}var ie=[],Q=0;do ie.push(void 0),Q++,E(F.value).T(ye(ie.length-1),Y),F=k.next();while(!F.done)})},h});function ue(d,h){d instanceof String&&(d+="");var v=0,E=!1,I={next:function(){if(!E&&v<d.length){var N=v++;return{value:h(N,d[N]),done:!1}}return E=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}i("Array.prototype.keys",function(d){return d||function(){return ue(this,function(h){return h})}}),i("Array.prototype.fill",function(d){return d||function(h,v,E){var I=this.length||0;for(0>v&&(v=Math.max(0,I+v)),(E==null||E>I)&&(E=I),E=Number(E),0>E&&(E=Math.max(0,I+E)),v=Number(v||0);v<E;v++)this[v]=h;return this}});function se(d){return d||Array.prototype.fill}i("Int8Array.prototype.fill",se),i("Uint8Array.prototype.fill",se),i("Uint8ClampedArray.prototype.fill",se),i("Int16Array.prototype.fill",se),i("Uint16Array.prototype.fill",se),i("Int32Array.prototype.fill",se),i("Uint32Array.prototype.fill",se),i("Float32Array.prototype.fill",se),i("Float64Array.prototype.fill",se),i("Object.is",function(d){return d||function(h,v){return h===v?h!==0||1/h===1/v:h!==h&&v!==v}}),i("Array.prototype.includes",function(d){return d||function(h,v){var E=this;E instanceof String&&(E=String(E));var I=E.length;for(v=v||0,0>v&&(v=Math.max(v+I,0));v<I;v++){var N=E[v];if(N===h||Object.is(N,h))return!0}return!1}}),i("String.prototype.includes",function(d){return d||function(h,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,v||0)!==-1}});var Oe=this||self;function Le(d,h){d=d.split(".");var v=Oe;d[0]in v||typeof v.execScript>"u"||v.execScript("var "+d[0]);for(var E;d.length&&(E=d.shift());)d.length||h===void 0?v[E]&&v[E]!==Object.prototype[E]?v=v[E]:v=v[E]={}:v[E]=h}function bt(d){var h;e:{if((h=Oe.navigator)&&(h=h.userAgent))break e;h=""}return h.indexOf(d)!=-1}var xt=Array.prototype.map?function(d,h){return Array.prototype.map.call(d,h,void 0)}:function(d,h){for(var v=d.length,E=Array(v),I=typeof d=="string"?d.split(""):d,N=0;N<v;N++)N in I&&(E[N]=h.call(void 0,I[N],N,d));return E},on={},Ut=null;function ei(d){var h=d.length,v=3*h/4;v%3?v=Math.floor(v):"=.".indexOf(d[h-1])!=-1&&(v="=.".indexOf(d[h-2])!=-1?v-2:v-1);var E=new Uint8Array(v),I=0;return Os(d,function(N){E[I++]=N}),I!==v?E.subarray(0,I):E}function Os(d,h){function v(F){for(;E<d.length;){var z=d.charAt(E++),Y=Ut[z];if(Y!=null)return Y;if(!/^[\s\xa0]*$/.test(z))throw Error("Unknown base64 encoding at char: "+z)}return F}ti();for(var E=0;;){var I=v(-1),N=v(0),C=v(64),k=v(64);if(k===64&&I===-1)break;h(I<<2|N>>4),C!=64&&(h(N<<4&240|C>>2),k!=64&&h(C<<6&192|k))}}function ti(){if(!Ut){Ut={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var E=d.concat(h[v].split(""));on[v]=E;for(var I=0;I<E.length;I++){var N=E[I];Ut[N]===void 0&&(Ut[N]=I)}}}}var kr=typeof Uint8Array<"u",Or=!(bt("Trident")||bt("MSIE"))&&typeof Oe.btoa=="function";function Qr(d){if(!Or){var h;h===void 0&&(h=0),ti(),h=on[h];for(var v=Array(Math.floor(d.length/3)),E=h[64]||"",I=0,N=0;I<d.length-2;I+=3){var C=d[I],k=d[I+1],F=d[I+2],z=h[C>>2];C=h[(C&3)<<4|k>>4],k=h[(k&15)<<2|F>>6],F=h[F&63],v[N++]=z+C+k+F}switch(z=0,F=E,d.length-I){case 2:z=d[I+1],F=h[(z&15)<<2]||E;case 1:d=d[I],v[N]=h[d>>2]+h[(d&3)<<4|z>>4]+F+E}return v.join("")}for(h="";10240<d.length;)h+=String.fromCharCode.apply(null,d.subarray(0,10240)),d=d.subarray(10240);return h+=String.fromCharCode.apply(null,d),btoa(h)}var Rr=RegExp("[-_.]","g");function ni(d){switch(d){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function $i(d){if(!Or)return ei(d);Rr.test(d)&&(d=d.replace(Rr,ni)),d=atob(d);for(var h=new Uint8Array(d.length),v=0;v<d.length;v++)h[v]=d.charCodeAt(v);return h}var Rs;function ml(){return Rs||(Rs=new Uint8Array(0))}var Ps={},i$=typeof Uint8Array.prototype.slice=="function",Yt=0,Gn=0;function xC(d){var h=0>d;d=Math.abs(d);var v=d>>>0;d=Math.floor((d-v)/4294967296),h&&(v=a(TC(v,d)),h=v.next().value,d=v.next().value,v=h),Yt=v>>>0,Gn=d>>>0}var s$=typeof BigInt=="function";function TC(d,h){return h=~h,d?d=~d+1:h+=1,[d,h]}function IC(d,h){this.i=d>>>0,this.h=h>>>0}function CC(d){if(!d)return DC||(DC=new IC(0,0));if(!/^-?\d+$/.test(d))return null;if(16>d.length)xC(Number(d));else if(s$)d=BigInt(d),Yt=Number(d&BigInt(4294967295))>>>0,Gn=Number(d>>BigInt(32)&BigInt(4294967295));else{var h=+(d[0]==="-");Gn=Yt=0;for(var v=d.length,E=h,I=(v-h)%6+h;I<=v;E=I,I+=6)E=Number(d.slice(E,I)),Gn*=1e6,Yt=1e6*Yt+E,4294967296<=Yt&&(Gn+=Yt/4294967296|0,Yt%=4294967296);h&&(h=a(TC(Yt,Gn)),d=h.next().value,h=h.next().value,Yt=d,Gn=h)}return new IC(Yt,Gn)}var DC;function NC(d,h){return Error("Invalid wire type: "+d+" (at position "+h+")")}function My(){return Error("Failed to read varint, encoding is invalid.")}function AC(d,h){return Error("Tried to read past the end of the data "+h+" > "+d)}function Fs(){throw Error("Invalid UTF8")}function MC(d,h){return h=String.fromCharCode.apply(null,h),d==null?h:d+h}var Gf=void 0,ky,a$=typeof TextDecoder<"u",kC,l$=typeof TextEncoder<"u",OC;function RC(d){if(d!==Ps)throw Error("illegal external caller")}function Jc(d,h){if(RC(h),this.V=d,d!=null&&d.length===0)throw Error("ByteString should be constructed with non-empty values")}function Oy(){return OC||(OC=new Jc(null,Ps))}function PC(d){RC(Ps);var h=d.V;return h=h==null||kr&&h!=null&&h instanceof Uint8Array?h:typeof h=="string"?$i(h):null,h==null?h:d.V=h}function c$(d){if(typeof d=="string")return{buffer:$i(d),C:!1};if(Array.isArray(d))return{buffer:new Uint8Array(d),C:!1};if(d.constructor===Uint8Array)return{buffer:d,C:!1};if(d.constructor===ArrayBuffer)return{buffer:new Uint8Array(d),C:!1};if(d.constructor===Jc)return{buffer:PC(d)||ml(),C:!0};if(d instanceof Uint8Array)return{buffer:new Uint8Array(d.buffer,d.byteOffset,d.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function FC(d,h){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ry(this,d,h)}function Ry(d,h,v){v=v===void 0?{}:v,d.S=v.S===void 0?!1:v.S,h&&(h=c$(h),d.i=h.buffer,d.m=h.C,d.l=0,d.j=d.i.length,d.h=d.l)}FC.prototype.reset=function(){this.h=this.l};function Ls(d,h){if(d.h=h,h>d.j)throw AC(d.j,h)}function eu(d){var h=d.i,v=d.h,E=h[v++],I=E&127;if(E&128&&(E=h[v++],I|=(E&127)<<7,E&128&&(E=h[v++],I|=(E&127)<<14,E&128&&(E=h[v++],I|=(E&127)<<21,E&128&&(E=h[v++],I|=E<<28,E&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128)))))throw My();return Ls(d,v),I}function LC(d,h){if(0>h)throw Error("Tried to read a negative byte length: "+h);var v=d.h,E=v+h;if(E>d.j)throw AC(h,d.j-v);return d.h=E,v}var $C=[];function Py(){this.h=[]}Py.prototype.length=function(){return this.h.length},Py.prototype.end=function(){var d=this.h;return this.h=[],d};function VC(d,h,v){for(;0<v||127<h;)d.h.push(h&127|128),h=(h>>>7|v<<25)>>>0,v>>>=7;d.h.push(h)}function $s(d,h){for(;127<h;)d.h.push(h&127|128),h>>>=7;d.h.push(h)}function Fy(d,h){if($C.length){var v=$C.pop();Ry(v,d,h),d=v}else d=new FC(d,h);this.h=d,this.j=this.h.h,this.i=this.l=-1,this.setOptions(h)}Fy.prototype.setOptions=function(d){d=d===void 0?{}:d,this.ca=d.ca===void 0?!1:d.ca},Fy.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function jC(d){var h=d.h;if(h.h==h.j)return!1;d.j=d.h.h;var v=eu(d.h)>>>0;if(h=v>>>3,v&=7,!(0<=v&&5>=v))throw NC(v,d.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+d.j+")");return d.l=h,d.i=v,!0}function Wf(d){switch(d.i){case 0:if(d.i!=0)Wf(d);else e:{d=d.h;for(var h=d.h,v=h+10,E=d.i;h<v;)if((E[h++]&128)===0){Ls(d,h);break e}throw My()}break;case 1:d=d.h,Ls(d,d.h+8);break;case 2:d.i!=2?Wf(d):(h=eu(d.h)>>>0,d=d.h,Ls(d,d.h+h));break;case 5:d=d.h,Ls(d,d.h+4);break;case 3:h=d.l;do{if(!jC(d))throw Error("Unmatched start-group tag: stream EOF");if(d.i==4){if(d.l!=h)throw Error("Unmatched end-group tag");break}Wf(d)}while(!0);break;default:throw NC(d.i,d.j)}}var qf=[];function u$(){this.j=[],this.i=0,this.h=new Py}function gl(d,h){h.length!==0&&(d.j.push(h),d.i+=h.length)}function d$(d,h){if(h=h.R){gl(d,d.h.end());for(var v=0;v<h.length;v++)gl(d,PC(h[v])||ml())}}var ri=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Vs(d,h){return ri?d[ri]|=h:d.A!==void 0?d.A|=h:(Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}}),h)}function BC(d,h){ri?d[ri]&&(d[ri]&=~h):d.A!==void 0&&(d.A&=~h)}function Vt(d){var h;return ri?h=d[ri]:h=d.A,h??0}function Do(d,h){ri?d[ri]=h:d.A!==void 0?d.A=h:Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}})}function Ly(d){return Vs(d,1),d}function f$(d,h){Do(h,(d|0)&-51)}function Kf(d,h){Do(h,(d|18)&-41)}var $y={};function Yf(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&d.constructor===Object}var tu,HC=[];Do(HC,23),tu=Object.freeze(HC);function Vy(d){if(Vt(d.o)&2)throw Error("Cannot mutate an immutable Message")}function jy(d){var h=d.length;(h=h?d[h-1]:void 0)&&Yf(h)?h.g=1:(h={},d.push((h.g=1,h)))}function UC(d){var h=d.i+d.G;return d.B||(d.B=d.o[h]={})}function Jr(d,h){return h===-1?null:h>=d.i?d.B?d.B[h]:void 0:d.o[h+d.G]}function No(d,h,v,E){Vy(d),nu(d,h,v,E)}function nu(d,h,v,E){d.j&&(d.j=void 0),h>=d.i||E?UC(d)[h]=v:(d.o[h+d.G]=v,(d=d.B)&&h in d&&delete d[h])}function By(d,h,v,E){var I=Jr(d,h);Array.isArray(I)||(I=tu);var N=Vt(I);if(N&1||Ly(I),E)N&2||Vs(I,2),v&1||Object.freeze(I);else{E=!(v&2);var C=N&2;v&1||!C?E&&N&16&&!C&&BC(I,16):(I=Ly(Array.prototype.slice.call(I)),nu(d,h,I))}return I}function Hy(d,h){var v=Jr(d,h),E=v==null?v:typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"?Number(v):void 0;return E!=null&&E!==v&&nu(d,h,E),E}function zC(d,h,v,E,I){d.h||(d.h={});var N=d.h[v],C=By(d,v,3,I);if(!N){var k=C;N=[];var F=!!(Vt(d.o)&16);C=!!(Vt(k)&2);var z=k;!I&&C&&(k=Array.prototype.slice.call(k));for(var Y=C,ye=0;ye<k.length;ye++){var ie=k[ye],Q=h,ve=!1;if(ve=ve===void 0?!1:ve,ie=Array.isArray(ie)?new Q(ie):ve?new Q:void 0,ie!==void 0){Q=ie.o;var $e=ve=Vt(Q);C&&($e|=2),F&&($e|=16),$e!=ve&&Do(Q,$e),Q=$e,Y=Y||!!(2&Q),N.push(ie)}}return d.h[v]=N,F=Vt(k),h=F|33,h=Y?h&-9:h|8,F!=h&&(Y=k,Object.isFrozen(Y)&&(Y=Array.prototype.slice.call(Y)),Do(Y,h),k=Y),z!==k&&nu(d,v,k),(I||E&&C)&&Vs(N,2),E&&Object.freeze(N),N}return I||(I=Object.isFrozen(N),E&&!I?Object.freeze(N):!E&&I&&(N=Array.prototype.slice.call(N),d.h[v]=N)),N}function Uy(d,h,v){var E=!!(Vt(d.o)&2);if(h=zC(d,h,v,E,E),d=By(d,v,3,E),!(E||Vt(d)&8)){for(E=0;E<h.length;E++){if(v=h[E],Vt(v.o)&2){var I=XC(v,!1);I.j=v}else I=v;v!==I&&(h[E]=I,d[E]=I.o)}Vs(d,8)}return h}function Ao(d,h,v){if(v!=null&&typeof v!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof v+": "+v);No(d,h,v)}function GC(d,h,v,E,I){Vy(d);var N=zC(d,v,h,!1,!1);return v=E??new v,d=By(d,h,2,!1),I!=null?(N.splice(I,0,v),d.splice(I,0,v.o)):(N.push(v),d.push(v.o)),v.C()&&BC(d,8),v}function Xf(d,h){return d??h}function Mo(d,h,v){return v=v===void 0?0:v,Xf(Hy(d,h),v)}var Zf;function p$(d){switch(typeof d){case"number":return isFinite(d)?d:String(d);case"object":if(d)if(Array.isArray(d)){if((Vt(d)&128)!==0)return d=Array.prototype.slice.call(d),jy(d),d}else{if(kr&&d!=null&&d instanceof Uint8Array)return Qr(d);if(d instanceof Jc){var h=d.V;return h==null?"":typeof h=="string"?h:d.V=Qr(h)}}}return d}function WC(d,h,v,E){if(d!=null){if(Array.isArray(d))d=zy(d,h,v,E!==void 0);else if(Yf(d)){var I={},N;for(N in d)I[N]=WC(d[N],h,v,E);d=I}else d=h(d,E);return d}}function zy(d,h,v,E){var I=Vt(d);E=E?!!(I&16):void 0,d=Array.prototype.slice.call(d);for(var N=0;N<d.length;N++)d[N]=WC(d[N],h,v,E);return v(I,d),d}function h$(d){return d.ja===$y?d.toJSON():p$(d)}function m$(d,h){d&128&&jy(h)}function qC(d,h,v){if(v=v===void 0?Kf:v,d!=null){if(kr&&d instanceof Uint8Array)return d.length?new Jc(new Uint8Array(d),Ps):Oy();if(Array.isArray(d)){var E=Vt(d);return E&2?d:h&&!(E&32)&&(E&16||E===0)?(Do(d,E|2),d):(d=zy(d,qC,E&4?Kf:v,!0),h=Vt(d),h&4&&h&2&&Object.freeze(d),d)}return d.ja===$y?YC(d):d}}function KC(d,h,v,E,I,N,C){if(d=d.h&&d.h[v]){if(E=Vt(d),E&2?E=d:(N=xt(d,YC),Kf(E,N),Object.freeze(N),E=N),Vy(h),C=E==null?tu:Ly([]),E!=null){for(N=!!E.length,d=0;d<E.length;d++){var k=E[d];N=N&&!(Vt(k.o)&2),C[d]=k.o}N=(N?8:0)|1,d=Vt(C),(d&N)!==N&&(Object.isFrozen(C)&&(C=Array.prototype.slice.call(C)),Do(C,d|N)),h.h||(h.h={}),h.h[v]=E}else h.h&&(h.h[v]=void 0);nu(h,v,C,I)}else No(h,v,qC(E,N,C),I)}function YC(d){return Vt(d.o)&2||(d=XC(d,!0),Vs(d.o,2)),d}function XC(d,h){var v=d.o,E=[];Vs(E,16);var I=d.constructor.h;if(I&&E.push(I),I=d.B,I){E.length=v.length,E.fill(void 0,E.length,v.length);var N={};E[E.length-1]=N}(Vt(v)&128)!==0&&jy(E),h=h||d.C()?Kf:f$,N=d.constructor,Zf=E,E=new N(E),Zf=void 0,d.R&&(E.R=d.R.slice()),N=!!(Vt(v)&16);for(var C=I?v.length-1:v.length,k=0;k<C;k++)KC(d,E,k-d.G,v[k],!1,N,h);if(I)for(var F in I)KC(d,E,+F,I[F],!0,N,h);return E}function tr(d,h,v){d==null&&(d=Zf),Zf=void 0;var E=this.constructor.i||0,I=0<E,N=this.constructor.h,C=!1;if(d==null){d=N?[N]:[];var k=48,F=!0;I&&(E=0,k|=128),Do(d,k)}else{if(!Array.isArray(d)||N&&N!==d[0])throw Error();var z=k=Vs(d,0);if((F=(16&z)!==0)&&((C=(32&z)!==0)||(z|=32)),I){if(128&z)E=0;else if(0<d.length){var Y=d[d.length-1];if(Yf(Y)&&"g"in Y){E=0,z|=128,delete Y.g;var ye=!0,ie;for(ie in Y){ye=!1;break}ye&&d.pop()}}}else if(128&z)throw Error();k!==z&&Do(d,z)}this.G=(N?0:-1)-E,this.h=void 0,this.o=d;e:{if(N=this.o.length,E=N-1,N&&(N=this.o[E],Yf(N))){this.B=N,this.i=E-this.G;break e}h!==void 0&&-1<h?(this.i=Math.max(h,E+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!I&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){h=F&&!C&&!0,I=this.i;var Q;for(F=0;F<v.length;F++)C=v[F],C<I?(C+=this.G,(E=d[C])?ZC(E,h):d[C]=tu):(Q||(Q=UC(this)),(E=Q[C])?ZC(E,h):Q[C]=tu)}}tr.prototype.toJSON=function(){return zy(this.o,h$,m$)},tr.prototype.C=function(){return!!(Vt(this.o)&2)};function ZC(d,h){if(Array.isArray(d)){var v=Vt(d),E=1;!h||v&2||(E|=16),(v&E)!==E&&Do(d,v|E)}}tr.prototype.ja=$y,tr.prototype.toString=function(){return this.o.toString()};function QC(d,h,v){if(v){var E={},I;for(I in v){var N=v[I],C=N.ra;C||(E.J=N.xa||N.oa.W,N.ia?(E.aa=rD(N.ia),C=(function(k){return function(F,z,Y){return k.J(F,z,Y,k.aa)}})(E)):N.ka?(E.Z=oD(N.da.P,N.ka),C=(function(k){return function(F,z,Y){return k.J(F,z,Y,k.Z)}})(E)):C=E.J,N.ra=C),C(h,d,N.da),E={J:E.J,aa:E.aa,Z:E.Z}}}d$(h,d)}var Qf=Symbol();function JC(d,h,v){return d[Qf]||(d[Qf]=function(E,I){return h(E,I,v)})}function eD(d){var h=d[Qf];if(!h){var v=Wy(d);h=function(E,I){return iD(E,I,v)},d[Qf]=h}return h}function g$(d){var h=d.ia;if(h)return eD(h);if(h=d.wa)return JC(d.da.P,h,d.ka)}function y$(d){var h=g$(d),v=d.da,E=d.oa.U;return h?function(I,N){return E(I,N,v,h)}:function(I,N){return E(I,N,v)}}function tD(d,h){var v=d[h];return typeof v=="function"&&v.length===0&&(v=v(),d[h]=v),Array.isArray(v)&&(ou in v||ru in v||0<v.length&&typeof v[0]=="function")?v:void 0}function nD(d,h,v,E,I,N){h.P=d[0];var C=1;if(d.length>C&&typeof d[C]!="number"){var k=d[C++];v(h,k)}for(;C<d.length;){v=d[C++];for(var F=C+1;F<d.length&&typeof d[F]!="number";)F++;switch(k=d[C++],F-=C,F){case 0:E(h,v,k);break;case 1:(F=tD(d,C))?(C++,I(h,v,k,F)):E(h,v,k,d[C++]);break;case 2:F=C++,F=tD(d,F),I(h,v,k,F,d[C++]);break;case 3:N(h,v,k,d[C++],d[C++],d[C++]);break;case 4:N(h,v,k,d[C++],d[C++],d[C++],d[C++]);break;default:throw Error("unexpected number of binary field arguments: "+F)}}return h}var Jf=Symbol();function rD(d){var h=d[Jf];if(!h){var v=Gy(d);h=function(E,I){return sD(E,I,v)},d[Jf]=h}return h}function oD(d,h){var v=d[Jf];return v||(v=function(E,I){return QC(E,I,h)},d[Jf]=v),v}var ru=Symbol();function v$(d,h){d.push(h)}function b$(d,h,v){d.push(h,v.W)}function w$(d,h,v,E){var I=rD(E),N=Gy(E).P,C=v.W;d.push(h,function(k,F,z){return C(k,F,z,N,I)})}function _$(d,h,v,E,I,N){var C=oD(E,N),k=v.W;d.push(h,function(F,z,Y){return k(F,z,Y,E,C)})}function Gy(d){var h=d[ru];return h||(h=nD(d,d[ru]=[],v$,b$,w$,_$),ou in d&&ru in d&&(d.length=0),h)}var ou=Symbol();function E$(d,h){d[0]=h}function S$(d,h,v,E){var I=v.U;d[h]=E?function(N,C,k){return I(N,C,k,E)}:I}function x$(d,h,v,E,I){var N=v.U,C=eD(E),k=Wy(E).P;d[h]=function(F,z,Y){return N(F,z,Y,k,C,I)}}function T$(d,h,v,E,I,N,C){var k=v.U,F=JC(E,I,N);d[h]=function(z,Y,ye){return k(z,Y,ye,E,F,C)}}function Wy(d){var h=d[ou];return h||(h=nD(d,d[ou]={},E$,S$,x$,T$),ou in d&&ru in d&&(d.length=0),h)}function iD(d,h,v){for(;jC(h)&&h.i!=4;){var E=h.l,I=v[E];if(!I){var N=v[0];N&&(N=N[E])&&(I=v[E]=y$(N))}if(!I||!I(h,d,E)){I=h,E=d,N=I.j,Wf(I);var C=I;if(!C.ca){if(I=C.h.h-N,C.h.h=N,C=C.h,I==0)I=Oy();else{if(N=LC(C,I),C.S&&C.m)I=C.i.subarray(N,N+I);else{C=C.i;var k=N;I=N+I,I=k===I?ml():i$?C.slice(k,I):new Uint8Array(C.subarray(k,I))}I=I.length==0?Oy():new Jc(I,Ps)}(N=E.R)?N.push(I):E.R=[I]}}}return d}function sD(d,h,v){for(var E=v.length,I=E%2==1,N=I?1:0;N<E;N+=2)(0,v[N+1])(h,d,v[N]);QC(d,h,I?v[0]:void 0)}function iu(d,h){return{U:d,W:h}}var eo=iu(function(d,h,v){if(d.i!==5)return!1;d=d.h;var E=d.i,I=d.h,N=E[I],C=E[I+1],k=E[I+2];return E=E[I+3],Ls(d,d.h+4),C=(N<<0|C<<8|k<<16|E<<24)>>>0,d=2*(C>>31)+1,N=C>>>23&255,C&=8388607,No(h,v,N==255?C?NaN:1/0*d:N==0?d*Math.pow(2,-149)*C:d*Math.pow(2,N-150)*(C+Math.pow(2,23))),!0},function(d,h,v){if(h=Hy(h,v),h!=null){$s(d.h,8*v+5),d=d.h;var E=+h;E===0?0<1/E?Yt=Gn=0:(Gn=0,Yt=2147483648):isNaN(E)?(Gn=0,Yt=2147483647):(E=(v=0>E?-2147483648:0)?-E:E,34028234663852886e22<E?(Gn=0,Yt=(v|2139095040)>>>0):11754943508222875e-54>E?(E=Math.round(E/Math.pow(2,-149)),Gn=0,Yt=(v|E)>>>0):(h=Math.floor(Math.log(E)/Math.LN2),E*=Math.pow(2,-h),E=Math.round(8388608*E),16777216<=E&&++h,Gn=0,Yt=(v|h+127<<23|E&8388607)>>>0)),v=Yt,d.h.push(v>>>0&255),d.h.push(v>>>8&255),d.h.push(v>>>16&255),d.h.push(v>>>24&255)}}),I$=iu(function(d,h,v){if(d.i!==0)return!1;var E=d.h,I=0,N=d=0,C=E.i,k=E.h;do{var F=C[k++];I|=(F&127)<<N,N+=7}while(32>N&&F&128);for(32<N&&(d|=(F&127)>>4),N=3;32>N&&F&128;N+=7)F=C[k++],d|=(F&127)<<N;if(Ls(E,k),128>F)E=I>>>0,F=d>>>0,(d=F&2147483648)&&(E=~E+1>>>0,F=~F>>>0,E==0&&(F=F+1>>>0)),E=4294967296*F+(E>>>0);else throw My();return No(h,v,d?-E:E),!0},function(d,h,v){h=Jr(h,v),h!=null&&(typeof h=="string"&&CC(h),h!=null&&($s(d.h,8*v),typeof h=="number"?(d=d.h,xC(h),VC(d,Yt,Gn)):(v=CC(h),VC(d.h,v.i,v.h))))}),C$=iu(function(d,h,v){return d.i!==0?!1:(No(h,v,eu(d.h)),!0)},function(d,h,v){if(h=Jr(h,v),h!=null&&h!=null)if($s(d.h,8*v),d=d.h,v=h,0<=v)$s(d,v);else{for(h=0;9>h;h++)d.h.push(v&127|128),v>>=7;d.h.push(1)}}),aD=iu(function(d,h,v){if(d.i!==2)return!1;var E=eu(d.h)>>>0;d=d.h;var I=LC(d,E);if(d=d.i,a$){var N=d,C;(C=ky)||(C=ky=new TextDecoder("utf-8",{fatal:!0})),d=I+E,N=I===0&&d===N.length?N:N.subarray(I,d);try{var k=C.decode(N)}catch(ye){if(Gf===void 0){try{C.decode(new Uint8Array([128]))}catch{}try{C.decode(new Uint8Array([97])),Gf=!0}catch{Gf=!1}}throw!Gf&&(ky=void 0),ye}}else{k=I,E=k+E,I=[];for(var F=null,z,Y;k<E;)z=d[k++],128>z?I.push(z):224>z?k>=E?Fs():(Y=d[k++],194>z||(Y&192)!==128?(k--,Fs()):I.push((z&31)<<6|Y&63)):240>z?k>=E-1?Fs():(Y=d[k++],(Y&192)!==128||z===224&&160>Y||z===237&&160<=Y||((N=d[k++])&192)!==128?(k--,Fs()):I.push((z&15)<<12|(Y&63)<<6|N&63)):244>=z?k>=E-2?Fs():(Y=d[k++],(Y&192)!==128||(z<<28)+(Y-144)>>30!==0||((N=d[k++])&192)!==128||((C=d[k++])&192)!==128?(k--,Fs()):(z=(z&7)<<18|(Y&63)<<12|(N&63)<<6|C&63,z-=65536,I.push((z>>10&1023)+55296,(z&1023)+56320))):Fs(),8192<=I.length&&(F=MC(F,I),I.length=0);k=MC(F,I)}return No(h,v,k),!0},function(d,h,v){if(h=Jr(h,v),h!=null){var E=!1;if(E=E===void 0?!1:E,l$){if(E&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(kC||(kC=new TextEncoder)).encode(h)}else{for(var I=0,N=new Uint8Array(3*h.length),C=0;C<h.length;C++){var k=h.charCodeAt(C);if(128>k)N[I++]=k;else{if(2048>k)N[I++]=k>>6|192;else{if(55296<=k&&57343>=k){if(56319>=k&&C<h.length){var F=h.charCodeAt(++C);if(56320<=F&&57343>=F){k=1024*(k-55296)+F-56320+65536,N[I++]=k>>18|240,N[I++]=k>>12&63|128,N[I++]=k>>6&63|128,N[I++]=k&63|128;continue}else C--}if(E)throw Error("Found an unpaired surrogate");k=65533}N[I++]=k>>12|224,N[I++]=k>>6&63|128}N[I++]=k&63|128}}h=I===N.length?N:N.subarray(0,I)}$s(d.h,8*v+2),$s(d.h,h.length),gl(d,d.h.end()),gl(d,h)}}),lD=iu(function(d,h,v,E,I){if(d.i!==2)return!1;h=GC(h,v,E),v=d.h.j,E=eu(d.h)>>>0;var N=d.h.h+E,C=N-v;if(0>=C&&(d.h.j=N,I(h,d,void 0,void 0,void 0),C=N-d.h.h),C)throw Error("Message parsing ended unexpectedly. Expected to read "+(E+" bytes, instead read "+(E-C)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return d.h.h=N,d.h.j=v,!0},function(d,h,v,E,I){if(h=Uy(h,E,v),h!=null)for(E=0;E<h.length;E++){var N=d;$s(N.h,8*v+2);var C=N.h.end();gl(N,C),C.push(N.i),N=C,I(h[E],d),C=d;var k=N.pop();for(k=C.i+C.h.length()-k;127<k;)N.push(k&127|128),k>>>=7,C.i++;N.push(k),C.i++}});function qy(d){return function(h,v){e:{if(qf.length){var E=qf.pop();E.setOptions(v),Ry(E.h,h,v),h=E}else h=new Fy(h,v);try{var I=Wy(d),N=iD(new I.P,h,I);break e}finally{I=h.h,I.i=null,I.m=!1,I.l=0,I.j=0,I.h=0,I.S=!1,h.l=-1,h.i=-1,100>qf.length&&qf.push(h)}N=void 0}return N}}function Ky(d){return function(){var h=new u$;sD(this,h,Gy(d)),gl(h,h.h.end());for(var v=new Uint8Array(h.i),E=h.j,I=E.length,N=0,C=0;C<I;C++){var k=E[C];v.set(k,N),N+=k.length}return h.j=[v],v}}function yl(d){tr.call(this,d)}T(yl,tr);var cD=[yl,1,C$,2,eo,3,aD,4,aD];yl.prototype.l=Ky(cD);function Yy(d){tr.call(this,d,-1,D$)}T(Yy,tr),Yy.prototype.addClassification=function(d,h){return GC(this,1,yl,d,h),this};var D$=[1],N$=qy([Yy,1,lD,cD]);function su(d){tr.call(this,d)}T(su,tr);var uD=[su,1,eo,2,eo,3,eo,4,eo,5,eo];su.prototype.l=Ky(uD);function dD(d){tr.call(this,d,-1,A$)}T(dD,tr);var A$=[1],M$=qy([dD,1,lD,uD]);function ep(d){tr.call(this,d)}T(ep,tr);var fD=[ep,1,eo,2,eo,3,eo,4,eo,5,eo,6,I$],k$=qy(fD);ep.prototype.l=Ky(fD);function pD(d,h,v){if(v=d.createShader(v===0?d.VERTEX_SHADER:d.FRAGMENT_SHADER),d.shaderSource(v,h),d.compileShader(v),!d.getShaderParameter(v,d.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+d.getShaderInfoLog(v));return v}function O$(d){return Uy(d,yl,1).map(function(h){var v=Jr(h,1);return{index:v??0,qa:Mo(h,2),label:Jr(h,3)!=null?Xf(Jr(h,3),""):void 0,displayName:Jr(h,4)!=null?Xf(Jr(h,4),""):void 0}})}function R$(d){return{x:Mo(d,1),y:Mo(d,2),z:Mo(d,3),visibility:Hy(d,4)!=null?Mo(d,4):void 0}}function Xy(d,h){this.i=d,this.h=h,this.m=0}function hD(d,h,v){return P$(d,h),typeof d.h.canvas.transferToImageBitmap=="function"?Promise.resolve(d.h.canvas.transferToImageBitmap()):v?Promise.resolve(d.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(d.h.canvas):(d.j===void 0&&(d.j=document.createElement("canvas")),new Promise(function(E){d.j.height=d.h.canvas.height,d.j.width=d.h.canvas.width,d.j.getContext("2d",{}).drawImage(d.h.canvas,0,0,d.h.canvas.width,d.h.canvas.height),E(d.j)}))}function P$(d,h){var v=d.h;if(d.s===void 0){var E=pD(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),I=pD(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),N=v.createProgram();if(v.attachShader(N,E),v.attachShader(N,I),v.linkProgram(N),!v.getProgramParameter(N,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(N));E=d.s=N,v.useProgram(E),I=v.getUniformLocation(E,"sampler0"),d.l={O:v.getAttribLocation(E,"aVertex"),N:v.getAttribLocation(E,"aTex"),ya:I},d.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.enableVertexAttribArray(d.l.O),v.vertexAttribPointer(d.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),d.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.enableVertexAttribArray(d.l.N),v.vertexAttribPointer(d.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(I,0)}E=d.l,v.useProgram(d.s),v.canvas.width=h.width,v.canvas.height=h.height,v.viewport(0,0,h.width,h.height),v.activeTexture(v.TEXTURE0),d.i.bindTexture2d(h.glName),v.enableVertexAttribArray(E.O),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.vertexAttribPointer(E.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.vertexAttribPointer(E.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(E.O),v.disableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,null),d.i.bindTexture2d(0)}function F$(d){this.h=d}var L$=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function $$(d,h){return h+d}function mD(d,h){window[d]=h}function V$(d){var h=document.createElement("script");return h.setAttribute("src",d),h.setAttribute("crossorigin","anonymous"),new Promise(function(v){h.addEventListener("load",function(){v()},!1),h.addEventListener("error",function(){v()},!1),document.body.appendChild(h)})}function j$(){return U(function(d){switch(d.h){case 1:return d.s=2,M(d,WebAssembly.instantiate(L$),4);case 4:d.h=3,d.s=0;break;case 2:return d.s=0,d.l=null,d.return(!1);case 3:return d.return(!0)}})}function Zy(d){if(this.h=d,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=d&&d.locateFile||$$,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=h,d.options){h=a(Object.keys(d.options));for(var v=h.next();!v.done;v=h.next()){v=v.value;var E=d.options[v].default;E!==void 0&&(this.l[v]=typeof E=="function"?E():E)}}}e=Zy.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function B$(d){var h,v,E,I,N,C,k,F,z,Y,ye;return U(function(ie){switch(ie.h){case 1:return d.ga?(h=d.h.files===void 0?[]:typeof d.h.files=="function"?d.h.files(d.l):d.h.files,M(ie,j$(),2)):ie.return();case 2:if(v=ie.i,typeof window=="object")return mD("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),mD("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),C=h.filter(function(Q){return Q.data!==void 0}),k=h.filter(function(Q){return Q.data===void 0}),F=Promise.all(C.map(function(Q){var ve=tp(d,Q.url);if(Q.path!==void 0){var $e=Q.path;ve=ve.then(function(wt){return d.overrideFile($e,wt),Promise.resolve(wt)})}return ve})),z=Promise.all(k.map(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v?V$(d.locateFile(Q.url,d.ha)):Promise.resolve()})).then(function(){var Q,ve,$e;return U(function(wt){if(wt.h==1)return Q=window.createMediapipeSolutionsWasm,ve=window.createMediapipeSolutionsPackedAssets,$e=d,M(wt,Q(ve),2);$e.i=wt.i,wt.h=0})}),Y=(function(){return U(function(Q){return d.h.graph&&d.h.graph.url?Q=M(Q,tp(d,d.h.graph.url),0):(Q.h=0,Q=void 0),Q})})(),M(ie,Promise.all([z,F,Y]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return E=h.filter(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v}).map(function(Q){return d.locateFile(Q.url,d.ha)}),importScripts.apply(null,l(E)),I=d,M(ie,createMediapipeSolutionsWasm(Module),6);case 6:I.i=ie.i,d.m=new OffscreenCanvas(1,1),d.i.canvas=d.m,N=d.i.GL.createContext(d.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),d.i.GL.makeContextCurrent(N),ie.h=4;break;case 7:if(d.m=document.createElement("canvas"),ye=d.m.getContext("webgl2",{}),!ye&&(ye=d.m.getContext("webgl",{}),!ye))return alert("Failed to create WebGL canvas context when passing video frame."),ie.return();d.K=ye,d.i.canvas=d.m,d.i.createContext(d.m,!0,!0,{});case 4:d.j=new d.i.SolutionWasm,d.ga=!1,ie.h=0}})}function H$(d){var h,v,E,I,N,C,k,F;return U(function(z){if(z.h==1){if(d.h.graph&&d.h.graph.url&&d.fa===d.h.graph.url)return z.return();if(d.u=!0,!d.h.graph||!d.h.graph.url){z.h=2;return}return d.fa=d.h.graph.url,M(z,tp(d,d.h.graph.url),3)}for(z.h!=2&&(h=z.i,d.j.loadGraph(h)),v=a(Object.keys(d.D)),E=v.next();!E.done;E=v.next())I=E.value,d.j.overrideFile(I,d.D[I]);if(d.D={},d.h.listeners)for(N=a(d.h.listeners),C=N.next();!C.done;C=N.next())k=C.value,W$(d,k);F=d.l,d.l={},d.setOptions(F),z.h=0})}e.reset=function(){var d=this;return U(function(h){d.j&&(d.j.reset(),d.s={},d.v={}),h.h=0})},e.setOptions=function(d,h){var v=this;if(h=h||this.h.options){for(var E=[],I=[],N={},C=a(Object.keys(d)),k=C.next();!k.done;N={X:N.X,Y:N.Y},k=C.next())if(k=k.value,!(k in this.l&&this.l[k]===d[k])){this.l[k]=d[k];var F=h[k];F!==void 0&&(F.onChange&&(N.X=F.onChange,N.Y=d[k],E.push((function(z){return function(){var Y;return U(function(ye){if(ye.h==1)return M(ye,z.X(z.Y),2);Y=ye.i,Y===!0&&(v.u=!0),ye.h=0})}})(N))),F.graphOptionXref&&(k=Object.assign({},{calculatorName:"",calculatorIndex:0},F.graphOptionXref,{valueNumber:F.type===1?d[k]:0,valueBoolean:F.type===0?d[k]:!1,valueString:F.type===2?d[k]:""}),I.push(k)))}(E.length!==0||I.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(I),this.F=(this.F===void 0?[]:this.F).concat(E))}};function U$(d){var h,v,E,I,N,C,k;return U(function(F){switch(F.h){case 1:if(!d.u)return F.return();if(!d.F){F.h=2;break}h=a(d.F),v=h.next();case 3:if(v.done){F.h=5;break}return E=v.value,M(F,E(),4);case 4:v=h.next(),F.h=3;break;case 5:d.F=void 0;case 2:if(d.H){for(I=new d.i.GraphOptionChangeRequestList,N=a(d.H),C=N.next();!C.done;C=N.next())k=C.value,I.push_back(k);d.j.changeOptions(I),I.delete(),d.H=void 0}d.u=!1,F.h=0}})}e.initialize=function(){var d=this;return U(function(h){return h.h==1?M(h,B$(d),2):h.h!=3?M(h,H$(d),3):M(h,U$(d),0)})};function tp(d,h){var v,E;return U(function(I){return h in d.L?I.return(d.L[h]):(v=d.locateFile(h,""),E=fetch(v).then(function(N){return N.arrayBuffer()}),d.L[h]=E,I.return(E))})}e.overrideFile=function(d,h){this.j?this.j.overrideFile(d,h):this.D[d]=h},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(d,h){var v=this,E,I,N,C,k,F,z,Y,ye;return U(function(ie){switch(ie.h){case 1:return v.h.inputs?(E=1e3*(h??performance.now()),M(ie,v.I,2)):ie.return();case 2:return M(ie,v.initialize(),3);case 3:for(I=new v.i.PacketDataList,N=a(Object.keys(d)),C=N.next();!C.done;C=N.next())if(k=C.value,F=v.h.inputs[k]){e:{var Q=d[k];switch(F.type){case"video":var ve=v.s[F.stream];if(ve||(ve=new Xy(v.i,v.K),v.s[F.stream]=ve),ve.m===0&&(ve.m=ve.i.createTexture()),typeof HTMLVideoElement<"u"&&Q instanceof HTMLVideoElement)var $e=Q.videoWidth,wt=Q.videoHeight;else typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?($e=Q.naturalWidth,wt=Q.naturalHeight):($e=Q.width,wt=Q.height);wt={glName:ve.m,width:$e,height:wt},$e=ve.h,$e.canvas.width=wt.width,$e.canvas.height=wt.height,$e.activeTexture($e.TEXTURE0),ve.i.bindTexture2d(ve.m),$e.texImage2D($e.TEXTURE_2D,0,$e.RGBA,$e.RGBA,$e.UNSIGNED_BYTE,Q),ve.i.bindTexture2d(0),ve=wt;break e;case"detections":for(ve=v.s[F.stream],ve||(ve=new F$(v.i),v.s[F.stream]=ve),ve.data||(ve.data=new ve.h.DetectionListData),ve.data.reset(Q.length),wt=0;wt<Q.length;++wt){$e=Q[wt];var ht=ve.data,wn=ht.setBoundingBox,Pr=wt,nr=$e.la,Ke=new ep;if(Ao(Ke,1,nr.sa),Ao(Ke,2,nr.ta),Ao(Ke,3,nr.height),Ao(Ke,4,nr.width),Ao(Ke,5,nr.rotation),No(Ke,6,nr.pa),nr=Ke.l(),wn.call(ht,Pr,nr),$e.ea)for(ht=0;ht<$e.ea.length;++ht){Ke=$e.ea[ht],wn=ve.data,Pr=wn.addNormalizedLandmark,nr=wt,Ke=Object.assign({},Ke,{visibility:Ke.visibility?Ke.visibility:0});var _n=new su;Ao(_n,1,Ke.x),Ao(_n,2,Ke.y),Ao(_n,3,Ke.z),Ke.visibility&&Ao(_n,4,Ke.visibility),Ke=_n.l(),Pr.call(wn,nr,Ke)}if($e.ba)for(ht=0;ht<$e.ba.length;++ht)wn=ve.data,Pr=wn.addClassification,nr=wt,Ke=$e.ba[ht],_n=new yl,Ao(_n,2,Ke.qa),Ke.index&&No(_n,1,Ke.index),Ke.label&&No(_n,3,Ke.label),Ke.displayName&&No(_n,4,Ke.displayName),Ke=_n.l(),Pr.call(wn,nr,Ke)}ve=ve.data;break e;default:ve={}}}switch(z=ve,Y=F.stream,F.type){case"video":I.pushTexture2d(Object.assign({},z,{stream:Y,timestamp:E}));break;case"detections":ye=z,ye.stream=Y,ye.timestamp=E,I.pushDetectionList(ye);break;default:throw Error("Unknown input config type: '"+F.type+"'")}}return v.j.send(I),M(ie,v.I,4);case 4:I.delete(),ie.h=0}})};function z$(d,h,v){var E,I,N,C,k,F,z,Y,ye,ie,Q,ve,$e,wt;return U(function(ht){switch(ht.h){case 1:if(!v)return ht.return(h);for(E={},I=0,N=a(Object.keys(v)),C=N.next();!C.done;C=N.next())k=C.value,F=v[k],typeof F!="string"&&F.type==="texture"&&h[F.stream]!==void 0&&++I;1<I&&(d.M=!1),z=a(Object.keys(v)),C=z.next();case 2:if(C.done){ht.h=4;break}if(Y=C.value,ye=v[Y],typeof ye=="string")return $e=E,wt=Y,M(ht,G$(d,Y,h[ye]),14);if(ie=h[ye.stream],ye.type==="detection_list"){if(ie){for(var wn=ie.getRectList(),Pr=ie.getLandmarksList(),nr=ie.getClassificationsList(),Ke=[],_n=0;_n<wn.size();++_n){var Vi=k$(wn.get(_n)),q$=Mo(Vi,1),K$=Mo(Vi,2),Y$=Mo(Vi,3),X$=Mo(Vi,4),Z$=Mo(Vi,5,0),np=void 0;np=np===void 0?0:np,Vi={la:{sa:q$,ta:K$,height:Y$,width:X$,rotation:Z$,pa:Xf(Jr(Vi,6),np)},ea:Uy(M$(Pr.get(_n)),su,1).map(R$),ba:O$(N$(nr.get(_n)))},Ke.push(Vi)}wn=Ke}else wn=[];E[Y]=wn,ht.h=7;break}if(ye.type==="proto_list"){if(ie){for(wn=Array(ie.size()),Pr=0;Pr<ie.size();Pr++)wn[Pr]=ie.get(Pr);ie.delete()}else wn=[];E[Y]=wn,ht.h=7;break}if(ie===void 0){ht.h=3;break}if(ye.type==="float_list"){E[Y]=ie,ht.h=7;break}if(ye.type==="proto"){E[Y]=ie,ht.h=7;break}if(ye.type!=="texture")throw Error("Unknown output config type: '"+ye.type+"'");return Q=d.v[Y],Q||(Q=new Xy(d.i,d.K),d.v[Y]=Q),M(ht,hD(Q,ie,d.M),13);case 13:ve=ht.i,E[Y]=ve;case 7:ye.transform&&E[Y]&&(E[Y]=ye.transform(E[Y])),ht.h=3;break;case 14:$e[wt]=ht.i;case 3:C=z.next(),ht.h=2;break;case 4:return ht.return(E)}})}function G$(d,h,v){var E;return U(function(I){return typeof v=="number"||v instanceof Uint8Array||v instanceof d.i.Uint8BlobList?I.return(v):v instanceof d.i.Texture2dDataOut?(E=d.v[h],E||(E=new Xy(d.i,d.K),d.v[h]=E),I.return(hD(E,v,d.M))):I.return(void 0)})}function W$(d,h){for(var v=h.name||"$",E=[].concat(l(h.wants)),I=new d.i.StringList,N=a(h.wants),C=N.next();!C.done;C=N.next())I.push_back(C.value);N=d.i.PacketListener.implement({onResults:function(k){for(var F={},z=0;z<h.wants.length;++z)F[E[z]]=k.get(z);var Y=d.listeners[v];Y&&(d.I=z$(d,F,h.outs).then(function(ye){ye=Y(ye);for(var ie=0;ie<h.wants.length;++ie){var Q=F[E[ie]];typeof Q=="object"&&Q.hasOwnProperty&&Q.hasOwnProperty("delete")&&Q.delete()}ye&&(d.I=ye)}))}}),d.j.attachMultiListener(I,N),I.delete()}e.onResults=function(d,h){this.listeners[h||"$"]=d},Le("Solution",Zy),Le("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function gD(d){switch(d===void 0&&(d=0),d){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function yD(d){var h=this;d=d||{},this.h=new Zy({locateFile:d.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:gD(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var E,I,N;return U(function(C){return C.h==1?(E=gD(v),I="third_party/mediapipe/modules/selfie_segmentation/"+E,M(C,tp(h.h,E),2)):(N=C.i,h.h.overrideFile(I,N),C.return(!0))})}}}})}e=yD.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(d){this.h.onResults(d)},e.initialize=function(){var d=this;return U(function(h){return M(h,d.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(d){var h=this;return U(function(v){return M(v,h.h.send(d),0)})},e.setOptions=function(d){this.h.setOptions(d)},Le("SelfieSegmentation",yD),Le("VERSION","0.1.1675465747")}).call(AF)});var ev;function ip(){return ev}function ko(e){let t=ev;return ev=e,t}var _D=Symbol("NotFound");function vl(e){return e===_D||e?.name==="\u0275NotFound"}var Mn=null,sp=!1,tv=1,iV=null,Xt=Symbol("SIGNAL");function me(e){let t=Mn;return Mn=e,t}function up(){return Mn}var js={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bs(e){if(sp)throw new Error("");if(Mn===null)return;Mn.consumerOnSignalRead(e);let t=Mn.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Mn.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Mn.producers,n!==void 0&&n.producer===e)){Mn.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===Mn&&(!r||aV(o,Mn)))return;let i=_l(Mn),s={producer:e,consumer:Mn,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};Mn.producersTail=s,t!==void 0?t.nextProducer=s:Mn.producers=s,i&&TD(e,s)}function ED(){tv++}function dp(e){if(!(_l(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===tv)){if(!e.producerMustRecompute(e)&&!wl(e)){cp(e);return}e.producerRecomputeValue(e),cp(e)}}function nv(e){if(e.consumers===void 0)return;let t=sp;sp=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||sV(r)}}finally{sp=t}}function rv(){return Mn?.consumerAllowSignalWrites!==!1}function sV(e){e.dirty=!0,nv(e),e.consumerMarkedDirty?.(e)}function cp(e){e.dirty=!1,e.lastCleanEpoch=tv}function Hs(e){return e&&SD(e),me(e)}function SD(e){e.producersTail=void 0,e.recomputing=!0}function bl(e,t){me(t),e&&xD(e)}function xD(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(_l(e))do n=ov(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function wl(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(dp(n),r!==n.version))return!0}return!1}function Us(e){if(_l(e)){let t=e.producers;for(;t!==void 0;)t=ov(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function TD(e,t){let n=e.consumersTail,r=_l(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let o=e.producers;o!==void 0;o=o.nextProducer)TD(o.producer,o)}function ov(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(t.consumers=r,!_l(t)){let i=t.producers;for(;i!==void 0;)i=ov(i)}return n}function _l(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function fp(e){iV?.(e)}function aV(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function pp(e,t){return Object.is(e,t)}function lu(e,t){let n=Object.create(lV);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(dp(n),Bs(n),n.value===au)throw n.error;return n.value};return r[Xt]=n,fp(n),r}var ap=Symbol("UNSET"),lp=Symbol("COMPUTING"),au=Symbol("ERRORED"),lV=fe(B({},js),{value:ap,dirty:!0,error:null,equal:pp,kind:"computed",producerMustRecompute(e){return e.value===ap||e.value===lp},producerRecomputeValue(e){if(e.value===lp)throw new Error("");let t=e.value;e.value=lp;let n=Hs(e),r,o=!1;try{r=e.computation(),me(null),o=t!==ap&&t!==au&&r!==au&&e.equal(t,r)}catch(i){r=au,e.error=i}finally{bl(e,n)}if(o){e.value=t;return}e.value=r,e.version++}});function cV(){throw new Error}var ID=cV;function CD(e){ID(e)}function iv(e){ID=e}var uV=null;function sv(e,t){let n=Object.create(hp);n.value=e,t!==void 0&&(n.equal=t);let r=()=>DD(n);return r[Xt]=n,fp(n),[r,s=>zs(n,s),s=>av(n,s)]}function DD(e){return Bs(e),e.value}function zs(e,t){rv()||CD(e),e.equal(e.value,t)||(e.value=t,dV(e))}function av(e,t){rv()||CD(e),zs(e,t(e.value))}var hp=fe(B({},js),{equal:pp,value:void 0,kind:"signal"});function dV(e){e.version++,ED(),nv(e),uV?.(e)}function pe(e){return typeof e=="function"}function El(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mp=El(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gs(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var mt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(i){t=i instanceof mp?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{ND(i)}catch(s){t=t??[],s instanceof mp?t=[...t,...s.errors]:t.push(s)}}if(t)throw new mp(t)}}add(t){var n;if(t&&t!==this)if(this.closed)ND(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Gs(n,t)}remove(t){let{_finalizers:n}=this;n&&Gs(n,t),t instanceof e&&t._removeParent(this)}};mt.EMPTY=(()=>{let e=new mt;return e.closed=!0,e})();var lv=mt.EMPTY;function gp(e){return e instanceof mt||e&&"closed"in e&&pe(e.remove)&&pe(e.add)&&pe(e.unsubscribe)}function ND(e){pe(e)?e():e.unsubscribe()}var to={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Sl={setTimeout(e,t,...n){let{delegate:r}=Sl;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Sl;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function yp(e){Sl.setTimeout(()=>{let{onUnhandledError:t}=to;if(t)t(e);else throw e})}function Ws(){}var AD=cv("C",void 0,void 0);function MD(e){return cv("E",void 0,e)}function kD(e){return cv("N",e,void 0)}function cv(e,t,n){return{kind:e,value:t,error:n}}var qs=null;function xl(e){if(to.useDeprecatedSynchronousErrorHandling){let t=!qs;if(t&&(qs={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=qs;if(qs=null,n)throw r}}else e()}function OD(e){to.useDeprecatedSynchronousErrorHandling&&qs&&(qs.errorThrown=!0,qs.error=e)}var Ks=class extends mt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,gp(t)&&t.add(this)):this.destination=hV}static create(t,n,r){return new oi(t,n,r)}next(t){this.isStopped?dv(kD(t),this):this._next(t)}error(t){this.isStopped?dv(MD(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?dv(AD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fV=Function.prototype.bind;function uv(e,t){return fV.call(e,t)}var fv=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){vp(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){vp(r)}else vp(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){vp(n)}}},oi=class extends Ks{constructor(t,n,r){super();let o;if(pe(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&to.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&uv(t.next,i),error:t.error&&uv(t.error,i),complete:t.complete&&uv(t.complete,i)}):o=t}this.destination=new fv(o)}};function vp(e){to.useDeprecatedSynchronousErrorHandling?OD(e):yp(e)}function pV(e){throw e}function dv(e,t){let{onStoppedNotification:n}=to;n&&Sl.setTimeout(()=>n(e,t))}var hV={closed:!0,next:Ws,error:pV,complete:Ws};var Tl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wn(e){return e}function pv(...e){return hv(e)}function hv(e){return e.length===0?Wn:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var Te=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=gV(n)?n:new oi(n,r,o);return xl(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=RD(r),new r((o,i)=>{let s=new oi({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Tl](){return this}pipe(...n){return hv(n)(this)}toPromise(n){return n=RD(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function RD(e){var t;return(t=e??to.Promise)!==null&&t!==void 0?t:Promise}function mV(e){return e&&pe(e.next)&&pe(e.error)&&pe(e.complete)}function gV(e){return e&&e instanceof Ks||mV(e)&&gp(e)}function mv(e){return pe(e?.lift)}function Re(e){return t=>{if(mv(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(e,t,n,r,o){return new gv(e,t,n,r,o)}var gv=class extends Ks{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Il(){return Re((e,t)=>{let n=null;e._refCount++;let r=Ae(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Cl=class extends Te{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mv(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new mt;let n=this.getSubject();t.add(this.source.subscribe(Ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=mt.EMPTY)}return t}refCount(){return Il()(this)}};var PD=El(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class e extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PD}next(n){xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){xl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?lv:(this.currentObservers=null,i.push(n),new mt(()=>{this.currentObservers=null,Gs(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return e.create=(t,n)=>new bp(t,n),e})(),bp=class extends Me{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:lv}};var Nt=class extends Me{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var yv={now(){return(yv.delegate||Date).now()},delegate:void 0};var wp=class extends mt{constructor(t,n){super()}schedule(t,n=0){return this}};var cu={setInterval(e,t,...n){let{delegate:r}=cu;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=cu;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var _p=class extends wp{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return cu.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&cu.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,o;try{this.work(t)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Gs(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Dl=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Dl.now=yv.now;var Ep=class extends Dl{constructor(t,n=Dl.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var vv=new Ep(_p),FD=vv;var rr=new Te(e=>e.complete());function Sp(e){return e&&pe(e.schedule)}function LD(e){return e[e.length-1]}function xp(e){return pe(LD(e))?e.pop():void 0}function ji(e){return Sp(LD(e))?e.pop():void 0}function VD(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(f){s(f)}}function l(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function $D(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(e){return this instanceof Ys?(this.v=e,this):new Ys(e)}function jD(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(o[m]=function(x){return new Promise(function(T,D){i.push([m,x,T,D])>1||l(m,x)})},w&&(o[m]=w(o[m])))}function l(m,w){try{c(r[m](w))}catch(x){p(i[0][3],x)}}function c(m){m.value instanceof Ys?Promise.resolve(m.value.v).then(u,f):p(i[0][2],m)}function u(m){l("next",m)}function f(m){l("throw",m)}function p(m,w){m(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function BD(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $D=="function"?$D(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){s=e[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var Nl=e=>e&&typeof e.length=="number"&&typeof e!="function";function Tp(e){return pe(e?.then)}function Ip(e){return pe(e[Tl])}function Cp(e){return Symbol.asyncIterator&&pe(e?.[Symbol.asyncIterator])}function Dp(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Np=yV();function Ap(e){return pe(e?.[Np])}function Mp(e){return jD(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield Ys(n.read());if(o)return yield Ys(void 0);yield yield Ys(r)}}finally{n.releaseLock()}})}function kp(e){return pe(e?.getReader)}function lt(e){if(e instanceof Te)return e;if(e!=null){if(Ip(e))return vV(e);if(Nl(e))return bV(e);if(Tp(e))return wV(e);if(Cp(e))return HD(e);if(Ap(e))return _V(e);if(kp(e))return EV(e)}throw Dp(e)}function vV(e){return new Te(t=>{let n=e[Tl]();if(pe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bV(e){return new Te(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function wV(e){return new Te(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,yp)})}function _V(e){return new Te(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function HD(e){return new Te(t=>{SV(e,t).catch(n=>t.error(n))})}function EV(e){return HD(Mp(e))}function SV(e,t){var n,r,o,i;return VD(this,void 0,void 0,function*(){try{for(n=BD(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function or(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Op(e,t=0){return Re((n,r)=>{n.subscribe(Ae(r,o=>or(r,e,()=>r.next(o),t),()=>or(r,e,()=>r.complete(),t),o=>or(r,e,()=>r.error(o),t)))})}function Rp(e,t=0){return Re((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function UD(e,t){return lt(e).pipe(Rp(t),Op(t))}function zD(e,t){return lt(e).pipe(Rp(t),Op(t))}function GD(e,t){return new Te(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function WD(e,t){return new Te(n=>{let r;return or(n,t,()=>{r=e[Np](),or(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>pe(r?.return)&&r.return()})}function Pp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Te(n=>{or(n,t,()=>{let r=e[Symbol.asyncIterator]();or(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function qD(e,t){return Pp(Mp(e),t)}function KD(e,t){if(e!=null){if(Ip(e))return UD(e,t);if(Nl(e))return GD(e,t);if(Tp(e))return zD(e,t);if(Cp(e))return Pp(e,t);if(Ap(e))return WD(e,t);if(kp(e))return qD(e,t)}throw Dp(e)}function Ft(e,t){return t?KD(e,t):lt(e)}function ge(...e){let t=ji(e);return Ft(e,t)}function Al(e,t){let n=pe(e)?e:()=>e,r=o=>o.error(n());return new Te(t?o=>t.schedule(r,0,o):r)}function Fp(e){return!!e&&(e instanceof Te||pe(e.lift)&&pe(e.subscribe))}var ii=El(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function YD(e){return e instanceof Date&&!isNaN(e)}function we(e,t){return Re((n,r)=>{let o=0;n.subscribe(Ae(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:xV}=Array;function TV(e,t){return xV(t)?e(...t):e(t)}function Ml(e){return we(t=>TV(e,t))}var{isArray:IV}=Array,{getPrototypeOf:CV,prototype:DV,keys:NV}=Object;function Lp(e){if(e.length===1){let t=e[0];if(IV(t))return{args:t,keys:null};if(AV(t)){let n=NV(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function AV(e){return e&&typeof e=="object"&&CV(e)===DV}function $p(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function Vp(...e){let t=ji(e),n=xp(e),{args:r,keys:o}=Lp(e);if(r.length===0)return Ft([],t);let i=new Te(MV(r,t,o?s=>$p(o,s):Wn));return n?i.pipe(Ml(n)):i}function MV(e,t,n=Wn){return r=>{XD(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)XD(t,()=>{let c=Ft(e[l],t),u=!1;c.subscribe(Ae(r,f=>{i[l]=f,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function XD(e,t,n){e?or(n,e,t):t()}function ZD(e,t,n,r,o,i,s,a){let l=[],c=0,u=0,f=!1,p=()=>{f&&!l.length&&!c&&t.complete()},m=x=>c<r?w(x):l.push(x),w=x=>{i&&t.next(x),c++;let T=!1;lt(n(x,u++)).subscribe(Ae(t,D=>{o?.(D),i?m(D):t.next(D)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<r;){let D=l.shift();s?or(t,s,()=>w(D)):w(D)}p()}catch(D){t.error(D)}}))};return e.subscribe(Ae(t,m,()=>{f=!0,p()})),()=>{a?.()}}function jt(e,t,n=1/0){return pe(t)?jt((r,o)=>we((i,s)=>t(r,i,o,s))(lt(e(r,o))),n):(typeof t=="number"&&(n=t),Re((r,o)=>ZD(r,o,e,n)))}function QD(e=1/0){return jt(Wn,e)}function JD(){return QD(1)}function kl(...e){return JD()(Ft(e,ji(e)))}function Xs(e){return new Te(t=>{lt(e()).subscribe(t)})}function bv(...e){let t=xp(e),{args:n,keys:r}=Lp(e),o=new Te(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let f=!1;lt(n[u]).subscribe(Ae(i,p=>{f||(f=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||i.next(r?$p(r,a):a),i.complete())}))}});return t?o.pipe(Ml(t)):o}var kV=["addListener","removeListener"],OV=["addEventListener","removeEventListener"],RV=["on","off"];function no(e,t,n,r){if(pe(n)&&(r=n,n=void 0),r)return no(e,t,n).pipe(Ml(r));let[o,i]=LV(e)?OV.map(s=>a=>e[s](t,a,n)):PV(e)?kV.map(eN(e,t)):FV(e)?RV.map(eN(e,t)):[];if(!o&&Nl(e))return jt(s=>no(s,t,n))(lt(e));if(!o)throw new TypeError("Invalid event target");return new Te(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function eN(e,t){return n=>r=>e[n](t,r)}function PV(e){return pe(e.addListener)&&pe(e.removeListener)}function FV(e){return pe(e.on)&&pe(e.off)}function LV(e){return pe(e.addEventListener)&&pe(e.removeEventListener)}function tN(e=0,t,n=FD){let r=-1;return t!=null&&(Sp(t)?n=t:r=t),new Te(o=>{let i=YD(e)?+e-n.now():e;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}var ro=new Te(Ws);function At(e,t){return Re((n,r)=>{let o=0;n.subscribe(Ae(r,i=>e.call(t,i,o++)&&r.next(i)))})}function nN(e){return Re((t,n)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,n.next(c)}s&&n.complete()},l=()=>{i=null,s&&n.complete()};t.subscribe(Ae(n,c=>{r=!0,o=c,i||lt(e(c)).subscribe(i=Ae(n,a,l))},()=>{s=!0,(!r||!i||i.closed)&&n.complete()}))})}function jp(e,t=vv){return nN(()=>tN(e,t))}function Bi(e){return Re((t,n)=>{let r=null,o=!1,i;r=t.subscribe(Ae(n,void 0,void 0,s=>{i=lt(e(s,Bi(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function rN(e,t,n,r,o){return(i,s)=>{let a=n,l=t,c=0;i.subscribe(Ae(s,u=>{let f=c++;l=a?e(l,u,f):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function Ol(e,t){return pe(t)?jt(e,t,1):jt(e,1)}function Hi(e){return Re((t,n)=>{let r=!1;t.subscribe(Ae(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function kn(e){return e<=0?()=>rr:Re((t,n)=>{let r=0;t.subscribe(Ae(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Bp(e,t=Wn){return e=e??$V,Re((n,r)=>{let o,i=!0;n.subscribe(Ae(r,s=>{let a=t(s);(i||!e(o,a))&&(i=!1,o=a,r.next(s))}))})}function $V(e,t){return e===t}function Hp(e=VV){return Re((t,n)=>{let r=!1;t.subscribe(Ae(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function VV(){return new ii}function uu(e){return Re((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function si(e,t){let n=arguments.length>=2;return r=>r.pipe(e?At((o,i)=>e(o,i,r)):Wn,kn(1),n?Hi(t):Hp(()=>new ii))}function Rl(e){return e<=0?()=>rr:Re((t,n)=>{let r=[];t.subscribe(Ae(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Ui(e,t){let n=arguments.length>=2;return r=>r.pipe(e?At((o,i)=>e(o,i,r)):Wn,Rl(1),n?Hi(t):Hp(()=>new ii))}function wv(e,t){return Re(rN(e,t,arguments.length>=2,!0))}function _r(e={}){let{connector:t=()=>new Me,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=e;return i=>{let s,a,l,c=0,u=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=l=void 0,u=f=!1},w=()=>{let x=s;m(),x?.unsubscribe()};return Re((x,T)=>{c++,!f&&!u&&p();let D=l=l??t();T.add(()=>{c--,c===0&&!f&&!u&&(a=_v(w,o))}),D.subscribe(T),!s&&c>0&&(s=new oi({next:P=>D.next(P),error:P=>{f=!0,p(),a=_v(m,n,P),D.error(P)},complete:()=>{u=!0,p(),a=_v(m,r),D.complete()}}),lt(x).subscribe(s))})(i)}}function _v(e,t,...n){if(t===!0){e();return}if(t===!1)return;let r=new oi({next:()=>{r.unsubscribe(),e()}});return lt(t(...n)).subscribe(r)}function Ev(e){return At((t,n)=>e<=n)}function oo(...e){let t=ji(e);return Re((n,r)=>{(t?kl(e,n,t):kl(e,n)).subscribe(r)})}function qe(e,t){return Re((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(Ae(r,l=>{o?.unsubscribe();let c=0,u=i++;lt(e(l,u)).subscribe(o=Ae(r,f=>r.next(t?t(l,f,u,c++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function sn(e){return Re((t,n)=>{lt(e).subscribe(Ae(n,()=>n.complete(),Ws)),!n.closed&&t.subscribe(n)})}function Mt(e,t,n){let r=pe(e)||t||n?{next:e,error:t,complete:n}:e;return r?Re((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Ae(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Wn}function oN(e){let t=me(null);try{return e()}finally{me(t)}}var iN=fe(B({},js),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function sN(e){if(e.dirty=!1,e.version>0&&!wl(e))return;e.version++;let t=Hs(e);try{e.cleanup(),e.fn()}finally{bl(e,t)}}var Wp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",oe=class extends Error{code;constructor(t,n){super(mu(t,n)),this.code=t}};function jV(e){return`NG0${Math.abs(e)}`}function mu(e,t){return`${jV(e)}${t?": "+t:""}`}function Qe(e){for(let t in e)if(e[t]===Qe)return t;throw Error("")}function cN(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function li(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(li).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ov(e,t){return e?t?`${e} ${t}`:e:t||""}var BV=Qe({__forward_ref__:Qe});function sr(e){return e.__forward_ref__=sr,e.toString=function(){return li(this())},e}function En(e){return Rv(e)?e():e}function Rv(e){return typeof e=="function"&&e.hasOwnProperty(BV)&&e.__forward_ref__===sr}function q(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fr(e){return{providers:e.providers||[],imports:e.imports||[]}}function gu(e){return HV(e,qp)}function Pv(e){return gu(e)!==null}function HV(e,t){return e.hasOwnProperty(t)&&e[t]||null}function UV(e){let t=e?.[qp]??null;return t||null}function xv(e){return e&&e.hasOwnProperty(zp)?e[zp]:null}var qp=Qe({\u0275prov:Qe}),zp=Qe({\u0275inj:Qe}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fv(e){return e&&!!e.\u0275providers}var Lv=Qe({\u0275cmp:Qe}),$v=Qe({\u0275dir:Qe}),Vv=Qe({\u0275pipe:Qe}),jv=Qe({\u0275mod:Qe}),fu=Qe({\u0275fac:Qe}),na=Qe({__NG_ELEMENT_ID__:Qe}),aN=Qe({__NG_ENV_ID__:Qe});function yu(e){return typeof e=="string"?e:e==null?"":String(e)}function uN(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():yu(e)}var dN=Qe({ngErrorCode:Qe}),zV=Qe({ngErrorMessage:Qe}),GV=Qe({ngTokenPath:Qe});function Bv(e,t){return fN("",-200,t)}function Kp(e,t){throw new oe(-201,!1)}function fN(e,t,n){let r=new oe(t,e);return r[dN]=t,r[zV]=e,n&&(r[GV]=n),r}function WV(e){return e[dN]}var Tv;function pN(){return Tv}function Er(e){let t=Tv;return Tv=e,t}function Hv(e,t,n){let r=gu(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;Kp(e,"Injector")}var qV={},Zs=qV,KV="__NG_DI_FLAG__",Iv=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Qs(n)||0;try{return this.injector.get(t,r&8?null:Zs,r)}catch(o){if(vl(o))return o;throw o}}};function YV(e,t=0){let n=ip();if(n===void 0)throw new oe(-203,!1);if(n===null)return Hv(e,void 0,t);{let r=XV(t),o=n.retrieve(e,r);if(vl(o)){if(r.optional)return null;throw o}return o}}function Pe(e,t=0){return(pN()||YV)(En(e),t)}function O(e,t){return Pe(e,Qs(t))}function Qs(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function XV(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Cv(e){let t=[];for(let n=0;n<e.length;n++){let r=En(e[n]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],l=ZV(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}t.push(Pe(o,i))}else t.push(Pe(r))}return t}function ZV(e){return e[KV]}function Js(e,t){let n=e.hasOwnProperty(fu);return n?e[fu]:null}function hN(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function mN(e){return e.flat(Number.POSITIVE_INFINITY)}function Yp(e,t){e.forEach(n=>Array.isArray(n)?Yp(n,t):t(n))}function Uv(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function vu(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function gN(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function yN(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function vN(e,t,n){let r=Fl(e,t);return r>=0?e[r|1]=n:(r=~r,yN(e,r,t,n)),r}function Xp(e,t){let n=Fl(e,t);if(n>=0)return e[n|1]}function Fl(e,t){return QV(e,t,1)}function QV(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var Gi={},ir=[],ci=new ee(""),zv=new ee("",-1),Gv=new ee(""),pu=class{get(t,n=Zs){if(n===Zs){let o=fN("",-201);throw o.name="\u0275NotFound",o}return n}};function Wv(e){return e[jv]||null}function ui(e){return e[Lv]||null}function qv(e){return e[$v]||null}function bN(e){return e[Vv]||null}function ra(e){return{\u0275providers:e}}function wN(e){return ra([{provide:ci,multi:!0,useValue:e}])}function _N(...e){return{\u0275providers:Kv(!0,e),\u0275fromNgModule:!0}}function Kv(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return Yp(t,s=>{let a=s;Gp(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&EN(o,i),n}function EN(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];Yv(o,i=>{t(i,r)})}}function Gp(e,t,n,r){if(e=En(e),!e)return!1;let o=null,i=xv(e),s=!i&&ui(e);if(!i&&!s){let l=e.ngModule;if(i=xv(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Gp(c,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{Yp(i.imports,u=>{Gp(u,t,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&EN(c,t)}if(!a){let c=Js(o)||(()=>new o);t({provide:o,useFactory:c,deps:ir},o),t({provide:Gv,useValue:o,multi:!0},o),t({provide:ci,useValue:()=>Pe(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=e;Yv(l,u=>{t(u,c)})}}else return!1;return o!==e&&e.providers!==void 0}function Yv(e,t){for(let n of e)Fv(n)&&(n=n.\u0275providers),Array.isArray(n)?Yv(n,t):t(n)}var JV=Qe({provide:String,useValue:Qe});function SN(e){return e!==null&&typeof e=="object"&&JV in e}function ej(e){return!!(e&&e.useExisting)}function tj(e){return!!(e&&e.useFactory)}function ea(e){return typeof e=="function"}function xN(e){return!!e.useClass}var bu=new ee(""),Up={},lN={},Sv;function Ll(){return Sv===void 0&&(Sv=new pu),Sv}var kt=class{},ta=class extends kt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Nv(t,s=>this.processProvider(s)),this.records.set(zv,Pl(void 0,this)),o.has("environment")&&this.records.set(kt,Pl(void 0,this));let i=this.records.get(bu);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Gv,ir,{self:!0}))}retrieve(t,n){let r=Qs(n)||0;try{return this.get(t,Zs,r)}catch(o){if(vl(o))return o;throw o}}destroy(){du(this),this._destroyed=!0;let t=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(t)}}onDestroy(t){return du(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){du(this);let n=ko(this),r=Er(void 0),o;try{return t()}finally{ko(n),Er(r)}}get(t,n=Zs,r){if(du(this),t.hasOwnProperty(aN))return t[aN](this);let o=Qs(r),i,s=ko(this),a=Er(void 0);try{if(!(o&4)){let c=this.records.get(t);if(c===void 0){let u=sj(t)&&gu(t);u&&this.injectableDefInScope(u)?c=Pl(Dv(t),Up):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,o)}let l=o&2?Ll():this.parent;return n=o&8&&n===Zs?null:n,l.get(t,n)}catch(l){let c=WV(l);throw c===-200||c===-201?new oe(c,null):l}finally{Er(a),ko(s)}}resolveInjectorInitializers(){let t=me(null),n=ko(this),r=Er(void 0),o;try{let i=this.get(ci,ir,{self:!0});for(let s of i)s()}finally{ko(n),Er(r),me(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(li(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=En(t);let n=ea(t)?t:En(t&&t.provide),r=rj(t);if(!ea(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Pl(void 0,Up,!0),o.factory=()=>Cv(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let o=me(null);try{if(n.value===lN)throw Bv(li(t));return n.value===Up&&(n.value=lN,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ij(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=En(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dv(e){let t=gu(e),n=t!==null?t.factory:Js(e);if(n!==null)return n;if(e instanceof ee)throw new oe(204,!1);if(e instanceof Function)return nj(e);throw new oe(204,!1)}function nj(e){if(e.length>0)throw new oe(204,!1);let n=UV(e);return n!==null?()=>n.factory(e):()=>new e}function rj(e){if(SN(e))return Pl(void 0,e.useValue);{let t=Xv(e);return Pl(t,Up)}}function Xv(e,t,n){let r;if(ea(e)){let o=En(e);return Js(o)||Dv(o)}else if(SN(e))r=()=>En(e.useValue);else if(tj(e))r=()=>e.useFactory(...Cv(e.deps||[]));else if(ej(e))r=(o,i)=>Pe(En(e.useExisting),i!==void 0&&i&8?8:void 0);else{let o=En(e&&(e.useClass||e.provide));if(oj(e))r=()=>new o(...Cv(e.deps));else return Js(o)||Dv(o)}return r}function du(e){if(e.destroyed)throw new oe(205,!1)}function Pl(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function oj(e){return!!e.deps}function ij(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function sj(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Nv(e,t){for(let n of e)Array.isArray(n)?Nv(n,t):n&&Fv(n)?Nv(n.\u0275providers,t):t(n)}function qn(e,t){let n;e instanceof ta?(du(e),n=e):n=new Iv(e);let r,o=ko(n),i=Er(void 0);try{return t()}finally{ko(o),Er(i)}}function TN(){return pN()!==void 0||ip()!=null}var so=0,he=1,be=2,Zt=3,Lr=4,Kn=5,oa=6,$l=7,Bt=8,Wi=9,Oo=10,gt=11,Vl=12,Zv=13,ia=14,Yn=15,qi=16,sa=17,Ro=18,wu=19,Qv=20,ai=21,Zp=22,di=23,xr=24,aa=25,la=26,Lt=27,IN=1,Jv=6,Ki=7,_u=8,ca=9,zt=10;function Po(e){return Array.isArray(e)&&typeof e[IN]=="object"}function ao(e){return Array.isArray(e)&&e[IN]===!0}function eb(e){return(e.flags&4)!==0}function Yi(e){return e.componentOffset>-1}function Eu(e){return(e.flags&1)===1}function Fo(e){return!!e.template}function jl(e){return(e[be]&512)!==0}function ua(e){return(e[be]&256)===256}var tb="svg",CN="math";function $r(e){for(;Array.isArray(e);)e=e[so];return e}function nb(e,t){return $r(t[e])}function lo(e,t){return $r(t[e.index])}function Su(e,t){return e.data[t]}function DN(e,t){return e[t]}function Qp(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function Vr(e,t){let n=t[e];return Po(n)?n:n[so]}function NN(e){return(e[be]&4)===4}function Jp(e){return(e[be]&128)===128}function AN(e){return ao(e[Zt])}function jr(e,t){return t==null?null:e[t]}function rb(e){e[sa]=0}function ob(e){e[be]&1024||(e[be]|=1024,Jp(e)&&Xi(e))}function MN(e,t){for(;e>0;)t=t[ia],e--;return t}function xu(e){return!!(e[be]&9216||e[xr]?.dirty)}function eh(e){e[Oo].changeDetectionScheduler?.notify(8),e[be]&64&&(e[be]|=1024),xu(e)&&Xi(e)}function Xi(e){e[Oo].changeDetectionScheduler?.notify(0);let t=zi(e);for(;t!==null&&!(t[be]&8192||(t[be]|=8192,!Jp(t)));)t=zi(t)}function ib(e,t){if(ua(e))throw new oe(911,!1);e[ai]===null&&(e[ai]=[]),e[ai].push(t)}function kN(e,t){if(e[ai]===null)return;let n=e[ai].indexOf(t);n!==-1&&e[ai].splice(n,1)}function zi(e){let t=e[Zt];return ao(t)?t[Zt]:t}function sb(e){return e[$l]??=[]}function ab(e){return e.cleanup??=[]}function ON(e,t,n,r){let o=sb(t);o.push(n),e.firstCreatePass&&ab(e).push(r,o.length-1)}var Fe={lFrame:GN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Av=!1;function RN(){return Fe.lFrame.elementDepthCount}function PN(){Fe.lFrame.elementDepthCount++}function lb(){Fe.lFrame.elementDepthCount--}function cb(){return Fe.bindingsEnabled}function ub(){return Fe.skipHydrationRootTNode!==null}function db(e){return Fe.skipHydrationRootTNode===e}function fb(){Fe.skipHydrationRootTNode=null}function Ee(){return Fe.lFrame.lView}function Tt(){return Fe.lFrame.tView}function It(e){return Fe.lFrame.contextLView=e,e[Bt]}function Ct(e){return Fe.lFrame.contextLView=null,e}function an(){let e=pb();for(;e!==null&&e.type===64;)e=e.parent;return e}function pb(){return Fe.lFrame.currentTNode}function FN(){let e=Fe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function da(e,t){let n=Fe.lFrame;n.currentTNode=e,n.isParent=t}function hb(){return Fe.lFrame.isParent}function mb(){Fe.lFrame.isParent=!1}function LN(){return Fe.lFrame.contextLView}function gb(){return Av}function Bl(e){let t=Av;return Av=e,t}function $N(e){return Fe.lFrame.bindingIndex=e}function Zi(){return Fe.lFrame.bindingIndex++}function VN(e){let t=Fe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function jN(){return Fe.lFrame.inI18n}function BN(e,t){let n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=e,th(t)}function HN(){return Fe.lFrame.currentDirectiveIndex}function th(e){Fe.lFrame.currentDirectiveIndex=e}function UN(e){let t=Fe.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function nh(){return Fe.lFrame.currentQueryIndex}function Tu(e){Fe.lFrame.currentQueryIndex=e}function aj(e){let t=e[he];return t.type===2?t.declTNode:t.type===1?e[Kn]:null}function yb(e,t,n){if(n&4){let o=t,i=e;for(;o=o.parent,o===null&&!(n&1);)if(o=aj(i),o===null||(i=i[ia],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=Fe.lFrame=zN();return r.currentTNode=t,r.lView=e,!0}function rh(e){let t=zN(),n=e[he];Fe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function zN(){let e=Fe.lFrame,t=e===null?null:e.child;return t===null?GN(e):t}function GN(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function WN(){let e=Fe.lFrame;return Fe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var vb=WN;function oh(){let e=WN();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function qN(e){return(Fe.lFrame.contextLView=MN(e,Fe.lFrame.contextLView))[Bt]}function fi(){return Fe.lFrame.selectedIndex}function Qi(e){Fe.lFrame.selectedIndex=e}function Iu(){let e=Fe.lFrame;return Su(e.tView,e.selectedIndex)}function ln(){Fe.lFrame.currentNamespace=tb}function Cu(){lj()}function lj(){Fe.lFrame.currentNamespace=null}function KN(){return Fe.lFrame.currentNamespace}var YN=!0;function ih(){return YN}function sh(e){YN=e}function Mv(e,t=null,n=null,r){let o=bb(e,t,n,r);return o.resolveInjectorInitializers(),o}function bb(e,t=null,n=null,r,o=new Set){let i=[n||ir,_N(e)];return r=r||(typeof e=="object"?void 0:li(e)),new ta(i,t||Ll(),r||null,o)}var Ye=class e{static THROW_IF_NOT_FOUND=Zs;static NULL=new pu;static create(t,n){if(Array.isArray(t))return Mv({name:""},n,t,"");{let r=t.name??"";return Mv({name:r},t.parent,t.providers,r)}}static \u0275prov=q({token:e,providedIn:"any",factory:()=>Pe(zv)});static __NG_ELEMENT_ID__=-1},Ue=new ee(""),Tr=(()=>{class e{static __NG_ELEMENT_ID__=cj;static __NG_ENV_ID__=n=>n}return e})(),hu=class extends Tr{_lView;constructor(t){super(),this._lView=t}get destroyed(){return ua(this._lView)}onDestroy(t){let n=this._lView;return ib(n,t),()=>kN(n,t)}};function cj(){return new hu(Ee())}var Sr=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Br=new ee("",{providedIn:"root",factory:()=>{let e=O(kt),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Sr),t.handleError(n))}}}),XN={provide:ci,useValue:()=>void O(Sr),multi:!0},uj=new ee("",{providedIn:"root",factory:()=>{let e=O(Ue).defaultView;if(!e)return;let t=O(Br),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),O(Tr).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function wb(){return ra([wN(()=>void O(uj))])}function _b(e){return typeof e=="function"&&e[Xt]!==void 0}function Se(e,t){let[n,r,o]=sv(e,t?.equal),i=n,s=i[Xt];return i.set=r,i.update=o,i.asReadonly=ah.bind(i),i}function ah(){let e=this[Xt];if(e.readonlyFn===void 0){let t=()=>this();t[Xt]=e,e.readonlyFn=t}return e.readonlyFn}function Eb(e){return _b(e)&&typeof e.set=="function"}var io=class{},Du=new ee("",{providedIn:"root",factory:()=>!1});var Sb=new ee(""),lh=new ee("");var Hl=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=dj}return e})();function dj(){return new Hl(Ee(),an())}var pi=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:e,providedIn:"root",factory:()=>new e})}return e})();function fa(...e){}var Nu=(()=>{class e{static \u0275prov=q({token:e,providedIn:"root",factory:()=>new kv})}return e})(),kv=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Vu(e){return{toString:e}.toString()}function yj(e){return typeof e=="function"}var mh=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function N1(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var es=(()=>{let e=()=>A1;return e.ngInherit=!0,e})();function A1(e){return e.type.prototype.ngOnChanges&&(e.setInput=bj),vj}function vj(){let e=k1(this),t=e?.current;if(t){let n=e.previous;if(n===Gi)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function bj(e,t,n,r,o){let i=this.declaredInputs[r],s=k1(e)||wj(e,{previous:Gi,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new mh(c&&c.currentValue,n,l===Gi),N1(e,t,o,n)}var M1="__ngSimpleChanges__";function k1(e){return e[M1]||null}function wj(e,t){return e[M1]=t}var ZN=[];var rt=function(e,t=null,n){for(let r=0;r<ZN.length;r++){let o=ZN[r];o(e,t,n)}};function _j(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=A1(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function O1(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function uh(e,t,n){R1(e,t,3,n)}function dh(e,t,n,r){(e[be]&3)===n&&R1(e,t,n,r)}function xb(e,t){let n=e[be];(n&3)===t&&(n&=16383,n+=1,e[be]=n)}function R1(e,t,n,r){let o=r!==void 0?e[sa]&65535:0,i=r??-1,s=t.length-1,a=0;for(let l=o;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(e[sa]+=65536),(a<i||i==-1)&&(Ej(e,n,t,l),e[sa]=(e[sa]&4294901760)+l+2),l++}function QN(e,t){rt(4,e,t);let n=me(null);try{t.call(e)}finally{me(n),rt(5,e,t)}}function Ej(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[be]>>14<e[sa]>>16&&(e[be]&3)===t&&(e[be]+=16384,QN(a,i)):QN(a,i)}var zl=-1,ha=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function Sj(e){return(e.flags&8)!==0}function xj(e){return(e.flags&16)!==0}function Tj(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];Cj(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function Ij(e){return e===3||e===4||e===6}function Cj(e){return e.charCodeAt(0)===64}function Gl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?JN(e,n,o,null,t[++r]):JN(e,n,o,null,null))}}return e}function JN(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){o!==null&&(e[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),o!==null&&e.splice(i++,0,o)}function P1(e){return e!==zl}function gh(e){return e&32767}function Dj(e){return e>>16}function yh(e,t){let n=Dj(e),r=t;for(;n>0;)r=r[ia],n--;return r}var Rb=!0;function e1(e){let t=Rb;return Rb=e,t}var Nj=256,F1=Nj-1,L1=5,Aj=0,Lo={};function Mj(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(na)&&(r=n[na]),r==null&&(r=n[na]=Aj++);let o=r&F1,i=1<<o;t.data[e+(o>>L1)]|=i}function vh(e,t){let n=$1(e,t);if(n!==-1)return n;let r=t[he];r.firstCreatePass&&(e.injectorIndex=t.length,Tb(r.data,e),Tb(t,null),Tb(r.blueprint,null));let o=cw(e,t),i=e.injectorIndex;if(P1(o)){let s=gh(o),a=yh(o,t),l=a[he].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=o,i}function Tb(e,t){e.push(0,0,0,0,0,0,0,0,t)}function $1(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function cw(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=U1(o),r===null)return zl;if(n++,o=o[ia],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return zl}function Pb(e,t,n){Mj(e,t,n)}function V1(e,t,n){if(n&8||e!==void 0)return e;Kp(t,"NodeInjector")}function j1(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=e[Wi],i=Er(void 0);try{return o?o.get(t,r,n&8):Hv(t,r,n&8)}finally{Er(i)}}return V1(r,t,n)}function B1(e,t,n,r=0,o){if(e!==null){if(t[be]&2048&&!(r&2)){let s=Pj(e,t,n,r,Lo);if(s!==Lo)return s}let i=H1(e,t,n,r,Lo);if(i!==Lo)return i}return j1(t,n,r,o)}function H1(e,t,n,r,o){let i=Oj(n);if(typeof i=="function"){if(!yb(t,e,r))return r&1?V1(o,n,r):j1(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Kp(n);else return s}finally{vb()}}else if(typeof i=="number"){let s=null,a=$1(e,t),l=zl,c=r&1?t[Yn][Kn]:null;for((a===-1||r&4)&&(l=a===-1?cw(e,t):t[a+8],l===zl||!n1(r,!1)?a=-1:(s=t[he],a=gh(l),t=yh(l,t)));a!==-1;){let u=t[he];if(t1(i,a,u.data)){let f=kj(a,t,n,s,r,c);if(f!==Lo)return f}l=t[a+8],l!==zl&&n1(r,t[he].data[a+8]===c)&&t1(i,a,t)?(s=u,a=gh(l),t=yh(l,t)):a=-1}}return o}function kj(e,t,n,r,o,i){let s=t[he],a=s.data[e+8],l=r==null?Yi(a)&&Rb:r!=s&&(a.type&3)!==0,c=o&1&&i===a,u=fh(a,s,n,l,c);return u!==null?ku(t,s,u,a,o):Lo}function fh(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,l=e.directiveStart,c=e.directiveEnd,u=i>>20,f=r?a:a+u,p=o?a+u:c;for(let m=f;m<p;m++){let w=s[m];if(m<l&&n===w||m>=l&&w.type===n)return m}if(o){let m=s[l];if(m&&Fo(m)&&m.type===n)return l}return null}function ku(e,t,n,r,o){let i=e[n],s=t.data;if(i instanceof ha){let a=i;if(a.resolving){let m=uN(s[n]);throw Bv(m)}let l=e1(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],u,f=a.injectImpl?Er(a.injectImpl):null,p=yb(e,r,0);try{i=e[n]=a.factory(void 0,o,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&_j(n,s[n],t)}finally{f!==null&&Er(f),e1(l),a.resolving=!1,vb()}}return i}function Oj(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(na)?e[na]:void 0;return typeof t=="number"?t>=0?t&F1:Rj:t}function t1(e,t,n){let r=1<<e;return!!(n[t+(e>>L1)]&r)}function n1(e,t){return!(e&2)&&!(e&1&&t)}var pa=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return B1(this._tNode,this._lView,t,Qs(r),n)}};function Rj(){return new pa(an(),Ee())}function Hr(e){return Vu(()=>{let t=e.prototype.constructor,n=t[fu]||Fb(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[fu]||Fb(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Fb(e){return Rv(e)?()=>{let t=Fb(En(e));return t&&t()}:Js(e)}function Pj(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[be]&2048&&!jl(s);){let a=H1(i,s,n,r|2,Lo);if(a!==Lo)return a;let l=i.parent;if(!l){let c=s[Qv];if(c){let u=c.get(n,Lo,r);if(u!==Lo)return u}l=U1(s),s=s[ia]}i=l}return o}function U1(e){let t=e[he],n=t.type;return n===2?t.declTNode:n===1?e[Kn]:null}function Fj(){return Yl(an(),Ee())}function Yl(e,t){return new ut(lo(e,t))}var ut=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Fj}return e})();function z1(e){return e instanceof ut?e.nativeElement:e}function Lj(){return this._results[Symbol.iterator]()}var bh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Me}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=mN(t);(this._changesDetected=!hN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Lj};function G1(e){return(e.flags&128)===128}var uw=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(uw||{}),W1=new Map,$j=0;function Vj(){return $j++}function jj(e){W1.set(e[wu],e)}function Lb(e){W1.delete(e[wu])}var r1="__ngContext__";function Wl(e,t){Po(t)?(e[r1]=t[wu],jj(t)):e[r1]=t}function q1(e){return Y1(e[Vl])}function K1(e){return Y1(e[Lr])}function Y1(e){for(;e!==null&&!ao(e);)e=e[Lr];return e}var $b;function dw(e){$b=e}function X1(){if($b!==void 0)return $b;if(typeof document<"u")return document;throw new oe(210,!1)}var Xl=new ee("",{providedIn:"root",factory:()=>Bj}),Bj="ng",Ph=new ee(""),ts=new ee("",{providedIn:"platform",factory:()=>"unknown"});var fw=new ee(""),Fh=new ee("",{providedIn:"root",factory:()=>X1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Hj="h",Uj="b";var Z1="r";var Q1="di";var J1=!1,eA=new ee("",{providedIn:"root",factory:()=>J1});var zj=(e,t,n,r)=>{};function Gj(e,t,n,r){zj(e,t,n,r)}function Lh(e){return(e.flags&32)===32}var Wj=()=>null;function tA(e,t,n=!1){return Wj(e,t,n)}function nA(e,t){let n=e.contentQueries;if(n!==null){let r=me(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Tu(i),a.contentQueries(2,t[s],s)}}}finally{me(r)}}}function Vb(e,t,n){Tu(0);let r=me(null);try{t(e,n)}finally{me(r)}}function rA(e,t,n){if(eb(t)){let r=me(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{me(r)}}}var hi=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(hi||{});var wh=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wp})`}};function pw(e){return e instanceof wh?e.changingThisBreaksApplicationSecurity:e}function oA(e,t){let n=iA(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Wp})`)}return n===t}function iA(e){return e instanceof wh&&e.getTypeName()||null}var qj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sA(e){return e=String(e),e.match(qj)?e:"unsafe:"+e}var hw=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(hw||{});function mw(e){let t=Kj();return t?t.sanitize(hw.URL,e)||"":oA(e,"URL")?pw(e):sA(yu(e))}function Kj(){let e=Ee();return e&&e[Oo].sanitizer}function aA(e){return e instanceof Function?e():e}function Yj(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var lA="ng-template";function Xj(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&Yj(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(gw(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function gw(e){return e.type===4&&e.value!==lA}function Zj(e,t,n){let r=e.type===4&&!n?lA:e.value;return t===r}function Qj(e,t,n){let r=4,o=e.attrs,i=o!==null?tB(o):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!co(r)&&!co(l))return!1;if(s&&co(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Zj(e,l,n)||l===""&&t.length===1){if(co(r))return!1;s=!0}}else if(r&8){if(o===null||!Xj(e,o,l,n)){if(co(r))return!1;s=!0}}else{let c=t[++a],u=Jj(l,o,gw(e),n);if(u===-1){if(co(r))return!1;s=!0;continue}if(c!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&c!==f){if(co(r))return!1;s=!0}}}}return co(r)||s}function co(e){return(e&1)===0}function Jj(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return nB(t,e)}function cA(e,t,n=!1){for(let r=0;r<t.length;r++)if(Qj(e,t[r],n))return!0;return!1}function eB(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if((n&1)===0)return t[n+1]}return null}function tB(e){for(let t=0;t<e.length;t++){let n=e[t];if(Ij(n))return t}return e.length}function nB(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function rB(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let o=0;o<e.length;o++)if(e[o]!==r[o])continue e;return!0}}return!1}function o1(e,t){return e?":not("+t.trim()+")":t}function oB(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!co(s)&&(t+=o1(i,o),o=""),r=s,i=i||!co(r);n++}return o!==""&&(t+=o1(i,o)),t}function iB(e){return e.map(oB).join(",")}function sB(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!co(o))break;o=i}r++}return n.length&&t.push(1,...n),t}var yi={};function aB(e,t){return e.createText(t)}function lB(e,t,n){e.setValue(t,n)}function uA(e,t,n){return e.createElement(t,n)}function _h(e,t,n,r,o){e.insertBefore(t,n,r,o)}function dA(e,t,n){e.appendChild(t,n)}function i1(e,t,n,r,o){r!==null?_h(e,t,n,r,o):dA(e,t,n)}function fA(e,t,n,r){e.removeChild(null,t,n,r)}function cB(e,t,n){e.setAttribute(t,"style",n)}function uB(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function pA(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&Tj(e,t,r),o!==null&&uB(e,t,o),i!==null&&cB(e,t,i)}function yw(e,t,n,r,o,i,s,a,l,c,u){let f=Lt+r,p=f+o,m=dB(f,p),w=typeof c=="function"?c():c;return m[he]={type:e,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:u}}function dB(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:yi);return n}function fB(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=yw(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function vw(e,t,n,r,o,i,s,a,l,c,u){let f=t.blueprint.slice();return f[so]=o,f[be]=r|4|128|8|64|1024,(c!==null||e&&e[be]&2048)&&(f[be]|=2048),rb(f),f[Zt]=f[ia]=e,f[Bt]=n,f[Oo]=s||e&&e[Oo],f[gt]=a||e&&e[gt],f[Wi]=l||e&&e[Wi]||null,f[Kn]=i,f[wu]=Vj(),f[oa]=u,f[Qv]=c,f[Yn]=t.type==2?e[Yn]:f,f}function pB(e,t,n){let r=lo(t,e),o=fB(n),i=e[Oo].rendererFactory,s=bw(e,vw(e,o,null,hA(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=s}function hA(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function mA(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function bw(e,t){return e[Vl]?e[Zv][Lr]=t:e[Vl]=t,e[Zv]=t,t}function le(e=1){gA(Tt(),Ee(),fi()+e,!1)}function gA(e,t,n,r){if(!r)if((t[be]&3)===3){let i=e.preOrderCheckHooks;i!==null&&uh(t,i,n)}else{let i=e.preOrderHooks;i!==null&&dh(t,i,0,n)}Qi(n)}var $h=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})($h||{});function jb(e,t,n,r){let o=me(null);try{let[i,s,a]=e.inputs[n],l=null;(s&$h.SignalBased)!==0&&(l=t[i][Xt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,l,r,n,i):N1(t,l,i,r)}finally{me(o)}}var mi=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(mi||{}),hB;function ww(e,t){return hB(e,t)}var ju=new Set;var yA=new ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1})});function s1(e,t,n,r){let o=e?.[la]?.enter;if(t!==null&&o&&o.has(n.index)){let i=r.get(yA);for(let s of o.get(n.index).animateFns)i.queue.add(s)}}function Ul(e,t,n,r,o,i,s,a){if(o!=null){let l,c=!1;ao(o)?l=o:Po(o)&&(c=!0,o=o[so]);let u=$r(o);e===0&&r!==null?(s1(a,r,i,n),s==null?dA(t,r,u):_h(t,r,u,s||null,!0)):e===1&&r!==null?(s1(a,r,i,n),_h(t,r,u,s||null,!0)):e===2?a1(a,i,n,f=>{fA(t,u,c,f)}):e===3&&a1(a,i,n,()=>{t.destroyNode(u)}),l!=null&&IB(t,e,n,l,i,r,s)}}function mB(e,t){let n=e.get(yA);if(Array.isArray(t))for(let r of t)n.queue.add(r);else n.queue.add(t)}function gB(e,t){vA(e,t),t[so]=null,t[Kn]=null}function yB(e,t,n,r,o,i){r[so]=o,r[Kn]=t,jh(e,r,n,1,o,i)}function vA(e,t){t[Oo].changeDetectionScheduler?.notify(9),jh(e,t,t[gt],2,null,null)}function vB(e){let t=e[Vl];if(!t)return Ib(e[he],e);for(;t;){let n=null;if(Po(t))n=t[Vl];else{let r=t[zt];r&&(n=r)}if(!n){for(;t&&!t[Lr]&&t!==e;)Po(t)&&Ib(t[he],t),t=t[Zt];t===null&&(t=e),Po(t)&&Ib(t[he],t),n=t&&t[Lr]}t=n}}function _w(e,t){let n=e[ca],r=n.indexOf(t);n.splice(r,1)}function Vh(e,t){if(ua(t))return;let n=t[gt];n.destroyNode&&jh(e,t,n,3,null,null),vB(t)}function Ib(e,t){if(ua(t))return;let n=me(null);try{t[be]&=-129,t[be]|=256,t[xr]&&Us(t[xr]),_B(e,t),wB(e,t),t[he].type===1&&t[gt].destroy();let r=t[qi];if(r!==null&&ao(t[Zt])){r!==t[Zt]&&_w(r,t);let o=t[Ro];o!==null&&o.detachView(e)}Lb(t)}finally{me(n)}}function a1(e,t,n,r){let o=e?.[la];if(o==null||o.leave==null||!o.leave.has(t.index))return r(!1);if(o.skipLeaveAnimations)return o.skipLeaveAnimations=!1,r(!1);mB(n,()=>{if(o.leave&&o.leave.has(t.index)){let s=o.leave.get(t.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}o.running=Promise.allSettled(a),bB(e,r)}else e&&ju.delete(e),r(!1)})}function bB(e,t){let n=e[la]?.running;if(n){n.then(()=>{e[la].running=void 0,ju.delete(e),t(!0)});return}t(!1)}function wB(e,t){let n=e.cleanup,r=t[$l];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[$l]=null);let o=t[ai];if(o!==null){t[ai]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[di];if(i!==null){t[di]=null;for(let s of i)s.destroy()}}function _B(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof ha)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];rt(4,a,l);try{l.call(a)}finally{rt(5,a,l)}}else{rt(4,o,i);try{i.call(o)}finally{rt(5,o,i)}}}}}function bA(e,t,n){return EB(e,t.parent,n)}function EB(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[so];if(Yi(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===hi.None||o===hi.Emulated)return null}return lo(r,n)}function wA(e,t,n){return xB(e,t,n)}function SB(e,t,n){return e.type&40?lo(e,n):null}var xB=SB,l1;function Ew(e,t,n,r){let o=bA(e,r,t),i=t[gt],s=r.parent||t[Kn],a=wA(s,r,t);if(o!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)i1(i,o,n[l],a,!1);else i1(i,o,n,a,!1);l1!==void 0&&l1(i,r,t,n,o)}function Au(e,t){if(t!==null){let n=t.type;if(n&3)return lo(t,e);if(n&4)return Bb(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Au(e,r);{let o=e[t.index];return ao(o)?Bb(-1,o):$r(o)}}else{if(n&128)return Au(e,t.next);if(n&32)return ww(t,e)()||$r(e[t.index]);{let r=_A(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=zi(e[Yn]);return Au(o,r)}else return Au(e,t.next)}}}return null}function _A(e,t){if(t!==null){let r=e[Yn][Kn],o=t.projection;return r.projection[o]}return null}function Bb(e,t){let n=zt+e+1;if(n<t.length){let r=t[n],o=r[he].firstChild;if(o!==null)return Au(r,o)}return t[Ki]}function Sw(e,t,n,r,o,i,s){for(;n!=null;){let a=r[Wi];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(s&&t===0&&(l&&Wl($r(l),r),n.flags|=2),!Lh(n))if(c&8)Sw(e,t,n.child,r,o,i,!1),Ul(t,e,a,o,l,n,i,r);else if(c&32){let u=ww(n,r),f;for(;f=u();)Ul(t,e,a,o,f,n,i,r);Ul(t,e,a,o,l,n,i,r)}else c&16?EA(e,t,r,n,o,i):Ul(t,e,a,o,l,n,i,r);n=s?n.projectionNext:n.next}}function jh(e,t,n,r,o,i){Sw(n,r,e.firstChild,t,o,i,!1)}function TB(e,t,n){let r=t[gt],o=bA(e,n,t),i=n.parent||t[Kn],s=wA(i,n,t);EA(r,0,t,n,o,s)}function EA(e,t,n,r,o,i){let s=n[Yn],l=s[Kn].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Ul(t,e,n[Wi],o,u,r,i,n)}else{let c=l,u=s[Zt];G1(r)&&(c.flags|=128),Sw(e,t,c,u,o,i,!0)}}function IB(e,t,n,r,o,i,s){let a=r[Ki],l=$r(r);a!==l&&Ul(t,e,n,i,a,o,s);for(let c=zt;c<r.length;c++){let u=r[c];jh(u[he],u,e,t,i,a)}}function CB(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:mi.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=mi.Important),e.setStyle(n,r,o,i))}}function SA(e,t,n,r,o){let i=fi(),s=r&2;try{Qi(-1),s&&t.length>Lt&&gA(e,t,Lt,!1),rt(s?2:0,o,n),n(r,o)}finally{Qi(i),rt(s?3:1,o,n)}}function xw(e,t,n){OB(e,t,n),(n.flags&64)===64&&RB(e,t,n)}function Bh(e,t,n=lo){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function DB(e,t,n,r){let i=r.get(eA,J1)||n===hi.ShadowDom,s=e.selectRootElement(t,i);return NB(s),s}function NB(e){AB(e)}var AB=()=>null;function MB(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function xA(e,t,n,r,o,i){let s=t[he];if(Tw(e,s,t,n,r)){Yi(e)&&kB(t,e.index);return}e.type&3&&(n=MB(n)),TA(e,t,n,r,o,i)}function TA(e,t,n,r,o,i){if(e.type&3){let s=lo(e,t);r=i!=null?i(r,e.value||"",n):r,o.setProperty(s,n,r)}else e.type&12}function kB(e,t){let n=Vr(t,e);n[be]&16||(n[be]|=64)}function OB(e,t,n){let r=n.directiveStart,o=n.directiveEnd;Yi(n)&&pB(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||vh(n,t);let i=n.initialInputs;for(let s=r;s<o;s++){let a=e.data[s],l=ku(t,e,s,n);if(Wl(l,t),i!==null&&$B(t,s-r,l,a,n,i),Fo(a)){let c=Vr(n.index,t);c[Bt]=ku(t,e,s,n)}}}function RB(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=HN();try{Qi(i);for(let a=r;a<o;a++){let l=e.data[a],c=t[a];th(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&PB(l,c)}}finally{Qi(-1),th(s)}}function PB(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function IA(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];cA(t,i.selectors,!1)&&(r??=[],Fo(i)?r.unshift(i):r.push(i))}return r}function FB(e,t,n,r,o,i){let s=lo(e,t);LB(t[gt],s,i,e.value,n,r,o)}function LB(e,t,n,r,o,i,s){if(i==null)e.removeAttribute(t,o,n);else{let a=s==null?yu(i):s(i,r||"",o);e.setAttribute(t,o,a,n)}}function $B(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];jb(r,n,l,c)}}function CA(e,t,n,r,o){let i=Lt+n,s=t[he],a=o(s,t,e,r,n);t[i]=a,da(e,!0);let l=e.type===2;return l?(pA(t[gt],a,e),(RN()===0||Eu(e))&&Wl(a,t),PN()):Wl(a,t),ih()&&(!l||!Lh(e))&&Ew(s,t,a,e),e}function DA(e){let t=e;return hb()?mb():(t=t.parent,da(t,!1)),t}function VB(e,t){let n=e[Wi];if(!n)return;let r;try{r=n.get(Br,null)}catch{r=null}r?.(t)}function Tw(e,t,n,r,o){let i=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],f=t.data[c];jb(f,n[c],u,o),a=!0}if(i)for(let l of i){let c=n[l],u=t.data[l];jb(u,c,r,o),a=!0}return a}function jB(e,t){let n=Vr(t,e),r=n[he];BB(r,n);let o=n[so];o!==null&&n[oa]===null&&(n[oa]=tA(o,n[Wi])),rt(18),Iw(r,n,n[Bt]),rt(19,n[Bt])}function BB(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Iw(e,t,n){rh(t);try{let r=e.viewQuery;r!==null&&Vb(1,r,n);let o=e.template;o!==null&&SA(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ro]?.finishViewCreation(e),e.staticContentQueries&&nA(e,t),e.staticViewQueries&&Vb(2,e.viewQuery,n);let i=e.components;i!==null&&HB(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[be]&=-5,oh()}}function HB(e,t){for(let n=0;n<t.length;n++)jB(e,t[n])}function Bu(e,t,n,r){let o=me(null);try{let i=t.tView,a=e[be]&4096?4096:16,l=vw(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[t.index];l[qi]=c;let u=e[Ro];return u!==null&&(l[Ro]=u.createEmbeddedView(i)),Iw(i,l,n),l}finally{me(o)}}function ql(e,t){return!t||t.firstChild===null||G1(e)}function Ou(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push($r(i)),ao(i)&&NA(i,r);let s=n.type;if(s&8)Ou(e,t,n.child,r);else if(s&32){let a=ww(n,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=_A(t,n);if(Array.isArray(a))r.push(...a);else{let l=zi(t[Yn]);Ou(l[he],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function NA(e,t){for(let n=zt;n<e.length;n++){let r=e[n],o=r[he].firstChild;o!==null&&Ou(r[he],r,o,t)}e[Ki]!==e[so]&&t.push(e[Ki])}function AA(e){if(e[aa]!==null){for(let t of e[aa])t.impl.addSequence(t);e[aa].length=0}}var MA=[];function UB(e){return e[xr]??zB(e)}function zB(e){let t=MA.pop()??Object.create(WB);return t.lView=e,t}function GB(e){e.lView[xr]!==e&&(e.lView=null,MA.push(e))}var WB=fe(B({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Xi(e.lView)},consumerOnSignalRead(){this.lView[xr]=this}});function qB(e){let t=e[xr]??Object.create(KB);return t.lView=e,t}var KB=fe(B({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=zi(e.lView);for(;t&&!kA(t[he]);)t=zi(t);t&&ob(t)},consumerOnSignalRead(){this.lView[xr]=this}});function kA(e){return e.type!==2}function OA(e){if(e[di]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[di])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[be]&8192)}}var YB=100;function RA(e,t=0){let r=e[Oo].rendererFactory,o=!1;o||r.begin?.();try{XB(e,t)}finally{o||r.end?.()}}function XB(e,t){let n=gb();try{Bl(!0),Hb(e,t);let r=0;for(;xu(e);){if(r===YB)throw new oe(103,!1);r++,Hb(e,1)}}finally{Bl(n)}}function ZB(e,t,n,r){if(ua(t))return;let o=t[be],i=!1,s=!1;rh(t);let a=!0,l=null,c=null;i||(kA(e)?(c=UB(t),l=Hs(c)):up()===null?(a=!1,c=qB(t),l=Hs(c)):t[xr]&&(Us(t[xr]),t[xr]=null));try{rb(t),$N(e.bindingStartIndex),n!==null&&SA(e,t,n,2,r);let u=(o&3)===3;if(!i)if(u){let m=e.preOrderCheckHooks;m!==null&&uh(t,m,null)}else{let m=e.preOrderHooks;m!==null&&dh(t,m,0,null),xb(t,0)}if(s||QB(t),OA(t),PA(t,0),e.contentQueries!==null&&nA(e,t),!i)if(u){let m=e.contentCheckHooks;m!==null&&uh(t,m)}else{let m=e.contentHooks;m!==null&&dh(t,m,1),xb(t,1)}e3(e,t);let f=e.components;f!==null&&LA(t,f,0);let p=e.viewQuery;if(p!==null&&Vb(2,p,r),!i)if(u){let m=e.viewCheckHooks;m!==null&&uh(t,m)}else{let m=e.viewHooks;m!==null&&dh(t,m,2),xb(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Zp]){for(let m of t[Zp])m();t[Zp]=null}i||(AA(t),t[be]&=-73)}catch(u){throw i||Xi(t),u}finally{c!==null&&(bl(c,l),a&&GB(c)),oh()}}function PA(e,t){for(let n=q1(e);n!==null;n=K1(n))for(let r=zt;r<n.length;r++){let o=n[r];FA(o,t)}}function QB(e){for(let t=q1(e);t!==null;t=K1(t)){if(!(t[be]&2))continue;let n=t[ca];for(let r=0;r<n.length;r++){let o=n[r];ob(o)}}}function JB(e,t,n){rt(18);let r=Vr(t,e);FA(r,n),rt(19,r[Bt])}function FA(e,t){Jp(e)&&Hb(e,t)}function Hb(e,t){let r=e[he],o=e[be],i=e[xr],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&wl(i)),s||=!1,i&&(i.dirty=!1),e[be]&=-9217,s)ZB(r,e,r.template,e[Bt]);else if(o&8192){let a=me(null);try{OA(e),PA(e,1);let l=r.components;l!==null&&LA(e,l,1),AA(e)}finally{me(a)}}}function LA(e,t,n){for(let r=0;r<t.length;r++)JB(e,t[r],n)}function e3(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Qi(~o);else{let i=o,s=n[++r],a=n[++r];BN(s,i);let l=t[i];rt(24,l),a(2,l),rt(25,l)}}}finally{Qi(-1)}}function Cw(e,t){let n=gb()?64:1088;for(e[Oo].changeDetectionScheduler?.notify(t);e;){e[be]|=n;let r=zi(e);if(jl(e)&&!r)return e;e=r}return null}function $A(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function VA(e,t){let n=zt+t;if(n<e.length)return e[n]}function Hu(e,t,n,r=!0){let o=t[he];if(t3(o,t,e,n),r){let s=Bb(n,e),a=t[gt],l=a.parentNode(e[Ki]);l!==null&&yB(o,e[Kn],a,t,l,s)}let i=t[oa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function jA(e,t){let n=Ru(e,t);return n!==void 0&&Vh(n[he],n),n}function Ru(e,t){if(e.length<=zt)return;let n=zt+t,r=e[n];if(r){let o=r[qi];o!==null&&o!==e&&_w(o,r),t>0&&(e[n-1][Lr]=r[Lr]);let i=vu(e,zt+t);gB(r[he],r);let s=i[Ro];s!==null&&s.detachView(i[he]),r[Zt]=null,r[Lr]=null,r[be]&=-129}return r}function t3(e,t,n,r){let o=zt+r,i=n.length;r>0&&(n[o-1][Lr]=t),r<i-zt?(t[Lr]=n[o],Uv(n,zt+r,t)):(n.push(t),t[Lr]=null),t[Zt]=n;let s=t[qi];s!==null&&n!==s&&BA(s,t);let a=t[Ro];a!==null&&a.insertView(e),eh(t),t[be]|=128}function BA(e,t){let n=e[ca],r=t[Zt];if(Po(r))e[be]|=2;else{let o=r[Zt][Yn];t[Yn]!==o&&(e[be]|=2)}n===null?e[ca]=[t]:n.push(t)}var Ji=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[he];return Ou(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Bt]}set context(t){this._lView[Bt]=t}get destroyed(){return ua(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Zt];if(ao(t)){let n=t[_u],r=n?n.indexOf(this):-1;r>-1&&(Ru(t,r),vu(n,r))}this._attachedToViewContainer=!1}Vh(this._lView[he],this._lView)}onDestroy(t){ib(this._lView,t)}markForCheck(){Cw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[be]&=-129}reattach(){eh(this._lView),this._lView[be]|=128}detectChanges(){this._lView[be]|=1024,RA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=jl(this._lView),n=this._lView[qi];n!==null&&!t&&_w(n,this._lView),vA(this._lView[he],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=t;let n=jl(this._lView),r=this._lView[qi];r!==null&&!n&&BA(r,this._lView),eh(this._lView)}};var uo=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=n3;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let i=Bu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Ji(i)}}return e})();function n3(){return Dw(an(),Ee())}function Dw(e,t){return e.type&4?new uo(t,e,Yl(e,t)):null}function ya(e,t,n,r,o){let i=e.data[t];if(i===null)i=r3(e,t,n,r,o),jN()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=FN();i.injectorIndex=s===null?-1:s.injectorIndex}return da(i,!0),i}function r3(e,t,n,r,o){let i=pb(),s=hb(),a=s?i:i&&i.parent,l=e.data[t]=i3(e,a,n,t,r,o);return o3(e,l,i,s),l}function o3(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function i3(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return ub()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var fse=new RegExp(`^(\\d+)*(${Uj}|${Hj})*(.*)`);function s3(e){let t=e[Jv]??[],r=e[Zt][gt],o=[];for(let i of t)i.data[Q1]!==void 0?o.push(i):a3(i,r);e[Jv]=o}function a3(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[Z1];for(;n<o;){let i=r.nextSibling;fA(t,r,!1),r=i,n++}}}var l3=()=>null,c3=()=>null;function Eh(e,t){return l3(e,t)}function HA(e,t,n){return c3(e,t,n)}var UA=class{},Hh=class{},Ub=class{resolveComponentFactory(t){throw new oe(917,!1)}},Uu=class{static NULL=new Ub},On=class{},vi=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>u3()}return e})();function u3(){let e=Ee(),t=an(),n=Vr(t.index,e);return(Po(n)?n:e)[gt]}var zA=(()=>{class e{static \u0275prov=q({token:e,providedIn:"root",factory:()=>null})}return e})();var ph={},zb=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let o=this.injector.get(t,ph,r);return o!==ph||n===ph?o:this.parentInjector.get(t,n,r)}};function Sh(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=Ov(o,a);else if(i==2){let l=a,c=t[++s];r=Ov(r,l+": "+c+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Sn(e,t=0){let n=Ee();if(n===null)return Pe(e,t);let r=an();return B1(r,n,En(e),t)}function GA(e,t,n,r,o){let i=r===null?null:{"":-1},s=o(e,n);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}p3(e,t,n,a,i,l,c)}i!==null&&r!==null&&d3(n,r,i)}function d3(e,t,n){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new oe(-301,!1);r.push(t[o],i)}}function f3(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function p3(e,t,n,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let m=r[p];!l&&Fo(m)&&(l=!0,f3(e,n,p)),Pb(vh(n,t),e,m.type)}b3(n,e.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,f=mA(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(n.mergedAttrs=Gl(n.mergedAttrs,m.hostAttrs),m3(e,n,t,f,m),v3(f,m,o),s!==null&&s.has(m)){let[x,T]=s.get(m);n.directiveToIndex.set(m.type,[f,x+n.directiveStart,T+n.directiveStart])}else(i===null||!i.has(m))&&n.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let w=m.type.prototype;!c&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),c=!0),!u&&(w.ngOnChanges||w.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),f++}h3(e,n,i)}function h3(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let o=e.data[r];if(n===null||!n.has(o))c1(0,t,o,r),c1(1,t,o,r),d1(t,r,!1);else{let i=n.get(o);u1(0,t,i,r),u1(1,t,i,r),d1(t,r,!0)}}}function c1(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[i]??=[],s[i].push(r),WA(t,i)}}function u1(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),WA(t,s)}}function WA(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function d1(e,t,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=e;if(r===null||!n&&o===null||n&&i===null||gw(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===t){s??=[],s.push(l,r[a+1]);break}}else if(n&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function m3(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=Js(o.type,!0)),s=new ha(i,Fo(o),Sn,null);e.blueprint[r]=s,n[r]=s,g3(e,t,r,mA(e,n,o.hostVars,yi),o)}function g3(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;y3(s)!=a&&s.push(a),s.push(n,r,i)}}function y3(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function v3(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Fo(t)&&(n[""]=e)}}function b3(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function qA(e,t,n,r,o,i,s,a){let l=t[he],c=l.consts,u=jr(c,s),f=ya(l,e,n,r,u);return i&&GA(l,t,f,jr(c,a),o),f.mergedAttrs=Gl(f.mergedAttrs,f.attrs),f.attrs!==null&&Sh(f,f.attrs,!1),f.mergedAttrs!==null&&Sh(f,f.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,f),f}function KA(e,t){O1(e,t),eb(t)&&e.queries.elementEnd(t)}function w3(e,t,n,r,o,i){let s=t.consts,a=jr(s,o),l=ya(t,e,n,r,a);if(l.mergedAttrs=Gl(l.mergedAttrs,l.attrs),i!=null){let c=jr(s,i);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Sh(l,l.attrs,!1),l.mergedAttrs!==null&&Sh(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function ns(e,t,n){if(n===yi)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function hh(e,t,n){return function r(o){let i=Yi(e)?Vr(e.index,t):t;Cw(i,5);let s=t[Bt],a=f1(t,s,n,o),l=r.__ngNextListenerFn__;for(;l;)a=f1(t,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function f1(e,t,n,r){let o=me(null);try{return rt(6,t,n),n(r)!==!1}catch(i){return VB(e,i),!1}finally{rt(7,t,n),me(o)}}function YA(e,t,n,r,o,i,s,a){let l=Eu(e),c=!1,u=null;if(!r&&l&&(u=E3(t,n,i,e.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let f=lo(e,n),p=r?r(f):f;Gj(n,p,i,a);let m=o.listen(p,i,a);if(!_3(i)){let w=r?x=>r($r(x[e.index])):e.index;XA(w,t,n,i,a,m,!1)}}return c}function _3(e){return e.startsWith("animation")||e.startsWith("transition")}function E3(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[$l],l=o[i+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function XA(e,t,n,r,o,i,s){let a=t.firstCreatePass?ab(t):null,l=sb(n),c=l.length;l.push(o,i),a&&a.push(r,e,c,(c+1)*(s?-1:1))}function p1(e,t,n,r,o,i){let s=t[n],a=t[he],c=a.data[n].outputs[r],f=s[c].subscribe(i);XA(e.index,a,t,o,i,f,!0)}var Gb=Symbol("BINDING");var xh=class extends Uu{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=ui(t);return new ma(n,this.ngModule)}};function S3(e){return Object.keys(e).map(t=>{let[n,r,o]=e[t],i={propName:n,templateName:t,isSignal:(r&$h.SignalBased)!==0};return o&&(i.transform=o),i})}function x3(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function T3(e,t,n){let r=t instanceof kt?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new zb(n,r):n}function I3(e){let t=e.get(On,null);if(t===null)throw new oe(407,!1);let n=e.get(zA,null),r=e.get(io,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function C3(e,t){let n=ZA(e);return uA(t,n,n==="svg"?tb:n==="math"?CN:null)}function ZA(e){return(e.selectors[0][0]||"div").toLowerCase()}var ma=class extends Hh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=S3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=x3(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=iB(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o,i,s){rt(22);let a=me(null);try{let l=this.componentDef,c=D3(r,l,s,i),u=T3(l,o||this.ngModule,t),f=I3(u),p=f.rendererFactory.createRenderer(null,l),m=r?DB(p,r,l.encapsulation,u):C3(l,p),w=s?.some(h1)||i?.some(D=>typeof D!="function"&&D.bindings.some(h1)),x=vw(null,c,null,512|hA(l),null,null,f,p,u,null,tA(m,u,!0));x[Lt]=m,rh(x);let T=null;try{let D=qA(Lt,x,2,"#host",()=>c.directiveRegistry,!0,0);pA(p,m,D),Wl(m,x),xw(c,x,D),rA(c,D,x),KA(c,D),n!==void 0&&A3(D,this.ngContentSelectors,n),T=Vr(D.index,x),x[Bt]=T[Bt],Iw(c,x,null)}catch(D){throw T!==null&&Lb(T),Lb(x),D}finally{rt(23),oh()}return new Th(this.componentType,x,!!w)}finally{me(a)}}};function D3(e,t,n,r){let o=e?["ng-version","20.3.4"]:sB(t.selectors[0]),i=null,s=null,a=0;if(n)for(let u of n)a+=u[Gb].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[Gb].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(i??=[]).push(p)),p.update&&(p.targetIdx=m,(s??=[]).push(p))}}let l=[t];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=qv(f);l.push(p)}return yw(0,null,N3(i,s),1,a,l,null,null,null,[o],null)}function N3(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function h1(e){let t=e[Gb].kind;return t==="input"||t==="twoWay"}var Th=class extends UA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Su(n[he],Lt),this.location=Yl(this._tNode,n),this.instance=Vr(this._tNode.index,n)[Bt],this.hostView=this.changeDetectorRef=new Ji(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,i=Tw(r,o[he],o,t,n);this.previousInputValues.set(t,n);let s=Vr(r.index,o);Cw(s,1)}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function A3(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Ur=(()=>{class e{static __NG_ELEMENT_ID__=M3}return e})();function M3(){let e=an();return JA(e,Ee())}var k3=Ur,QA=class extends k3{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Yl(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){let t=cw(this._hostTNode,this._hostLView);if(P1(t)){let n=yh(t,this._hostLView),r=gh(t),o=n[he].data[r+8];return new pa(o,n)}else return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=m1(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Eh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,ql(this._hostTNode,s)),a}createComponent(t,n,r,o,i,s,a){let l=t&&!yj(t),c;if(l)c=n;else{let T=n||{};c=T.index,r=T.injector,o=T.projectableNodes,i=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=l?t:new ma(ui(t)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let D=(l?f:this.parentInjector).get(kt,null);D&&(i=D)}let p=ui(u.componentType??{}),m=Eh(this._lContainer,p?.id??null),w=m?.firstChild??null,x=u.create(f,o,w,i,s,a);return this.insertImpl(x.hostView,c,ql(this._hostTNode,m)),x}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(AN(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=o[Zt],c=new QA(l,l[Kn],l[Zt]);c.detach(c.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return Hu(s,o,i,r),t.attachToViewContainerRef(),Uv(Cb(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=m1(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ru(this._lContainer,n);r&&(vu(Cb(this._lContainer),n),Vh(r[he],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ru(this._lContainer,n);return r&&vu(Cb(this._lContainer),n)!=null?new Ji(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function m1(e){return e[_u]}function Cb(e){return e[_u]||(e[_u]=[])}function JA(e,t){let n,r=t[e.index];return ao(r)?n=r:(n=$A(r,t,null,e),t[e.index]=n,bw(t,n)),R3(n,t,e,r),new QA(n,e,t)}function O3(e,t){let n=e[gt],r=n.createComment(""),o=lo(t,e),i=n.parentNode(o);return _h(n,i,r,n.nextSibling(o),!1),r}var R3=L3,P3=()=>!1;function F3(e,t,n){return P3(e,t,n)}function L3(e,t,n,r){if(e[Ki])return;let o;n.type&8?o=$r(r):o=O3(t,n),e[Ki]=o}var Wb=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},qb=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)Aw(t,n).matches!==null&&this.queries[n].setDirty()}},Ih=class{flags;read;predicate;constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=U3(t):this.predicate=t}},Kb=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(t,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Yb=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(t,n,$3(n,i)),this.matchTNodeWithReadOption(t,n,fh(n,t,i,!1,!1))}else r===uo?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,fh(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===ut||o===Ur||o===uo&&n.type&4)this.addMatch(n.index,-2);else{let i=fh(n,t,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function $3(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function V3(e,t){return e.type&11?Yl(e,t):e.type&4?Dw(e,t):null}function j3(e,t,n,r){return n===-1?V3(t,e):n===-2?B3(e,t,r):ku(e,e[he],n,t)}function B3(e,t,n){if(n===ut)return Yl(t,e);if(n===uo)return Dw(t,e);if(n===Ur)return JA(t,e)}function eM(e,t,n,r){let o=t[Ro].queries[r];if(o.matches===null){let i=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(j3(t,u,s[l+1],n.metadata.read))}}o.matches=a}return o.matches}function Xb(e,t,n,r){let o=e.queries.getByIndex(n),i=o.matches;if(i!==null){let s=eM(e,t,o,n);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=t[-l];for(let f=zt;f<u.length;f++){let p=u[f];p[qi]===p[Zt]&&Xb(p[he],p,c,r)}if(u[ca]!==null){let f=u[ca];for(let p=0;p<f.length;p++){let m=f[p];Xb(m[he],m,c,r)}}}}}return r}function Nw(e,t){return e[Ro].queries[t].queryList}function tM(e,t,n){let r=new bh((n&4)===4);return ON(e,t,r,r.destroy),(t[Ro]??=new qb).queries.push(new Wb(r))-1}function nM(e,t,n){let r=Tt();return r.firstCreatePass&&(rM(r,new Ih(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),tM(r,Ee(),t)}function H3(e,t,n,r){let o=Tt();if(o.firstCreatePass){let i=an();rM(o,new Ih(t,n,r),i.index),z3(o,e),(n&2)===2&&(o.staticContentQueries=!0)}return tM(o,Ee(),n)}function U3(e){return e.split(",").map(t=>t.trim())}function rM(e,t,n){e.queries===null&&(e.queries=new Kb),e.queries.track(new Yb(t,n))}function z3(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function Aw(e,t){return e.queries.getByIndex(t)}function oM(e,t){let n=e[he],r=Aw(n,t);return r.crossesNgTemplate?Xb(n,e,t,[]):eM(n,e,r,t)}function Mw(e,t,n){let r,o=lu(()=>{r._dirtyCounter();let i=G3(r,e);if(t&&i===void 0)throw new oe(-951,!1);return i});return r=o[Xt],r._dirtyCounter=Se(0),r._flatValue=void 0,o}function iM(e){return Mw(!0,!1,e)}function sM(e){return Mw(!0,!0,e)}function aM(e){return Mw(!1,!1,e)}function lM(e,t){let n=e[Xt];n._lView=Ee(),n._queryIndex=t,n._queryList=Nw(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function G3(e,t){let n=e._lView,r=e._queryIndex;if(n===void 0||r===void 0||n[be]&4)return t?void 0:ir;let o=Nw(n,r),i=oM(n,r);return o.reset(i,z1),t?o.first:o._changesDetected||e._flatValue===void 0?e._flatValue=o.toArray():e._flatValue}var g1=new Set;function $o(e){g1.has(e)||(g1.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var gi=class{},Uh=class{};var Ch=class extends gi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xh(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=Wv(t);this._bootstrapComponents=aA(i.bootstrap),this._r3Injector=bb(t,n,[{provide:gi,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver},...r],li(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Dh=class extends Uh{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ch(this.moduleType,t,[])}};var Pu=class extends gi{injector;componentFactoryResolver=new xh(this);instance=null;constructor(t){super();let n=new ta([...t.providers,{provide:gi,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],t.parent||Ll(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function zu(e,t,n=null){return new Pu({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var W3=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Kv(!1,n.type),o=r.length>0?zu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:e,providedIn:"environment",factory:()=>new e(Pe(kt))})}return e})();function Xe(e){return Vu(()=>{let t=cM(e),n=fe(B({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===uw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(W3).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||hi.Emulated,styles:e.styles||ir,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&$o("NgStandalone"),uM(n);let r=e.dependencies;return n.directiveDefs=y1(r,q3),n.pipeDefs=y1(r,bN),n.id=X3(n),n})}function q3(e){return ui(e)||qv(e)}function fo(e){return Vu(()=>({type:e.type,bootstrap:e.bootstrap||ir,declarations:e.declarations||ir,imports:e.imports||ir,exports:e.exports||ir,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function K3(e,t){if(e==null)return Gi;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=$h.None,l=null),n[i]=[r,a,l],t[i]=s}return n}function Y3(e){if(e==null)return Gi;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Qt(e){return Vu(()=>{let t=cM(e);return uM(t),t})}function cM(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Gi,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||ir,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:K3(e.inputs,t),outputs:Y3(e.outputs),debugInfo:null}}function uM(e){e.features?.forEach(t=>t(e))}function y1(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let o of n){let i=t(o);i!==null&&r.push(i)}return r}:null}function X3(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Z3(e){return Object.getPrototypeOf(e.prototype).constructor}function Xn(e){let t=Z3(e.type),n=!0,r=[e];for(;t;){let o;if(Fo(e))o=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new oe(903,!1);o=t.\u0275dir}if(o){if(n){r.push(o);let s=e;s.inputs=Db(e.inputs),s.declaredInputs=Db(e.declaredInputs),s.outputs=Db(e.outputs);let a=o.hostBindings;a&&nH(e,a);let l=o.viewQuery,c=o.contentQueries;if(l&&eH(e,l),c&&tH(e,c),Q3(e,o),cN(e.outputs,o.outputs),Fo(o)&&o.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(e),a===Xn&&(n=!1)}}t=Object.getPrototypeOf(t)}J3(r)}function Q3(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function J3(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Gl(o.hostAttrs,n=Gl(n,o.hostAttrs))}}function Db(e){return e===Gi?{}:e===ir?[]:e}function eH(e,t){let n=e.viewQuery;n?e.viewQuery=(r,o)=>{t(r,o),n(r,o)}:e.viewQuery=t}function tH(e,t){let n=e.contentQueries;n?e.contentQueries=(r,o,i)=>{t(r,o,i),n(r,o,i)}:e.contentQueries=t}function nH(e,t){let n=e.hostBindings;n?e.hostBindings=(r,o)=>{t(r,o),n(r,o)}:e.hostBindings=t}function dM(e,t,n,r,o,i,s,a){if(n.firstCreatePass){e.mergedAttrs=Gl(e.mergedAttrs,e.attrs);let u=e.tView=yw(2,e,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),da(e,!1);let l=oH(n,t,e,r);ih()&&Ew(n,t,l,e),Wl(l,t);let c=$A(l,t,l,e);t[r+Lt]=c,bw(t,c),F3(c,e,t)}function rH(e,t,n,r,o,i,s,a,l,c,u){let f=n+Lt,p;return t.firstCreatePass?(p=ya(t,f,4,s||null,a||null),cb()&&GA(t,e,p,jr(t.consts,c),IA),O1(t,p)):p=t.data[f],dM(p,e,t,n,r,o,i,l),Eu(p)&&xw(t,e,p),c!=null&&Bh(e,p,u),p}function Fu(e,t,n,r,o,i,s,a,l,c,u){let f=n+Lt,p;if(t.firstCreatePass){if(p=ya(t,f,4,s||null,a||null),c!=null){let m=jr(t.consts,c);p.localNames=[];for(let w=0;w<m.length;w+=2)p.localNames.push(m[w],-1)}}else p=t.data[f];return dM(p,e,t,n,r,o,i,l),c!=null&&Bh(e,p,u),p}function Zl(e,t,n,r,o,i,s,a){let l=Ee(),c=Tt(),u=jr(c.consts,i);return rH(l,c,e,t,n,r,o,u,void 0,s,a),Zl}var oH=iH;function iH(e,t,n,r){return sh(!0),t[gt].createComment("")}var zh=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(zh||{}),va=new ee(""),fM=!1,Zb=class extends Me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,TN()&&(this.destroyRef=O(Tr,{optional:!0})??void 0,this.pendingTasks=O(pi,{optional:!0})??void 0)}emit(t){let n=me(null);try{super.next(t)}finally{me(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof mt&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ct=Zb;function pM(e){let t,n;function r(){e=fa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function v1(e){return queueMicrotask(()=>e()),()=>{e=fa}}var kw="isAngularZone",Nh=kw+"_ID",sH=0,We=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ct(!1);onMicrotaskEmpty=new ct(!1);onStable=new ct(!1);onError=new ct(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=fM}=t;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,cH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kw)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new oe(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,aH,fa,fa);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},aH={};function Ow(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function lH(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){pM(()=>{e.callbackScheduled=!1,Qb(e),e.isCheckStableRunning=!0,Ow(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Qb(e)}function cH(e){let t=()=>{lH(e)},n=sH++;e._inner=e._inner.fork({name:"angular",properties:{[kw]:!0,[Nh]:n,[Nh+n]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(uH(l))return r.invokeTask(i,s,a,l);try{return b1(e),r.invokeTask(i,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),w1(e)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return b1(e),r.invoke(i,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!dH(l)&&t(),w1(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Qb(e),Ow(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Qb(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function b1(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function w1(e){e._nesting--,Ow(e)}var Lu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ct;onMicrotaskEmpty=new ct;onStable=new ct;onError=new ct;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function uH(e){return hM(e,"__ignore_ng_zone__")}function dH(e){return hM(e,"__scheduler_tick__")}function hM(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Rw=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:e,providedIn:"root",factory:()=>new e})}return e})(),mM=[0,1,2,3],gM=(()=>{class e{ngZone=O(We);scheduler=O(io);errorHandler=O(Sr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(va,{optional:!0})}execute(){let n=this.sequences.size>0;n&&rt(16),this.executing=!0;for(let r of mM)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&rt(17)}register(n){let{view:r}=n;r!==void 0?((r[aa]??=[]).push(n),Xi(r),r[be]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(zh.AFTER_NEXT_RENDER,n):n()}static \u0275prov=q({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ah=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,o,i,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[aa];t&&(this.view[aa]=t.filter(n=>n!==this))}};function _t(e,t){let n=t?.injector??O(Ye);return $o("NgAfterNextRender"),pH(e,n,t,!0)}function fH(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function pH(e,t,n,r){let o=t.get(Rw);o.impl??=t.get(gM);let i=t.get(va,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(Tr):null,a=t.get(Hl,null,{optional:!0}),l=new Ah(o.impl,fH(e),a?.view,r,s,i?.snapshot(null));return o.impl.register(l),l}var Pw=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Fw=new ee("");function ba(e){return!!e&&typeof e.then=="function"}function yM(e){return!!e&&typeof e.subscribe=="function"}var vM=new ee("");var Lw=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(vM,{optional:!0})??[];injector=O(Ye);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=qn(this.injector,o);if(ba(i))n.push(i);else if(yM(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Gh=new ee("");function bM(){iv(()=>{let e="";throw new oe(600,e)})}function wM(e){return e.isBoundToModule}var hH=10;var Ir=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Br);afterRenderManager=O(Rw);zonelessEnabled=O(Du);rootEffectScheduler=O(Nu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(pi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(we(n=>!n))}constructor(){O(va,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(kt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Ye.NULL){return this._injector.get(We).run(()=>{rt(10);let s=n instanceof Hh;if(!this._injector.get(Lw).done){let w="";throw new oe(405,w)}let l;s?l=n:l=this._injector.get(Uu).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=wM(l)?void 0:this._injector.get(gi),u=r||l.selector,f=l.create(o,[],u,c),p=f.location.nativeElement,m=f.injector.get(Fw,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Mu(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),rt(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){rt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(zh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new oe(101,!1);let n=me(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,me(n),this.afterTick.next(),rt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(On,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<hH;)rt(14),this.synchronizeOnce(),rt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!xu(o))continue;let i=r&&!this.zonelessEnabled?0:1;RA(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>xu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Mu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Gh,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Mu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new oe(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Mu(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function cn(e,t,n,r){let o=Ee(),i=Zi();if(ns(o,i,t)){let s=Tt(),a=Iu();FB(a,o,e,t,n,r)}return cn}var bse=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Jb=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),o=Math.max(t,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t,!0))}};function Nb(e,t,n,r,o){return e===n&&Object.is(t,r)?1:Object.is(o(e,t),o(n,r))?-1:0}function mH(e,t,n){let r,o,i=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;i<=s&&i<=l;){let c=e.at(i),u=t[i],f=Nb(i,c,i,u,n);if(f!==0){f<0&&e.updateValue(i,u),i++;continue}let p=e.at(s),m=t[l],w=Nb(s,p,l,m,n);if(w!==0){w<0&&e.updateValue(s,m),s--,l--;continue}let x=n(i,c),T=n(s,p),D=n(i,u);if(Object.is(D,T)){let P=n(l,m);Object.is(P,x)?(e.swap(i,s),e.updateValue(s,m),l--,s--):e.move(s,i),e.updateValue(i,u),i++;continue}if(r??=new Mh,o??=E1(e,i,s,n),ew(e,r,i,D))e.updateValue(i,u),i++,s++;else if(o.has(D))r.set(x,e.detach(i)),s--;else{let P=e.create(i,t[i]);e.attach(i,P),i++,s++}}for(;i<=l;)_1(e,r,n,i,t[i]),i++}else if(t!=null){let l=t[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=e.at(i),f=c.value,p=Nb(i,u,i,f,n);if(p!==0)p<0&&e.updateValue(i,f),i++,c=l.next();else{r??=new Mh,o??=E1(e,i,s,n);let m=n(i,f);if(ew(e,r,i,m))e.updateValue(i,f),i++,s++,c=l.next();else if(!o.has(m))e.attach(i,e.create(i,f)),i++,s++,c=l.next();else{let w=n(i,u);r.set(w,e.detach(i)),s--}}}for(;!c.done;)_1(e,r,n,e.length,c.value),c=l.next()}for(;i<=s;)e.destroy(e.detach(s--));r?.forEach(l=>{e.destroy(l)})}function ew(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function _1(e,t,n,r,o){if(ew(e,t,r,n(r,o)))e.updateValue(r,o);else{let i=e.create(r,o);e.attach(r,i)}}function E1(e,t,n,r){let o=new Set;for(let i=t;i<=n;i++)o.add(r(i,e.at(i)));return o}var Mh=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),t(r,n)}}};function un(e,t,n,r,o,i,s,a){$o("NgControlFlow");let l=Ee(),c=Tt(),u=jr(c.consts,i);return Fu(l,c,e,t,n,r,o,u,256,s,a),$w}function $w(e,t,n,r,o,i,s,a){$o("NgControlFlow");let l=Ee(),c=Tt(),u=jr(c.consts,i);return Fu(l,c,e,t,n,r,o,u,512,s,a),$w}function dn(e,t){$o("NgControlFlow");let n=Ee(),r=Zi(),o=n[r]!==yi?n[r]:-1,i=o!==-1?kh(n,Lt+o):void 0,s=0;if(ns(n,r,e)){let a=me(null);try{if(i!==void 0&&jA(i,s),e!==-1){let l=Lt+e,c=kh(n,l),u=ow(n[he],l),f=HA(c,u,n),p=Bu(n,u,t,{dehydratedView:f});Hu(c,p,s,ql(u,f))}}finally{me(a)}}else if(i!==void 0){let a=VA(i,s);a!==void 0&&(a[Bt]=t)}}var tw=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-zt}};function Gu(e){return e}var nw=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function wa(e,t,n,r,o,i,s,a,l,c,u,f,p){$o("NgControlFlow");let m=Ee(),w=Tt(),x=l!==void 0,T=Ee(),D=a?s.bind(T[Yn][Bt]):s,P=new nw(x,D);T[Lt+e]=P,Fu(m,w,e+1,t,n,r,o,jr(w.consts,i),256),x&&Fu(m,w,e+2,l,c,u,f,jr(w.consts,p),512)}var rw=class extends Jb{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-zt}at(t){return this.getLView(t)[Bt].$implicit}attach(t,n){let r=n[oa];this.needsIndexUpdate||=t!==this.length,Hu(this.lContainer,n,t,ql(this.templateTNode,r))}detach(t,n){return this.needsIndexUpdate||=t!==this.length-1,n&&gH(this.lContainer,t),yH(this.lContainer,t)}create(t,n){let r=Eh(this.lContainer,this.templateTNode.tView.ssrId),o=Bu(this.hostLView,this.templateTNode,new tw(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(t){Vh(t[he],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Bt].$index=t}getLView(t){return vH(this.lContainer,t)}};function _a(e){let t=me(null),n=fi();try{let r=Ee(),o=r[he],i=r[n],s=n+1,a=kh(r,s);if(i.liveCollection===void 0){let c=ow(o,s);i.liveCollection=new rw(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(mH(l,e,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=Zi(),u=l.length===0;if(ns(r,c,u)){let f=n+2,p=kh(r,f);if(u){let m=ow(o,f),w=HA(p,m,r),x=Bu(r,m,void 0,{dehydratedView:w});Hu(p,x,0,ql(m,w))}else o.firstUpdatePass&&s3(p),jA(p,0)}}}finally{me(t)}}function kh(e,t){return e[t]}function gH(e,t){if(e.length<=zt)return;let n=zt+t,r=e[n];r&&r[la]&&(r[la].skipLeaveAnimations=!0)}function yH(e,t){return Ru(e,t)}function vH(e,t){return VA(e,t)}function ow(e,t){return Su(e,t)}function Rn(e,t,n){let r=Ee(),o=Zi();if(ns(r,o,t)){let i=Tt(),s=Iu();xA(s,r,e,t,r[gt],n)}return Rn}function S1(e,t,n,r,o){Tw(t,e,n,o?"class":"style",r)}function ae(e,t,n,r){let o=Ee(),i=o[he],s=e+Lt,a=i.firstCreatePass?qA(s,o,2,t,IA,cb(),n,r):i.data[s];if(CA(a,o,e,t,_M),Eu(a)){let l=o[he];xw(l,o,a),rA(l,a,o)}return r!=null&&Bh(o,a),ae}function ce(){let e=Tt(),t=an(),n=DA(t);return e.firstCreatePass&&KA(e,n),db(n)&&fb(),lb(),n.classesWithoutHost!=null&&Sj(n)&&S1(e,n,Ee(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&xj(n)&&S1(e,n,Ee(),n.stylesWithoutHost,!1),ce}function Zn(e,t,n,r){return ae(e,t,n,r),ce(),Zn}function Je(e,t,n,r){let o=Ee(),i=o[he],s=e+Lt,a=i.firstCreatePass?w3(s,i,2,t,n,r):i.data[s];return CA(a,o,e,t,_M),r!=null&&Bh(o,a),Je}function st(){let e=an(),t=DA(e);return db(t)&&fb(),lb(),st}function et(e,t,n,r){return Je(e,t,n,r),st(),et}var _M=(e,t,n,r,o)=>(sh(!0),uA(t[gt],r,KN()));function Cr(){return Ee()}function Wu(e,t,n){let r=Ee(),o=Zi();if(ns(r,o,t)){let i=Tt(),s=Iu();TA(s,r,e,t,r[gt],n)}return Wu}var qu="en-US";var bH=qu;function EM(e){typeof e=="string"&&(bH=e.toLowerCase().replace(/_/g,"-"))}function Jt(e,t,n){let r=Ee(),o=Tt(),i=an();return SM(o,r,r[gt],i,e,t,n),Jt}function bi(e,t,n){let r=Ee(),o=Tt(),i=an();return(i.type&3||n)&&YA(i,o,r,n,r[gt],e,t,hh(i,r,t)),bi}function SM(e,t,n,r,o,i,s){let a=!0,l=null;if((r.type&3||s)&&(l??=hh(r,t,i),YA(r,e,t,s,n,o,i,l)&&(a=!1)),a){let c=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],m=u[f+1];l??=hh(r,t,i),p1(r,t,p,m,o,l)}if(c&&c.length)for(let f of c)l??=hh(r,t,i),p1(r,t,f,o,o,l)}}function dt(e=1){return qN(e)}function wH(e,t){let n=null,r=eB(e);for(let o=0;o<t.length;o++){let i=t[o];if(i==="*"){n=o;continue}if(r===null?cA(e,i,!0):rB(r,i))return o}return n}function Ea(e){let t=Ee()[Yn][Kn];if(!t.projection){let n=e?e.length:1,r=t.projection=gN(n,null),o=r.slice(),i=t.child;for(;i!==null;){if(i.type!==128){let s=e?wH(i,e):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function Sa(e,t=0,n,r,o,i){let s=Ee(),a=Tt(),l=r?e+1:null;l!==null&&Fu(s,a,l,r,o,i,null,n);let c=ya(a,Lt+e,16,null,n||null);c.projection===null&&(c.projection=t),mb();let f=!s[oa]||ub();s[Yn][Kn].projection[c.projection]===null&&l!==null?_H(s,a,l):f&&!Lh(c)&&TB(a,s,c)}function _H(e,t,n){let r=Lt+n,o=t.data[r],i=e[r],s=Eh(i,o.tView.ssrId),a=Bu(e,o,void 0,{dehydratedView:s});Hu(i,a,0,ql(o,s))}function Ku(e,t,n){nM(e,t,n)}function Yu(e){let t=Ee(),n=Tt(),r=nh();Tu(r+1);let o=Aw(n,r);if(e.dirty&&NN(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let i=oM(t,r);e.reset(i,z1),e.notifyOnChanges()}return!0}return!1}function Xu(){return Nw(Ee(),nh())}function Vw(e,t,n,r,o){lM(t,H3(e,n,r,o))}function fn(e,t,n,r){lM(e,nM(t,n,r))}function ar(e=1){Tu(nh()+e)}function ch(e,t){return e<<17|t<<2}function ga(e){return e>>17&32767}function EH(e){return(e&2)==2}function SH(e,t){return e&131071|t<<17}function iw(e){return e|2}function Kl(e){return(e&131068)>>2}function Ab(e,t){return e&-131069|t<<2}function xH(e){return(e&1)===1}function sw(e){return e|1}function TH(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=ga(s),l=Kl(s);e[r]=n;let c=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||Fl(f,u)>0)&&(c=!0)}else u=n;if(o)if(l!==0){let p=ga(e[a+1]);e[r+1]=ch(p,a),p!==0&&(e[p+1]=Ab(e[p+1],r)),e[a+1]=SH(e[a+1],r)}else e[r+1]=ch(a,0),a!==0&&(e[a+1]=Ab(e[a+1],r)),a=r;else e[r+1]=ch(l,0),a===0?a=r:e[l+1]=Ab(e[l+1],r),l=r;c&&(e[r+1]=iw(e[r+1])),x1(e,u,r,!0),x1(e,u,r,!1),IH(t,u,e,r,i),s=ch(a,l),i?t.classBindings=s:t.styleBindings=s}function IH(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Fl(i,t)>=0&&(n[r+1]=sw(n[r+1]))}function x1(e,t,n,r){let o=e[n+1],i=t===null,s=r?ga(o):Kl(o),a=!1;for(;s!==0&&(a===!1||i);){let l=e[s],c=e[s+1];CH(l,t)&&(a=!0,e[s+1]=r?sw(c):iw(c)),s=r?ga(c):Kl(c)}a&&(e[n+1]=r?iw(o):sw(o))}function CH(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Fl(e,t)>=0:!1}function lr(e,t,n){return xM(e,t,n,!1),lr}function xa(e,t){return xM(e,t,null,!0),xa}function xM(e,t,n,r){let o=Ee(),i=Tt(),s=VN(2);if(i.firstUpdatePass&&NH(i,e,s,r),t!==yi&&ns(o,s,t)){let a=i.data[fi()];RH(i,a,o,o[gt],e,o[s+1]=PH(t,n),r,s)}}function DH(e,t){return t>=e.expandoStartIndex}function NH(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[fi()],s=DH(e,n);FH(i,r)&&t===null&&!s&&(t=!1),t=AH(o,i,t,r),TH(o,i,t,n,s,r)}}function AH(e,t,n,r){let o=UN(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=Mb(null,e,t,n,r),n=$u(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=Mb(o,e,t,n,r),i===null){let l=MH(e,t,r);l!==void 0&&Array.isArray(l)&&(l=Mb(null,e,t,l[1],r),l=$u(l,t.attrs,r),kH(e,t,r,l))}else i=OH(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function MH(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Kl(r)!==0)return e[ga(r)]}function kH(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[ga(o)]=r}function OH(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=$u(r,s,n)}return $u(r,t.attrs,n)}function Mb(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=$u(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function $u(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),vN(e,s,n?!0:t[++i]))}return e===void 0?null:e}function RH(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=xH(c)?T1(l,t,n,o,Kl(c),s):void 0;if(!Oh(u)){Oh(i)||EH(c)&&(i=T1(l,null,n,o,a,s));let f=nb(fi(),n);CB(r,s,f,o,i)}}function T1(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let l=e[o],c=Array.isArray(l),u=c?l[1]:l,f=u===null,p=n[o+1];p===yi&&(p=f?ir:void 0);let m=f?Xp(p,r):u===r?p:void 0;if(c&&!Oh(m)&&(m=Xp(l,r)),Oh(m)&&(a=m,s))return a;let w=e[o+1];o=s?ga(w):Kl(w)}if(t!==null){let l=i?t.residualClasses:t.residualStyles;l!=null&&(a=Xp(l,r))}return a}function Oh(e){return e!==void 0}function PH(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=li(pw(e)))),e}function FH(e,t){return(e.flags&(t?8:16))!==0}function Ze(e,t=""){let n=Ee(),r=Tt(),o=e+Lt,i=r.firstCreatePass?ya(r,o,1,t,null):r.data[o],s=LH(r,n,i,t,e);n[o]=s,ih()&&Ew(r,n,s,i),da(i,!1)}var LH=(e,t,n,r,o)=>(sh(!0),aB(t[gt],r));function $H(e,t,n,r=""){return ns(e,Zi(),n)?t+yu(n)+r:yi}function Ql(e){return Ta("",e),Ql}function Ta(e,t,n){let r=Ee(),o=$H(r,e,t,n);return o!==yi&&VH(r,fi(),o),Ta}function VH(e,t,n){let r=nb(t,e);lB(e[gt],r,n)}function pn(e,t,n){Eb(t)&&(t=t());let r=Ee(),o=Zi();if(ns(r,o,t)){let i=Tt(),s=Iu();xA(s,r,e,t,r[gt],n)}return pn}function xn(e,t){let n=Eb(e);return n&&e.set(t),n}function hn(e,t){let n=Ee(),r=Tt(),o=an();return SM(r,n,n[gt],o,e,t),hn}var TM={};function Wh(e){let t=Tt(),n=Ee(),r=e+Lt,o=ya(t,r,128,null,null);return da(o,!1),Qp(t,n,r,TM),Wh}function jw(e){$o("NgLet");let t=Tt(),n=Ee(),r=fi();return Qp(t,n,r,e),e}function cr(e){let t=LN(),n=DN(t,Lt+e);if(n===TM)throw new oe(314,!1);return n}function jH(e,t,n){let r=Tt();if(r.firstCreatePass){let o=Fo(e);aw(n,r.data,r.blueprint,o,!0),aw(t,r.data,r.blueprint,o,!1)}}function aw(e,t,n,r,o){if(e=En(e),Array.isArray(e))for(let i=0;i<e.length;i++)aw(e[i],t,n,r,o);else{let i=Tt(),s=Ee(),a=an(),l=ea(e)?e:En(e.provide),c=Xv(e),u=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ea(e)||!e.multi){let m=new ha(c,o,Sn,null),w=Ob(l,t,o?u:u+p,f);w===-1?(Pb(vh(a,s),i,l),kb(i,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[w]=m,s[w]=m)}else{let m=Ob(l,t,u+p,f),w=Ob(l,t,u,u+p),x=m>=0&&n[m],T=w>=0&&n[w];if(o&&!T||!o&&!x){Pb(vh(a,s),i,l);let D=UH(o?HH:BH,n.length,o,r,c,e);!o&&T&&(n[w].providerFactory=D),kb(i,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(D),s.push(D)}else{let D=IM(n[o?w:m],c,!o&&r);kb(i,e,m>-1?m:w,D)}!o&&r&&T&&n[w].componentProviders++}}}function kb(e,t,n,r){let o=ea(t),i=xN(t);if(o||i){let l=(i?En(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function IM(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Ob(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function BH(e,t,n,r,o){return lw(this.multi,[])}function HH(e,t,n,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ku(r,r[he],this.providerFactory.index,o);s=l.slice(0,a),lw(i,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],lw(i,s);return s}function lw(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function UH(e,t,n,r,o,i){let s=new ha(e,n,Sn,null);return s.multi=[],s.index=t,s.componentProviders=0,IM(s,o,r&&!n),s}function zr(e,t=[]){return n=>{n.providersResolver=(r,o)=>jH(r,o?o(e):e,t)}}var Rh=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Bw=(()=>{class e{compileModuleSync(n){return new Dh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=Wv(n),i=aA(o.declarations).reduce((s,a)=>{let l=ui(a);return l&&s.push(new ma(l)),s},[]);return new Rh(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var zH=(()=>{class e{zone=O(We);changeDetectionScheduler=O(io);applicationRef=O(Ir);applicationErrorHandler=O(Br);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function CM({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new We(fe(B({},DM()),{scheduleInRootZone:n})),[{provide:We,useFactory:e},{provide:ci,multi:!0,useFactory:()=>{let r=O(zH,{optional:!0});return()=>r.initialize()}},{provide:ci,multi:!0,useFactory:()=>{let r=O(GH);return()=>{r.initialize()}}},t===!0?{provide:Sb,useValue:!0}:[],{provide:lh,useValue:n??fM},{provide:Br,useFactory:()=>{let r=O(We),o=O(kt),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(Sr),i.handleError(s))})}}}]}function DM(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var GH=(()=>{class e{subscription=new mt;initialized=!1;zone=O(We);pendingTasks=O(pi);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Hw=(()=>{class e{applicationErrorHandler=O(Br);appRef=O(Ir);taskService=O(pi);ngZone=O(We);zonelessEnabled=O(Du);tracing=O(va,{optional:!0});disableScheduling=O(Sb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(lh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?v1:pM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,v1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Uw(){return $o("NgZoneless"),ra([{provide:io,useExisting:Hw},{provide:We,useClass:Lu},{provide:Du,useValue:!0},{provide:lh,useValue:!1},[]])}function WH(){return typeof $localize<"u"&&$localize.locale||qu}var zw=new ee("",{providedIn:"root",factory:()=>O(zw,{optional:!0,skipSelf:!0})||WH()});var Zu=class{destroyed=!1;listeners=null;errorHandler=O(Sr,{optional:!0});destroyRef=O(Tr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new oe(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(mu(953,!1));return}if(this.listeners===null)return;let n=me(null);try{for(let r of this.listeners)try{r(t)}catch(o){this.errorHandler?.handleError(o)}}finally{me(n)}}};function Pn(e){return oN(e)}function Vo(e,t){return lu(e,t?.equal)}var Gw=class{[Xt];constructor(t){this[Xt]=t}destroy(){this[Xt].destroy()}};function wi(e,t){let n=t?.injector??O(Ye),r=t?.manualCleanup!==!0?n.get(Tr):null,o,i=n.get(Hl,null,{optional:!0}),s=n.get(io);return i!==null?(o=YH(i.view,s,e),r instanceof hu&&r._lView===i.view&&(r=null)):o=XH(e,n.get(Nu),s),o.injector=n,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new Gw(o)}var NM=fe(B({},iN),{cleanupFns:void 0,zone:null,onDestroyFn:fa,run(){let e=Bl(!1);try{sN(this)}finally{Bl(e)}},cleanup(){if(!this.cleanupFns?.length)return;let e=me(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],me(e)}}}),qH=fe(B({},NM),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Us(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),KH=fe(B({},NM),{consumerMarkedDirty(){this.view[be]|=8192,Xi(this.view),this.notifier.notify(13)},destroy(){Us(this),this.onDestroyFn(),this.cleanup(),this.view[di]?.delete(this)}});function YH(e,t,n){let r=Object.create(KH);return r.view=e,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=t,r.fn=AM(r,n),e[di]??=new Set,e[di].add(r),r.consumerMarkedDirty(r),r}function XH(e,t,n){let r=Object.create(qH);return r.fn=AM(r,e),r.scheduler=t,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function AM(e,t){return()=>{t(n=>(e.cleanupFns??=[]).push(n))}}var Kh=Symbol("InputSignalNode#UNSET"),PM=fe(B({},hp),{transformFn:void 0,applyValueToInputSignal(e,t){zs(e,t)}});function FM(e,t){let n=Object.create(PM);n.value=e,n.transformFn=t?.transform;function r(){if(Bs(n),n.value===Kh){let o=null;throw new oe(-950,o)}return n.value}return r[Xt]=n,r}var dU=new ee("");dU.__NG_ELEMENT_ID__=e=>{let t=an();if(t===null)throw new oe(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new oe(204,!1)};function Jl(e){return new Zu}function MM(e,t){return FM(e,t)}function fU(e){return FM(Kh,e)}var Ot=(MM.required=fU,MM);function kM(e,t){return iM(t)}function pU(e,t){return sM(t)}var Tn=(kM.required=pU,kM);function LM(e,t){return aM(t)}function $M(e,t){let n=Object.create(PM),r=new Zu;n.value=e;function o(){return Bs(n),OM(n.value),n.value}return o[Xt]=n,o.asReadonly=ah.bind(o),o.set=i=>{n.equal(n.value,i)||(zs(n,i),r.emit(i))},o.update=i=>{OM(n.value),o.set(i(n.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function OM(e){if(e===Kh)throw new oe(952,!1)}function RM(e,t){return $M(e,t)}function hU(e){return $M(Kh,e)}var mn=(RM.required=hU,RM);var Ww=new ee(""),mU=new ee("");function Qu(e){return!e.moduleRef}function gU(e){let t=Qu(e)?e.r3Injector:e.moduleRef.injector,n=t.get(We);return n.run(()=>{Qu(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Br),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Qu(e)){let i=()=>t.destroy(),s=e.platformInjector.get(Ww);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Ww);s.add(i),e.moduleRef.onDestroy(()=>{Mu(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return vU(r,n,()=>{let i=t.get(pi),s=i.add(),a=t.get(Lw);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(zw,qu);if(EM(l||qu),!t.get(mU,!0))return Qu(e)?t.get(Ir):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Qu(e)){let u=t.get(Ir);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return yU?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void i.remove(s))})})}var yU;function vU(e,t,n){try{let r=n();return ba(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var qh=null;function bU(e=[],t){return Ye.create({name:t,providers:[{provide:bu,useValue:"platform"},{provide:Ww,useValue:new Set([()=>qh=null])},...e]})}function wU(e=[]){if(qh)return qh;let t=bU(e);return qh=t,bM(),_U(t),t}function _U(e){let t=e.get(Ph,null);qn(e,()=>{t?.forEach(n=>n())})}var Ia=(()=>{class e{static __NG_ELEMENT_ID__=EU}return e})();function EU(e){return SU(an(),Ee(),(e&16)===16)}function SU(e,t,n){if(Yi(e)&&!n){let r=Vr(e.index,t);return new Ji(r,r)}else if(e.type&175){let r=t[Yn];return new Ji(r,t)}return null}function VM(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:o}=e;rt(8);try{let i=o?.injector??wU(r),s=[CM({}),{provide:io,useExisting:Hw},XN,...n||[]],a=new Pu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return gU({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(i){return Promise.reject(i)}finally{rt(9)}}function ec(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Yh(e,t){let n=ui(e),r=t.elementInjector||Ll();return new ma(n).create(r,t.projectableNodes,t.hostElement,t.environmentInjector,t.directives,t.bindings)}var HM=null;function Gr(){return HM}function qw(e){HM??=e}var Ju=class{},Kw=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(UM),providedIn:"platform"})}return e})();var UM=(()=>{class e extends Kw{_location;_history;_doc=O(Ue);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gr().getBaseHref(this._doc)}onPopState(n){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Gr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function zM(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function jM(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function os(e){return e&&e[0]!=="?"?`?${e}`:e}var Xh=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(WM),providedIn:"root"})}return e})(),GM=new ee(""),WM=(()=>{class e extends Xh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zM(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+os(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+os(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+os(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(Pe(Kw),Pe(GM,8))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),is=(()=>{class e{_subject=new Me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=IU(jM(BM(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+os(r))}normalize(n){return e.stripTrailingSlash(TU(this._basePath,BM(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+os(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+os(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=os;static joinWithSlash=zM;static stripTrailingSlash=jM;static \u0275fac=function(r){return new(r||e)(Pe(Xh))};static \u0275prov=q({token:e,factory:()=>xU(),providedIn:"root"})}return e})();function xU(){return new is(Pe(Xh))}function TU(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function BM(e){return e.replace(/\/index.html$/,"")}function IU(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function Yw(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var ed=class{};var Xw="browser";function qM(e){return e===Xw}var Qh=new ee(""),t_=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(Pe(Qh),Pe(We))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),td=class{_doc;constructor(t){this._doc=t}manager},Zw="ng-app-id";function KM(e){for(let t of e)t.remove()}function YM(e,t){let n=t.createElement("style");return n.textContent=e,n}function CU(e,t,n,r){let o=e.head?.querySelectorAll(`style[${Zw}="${t}"],link[${Zw}="${t}"]`);if(o)for(let i of o)i.removeAttribute(Zw),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Jw(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var n_=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,CU(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,YM);r?.forEach(o=>this.addUsage(o,this.external,Jw))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(KM(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])KM(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,YM(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,Jw(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(Pe(Ue),Pe(Xl),Pe(Fh,8),Pe(ts))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),Qw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},r_=/%COMP%/g;var ZM="%COMP%",DU=`_nghost-${ZM}`,NU=`_ngcontent-${ZM}`,AU=!0,MU=new ee("",{providedIn:"root",factory:()=>AU});function kU(e){return NU.replace(r_,e)}function OU(e){return DU.replace(r_,e)}function QM(e,t){return t.map(n=>n.replace(r_,e))}var o_=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,l,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new nd(n,s,l,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof Zh?o.applyToHost(n):o instanceof rd&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case hi.Emulated:i=new Zh(l,c,r,this.appId,u,s,a,f,p);break;case hi.ShadowDom:return new e_(l,c,n,r,s,a,this.nonce,f,p);default:i=new rd(l,c,r,u,s,a,f,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(Pe(t_),Pe(n_),Pe(Xl),Pe(MU),Pe(Ue),Pe(ts),Pe(We),Pe(Fh),Pe(va,8))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),nd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Qw[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(XM(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(XM(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new oe(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=Qw[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=Qw[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(mi.DashCase|mi.Important)?t.style.setProperty(n,r,o&mi.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&mi.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=Gr().getGlobalEventTarget(this.doc,t),!t))throw new oe(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function XM(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var e_=class extends nd{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,i,s,a,l,c){super(t,i,s,l,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=QM(o.id,u);for(let p of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let f=o.getExternalStyles?.();if(f)for(let p of f){let m=Jw(p,i);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rd=class extends nd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,l,c){super(t,i,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?QM(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ju.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zh=class extends rd{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(t,n,r,i,s,a,l,c,u),this.contentAttr=kU(u),this.hostAttr=OU(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Jh=class e extends Ju{supportsDOMEvents=!0;static makeCurrent(){qw(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=RU();return n==null?null:PU(n)}resetBaseElement(){od=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Yw(document.cookie,t)}},od=null;function RU(){return od=od||document.head.querySelector("base"),od?od.getAttribute("href"):null}function PU(e){return new URL(e,document.baseURI).pathname}var FU=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),ek=(()=>{class e extends td{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||e)(Pe(Ue))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),JM=["alt","control","meta","shift"],LU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$U={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},tk=(()=>{class e extends td{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gr().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JM.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=LU[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),JM.forEach(s=>{if(s!==o){let a=$U[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(Pe(Ue))};static \u0275prov=q({token:e,factory:e.\u0275fac})}return e})();function i_(e,t,n){let r=B({rootComponent:e,platformRef:n?.platformRef},VU(t));return VM(r)}function VU(e){return{appProviders:[...zU,...e?.providers??[]],platformProviders:UU}}function jU(){Jh.makeCurrent()}function BU(){return new Sr}function HU(){return dw(document),document}var UU=[{provide:ts,useValue:Xw},{provide:Ph,useValue:jU,multi:!0},{provide:Ue,useFactory:HU}];var zU=[{provide:bu,useValue:"root"},{provide:Sr,useFactory:BU},{provide:Qh,useClass:ek,multi:!0,deps:[Ue]},{provide:Qh,useClass:tk,multi:!0,deps:[Ue]},o_,n_,t_,{provide:On,useExisting:o_},{provide:ed,useClass:FU},[]];var nk=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(Pe(Ue))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ke="primary",yd=Symbol("RouteTitle"),u_=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function sc(e){return new u_(e)}function WU(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=e[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function qU(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!jo(e[n],t[n]))return!1;return!0}function jo(e,t){let n=e?d_(e):void 0,r=t?d_(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!uk(e[o],t[o]))return!1;return!0}function d_(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function uk(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function dk(e){return e.length>0?e[e.length-1]:null}function Si(e){return Fp(e)?e:ba(e)?Ft(Promise.resolve(e)):ge(e)}var KU={exact:pk,subset:hk},fk={exact:YU,subset:XU,ignored:()=>!0};function rk(e,t,n){return KU[n.paths](e.root,t.root,n.matrixParams)&&fk[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function YU(e,t){return jo(e,t)}function pk(e,t,n){if(!Da(e.segments,t.segments)||!nm(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!pk(e.children[r],t.children[r],n))return!1;return!0}function XU(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>uk(e[n],t[n]))}function hk(e,t,n){return mk(e,t,t.segments,n)}function mk(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!Da(o,n)||t.hasChildren()||!nm(o,n,r))}else if(e.segments.length===n.length){if(!Da(e.segments,n)||!nm(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!hk(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!Da(e.segments,o)||!nm(e.segments,o,r)||!e.children[ke]?!1:mk(e.children[ke],t,i,r)}}function nm(e,t,n){return t.every((r,o)=>fk[n](e[o].parameters,r.parameters))}var Ei=class{root;queryParams;fragment;_queryParamMap;constructor(t=new nt([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){return JU.serialize(this)}},nt=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rm(this)}},Ca=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=sc(this.parameters),this._parameterMap}toString(){return yk(this)}};function ZU(e,t){return Da(e,t)&&e.every((n,r)=>jo(n.parameters,t[r].parameters))}function Da(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function QU(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===ke&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==ke&&(n=n.concat(t(o,r)))}),n}var mm=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>new ac,providedIn:"root"})}return e})(),ac=class{parse(t){let n=new p_(t);return new Ei(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${id(t.root,!0)}`,r=nz(t.queryParams),o=typeof t.fragment=="string"?`#${ez(t.fragment)}`:"";return`${n}${r}${o}`}},JU=new ac;function rm(e){return e.segments.map(t=>yk(t)).join("/")}function id(e,t){if(!e.hasChildren())return rm(e);if(t){let n=e.children[ke]?id(e.children[ke],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==ke&&r.push(`${o}:${id(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QU(e,(r,o)=>o===ke?[id(e.children[ke],!1)]:[`${o}:${id(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[ke]!=null?`${rm(e)}/${n[0]}`:`${rm(e)}/(${n.join("//")})`}}function gk(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function em(e){return gk(e).replace(/%3B/gi,";")}function ez(e){return encodeURI(e)}function f_(e){return gk(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function om(e){return decodeURIComponent(e)}function ok(e){return om(e.replace(/\+/g,"%20"))}function yk(e){return`${f_(e.path)}${tz(e.parameters)}`}function tz(e){return Object.entries(e).map(([t,n])=>`;${f_(t)}=${f_(n)}`).join("")}function nz(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${em(n)}=${em(o)}`).join("&"):`${em(n)}=${em(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var rz=/^[^\/()?;#]+/;function s_(e){let t=e.match(rz);return t?t[0]:""}var oz=/^[^\/()?;=#]+/;function iz(e){let t=e.match(oz);return t?t[0]:""}var sz=/^[^=?&#]+/;function az(e){let t=e.match(sz);return t?t[0]:""}var lz=/^[^&#]+/;function cz(e){let t=e.match(lz);return t?t[0]:""}var p_=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[ke]=new nt(t,n)),r}parseSegment(){let t=s_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(t),new Ca(om(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=iz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=s_(this.remaining);o&&(r=o,this.capture(r))}t[om(n)]=om(r)}parseQueryParam(t){let n=az(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=cz(this.remaining);s&&(r=s,this.capture(r))}let o=ok(n),i=ok(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=s_(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new oe(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ke);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[ke]:new nt([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new oe(4011,!1)}};function vk(e){return e.segments.length>0?new nt([],{[ke]:e}):e}function bk(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=bk(o);if(r===ke&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new nt(e.segments,t);return uz(n)}function uz(e){if(e.numberOfChildren===1&&e.children[ke]){let t=e.children[ke];return new nt(e.segments.concat(t.segments),t.children)}return e}function lc(e){return e instanceof Ei}function dz(e,t,n=null,r=null){let o=wk(e);return _k(o,t,n,r)}function wk(e){let t;function n(i){let s={};for(let l of i.children){let c=n(l);s[l.outlet]=c}let a=new nt(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=vk(r);return t??o}function _k(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return a_(o,o,o,n,r);let i=fz(t);if(i.toRoot())return a_(o,o,new nt([],{}),n,r);let s=pz(i,o,e),a=s.processChildren?ad(s.segmentGroup,s.index,i.commands):Sk(s.segmentGroup,s.index,i.commands);return a_(o,s.segmentGroup,a,n,r)}function im(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ud(e){return typeof e=="object"&&e!=null&&e.outlets}function a_(e,t,n,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;e===t?s=n:s=Ek(e,t,n);let a=vk(bk(s));return new Ei(a,i,o)}function Ek(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=Ek(i,t,n)}),new nt(e.segments,r)}var sm=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&im(r[0]))throw new oe(4003,!1);let o=r.find(ud);if(o&&o!==dk(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fz(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new sm(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new sm(n,t,r)}var rc=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function pz(e,t,n){if(e.isAbsolute)return new rc(t,!0,0);if(!n)return new rc(t,!1,NaN);if(n.parent===null)return new rc(n,!0,0);let r=im(e.commands[0])?0:1,o=n.segments.length-1+r;return hz(n,o,e.numberOfDoubleDots)}function hz(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new oe(4005,!1);o=r.segments.length}return new rc(r,!1,o-i)}function mz(e){return ud(e[0])?e[0].outlets:{[ke]:e}}function Sk(e,t,n){if(e??=new nt([],{}),e.segments.length===0&&e.hasChildren())return ad(e,t,n);let r=gz(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new nt(e.segments.slice(0,r.pathIndex),{});return i.children[ke]=new nt(e.segments.slice(r.pathIndex),e.children),ad(i,0,o)}else return r.match&&o.length===0?new nt(e.segments,{}):r.match&&!e.hasChildren()?h_(e,t,n):r.match?ad(e,0,o):h_(e,t,n)}function ad(e,t,n){if(n.length===0)return new nt(e.segments,{});{let r=mz(n),o={};if(Object.keys(r).some(i=>i!==ke)&&e.children[ke]&&e.numberOfChildren===1&&e.children[ke].segments.length===0){let i=ad(e.children[ke],t,n);return new nt(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Sk(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new nt(e.segments,o)}}function gz(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(ud(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!sk(l,c,s))return i;r+=2}else{if(!sk(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function h_(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(ud(i)){let l=yz(i.outlets);return new nt(r,l)}if(o===0&&im(n[0])){let l=e.segments[t];r.push(new Ca(l.path,ik(n[0]))),o++;continue}let s=ud(i)?i.outlets[ke]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&im(a)?(r.push(new Ca(s,ik(a))),o+=2):(r.push(new Ca(s,{})),o++)}return new nt(r,{})}function yz(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=h_(new nt([],{}),0,r))}),t}function ik(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function sk(e,t,n){return e==n.path&&jo(t,n.parameters)}var ld="imperative",In=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(In||{}),Wr=class{id;url;constructor(t,n){this.id=t,this.url=n}},cc=class extends Wr{type=In.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ss=class extends Wr{urlAfterRedirects;type=In.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ur=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(ur||{}),am=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(am||{}),_i=class extends Wr{reason;code;type=In.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},as=class extends Wr{reason;code;type=In.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},dd=class extends Wr{error;target;type=In.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lm=class extends Wr{urlAfterRedirects;state;type=In.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends Wr{urlAfterRedirects;state;type=In.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends Wr{urlAfterRedirects;state;shouldActivate;type=In.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},y_=class extends Wr{urlAfterRedirects;state;type=In.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Wr{urlAfterRedirects;state;type=In.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class{route;type=In.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},w_=class{route;type=In.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},__=class{snapshot;type=In.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{snapshot;type=In.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{snapshot;type=In.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{snapshot;type=In.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fd=class{},uc=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function vz(e){return!(e instanceof fd)&&!(e instanceof uc)}function bz(e,t){return e.providers&&!e._injector&&(e._injector=zu(e.providers,t,`Route: ${e.path}`)),e._injector??t}function po(e){return e.outlet||ke}function wz(e,t){let n=e.filter(r=>po(r)===t);return n.push(...e.filter(r=>po(r)!==t)),n}function fc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var T_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return fc(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new vd(this.rootInjector)}},vd=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new T_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(Pe(kt))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cm=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=I_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=I_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=C_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return C_(t,this._root).map(n=>n.value)}};function I_(e,t){if(e===t.value)return t;for(let n of t.children){let r=I_(e,n);if(r)return r}return null}function C_(e,t){if(e===t.value)return[t];for(let n of t.children){let r=C_(e,n);if(r.length)return r.unshift(t),r}return[]}var Dr=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function nc(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var um=class extends cm{snapshot;constructor(t,n){super(t),this.snapshot=n,F_(this,t)}toString(){return this.snapshot.toString()}};function xk(e){let t=_z(e),n=new Nt([new Ca("",{})]),r=new Nt({}),o=new Nt({}),i=new Nt({}),s=new Nt(""),a=new Na(n,r,i,s,o,ke,e,t.root);return a.snapshot=t.root,new um(new Dr(a,[]),t)}function _z(e){let t={},n={},r={},i=new oc([],t,r,"",n,ke,e,null,{});return new fm("",new Dr(i,[]))}var Na=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(we(c=>c[yd]))??ge(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(we(t=>sc(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(we(t=>sc(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dm(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:B(B({},t.params),e.params),data:B(B({},t.data),e.data),resolve:B(B(B(B({},e.data),t.data),o?.data),e._resolvedData)}:r={params:B({},e.params),data:B({},e.data),resolve:B(B({},e.data),e._resolvedData??{})},o&&Ik(o)&&(r.resolve[yd]=o.title),r}var oc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[yd]}constructor(t,n,r,o,i,s,a,l,c){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=sc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=sc(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},fm=class extends cm{url;constructor(t,n){super(n),this.url=t,F_(this,n)}toString(){return Tk(this._root)}};function F_(e,t){t.value._routerState=e,t.children.forEach(n=>F_(e,n))}function Tk(e){let t=e.children.length>0?` { ${e.children.map(Tk).join(", ")} } `:"";return`${e.value}${t}`}function l_(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,jo(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),jo(t.params,n.params)||e.paramsSubject.next(n.params),qU(t.url,n.url)||e.urlSubject.next(n.url),jo(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function D_(e,t){let n=jo(e.params,t.params)&&ZU(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||D_(e.parent,t.parent))}function Ik(e){return typeof e.title=="string"||e.title===null}var Ez=new ee(""),Ck=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ke;activateEvents=new ct;deactivateEvents=new ct;attachEvents=new ct;detachEvents=new ct;routerOutletData=Ot(void 0);parentContexts=O(vd);location=O(Ur);changeDetector=O(Ia);inputBinder=O(gm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new N_(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Qt({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[es]})}return e})(),N_=class{route;childContexts;parent;outletData;constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===Na?this.route:t===vd?this.childContexts:t===Ez?this.outletData:this.parent.get(t,n)}},gm=new ee("");var Dk=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Zn(0,"router-outlet")},dependencies:[Ck],encapsulation:2})}return e})();function L_(e){let t=e.children&&e.children.map(L_),n=t?fe(B({},e),{children:t}):B({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==ke&&(n.component=Dk),n}function Sz(e,t,n){let r=pd(e,t._root,n?n._root:void 0);return new um(r,t)}function pd(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=xz(e,t,n);return new Dr(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>pd(e,a)),s}}let r=Tz(t.value),o=t.children.map(i=>pd(e,i));return new Dr(r,o)}}function xz(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return pd(e,r,o);return pd(e,r)})}function Tz(e){return new Na(new Nt(e.url),new Nt(e.params),new Nt(e.queryParams),new Nt(e.fragment),new Nt(e.data),e.outlet,e.component,e)}var hd=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},Nk="ngNavigationCancelingError";function pm(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=lc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Ak(!1,ur.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Ak(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Nk]=!0,n.cancellationCode=t,n}function Iz(e){return Mk(e)&&lc(e.url)}function Mk(e){return!!e&&e[Nk]}var Cz=(e,t,n,r)=>we(o=>(new A_(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),A_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),l_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=nc(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=nc(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=nc(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=nc(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new x_(i.value.snapshot))}),t.children.length&&this.forwardEvent(new E_(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(l_(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),l_(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},hm=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ic=class{component;route;constructor(t,n){this.component=t,this.route=n}};function Dz(e,t,n){let r=e._root,o=t?t._root:null;return sd(r,o,n,[r.value])}function Nz(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function pc(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Pv(e)?e:t.get(e):r}function sd(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=nc(t);return e.children.forEach(s=>{Az(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>cd(a,n.getContext(s),o)),o}function Az(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=Mz(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new hm(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?sd(e,t,a?a.children:null,r,o):sd(e,t,n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ic(a.outlet.component,s))}else s&&cd(t,a,o),o.canActivateChecks.push(new hm(r)),i.component?sd(e,null,a?a.children:null,r,o):sd(e,null,n,r,o);return o}function Mz(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Da(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Da(e.url,t.url)||!jo(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!D_(e,t)||!jo(e.queryParams,t.queryParams);case"paramsChange":default:return!D_(e,t)}}function cd(e,t,n){let r=nc(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?cd(s,t.children.getContext(i),n):cd(s,null,n):cd(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ic(t.outlet.component,o)):n.canDeactivateChecks.push(new ic(null,o)):n.canDeactivateChecks.push(new ic(null,o))}function bd(e){return typeof e=="function"}function kz(e){return typeof e=="boolean"}function Oz(e){return e&&bd(e.canLoad)}function Rz(e){return e&&bd(e.canActivate)}function Pz(e){return e&&bd(e.canActivateChild)}function Fz(e){return e&&bd(e.canDeactivate)}function Lz(e){return e&&bd(e.canMatch)}function kk(e){return e instanceof ii||e?.name==="EmptyError"}var tm=Symbol("INITIAL_VALUE");function dc(){return qe(e=>Vp(e.map(t=>t.pipe(kn(1),oo(tm)))).pipe(we(t=>{for(let n of t)if(n!==!0){if(n===tm)return tm;if(n===!1||$z(n))return n}return!0}),At(t=>t!==tm),kn(1)))}function $z(e){return lc(e)||e instanceof hd}function Vz(e,t){return jt(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?ge(fe(B({},n),{guardsResult:!0})):jz(s,r,o,e).pipe(jt(a=>a&&kz(a)?Bz(r,i,e,t):ge(a)),we(a=>fe(B({},n),{guardsResult:a})))})}function jz(e,t,n,r){return Ft(e).pipe(jt(o=>Wz(o.component,o.route,n,t,r)),si(o=>o!==!0,!0))}function Bz(e,t,n,r){return Ft(t).pipe(Ol(o=>kl(Uz(o.route.parent,r),Hz(o.route,r),Gz(e,o.path,n),zz(e,o.route,n))),si(o=>o!==!0,!0))}function Hz(e,t){return e!==null&&t&&t(new S_(e)),ge(!0)}function Uz(e,t){return e!==null&&t&&t(new __(e)),ge(!0)}function zz(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return ge(!0);let o=r.map(i=>Xs(()=>{let s=fc(t)??n,a=pc(i,s),l=Rz(a)?a.canActivate(t,e):qn(s,()=>a(t,e));return Si(l).pipe(si())}));return ge(o).pipe(dc())}function Gz(e,t,n){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(s=>Nz(s)).filter(s=>s!==null).map(s=>Xs(()=>{let a=s.guards.map(l=>{let c=fc(s.node)??n,u=pc(l,c),f=Pz(u)?u.canActivateChild(r,e):qn(c,()=>u(r,e));return Si(f).pipe(si())});return ge(a).pipe(dc())}));return ge(i).pipe(dc())}function Wz(e,t,n,r,o){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return ge(!0);let s=i.map(a=>{let l=fc(t)??o,c=pc(a,l),u=Fz(c)?c.canDeactivate(e,t,n,r):qn(l,()=>c(e,t,n,r));return Si(u).pipe(si())});return ge(s).pipe(dc())}function qz(e,t,n,r){let o=t.canLoad;if(o===void 0||o.length===0)return ge(!0);let i=o.map(s=>{let a=pc(s,e),l=Oz(a)?a.canLoad(t,n):qn(e,()=>a(t,n));return Si(l)});return ge(i).pipe(dc(),Ok(r))}function Ok(e){return pv(Mt(t=>{if(typeof t!="boolean")throw pm(e,t)}),we(t=>t===!0))}function Kz(e,t,n,r){let o=t.canMatch;if(!o||o.length===0)return ge(!0);let i=o.map(s=>{let a=pc(s,e),l=Lz(a)?a.canMatch(t,n):qn(e,()=>a(t,n));return Si(l)});return ge(i).pipe(dc(),Ok(r))}var md=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},gd=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function tc(e){return Al(new md(e))}function Yz(e){return Al(new oe(4e3,!1))}function Xz(e){return Al(Ak(!1,ur.GuardRejected))}var M_=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ge(r);if(o.numberOfChildren>1||!o.children[ke])return Yz(`${t.redirectTo}`);o=o.children[ke]}}applyRedirectCommands(t,n,r,o,i){return Zz(n,o,i).pipe(we(s=>{if(s instanceof Ei)throw new gd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new gd(a);return a}))}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new Ei(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,o)}),new nt(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new oe(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}};function Zz(e,t,n){if(typeof e=="string")return ge(e);let r=e,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,params:c,data:u,title:f}=t;return Si(qn(n,()=>r({params:c,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,title:f})))}var k_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qz(e,t,n,r,o){let i=Rk(e,t,n);return i.matched?(r=bz(t,r),Kz(r,t,n,o).pipe(we(s=>s===!0?i:B({},k_)))):ge(i)}function Rk(e,t,n){if(t.path==="**")return Jz(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?B({},k_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||WU)(n,e,t);if(!o)return B({},k_);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?B(B({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Jz(e){return{matched:!0,parameters:e.length>0?dk(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ak(e,t,n,r){return n.length>0&&n4(e,n,r)?{segmentGroup:new nt(t,t4(r,new nt(n,e.children))),slicedSegments:[]}:n.length===0&&r4(e,n,r)?{segmentGroup:new nt(e.segments,e4(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new nt(e.segments,e.children),slicedSegments:n}}function e4(e,t,n,r){let o={};for(let i of n)if(ym(e,t,i)&&!r[po(i)]){let s=new nt([],{});o[po(i)]=s}return B(B({},r),o)}function t4(e,t){let n={};n[ke]=t;for(let r of e)if(r.path===""&&po(r)!==ke){let o=new nt([],{});n[po(r)]=o}return n}function n4(e,t,n){return n.some(r=>ym(e,t,r)&&po(r)!==ke)}function r4(e,t,n){return n.some(r=>ym(e,t,r))}function ym(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function o4(e,t,n){return t.length===0&&!e.children[n]}var O_=class{};function i4(e,t,n,r,o,i,s="emptyOnly"){return new R_(e,t,n,r,o,s,i).recognize()}var s4=31,R_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new M_(this.urlSerializer,this.urlTree)}noMatchError(t){return new oe(4002,`'${t.segmentGroup}'`)}recognize(){let t=ak(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(we(({children:n,rootSnapshot:r})=>{let o=new Dr(r,n),i=new fm("",o),s=dz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(t){let n=new oc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ke,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ke,n).pipe(we(r=>({children:r,rootSnapshot:n})),Bi(r=>{if(r instanceof gd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof md?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,i):this.processSegment(t,n,r,r.segments,o,!0,i).pipe(we(s=>s instanceof Dr?[s]:[]))}processChildren(t,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ft(i).pipe(Ol(s=>{let a=r.children[s],l=wz(n,s);return this.processSegmentGroup(t,l,a,s,o)}),wv((s,a)=>(s.push(...a),s)),Hi(null),Ui(),jt(s=>{if(s===null)return tc(r);let a=Pk(s);return a4(a),ge(a)}))}processSegment(t,n,r,o,i,s,a){return Ft(n).pipe(Ol(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,r,o,i,s,a).pipe(Bi(c=>{if(c instanceof md)return ge(null);throw c}))),si(l=>!!l),Bi(l=>{if(kk(l))return o4(r,o,i)?ge(new O_):tc(r);throw l}))}processSegmentAgainstRoute(t,n,r,o,i,s,a,l){return po(r)!==s&&(s===ke||!ym(o,i,r))?tc(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,l):tc(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=Rk(n,o,i);if(!l)return tc(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s4&&(this.allowRedirects=!1));let m=new oc(i,c,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,lk(o),po(o),o.component??o._loadedComponent??null,o,ck(o)),w=dm(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(w.params),m.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,f,m,t).pipe(qe(T=>this.applyRedirects.lineralizeSegments(o,T)),jt(T=>this.processSegment(t,r,n,T.concat(p),s,!1,a)))}matchSegmentAgainstRoute(t,n,r,o,i,s){let a=Qz(n,r,o,t,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(qe(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(qe(({routes:c})=>{let u=r._loadedInjector??t,{parameters:f,consumedSegments:p,remainingSegments:m}=l,w=new oc(p,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,lk(r),po(r),r.component??r._loadedComponent??null,r,ck(r)),x=dm(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(x.params),w.data=Object.freeze(x.data);let{segmentGroup:T,slicedSegments:D}=ak(n,p,m,c);if(D.length===0&&T.hasChildren())return this.processChildren(u,c,T,w).pipe(we(A=>new Dr(w,A)));if(c.length===0&&D.length===0)return ge(new Dr(w,[]));let P=po(r)===i;return this.processSegment(u,c,T,D,P?ke:i,!0,w).pipe(we(A=>new Dr(w,A instanceof Dr?[A]:[])))}))):tc(n)))}getChildConfig(t,n,r){return n.children?ge({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ge({routes:n._loadedRoutes,injector:n._loadedInjector}):qz(t,n,r,this.urlSerializer).pipe(jt(o=>o?this.configLoader.loadChildren(t,n).pipe(Mt(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):Xz(n))):ge({routes:[],injector:t})}};function a4(e){e.sort((t,n)=>t.value.outlet===ke?-1:n.value.outlet===ke?1:t.value.outlet.localeCompare(n.value.outlet))}function l4(e){let t=e.value.routeConfig;return t&&t.path===""}function Pk(e){let t=[],n=new Set;for(let r of e){if(!l4(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=Pk(r.children);t.push(new Dr(r.value,o))}return t.filter(r=>!n.has(r))}function lk(e){return e.data||{}}function ck(e){return e.resolve||{}}function c4(e,t,n,r,o,i){return jt(s=>i4(e,t,n,r,s.extractedUrl,o,i).pipe(we(({state:a,tree:l})=>fe(B({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function u4(e,t){return jt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return ge(n);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of Fk(l))s.add(c);let a=0;return Ft(s).pipe(Ol(l=>i.has(l)?d4(l,r,e,t):(l.data=dm(l,l.parent,e).resolve,ge(void 0))),Mt(()=>a++),Rl(1),jt(l=>a===s.size?ge(n):rr))})}function Fk(e){let t=e.children.map(n=>Fk(n)).flat();return[e,...t]}function d4(e,t,n,r){let o=e.routeConfig,i=e._resolve;return o?.title!==void 0&&!Ik(o)&&(i[yd]=o.title),Xs(()=>(e.data=dm(e,e.parent,n).resolve,f4(i,e,t,r).pipe(we(s=>(e._resolvedData=s,e.data=B(B({},e.data),s),null)))))}function f4(e,t,n,r){let o=d_(e);if(o.length===0)return ge({});let i={};return Ft(o).pipe(jt(s=>p4(e[s],t,n,r).pipe(si(),Mt(a=>{if(a instanceof hd)throw pm(new ac,a);i[s]=a}))),Rl(1),we(()=>i),Bi(s=>kk(s)?rr:Al(s)))}function p4(e,t,n,r){let o=fc(t)??r,i=pc(e,o),s=i.resolve?i.resolve(t,n):qn(o,()=>i(t,n));return Si(s)}function c_(e){return qe(t=>{let n=e(t);return n?Ft(n).pipe(we(()=>t)):ge(t)})}var Lk=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===ke);return r}getResolvedTitleForRoute(n){return n.data[yd]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(h4),providedIn:"root"})}return e})(),h4=(()=>{class e extends Lk{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(Pe(nk))};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),vm=new ee("",{providedIn:"root",factory:()=>({})}),bm=new ee(""),$k=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Bw);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ge(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Si(qn(n,()=>r.loadComponent())).pipe(we(Vk),qe(jk),Mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),uu(()=>{this.componentLoaders.delete(r)})),i=new Cl(o,()=>new Me).pipe(Il());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=m4(r,this.compiler,n,this.onLoadEndListener).pipe(uu(()=>{this.childrenLoaders.delete(r)})),s=new Cl(i,()=>new Me).pipe(Il());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function m4(e,t,n,r){return Si(qn(n,()=>e.loadChildren())).pipe(we(Vk),qe(jk),jt(o=>o instanceof Uh||Array.isArray(o)?ge(o):Ft(t.compileModuleAsync(o))),we(o=>{r&&r(e);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(bm,[],{optional:!0,self:!0}).flat()),{routes:s.map(L_),injector:i}}))}function g4(e){return e&&typeof e=="object"&&"default"in e}function Vk(e){return g4(e)?e.default:e}function jk(e){return ge(e)}var $_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(y4),providedIn:"root"})}return e})(),y4=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Bk=new ee("");var Hk=new ee(""),Uk=(()=>{class e{currentNavigation=Se(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Me;transitionAbortWithErrorSubject=new Me;configLoader=O($k);environmentInjector=O(kt);destroyRef=O(Tr);urlSerializer=O(mm);rootContexts=O(vd);location=O(is);inputBindingEnabled=O(gm,{optional:!0})!==null;titleStrategy=O(Lk);options=O(vm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O($_);createViewTransition=O(Bk,{optional:!0});navigationErrorHandler=O(Hk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ge(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new b_(o)),r=o=>this.events.next(new w_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Pn(()=>{this.transitions?.next(fe(B({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Nt(null),this.transitions.pipe(At(r=>r!==null),qe(r=>{let o=!1;return ge(r).pipe(qe(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ur.SupersededByNewNavigation),rr;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?fe(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new as(i.id,this.urlSerializer.serialize(i.rawUrl),"",am.IgnoredSameUrlNavigation)),i.resolve(!1),rr;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return ge(i).pipe(qe(l=>(this.events.next(new cc(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?rr:Promise.resolve(l))),c4(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=l.urlAfterRedirects,u));let c=new lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:f,extras:p}=i,m=new cc(l,this.urlSerializer.serialize(c),u,f);this.events.next(m);let w=xk(this.rootComponentType).snapshot;return this.currentTransition=r=fe(B({},i),{targetSnapshot:w,urlAfterRedirects:c,extras:fe(B({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=c,x)),ge(r)}else return this.events.next(new as(i.id,this.urlSerializer.serialize(i.extractedUrl),"",am.IgnoredByUrlHandlingStrategy)),i.resolve(!1),rr}),Mt(i=>{let s=new m_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),we(i=>(this.currentTransition=r=fe(B({},i),{guards:Dz(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),Vz(this.environmentInjector,i=>this.events.next(i)),Mt(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw pm(this.urlSerializer,i.guardsResult);let s=new g_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),At(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",ur.GuardRejected),!1)),c_(i=>{if(i.guards.canActivateChecks.length!==0)return ge(i).pipe(Mt(s=>{let a=new y_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),qe(s=>{let a=!1;return ge(s).pipe(u4(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ur.NoDataFromResolver)}}))}),Mt(s=>{let a=new v_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),c_(i=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=fc(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(Mt(u=>{a.component=u}),we(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return Vp(s(i.targetSnapshot.root)).pipe(Hi(null),kn(1))}),c_(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?Ft(a).pipe(we(()=>r)):ge(r)}),we(i=>{let s=Sz(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=fe(B({},i),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Mt(()=>{this.events.next(new fd)}),Cz(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),kn(1),sn(new Te(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(At(()=>!o&&!r.targetRouterState),Mt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ur.Aborted)}))),Mt({next:i=>{o=!0,this.lastSuccessfulNavigation=Pn(this.currentNavigation),this.events.next(new ss(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),sn(this.transitionAbortWithErrorSubject.pipe(Mt(i=>{throw i}))),uu(()=>{o||this.cancelNavigationTransition(r,"",ur.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Bi(i=>{if(this.destroyed)return r.resolve(!1),rr;if(o=!0,Mk(i))this.events.next(new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),Iz(i)?this.events.next(new uc(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new dd(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=qn(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof hd){let{message:l,cancellationCode:c}=pm(this.urlSerializer,a);this.events.next(new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new uc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return rr}))}))}cancelNavigationTransition(n,r,o){let i=new _i(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Pn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function v4(e){return e!==ld}var b4=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(w4),providedIn:"root"})}return e})(),P_=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},w4=(()=>{class e extends P_{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zk=(()=>{class e{urlSerializer=O(mm);options=O(vm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(is);urlHandlingStrategy=O($_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ei;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Ei?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=xk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:()=>O(_4),providedIn:"root"})}return e})(),_4=(()=>{class e extends zk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof cc?this.updateStateMemento():n instanceof as?this.commitTransition(r):n instanceof lm?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _i&&n.code!==ur.SupersededByNewNavigation&&n.code!==ur.Redirect?this.restoreHistory(r):n instanceof dd?this.restoreHistory(r,!0):n instanceof ss&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,l=B(B({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",l)}else{let a=B(B({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Gk(e,t){e.events.pipe(At(n=>n instanceof ss||n instanceof _i||n instanceof dd||n instanceof as),we(n=>n instanceof ss||n instanceof as?0:(n instanceof _i?n.code===ur.Redirect||n.code===ur.SupersededByNewNavigation:!1)?2:1),At(n=>n!==2),kn(1)).subscribe(()=>{t()})}var E4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},V_=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Pw);stateManager=O(zk);options=O(vm,{optional:!0})||{};pendingTasks=O(pi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Uk);urlSerializer=O(mm);location=O(is);urlHandlingStrategy=O($_);injector=O(kt);_events=new Me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(b4);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(bm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(gm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new mt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=Pn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof _i&&r.code!==ur.Redirect&&r.code!==ur.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ss)this.navigated=!0;else if(r instanceof uc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=B({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||v4(o.source)},s);this.scheduleNavigation(a,ld,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}vz(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ld,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=B({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(l=>{this.disposed||this.injector.get(Br)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Pn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(L_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=B(B({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=o?o.snapshot:this.routerState.snapshot.root;f=wk(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return _k(f,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=lc(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ld,null,r)}navigate(n,r={skipLocationChange:!1}){return x4(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=B({},E4):r===!1?o=B({},S4):o=r,lc(n))return rk(this.currentUrlTree,n,o);let i=this.parseUrl(n);return rk(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,p)=>{a=f,l=p});let u=this.pendingTasks.add();return Gk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function x4(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new oe(4008,!1)}var T4=new ee("");function j_(e,...t){return ra([{provide:bm,multi:!0,useValue:e},[],{provide:Na,useFactory:I4,deps:[V_]},{provide:Gh,multi:!0,useFactory:C4},t.map(n=>n.\u0275providers)])}function I4(e){return e.routerState.root}function C4(){let e=O(Ye);return t=>{let n=e.get(Ir);if(t!==n.components[0])return;let r=e.get(V_),o=e.get(D4);e.get(N4)===1&&r.initialNavigation(),e.get(A4,null,{optional:!0})?.setUpPreloading(),e.get(T4,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var D4=new ee("",{factory:()=>new Me}),N4=new ee("",{providedIn:"root",factory:()=>1});var A4=new ee("");var Wk=[];var qk={providers:[wb(),Uw(),j_(Wk)]};var tO=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Sn(vi),Sn(ut))};static \u0275dir=Qt({type:e})}return e})(),W_=(()=>{class e extends tO{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275dir=Qt({type:e,features:[Xn]})}return e})(),ls=new ee(""),k4={provide:ls,useExisting:sr(()=>q_),multi:!0},q_=(()=>{class e extends W_{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275dir=Qt({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Jt("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[zr([k4]),Xn]})}return e})(),O4={provide:ls,useExisting:sr(()=>Ma),multi:!0};function R4(){let e=Gr()?Gr().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var P4=new ee(""),Ma=(()=>{class e extends tO{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!R4())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Sn(vi),Sn(ut),Sn(P4,8))};static \u0275dir=Qt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Jt("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[zr([O4]),Xn]})}return e})();var F4=new ee(""),L4=new ee("");function nO(e){return e!=null}function rO(e){return ba(e)?Ft(e):e}function oO(e){let t={};return e.forEach(n=>{t=n!=null?B(B({},t),n):t}),Object.keys(t).length===0?null:t}function iO(e,t){return t.map(n=>n(e))}function $4(e){return!e.validate}function sO(e){return e.map(t=>$4(t)?t:n=>t.validate(n))}function V4(e){if(!e)return null;let t=e.filter(nO);return t.length==0?null:function(n){return oO(iO(n,t))}}function aO(e){return e!=null?V4(sO(e)):null}function j4(e){if(!e)return null;let t=e.filter(nO);return t.length==0?null:function(n){let r=iO(n,t).map(rO);return bv(r).pipe(we(oO))}}function lO(e){return e!=null?j4(sO(e)):null}function Kk(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function B4(e){return e._rawValidators}function H4(e){return e._rawAsyncValidators}function B_(e){return e?Array.isArray(e)?e:[e]:[]}function _m(e,t){return Array.isArray(e)?e.includes(t):e===t}function Yk(e,t){let n=B_(t);return B_(e).forEach(o=>{_m(n,o)||n.push(o)}),n}function Xk(e,t){return B_(t).filter(n=>!_m(e,n))}var Em=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=aO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=lO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},H_=class extends Em{name;get formDirective(){return null}get path(){return null}},xd=class extends Em{_parent=null;name=null;valueAccessor=null},U_=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},U4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Xhe=fe(B({},U4),{"[class.ng-submitted]":"isSubmitted"}),Td=(()=>{class e extends U_{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Sn(xd,2))};static \u0275dir=Qt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&xa("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Xn]})}return e})();var wd="VALID",wm="INVALID",hc="PENDING",_d="DISABLED",Aa=class{},Sm=class extends Aa{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Ed=class extends Aa{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Sd=class extends Aa{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},mc=class extends Aa{status;source;constructor(t,n){super(),this.status=t,this.source=n}};var z_=class extends Aa{source;constructor(t){super(),this.source=t}};function z4(e){return(xm(e)?e.validators:e)||null}function G4(e){return Array.isArray(e)?aO(e):e||null}function W4(e,t){return(xm(t)?t.asyncValidators:e)||null}function q4(e){return Array.isArray(e)?lO(e):e||null}function xm(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}var G_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Pn(this.statusReactive)}set status(t){Pn(()=>this.statusReactive.set(t))}_status=Vo(()=>this.statusReactive());statusReactive=Se(void 0);get valid(){return this.status===wd}get invalid(){return this.status===wm}get pending(){return this.status==hc}get disabled(){return this.status===_d}get enabled(){return this.status!==_d}errors;get pristine(){return Pn(this.pristineReactive)}set pristine(t){Pn(()=>this.pristineReactive.set(t))}_pristine=Vo(()=>this.pristineReactive());pristineReactive=Se(!0);get dirty(){return!this.pristine}get touched(){return Pn(this.touchedReactive)}set touched(t){Pn(()=>this.touchedReactive.set(t))}_touched=Vo(()=>this.touchedReactive());touchedReactive=Se(!1);get untouched(){return!this.touched}_events=new Me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Yk(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Yk(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Xk(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Xk(t,this._rawAsyncValidators))}hasValidator(t){return _m(this._rawValidators,t)}hasAsyncValidator(t){return _m(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(fe(B({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Sd(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Sd(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(fe(B({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Ed(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Ed(!0,r))}markAsPending(t={}){this.status=hc;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new mc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(fe(B({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=_d,this.errors=null,this._forEachChild(o=>{o.disable(fe(B({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Sm(this.value,r)),this._events.next(new mc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(B({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=wd,this._forEachChild(r=>{r.enable(fe(B({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(fe(B({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wd||this.status===hc)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Sm(this.value,n)),this._events.next(new mc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(fe(B({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_d:wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=hc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=rO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new mc(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?_d:this.errors?wm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hc)?hc:this._anyControlsHaveStatus(wm)?wm:wd}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),o&&this._events.next(new Ed(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Sd(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){xm(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=G4(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=q4(this._rawAsyncValidators)}};var cO=new ee("",{providedIn:"root",factory:()=>K_}),K_="always";function K4(e,t){return[...t.path,e]}function Y4(e,t,n=K_){Z4(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Q4(e,t),eG(e,t),J4(e,t),X4(e,t)}function Zk(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function X4(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Z4(e,t){let n=B4(e);t.validator!==null?e.setValidators(Kk(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=H4(e);t.asyncValidator!==null?e.setAsyncValidators(Kk(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let o=()=>e.updateValueAndValidity();Zk(t._rawValidators,o),Zk(t._rawAsyncValidators,o)}function Q4(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&uO(e,t)})}function J4(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&uO(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function uO(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function eG(e,t){let n=(r,o)=>{t.valueAccessor.writeValue(r),o&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function tG(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function nG(e){return Object.getPrototypeOf(e.constructor)===W_}function rG(e,t){if(!t)return null;Array.isArray(t);let n,r,o;return t.forEach(i=>{i.constructor===Ma?n=i:nG(i)?r=i:o=i}),o||r||n||null}function Qk(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Jk(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var oG=class extends G_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(z4(n),W4(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Jk(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new z_(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Qk(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Qk(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Jk(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var iG={provide:xd,useExisting:sr(()=>gc)},eO=Promise.resolve(),gc=(()=>{class e extends xd{_changeDetectorRef;callSetDisabledState;control=new oG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ct;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=rG(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),tG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Y4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){eO.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&ec(r);eO.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?K4(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Sn(H_,9),Sn(F4,10),Sn(L4,10),Sn(ls,10),Sn(Ia,8),Sn(cO,8))};static \u0275dir=Qt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[zr([iG]),Xn,es]})}return e})();var sG={provide:ls,useExisting:sr(()=>Y_),multi:!0},Y_=(()=>{class e extends W_{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275dir=Qt({type:e,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&Jt("change",function(s){return o.onChange(s.target.value)})("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[zr([sG]),Xn]})}return e})();var aG=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=fo({type:e});static \u0275inj=Fr({})}return e})();var ka=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:cO,useValue:n.callSetDisabledState??K_}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=fo({type:e});static \u0275inj=Fr({imports:[aG]})}return e})();var Tm=no(document,"pointermove").pipe(_r()),Im=no(document,"pointerup").pipe(_r());function Id(e,t=new Nt(!1)){let n=no(e,"pointerdown").pipe(At(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Mt(a=>{!(a.target instanceof HTMLInputElement)&&t.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),we(a=>{let l=e.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:e}}),_r()),r=n.pipe(qe(a=>Tm.pipe(we(l=>fe(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),kn(1)).pipe(sn(Im))),_r()),o=r.pipe(qe(a=>Tm.pipe(we(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Im))),_r()),i=r.pipe(qe(a=>Tm.pipe(oo(a),we(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Im),Ui()))),s=n.pipe(qe(a=>Im.pipe(sn(Tm))));return{dragStart$:t.pipe(qe(a=>a?ro:r)),dragMove$:t.pipe(qe(a=>a?ro:o)),dragEnd$:t.pipe(qe(a=>a?ro:i)),click$:t.pipe(qe(a=>a?ro:s))}}var Df={};He(Df,{Abs:()=>o0,Acos:()=>i0,Acosh:()=>s0,AdadeltaOptimizer:()=>Ss,AdagradOptimizer:()=>xs,AdamOptimizer:()=>Ts,AdamaxOptimizer:()=>Is,Add:()=>Mm,AddN:()=>a0,All:()=>vO,Any:()=>bO,ArgMax:()=>l0,ArgMin:()=>c0,Asin:()=>u0,Asinh:()=>d0,Atan:()=>f0,Atan2:()=>h0,Atanh:()=>p0,AvgPool:()=>m0,AvgPool3D:()=>g0,AvgPool3DGrad:()=>AG,AvgPoolGrad:()=>NG,BatchMatMul:()=>y0,BatchToSpaceND:()=>v0,Bincount:()=>b0,BitwiseAnd:()=>w0,BroadcastArgs:()=>_0,BroadcastTo:()=>MG,Cast:()=>Nd,Ceil:()=>E0,ClipByValue:()=>S0,Complex:()=>x0,ComplexAbs:()=>T0,Concat:()=>I0,Conv2D:()=>C0,Conv2DBackpropFilter:()=>D0,Conv2DBackpropInput:()=>N0,Conv3D:()=>A0,Conv3DBackpropFilterV2:()=>kG,Conv3DBackpropInputV2:()=>M0,Cos:()=>wO,Cosh:()=>k0,CropAndResize:()=>P0,Cumprod:()=>O0,Cumsum:()=>R0,DataStorage:()=>Cm,DenseBincount:()=>F0,DepthToSpace:()=>L0,DepthwiseConv2dNative:()=>$0,DepthwiseConv2dNativeBackpropFilter:()=>V0,DepthwiseConv2dNativeBackpropInput:()=>j0,Diag:()=>B0,Dilation2D:()=>H0,Dilation2DBackpropFilter:()=>RG,Dilation2DBackpropInput:()=>OG,Draw:()=>km,ENV:()=>Am,Einsum:()=>z0,Elu:()=>_O,EluGrad:()=>PG,Environment:()=>Ec,Equal:()=>G0,Erf:()=>EO,Exp:()=>SO,ExpandDims:()=>W0,Expm1:()=>q0,FFT:()=>xO,Fill:()=>K0,FlipLeftRight:()=>Y0,Floor:()=>X0,FloorDiv:()=>Z0,FromPixels:()=>Om,FusedBatchNorm:()=>Q0,FusedConv2D:()=>Pm,FusedDepthwiseConv2D:()=>Fm,GatherNd:()=>eE,GatherV2:()=>J0,Greater:()=>tE,GreaterEqual:()=>nE,IFFT:()=>rE,Identity:()=>Ad,Imag:()=>oE,IsFinite:()=>iE,IsInf:()=>sE,IsNan:()=>aE,KernelBackend:()=>yc,LRN:()=>IO,LRNGrad:()=>VG,LeakyRelu:()=>lE,Less:()=>cE,LessEqual:()=>uE,LinSpace:()=>dE,Log:()=>TO,Log1p:()=>fE,LogSoftmax:()=>LG,LogicalAnd:()=>pE,LogicalNot:()=>hE,LogicalOr:()=>mE,LogicalXor:()=>FG,LowerBound:()=>$G,MatrixBandPart:()=>jG,Max:()=>CO,MaxPool:()=>yE,MaxPool3D:()=>vE,MaxPool3DGrad:()=>HG,MaxPoolGrad:()=>BG,MaxPoolWithArgmax:()=>bE,Maximum:()=>gE,Mean:()=>wE,Min:()=>DO,Minimum:()=>_E,MirrorPad:()=>EE,Mod:()=>NO,MomentumOptimizer:()=>Cs,Multinomial:()=>SE,Multiply:()=>xE,Neg:()=>AO,NonMaxSuppressionV3:()=>IE,NonMaxSuppressionV4:()=>CE,NonMaxSuppressionV5:()=>DE,NotEqual:()=>TE,OP_SCOPE_SUFFIX:()=>qm,OneHot:()=>AE,OnesLike:()=>NE,Optimizer:()=>An,OptimizerConstructors:()=>Bc,Pack:()=>ME,PadV2:()=>kE,Pool:()=>UG,Pow:()=>MO,Prelu:()=>OE,Prod:()=>RE,RMSPropOptimizer:()=>Ds,RaggedGather:()=>PE,RaggedRange:()=>FE,RaggedTensorToTensor:()=>LE,Range:()=>$E,Rank:()=>LS,Real:()=>VE,RealDiv:()=>U0,Reciprocal:()=>jE,Reduction:()=>St,Relu:()=>BE,Relu6:()=>GE,Reshape:()=>HE,ResizeBilinear:()=>zE,ResizeBilinearGrad:()=>GG,ResizeNearestNeighbor:()=>UE,ResizeNearestNeighborGrad:()=>zG,Reverse:()=>WE,RotateWithOffset:()=>DS,Round:()=>qE,Rsqrt:()=>KE,SGDOptimizer:()=>Jo,ScatterNd:()=>YE,SearchSorted:()=>ZE,Select:()=>QE,Selu:()=>JE,Sigmoid:()=>rS,Sign:()=>nS,Sin:()=>kO,Sinh:()=>tS,Slice:()=>eS,Softmax:()=>lS,Softplus:()=>oS,SpaceToBatchND:()=>sS,SparseFillEmptyRows:()=>cS,SparseReshape:()=>uS,SparseSegmentMean:()=>dS,SparseSegmentSum:()=>fS,SparseToDense:()=>pS,SplitV:()=>aS,Sqrt:()=>iS,Square:()=>WG,SquaredDifference:()=>hS,StaticRegexReplace:()=>mS,Step:()=>CS,StridedSlice:()=>gS,StringNGrams:()=>yS,StringSplit:()=>vS,StringToHashBucketFast:()=>bS,Sub:()=>RO,Sum:()=>OO,Tan:()=>PO,Tanh:()=>wS,Tensor:()=>Ie,TensorBuffer:()=>Ti,TensorScatterUpdate:()=>XE,Tile:()=>Md,TopK:()=>_S,Transform:()=>ES,Transpose:()=>kd,Unique:()=>SS,Unpack:()=>xS,UnsortedSegmentSum:()=>TS,UpperBound:()=>qG,Variable:()=>zo,ZerosLike:()=>IS,_FusedMatMul:()=>Rm,abs:()=>Wt,acos:()=>JS,acosh:()=>ex,add:()=>Z,addN:()=>tx,all:()=>nx,any:()=>rx,argMax:()=>Gd,argMin:()=>ox,asin:()=>ix,asinh:()=>sx,atan:()=>ax,atan2:()=>lx,atanh:()=>cx,avgPool:()=>Kd,avgPool3d:()=>px,backend:()=>Bd,backend_util:()=>SI,basicLSTMCell:()=>hx,batchNorm:()=>Ni,batchNorm2d:()=>mx,batchNorm3d:()=>gx,batchNorm4d:()=>yx,batchToSpaceND:()=>Yd,bincount:()=>Xd,bitwiseAnd:()=>vx,booleanMaskAsync:()=>yP,broadcastArgs:()=>bx,broadcastTo:()=>Ya,broadcast_util:()=>Za,browser:()=>xo,buffer:()=>vn,cast:()=>de,ceil:()=>wx,clipByValue:()=>_x,clone:()=>Jn,complex:()=>$n,concat:()=>ot,concat1d:()=>Ex,concat2d:()=>Sx,concat3d:()=>xx,concat4d:()=>Tx,conv1d:()=>Ix,conv2d:()=>Ai,conv2dTranspose:()=>Cx,conv3d:()=>Dx,conv3dTranspose:()=>Nx,copyRegisteredKernels:()=>QG,cos:()=>Ax,cosh:()=>Mx,cosineWindow:()=>Vc,cumprod:()=>kx,cumsum:()=>Ox,customGrad:()=>Dn,denseBincount:()=>Rx,deprecationWarn:()=>hR,depthToSpace:()=>Px,depthwiseConv2d:()=>Xa,device_util:()=>Wm,diag:()=>Fx,dilation2d:()=>Lx,disableDeprecationWarnings:()=>xW,dispose:()=>Et,disposeVariables:()=>TW,div:()=>Ce,divNoNan:()=>$x,dot:()=>Vx,dropout:()=>xP,einsum:()=>Mi,elu:()=>Zd,enableDebugMode:()=>SW,enableProdMode:()=>EW,enclosingPowerOfTwo:()=>dg,engine:()=>Km,ensureShape:()=>jx,env:()=>J,equal:()=>ms,erf:()=>Bx,euclideanNorm:()=>Ux,exp:()=>Ar,expandDims:()=>nn,expm1:()=>zx,eye:()=>Qd,fft:()=>nl,fill:()=>bo,findBackend:()=>kW,findBackendFactory:()=>OW,floor:()=>Jd,floorDiv:()=>zd,fused:()=>fg,gather:()=>ef,gatherND:()=>EP,gather_util:()=>bI,getBackend:()=>jd,getGradient:()=>Lm,getKernel:()=>Fa,getKernelsForBackend:()=>Rd,grad:()=>qR,grads:()=>KR,greater:()=>Yo,greaterEqual:()=>tf,ifft:()=>_s,imag:()=>Ri,image:()=>Es,inTopKAsync:()=>TP,io:()=>jc,irfft:()=>bf,isFinite:()=>Gx,isInf:()=>Wx,isNaN:()=>qx,keep:()=>jn,kernel_impls:()=>xI,leakyRelu:()=>nf,less:()=>Fc,lessEqual:()=>Qa,linalg:()=>b2,linspace:()=>Kx,localResponseNormalization:()=>Yx,log:()=>Xo,log1p:()=>rf,logSigmoid:()=>Xx,logSoftmax:()=>Zx,logSumExp:()=>sf,logicalAnd:()=>ys,logicalNot:()=>af,logicalOr:()=>lf,logicalXor:()=>Qx,losses:()=>w2,lowerBound:()=>Jx,matMul:()=>Ne,math:()=>vI,max:()=>wo,maxPool:()=>cf,maxPool3d:()=>eT,maxPoolWithArgmax:()=>tT,maximum:()=>uf,mean:()=>vs,memory:()=>IW,meshgrid:()=>nT,min:()=>Pc,minimum:()=>bs,mirrorPad:()=>df,mod:()=>rT,moments:()=>oT,movingAverage:()=>vP,mul:()=>V,multiRNNCell:()=>iT,multinomial:()=>sT,neg:()=>rn,nextFrame:()=>Y2,norm:()=>gs,notEqual:()=>ff,oneHot:()=>ws,ones:()=>Eo,onesLike:()=>aT,op:()=>b,outerProduct:()=>lT,pad:()=>Mr,pad1d:()=>cT,pad2d:()=>uT,pad3d:()=>pf,pad4d:()=>dT,pool:()=>fT,pow:()=>Ko,prelu:()=>mf,print:()=>Ud,prod:()=>pT,profile:()=>CW,raggedGather:()=>hT,raggedRange:()=>mT,raggedTensorToTensor:()=>gT,rand:()=>yT,randomGamma:()=>DT,randomNormal:()=>gf,randomStandardNormal:()=>NT,randomUniform:()=>tl,randomUniformInt:()=>AT,range:()=>Xr,ready:()=>AW,real:()=>Zo,reciprocal:()=>MT,registerBackend:()=>RW,registerGradient:()=>YG,registerKernel:()=>LO,relu:()=>Pi,relu6:()=>yf,removeBackend:()=>MW,reshape:()=>R,reverse:()=>mr,reverse1d:()=>kT,reverse2d:()=>OT,reverse3d:()=>RT,reverse4d:()=>PT,rfft:()=>rl,round:()=>vf,rsqrt:()=>FT,scalar:()=>ne,scatterND:()=>bP,scatter_util:()=>Sf,searchSorted:()=>Lc,selu:()=>LT,separableConv2d:()=>$T,serialization:()=>uI,setBackend:()=>NW,setPlatform:()=>PW,setdiff1dAsync:()=>VT,sigmoid:()=>er,sign:()=>jT,signal:()=>v2,sin:()=>BT,sinh:()=>HT,slice:()=>De,slice1d:()=>UT,slice2d:()=>zT,slice3d:()=>GT,slice4d:()=>WT,slice_util:()=>Cf,softmax:()=>qT,softplus:()=>of,spaceToBatchND:()=>hf,sparse:()=>_2,sparseToDense:()=>_P,spectral:()=>y2,split:()=>Qo,sqrt:()=>Bn,square:()=>qt,squaredDifference:()=>wf,squeeze:()=>Hn,stack:()=>Nn,step:()=>_f,stridedSlice:()=>KT,string:()=>E2,sub:()=>re,sum:()=>Ge,sumOutType:()=>uR,tan:()=>YT,tanh:()=>Rc,tensor:()=>tn,tensor1d:()=>Kt,tensor2d:()=>So,tensor3d:()=>Ef,tensor4d:()=>XT,tensor5d:()=>ZT,tensor6d:()=>QT,tensorScatterUpdate:()=>eI,tensor_util:()=>VS,test_util:()=>CT,tidy:()=>te,tile:()=>Oi,time:()=>DW,topk:()=>tI,train:()=>k9,transpose:()=>ol,truncatedNormal:()=>nI,unique:()=>rI,unregisterGradient:()=>ZG,unregisterKernel:()=>XG,unsortedSegmentSum:()=>oI,unstack:()=>gr,upcastType:()=>Ha,upperBound:()=>iI,util:()=>j,valueAndGrad:()=>YR,valueAndGrads:()=>XR,variable:()=>sI,variableGrads:()=>rg,version_core:()=>K2,where:()=>hr,whereAsync:()=>xf,zeros:()=>_o,zerosLike:()=>$t});var Cm=class{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}},yc=class{refCount(t){return dr("refCount")}incRef(t){return dr("incRef")}timerAvailable(){return!0}time(t){return dr("time")}read(t){return dr("read")}readSync(t){return dr("readSync")}readToGPU(t,n){return dr("readToGPU")}numDataIds(){return dr("numDataIds")}disposeData(t,n){return dr("disposeData")}write(t,n,r){return dr("write")}move(t,n,r,o,i){return dr("move")}createTensorFromGPUData(t,n,r){return dr("createTensorFromGPUData")}memory(){return dr("memory")}floatPrecision(){return dr("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return dr("dispose")}};function dr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function fO(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Dm(e,t,n)}function lG(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Dm(e,n,r),Dm(t,n,r)}function vc(e,t,n){return Math.max(e,Math.min(t,n))}function cG(e){return e%2===0?e:e+1}function Dm(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function uG(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function dG(e,t){let n=Math.random();return t*n+(1-n)*e}function fG(e,t){let n=0;for(let r=0;r<e.length;r++){let o=Number(e[r])-Number(t[r]);n+=o*o}return n}function S(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function at(e,t,n=""){S(Fn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function Nr(e){S(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xe(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function pG(e){return e.length===0}function X_(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function Fn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xi(e){return e%1===0}function hG(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function mG(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function gG(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return fO(t),t}function Ra(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function yG(e,t=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(e()){o();return}s++;let l=t(s);if(n!=null&&s>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function vG(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(e[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(e[i]<0)throw Error(`Shapes can not be < 0. Found ${e[i]} at dim ${i}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let o=e.slice();return o[r]=t/n,o}function cs(e,t){let n=t.length;return e=e==null?t.map((r,o)=>o):[].concat(e),S(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),S(e.every(r=>xi(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function Z_(e,t){let n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:cs(t,e).sort(),s=0;for(let a=0;a<e.length;++a){if(i!=null){if(i[s]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(i[s]==null||i[s]>a)&&e[a]===1&&(n.push(e[a]),r.push(a)),i[s]<=a&&s++}e[a]!==1&&(n.push(e[a]),r.push(a))}return{newShape:n,keptDims:r}}function Q_(e,t){return Nm(e,t)}function Nm(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function J_(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function e0(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function bG(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function bc(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function t0(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function ho(e){return typeof e=="string"||e instanceof String}function pO(e){return typeof e=="boolean"}function hO(e){return typeof e=="number"}function us(e){return Array.isArray(e)?us(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":hO(e)?"float32":ho(e)?"string":pO(e)?"bool":"float32"}function Bo(e){return!!(e&&e.constructor&&e.call&&e.apply)}function wc(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Ho(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function mO(e,t,n,r=!1){let o=new Array;if(t.length===1){let i=t[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[e+s]}else{let i=t[0],s=t.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=mO(e+l*a,s,n,r)}return o}function Oa(e,t,n=!1){if(e.length===0)return t[0];let r=e.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return mO(0,e,t,n)}function wG(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function Cd(e,t){let n=_c(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function _c(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function _G(e,t){let n=e.reduce((r,o)=>r*o,1);if(t==null||t==="float32")return Oa(e,new Float32Array(n));if(t==="int32")return Oa(e,new Int32Array(n));if(t==="bool")return Oa(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function ft(e){e.forEach(t=>{S(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function EG(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function SG(e,t,n){if(t===0)return[];if(t===1)return[e];let r=new Array(t);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}function Pa(e){return e&&e.then&&typeof e.then=="function"}var gO="tfjsflags",Ec=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=TG,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){let o=this.urlFlags[t];J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];let n=this.evaluateFlag(t);if(Pa(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);gO in t&&t[gO].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=CG(o,i)})}};function TG(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(IG(t,r[0],r[1]),r.join("="))),t}function IG(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function CG(e,t){let n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function J(){return Am}var Am=null;function yO(e){Am=e}var n0;function r0(){if(n0==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");n0=e}return n0}function DG(){let e=r0();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Dd(e,t){let n=DG();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var o0="Abs",i0="Acos",s0="Acosh",Mm="Add",a0="AddN",vO="All",bO="Any",l0="ArgMax",c0="ArgMin",u0="Asin",d0="Asinh",f0="Atan",p0="Atanh",h0="Atan2",m0="AvgPool",NG="AvgPoolGrad",g0="AvgPool3D",AG="AvgPool3DGrad",y0="BatchMatMul",v0="BatchToSpaceND",b0="Bincount",w0="BitwiseAnd",MG="BroadcastTo",_0="BroadcastArgs",Nd="Cast",E0="Ceil",S0="ClipByValue",x0="Complex",T0="ComplexAbs",I0="Concat",C0="Conv2D",D0="Conv2DBackpropFilter",N0="Conv2DBackpropInput",A0="Conv3D",kG="Conv3DBackpropFilterV2",M0="Conv3DBackpropInputV2",wO="Cos",k0="Cosh",O0="Cumprod",R0="Cumsum",P0="CropAndResize",F0="DenseBincount",L0="DepthToSpace",$0="DepthwiseConv2dNative",V0="DepthwiseConv2dNativeBackpropFilter",j0="DepthwiseConv2dNativeBackpropInput",B0="Diag",H0="Dilation2D",OG="Dilation2DBackpropInput",RG="Dilation2DBackpropFilter",km="Draw",U0="RealDiv",z0="Einsum",_O="Elu",PG="EluGrad",EO="Erf",G0="Equal",SO="Exp",W0="ExpandDims",q0="Expm1",xO="FFT",K0="Fill",Y0="FlipLeftRight",X0="Floor",Z0="FloorDiv",Q0="FusedBatchNorm",J0="GatherV2",eE="GatherNd",tE="Greater",nE="GreaterEqual",Ad="Identity",rE="IFFT",oE="Imag",iE="IsFinite",sE="IsInf",aE="IsNan",lE="LeakyRelu",cE="Less",uE="LessEqual",dE="LinSpace",TO="Log",fE="Log1p",pE="LogicalAnd",hE="LogicalNot",mE="LogicalOr",FG="LogicalXor",LG="LogSoftmax",$G="LowerBound",IO="LRN",VG="LRNGrad",jG="MatrixBandPart",CO="Max",gE="Maximum",yE="MaxPool",BG="MaxPoolGrad",vE="MaxPool3D",HG="MaxPool3DGrad",bE="MaxPoolWithArgmax",wE="Mean",DO="Min",_E="Minimum",EE="MirrorPad",NO="Mod",SE="Multinomial",xE="Multiply",AO="Neg",TE="NotEqual",IE="NonMaxSuppressionV3",CE="NonMaxSuppressionV4",DE="NonMaxSuppressionV5",NE="OnesLike",AE="OneHot",ME="Pack",kE="PadV2",UG="Pool",MO="Pow",OE="Prelu",RE="Prod",PE="RaggedGather",FE="RaggedRange",LE="RaggedTensorToTensor",$E="Range",VE="Real",jE="Reciprocal",BE="Relu",HE="Reshape",UE="ResizeNearestNeighbor",zG="ResizeNearestNeighborGrad",zE="ResizeBilinear",GG="ResizeBilinearGrad",GE="Relu6",WE="Reverse",qE="Round",KE="Rsqrt",YE="ScatterNd",XE="TensorScatterUpdate",ZE="SearchSorted",QE="Select",JE="Selu",eS="Slice",kO="Sin",tS="Sinh",nS="Sign",rS="Sigmoid",oS="Softplus",iS="Sqrt",OO="Sum",sS="SpaceToBatchND",aS="SplitV",lS="Softmax",cS="SparseFillEmptyRows",uS="SparseReshape",dS="SparseSegmentMean",fS="SparseSegmentSum",pS="SparseToDense",hS="SquaredDifference",WG="Square",mS="StaticRegexReplace",gS="StridedSlice",yS="StringNGrams",vS="StringSplit",bS="StringToHashBucketFast",RO="Sub",PO="Tan",wS="Tanh",Md="Tile",_S="TopK",ES="Transform",kd="Transpose",SS="Unique",xS="Unpack",TS="UnsortedSegmentSum",qG="UpperBound",IS="ZerosLike",CS="Step",Om="FromPixels",DS="RotateWithOffset",Rm="_FusedMatMul",Pm="FusedConv2D",Fm="FusedDepthwiseConv2D";function Uo(...e){J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(...e)}function KG(...e){J().getBool("IS_TEST")||J().getBool("PROD")||console.log(...e)}var Sc=Dd("kernelRegistry",()=>new Map),Od=Dd("gradRegistry",()=>new Map);function Fa(e,t){let n=NS(e,t);return Sc.get(n)}function Lm(e){return Od.get(e)}function Rd(e){let t=Sc.entries(),n=[];for(;;){let{done:r,value:o}=t.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===e&&n.push(s)}return n}function LO(e){let{kernelName:t,backendName:n}=e,r=NS(t,n);Sc.has(r)&&Uo(`The kernel '${t}' for backend '${n}' is already registered`),Sc.set(r,e)}function YG(e){let{kernelName:t}=e;Od.has(t)&&J().getBool("DEBUG")&&Uo(`Overriding the gradient for '${t}'`),Od.set(t,e)}function XG(e,t){let n=NS(e,t);if(!Sc.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);Sc.delete(n)}function ZG(e){if(!Od.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);Od.delete(e)}function QG(e,t){Rd(e).forEach(r=>{let o=Object.assign({},r,{backendName:t});LO(o)})}function NS(e,t){return`${t}_${e}`}var j={};He(j,{arraysEqual:()=>Fn,arraysEqualWithNull:()=>X_,assert:()=>S,assertNonNegativeIntegerDimensions:()=>ft,assertNonNull:()=>Nr,assertShapesMatch:()=>at,bytesFromStringArray:()=>t0,bytesPerElement:()=>bc,checkConversionForErrors:()=>J_,clamp:()=>vc,computeStrides:()=>Ho,convertBackendValuesAndArrayBuffer:()=>wG,createScalarValue:()=>iW,createShuffledIndices:()=>gG,decodeString:()=>Cc,distSquared:()=>fG,encodeString:()=>fs,fetch:()=>aW,fingerPrint64:()=>oW,flatten:()=>go,getArrayFromDType:()=>Nm,getTypedArrayFromDType:()=>Q_,hasEncodingLoss:()=>bG,hexToLong:()=>Pd,indexToLoc:()=>SG,inferDtype:()=>us,inferFromImplicitShape:()=>vG,isBoolean:()=>pO,isFunction:()=>Bo,isInt:()=>xi,isNumber:()=>hO,isPromise:()=>Pa,isScalarShape:()=>pG,isString:()=>ho,isTypedArray:()=>Dt,isValidDtype:()=>e0,locToIndex:()=>EG,makeOnesTypedArray:()=>Cd,makeZerosNestedTypedArray:()=>_G,makeZerosTypedArray:()=>_c,nearestDivisor:()=>wc,nearestLargerEven:()=>cG,now:()=>Ba,parseAxisParam:()=>cs,randUniform:()=>dG,repeatedTry:()=>yG,rightPad:()=>Ra,shuffle:()=>fO,shuffleCombo:()=>lG,sizeFromShape:()=>xe,sizeToSquarishShape:()=>mG,squeezeShape:()=>Z_,sum:()=>uG,swap:()=>Dm,tanh:()=>hG,toNestedArray:()=>Oa,toTypedArray:()=>Ic});function $m(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var OS=Jy(KO());var ja=OS.default||OS;function Pd(e){return ja.fromString(e,!0,16)}var XO=Pd("c3a5c85c97cb3127"),Va=Pd("b492b66fbe98f273"),Ln=Pd("9ae16a3b2f90404f");function kS(e){return e.xor(e.shru(47))}function ZO(e,t,n){let r=e.slice(t,t+n);return ja.fromBytes(Array.from(r),!0,!0)}function pt(e,t){return ZO(e,t,8)}function YO(e,t){return ZO(e,t,4)}function en(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function ds(e,t,n=Pd("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let o=t.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function eW(e,t,n,r,o,i){o=o.add(e),i=en(i.add(o).add(r),21);let s=o;return o=o.add(t),o=o.add(n),i=i.add(en(o,44)),[o.add(r),i.add(s)]}function jm(e,t,n,r){return eW(pt(e,t),pt(e,t+8),pt(e,t+16),pt(e,t+24),n,r)}function tW(e,t=e.length){if(t>=8){let n=Ln.add(t*2),r=pt(e,0).add(Ln),o=pt(e,t-8),i=en(o,37).mul(n).add(r),s=en(r,25).add(o).mul(n);return ds(i,s,n)}if(t>=4){let n=Ln.add(t*2),r=YO(e,0);return ds(r.shl(3).add(t),YO(e,t-4),n)}if(t>0){let n=e[0],r=e[t>>1],o=e[t-1],i=n+(r<<8),s=t+(o<<2);return kS(Ln.mul(i).xor(XO.mul(s))).mul(Ln)}return Ln}function nW(e,t=e.length){let n=Ln.add(t*2),r=pt(e,0).mul(Va),o=pt(e,8),i=pt(e,t-8).mul(n),s=pt(e,t-16).mul(Ln);return ds(en(r.add(o),43).add(en(i,30)).add(s),r.add(en(o.add(Ln),18)).add(i),n)}function rW(e,t=e.length){let n=Ln.add(t*2),r=pt(e,0).mul(Ln),o=pt(e,8),i=pt(e,t-8).mul(n),s=pt(e,t-16).mul(Ln),a=en(r.add(o),43).add(en(i,30)).add(s),l=ds(a,r.add(en(o.add(Ln),18)).add(i),n),c=pt(e,16).mul(n),u=pt(e,24),f=a.add(pt(e,t-32)).mul(n),p=l.add(pt(e,t-24)).mul(n);return ds(en(c.add(u),43).add(en(f,30)).add(p),c.add(en(u.add(r),18)).add(f),n)}function oW(e,t=e.length){let n=ja.fromNumber(81,!0);if(t<=32)return t<=16?tW(e,t):nW(e,t);if(t<=64)return rW(e,t);let r=n,o=n.mul(Va).add(113),i=kS(o.mul(Ln).add(113)).mul(Ln),s=[ja.UZERO,ja.UZERO],a=[ja.UZERO,ja.UZERO];r=r.mul(Ln).add(pt(e,0));let l=0,c=(t-1>>6)*64,u=c+(t-1&63)-63;do r=en(r.add(o).add(s[0]).add(pt(e,l+8)),37).mul(Va),o=en(o.add(s[1]).add(pt(e,l+48)),42).mul(Va),r=r.xor(a[1]),o=o.add(s[0]).add(pt(e,l+40)),i=en(i.add(a[0]),33).mul(Va),s=jm(e,l,s[1].mul(Va),r.add(a[0])),a=jm(e,l+32,i.add(a[1]),o.add(pt(e,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let f=Va.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(t-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=en(r.add(o).add(s[0]).add(pt(e,l+8)),37).mul(f),o=en(o.add(s[1]).add(pt(e,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(pt(e,l+40))),i=en(i.add(a[0]),33).mul(f),s=jm(e,l,s[1].mul(f),r.add(a[0])),a=jm(e,l+32,i.add(a[1]),o.add(pt(e,l+16))),[i,r]=[r,i],ds(ds(s[0],a[0],f).add(kS(o).mul(XO)).add(i),ds(s[1],a[1],f).add(r),f)}function iW(e,t){return t==="string"?fs(e):Ic([e],t)}function sW(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function Ic(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=go(e)),J().getBool("DEBUG")&&J_(e,t),sW(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){let n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Ba(){return J().platform.now()}function aW(e,t){return J().platform.fetch(e,t)}function fs(e,t="utf-8"){return t=t||"utf-8",J().platform.encode(e,t)}function Cc(e,t="utf-8"){return t=t||"utf-8",J().platform.decode(e,t)}function Dt(e){return J().platform.isTypedArray!=null?J().platform.isTypedArray(e):$m(e)}function go(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||Pa(e)||e==null||Dt(e)&&n)t.push(e);else if(Array.isArray(e)||Dt(e))for(let r=0;r<e.length;++r)go(e[r],t,n);else{let r=-1;for(let o of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)go(e[o],t,n)}return t}var Bm=class{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new RS)}profileKernel(t,n,r){let o,i=()=>{o=r()},s,a=Ba();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:Ba()-a})}if(J().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(f=>{lW(f,u.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=t;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}};function lW(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){let o=e[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var RS=class{logKernelProfile(t,n,r,o,i,s){let a=typeof o=="number"?Ra(`${o}ms`,9):o.error,l=Ra(t,25),c=n.rank,u=n.size,f=Ra(n.shape.toString(),14),p="";for(let m in i){let w=i[m];if(w!=null){let x=w.shape||n.shape,T=x.length;p+=`${m}: ${T}D ${T>0?x:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${f}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function QO(e,t,n){let r={},o={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let c=e[l],u=c.inputs;for(let f in u){let p=u[f],m=!1;for(let w=0;w<t.length;w++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let c=e[l],u=c.inputs;for(let f=0;f<c.outputs.length;f++)if(i[c.outputs[f].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<e.length;l++){let c=e[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let m=c.inputs[p];r[m.id]&&(u[p]=m)}let f=Object.assign({},c);f.inputs=u,f.outputs=c.outputs,a.push(f)}}return a}function JO(e,t,n,r){for(let o=t.length-1;o>=0;o--){let i=t[o],s=[];if(i.outputs.forEach(l=>{let c=e[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!Fn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(e[u.id]==null)e[u.id]=c;else{let f=e[u.id];e[u.id]=r(f,c),f.dispose()}}}}var eR=20,Fd=3,PS=7;function tR(e,t,n,r){let o=Ho(t),i=cW(e,t,n,o),s=t.length,a=Hm(e,t,n,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function cW(e,t,n,r){let o=xe(t),i=r[r.length-1],s=new Array(i).fill(0),a=t.length,l=n==="complex64"?$d(e):e;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],Ld(l[u+f],0,n).length)}return s}function Ld(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(PS))} + ${parseFloat(e[1].toFixed(PS))}j`:ho(e)?r=`'${e}'`:n==="bool"?r=nR(e):r=parseFloat(e.toFixed(PS)).toString(),Ra(r,t)}function nR(e){return e===0?"false":"true"}function Hm(e,t,n,r,o,i=!0){let s=n==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(n==="complex64"){let x=$d(e);return[Ld(x[0],0,n)]}return n==="bool"?[nR(e[0])]:[e[0].toString()]}if(l===1){if(a>eR){let T=Fd*s,D=Array.from(e.slice(0,T)),P=Array.from(e.slice((a-Fd)*s,a*s));return n==="complex64"&&(D=$d(D),P=$d(P)),["["+D.map((A,M)=>Ld(A,o[M],n)).join(", ")+", ..., "+P.map((A,M)=>Ld(A,o[a-Fd+M],n)).join(", ")+"]"]}return["["+(n==="complex64"?$d(e):Array.from(e)).map((T,D)=>Ld(T,o[D],n)).join(", ")+"]"]}let c=t.slice(1),u=r.slice(1),f=r[0]*s,p=[];if(a>eR){for(let x=0;x<Fd;x++){let T=x*f,D=T+f;p.push(...Hm(e.slice(T,D),c,n,u,o,!1))}p.push("...");for(let x=a-Fd;x<a;x++){let T=x*f,D=T+f;p.push(...Hm(e.slice(T,D),c,n,u,o,x===a-1))}}else for(let x=0;x<a;x++){let T=x*f,D=T+f;p.push(...Hm(e.slice(T,D),c,n,u,o,x===a-1))}let m=l===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+m;let w=`,
`;for(let x=2;x<l;x++)w+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":w),p}function $d(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ti=class{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=xe(t),r!=null){let o=r.length;S(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Nm(n,this.size),this.strides=Ho(t)}set(t,...n){n.length===0&&(n=[0]),S(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(let o of t){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=this.strides[o]*t[o];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return yo().makeTensor(this.values,this.shape,this.dtype)}},yo=null,Dc=null,uW=null;function rR(e){yo=e}function oR(e){Dc=e}function iR(e){uW=e}var Ie=class{constructor(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=xe(t),this.strides=Ho(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let t=await this.data();return Dc.buffer(this.shape,this.dtype,t)}bufferSync(){return Dc.buffer(this.shape,this.dtype,this.dataSync())}async array(){let t=await this.data();return Oa(this.shape,t,this.dtype==="complex64")}arraySync(){return Oa(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let t=yo().read(this.dataId);if(this.dtype==="string"){let n=await t;try{return n.map(r=>Cc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),yo().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=yo().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Cc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();let t=await yo().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),yo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return Dc.print(this,t)}clone(){return this.throwIfDisposed(),Dc.clone(this)}toString(t=!1){let n=this.dataSync();return tR(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),Dc.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),yo().makeVariable(this,t,n,r)}};Object.defineProperty(Ie,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function FS(){return Dd("Tensor",()=>Ie)}FS();var zo=class extends Ie{constructor(t,n,r,o){super(t.shape,t.dtype,t.dataId,o),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Fn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);yo().disposeTensor(this),this.dataId=t.dataId,yo().incRef(this,null)}dispose(){yo().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(zo,Symbol.hasInstance,{value:e=>e instanceof Ie&&e.assign!=null&&e.assign instanceof Function});var VS={};He(VS,{assertTypesMatch:()=>$S,getTensorsInContainer:()=>Vd,isTensorInList:()=>fW,makeTypesMatch:()=>_e});var LS=(function(e){return e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6",e})(LS||{}),sR=(function(e){return e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",e})(sR||{}),aR=(function(e){return e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",e})(aR||{}),lR=(function(e){return e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",e})(lR||{}),cR=(function(e){return e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64",e})(cR||{}),dW={float32:lR,int32:sR,bool:aR,complex64:cR};function Ha(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return dW[e][t]}function uR(e){return Ha(e,"int32")}function Um(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function zm(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}function _e(e,t){if(e.dtype===t.dtype)return[e,t];let n=Ha(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function $S(e,t){S(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function fW(e,t){return t.some(n=>n.id===e.id)}function Vd(e){let t=[];return dR(e,t,new Set),t}function dR(e,t,n){if(e==null)return;if(e instanceof Ie){t.push(e);return}if(!pW(e))return;let r=e;for(let o in r){let i=r[o];n.has(i)||(n.add(i),dR(i,t,n))}}function pW(e){return Array.isArray(e)||typeof e=="object"}function jS(e){return e.kernelName!=null}var Gm=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},hW=(()=>{class e{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Gm}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(await this.initializeBackend(o).success){await this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(Uo(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}async setBackend(n){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?await r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new Bm(this.backendInstance),!0}setupRegisteredKernels(){Rd(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){Rd(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof yc)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Uo(`Initialization of backend ${n} failed`),Uo(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return Uo(`Initialization of backend ${n} failed`),Uo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return e.nextTensorId++}nextVariableId(){return e.nextVariableId++}clone(n){let r=_.runKernel(Ad,{x:n}),o={x:n},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return _.runKernel(Nd,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(Fa(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=jS(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(jS(n)){let{kernelName:x,inputs:T,attrs:D}=n;this.backendName==null&&this.backend;let P=Fa(x,this.backendName);S(P!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),l=()=>{let A=this.backend.numDataIds();c=P.kernelFunc({inputs:T,attrs:D,backend:this.backend});let M=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,A,M);let $=M.map(L=>L.rank!=null?L:this.makeTensorFromTensorInfo(L));if(i){let L=this.getTensorsForGradient(x,T,$);o=this.saveTensorsForBackwardMode(L)}return $}}else{let{forwardFunc:x}=n,T=D=>{i&&(o=D.map(P=>this.keep(this.clone(P))))};l=()=>{let D=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,T));let P=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,D,P),P}}let{inputs:f,attrs:p}=n,m=jS(n)?null:n.backwardsFunc,w;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(w=this.profiler.profileKernel(u,f,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(w),r=w.outputs)}),i&&this.addTapeNode(u,f,r,m,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(x=>f[x]!=null?f[x].shape:null),outputShapes:r.map(x=>x.shape),kernelTimeMs:w.timeMs,extraInfo:w.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=Lm(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(S(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,f)=>a[f]);return l.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&ho(n[0])&&(s=n.map(c=>fs(c)));let a=i.write(s,r,o),l=new Ie(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=t0(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new Ie(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new zo(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*bc(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof zo||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*bc(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}async profile(n){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=Lm(n);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((f,p)=>{if(f==null){let m=o[p],w=_c(m.size,m.dtype);return this.makeTensor(w,m.shape,m.dtype)}return f}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=Vd(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(S(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));S(s instanceof Ie,()=>"The result y returned by f() must be a tensor.");let a=QO(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??mW(s.shape),JO(l,a,u=>this.tidy(u),gW);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let f of u.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return S(Bo(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{S(r.every(l=>l instanceof Ie),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=n(...r,c),S(o.value instanceof Ie,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),S(Bo(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),f=Array.isArray(u)?u:[u];S(f.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),S(f.every(m=>m instanceof Ie),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return f.forEach((m,w)=>{p[w]=()=>m}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}async time(n){let r=Ba(),o=await this.backend.time(n);return o.wallMs=Ba()-r,o}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Gm;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return e.nextTensorId=0,e.nextVariableId=0,e})();function mW(e){let t=Cd(xe(e),"float32");return _.makeTensor(t,e,"float32")}function BS(){let e=r0();if(e._tfengine==null){let t=new Ec(e);e._tfengine=new hW(t)}return yO(e._tfengine.ENV),rR(()=>e._tfengine),e._tfengine}var _=BS();function gW(e,t){let n={a:e,b:t};return _.runKernel("Add",n)}var Wm={};He(Wm,{isBrowser:()=>US,isMobile:()=>bW,mockIsMobile:()=>vW});function yW(){return typeof navigator<"u"&&navigator!=null}var HS;function vW(e){HS=e}function bW(e){if(HS!==void 0)return HS;if(e||yW()){if(e||(e=navigator),e.product==="ReactNative")return!0;let t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){let n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function US(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Qn=J();Qn.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Qn.registerFlag("IS_BROWSER",()=>US());Qn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Qn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Qn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Qn.registerFlag("PROD",()=>!1);Qn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Qn.getBool("DEBUG"));Qn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Qn.registerFlag("IS_TEST",()=>!1);Qn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Qn.getBool("DEBUG"));Qn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Qn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Qn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function gn(e,t){let n=e;if(Dt(e))return t==="string"?[]:[e.length];if(Um(e)){let o=e.channels||"RGBA";return[e.height,e.width*o.length]}else if(zm(e))return[e.buffer.size/(t==null?4:bc(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Dt(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&J().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&pR(e,r,[]),r}function pR(e,t,n){if(n=n||[],!Array.isArray(e)&&!Dt(e)){S(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}S(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),S(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);let r=t.slice(1);for(let o=0;o<e.length;++o)pR(e[o],r,n.concat(o))}function fR(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function y(e,t,n,r="numeric"){if(e instanceof FS())return fR(r,e.dtype,t,n),e;let o=us(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),fR(r,o,t,n),e==null||!Dt(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){let l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}let i=gn(e,o);!Dt(e)&&!Array.isArray(e)&&(e=[e]);let a=o!=="string"?Ic(e,o):go(e,[],!0);return _.makeTensor(a,i,o)}function Ii(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,s)=>y(i,`${t}[${s}]`,n,r))}var qm="__op";function b(e){let t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+qm;let o=(...i)=>{_.startScope(n);try{let s=r(...i);return Pa(s)&&console.error("Cannot return a Promise inside of tidy."),_.endScope(s),s}catch(s){throw _.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function wW(e,t){let n=y(e,"real","complex"),r=y(t,"imag","complex");at(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return _.runKernel(x0,o)}var $n=b({complex_:wW});function Vn(e,t,n,r){if(r==null)r=us(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(zm(e)||Um(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return _.backend.createTensorFromGPUData(e,t||n,r)}if(!Dt(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){ft(t);let o=xe(t),i=xe(n);S(o===i,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1?a!==xe(t.slice(s)):!0;S(n[s]===t[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Dt(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?Ic(e,r):go(e,[],!0),_.makeTensor(e,t,r)}function tn(e,t,n){let r=gn(e,n);return Vn(e,t,r,n)}var Ci={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var yn=class e{static join(t){return new e(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>Dt(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){let o=t[r];r!==t.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);let r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);let o=n-t,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],f=t+a-c.start,p=a,w=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,f,w-f);if(s.set(x,p),a+=x.length,n<c.end)break}return i}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(o){return t<o.start?-1:t>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=_W(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function _W(e,t){let n=0,r=e.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=t(e[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}function EW(){J().set("PROD",!0)}function SW(){J().set("DEBUG",!0)}function xW(){J().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function hR(e){J().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}iR(hR);function TW(){_.disposeVariables()}function Km(){return _}function IW(){return _.memory()}function CW(e){return _.profile(e)}function te(e,t){return _.tidy(e,t)}function Et(e){Vd(e).forEach(n=>n.dispose())}function jn(e){return _.keep(e)}function DW(e){return _.time(e)}function NW(e){return _.setBackend(e)}function AW(){return _.ready()}function jd(){return _.backendName}function MW(e){_.removeBackend(e)}function kW(e){return _.findBackend(e)}function OW(e){return _.findBackendFactory(e)}function RW(e,t,n=1){return _.registerBackend(e,t,n)}function Bd(){return _.backend}function PW(e,t){J().setPlatform(e,t)}var ps=4;async function yR(e,t){let n=[],r=[],o=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(e)?e[s].tensor:e[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(async f=>{let p=await l.bytes(),m=p.reduce((T,D)=>T+D.length,0)+ps*p.length,w=new Uint8Array(m),x=0;for(let T=0;T<p.length;T++){let D=p[T],P=new Uint8Array(new Uint32Array([D.length]).buffer);w.set(P,x),x+=ps,w.set(D,x),x+=D.length}f(w)});r.push(u)}else r.push(l.data());t!=null&&(c.group=t),n.push(c)}let i=await Promise.all(r);return{data:$W(i),specs:n}}function Ym(e,t){let n=new yn(e),r={},o=0;for(let i of t){let s=FW(i,(a,l)=>n.slice(o+a,o+l));r[i.name]=vR(i,n.slice(o,o+s)),o+=s}return r}function FW(e,t){let n=xe(e.shape),r;if("quantization"in e){let o=e.quantization;r=Ci[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=ps+new Uint32Array(t(o,o+ps))[0];return o}else r=Ci[e.dtype];return n*r}async function LW(e,t){let n=xe(e.shape),r;if("quantization"in e){let o=e.quantization;r=Ci[o.dtype]}else if(e.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=ps+new Uint32Array(await t(o,o+ps))[0];return o}else r=Ci[e.dtype];return n*r}function vR(e,t){let n=e.name,r=e.dtype,o=e.shape,i=xe(o),s,a=0;if("quantization"in e){let l=e.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${e.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Ci[l.dtype],u=l.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=p*l.scale+l.min}}else if(l.dtype==="float16")s=HW()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let l=xe(e.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(t.slice(a,a+ps))[0];a+=ps;let f=new Uint8Array(t.slice(a,a+u));s.push(f),a+=u}}else{let l=Ci[r];if(r==="float32")s=new Float32Array(t);else if(r==="int32")s=new Int32Array(t);else if(r==="bool")s=new Uint8Array(t);else if(r==="complex64"){s=new Float32Array(t);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let w=0;w<c.length;w++)c[w]=s[w*2],u[w]=s[w*2+1];let f=tn(c,o,"float32"),p=tn(u,o,"float32"),m=$n(f,p);return f.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return tn(s,o,r)}async function mR(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:o,value:i}=await e.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer}async function Xm(e,t){let n={},r=e.getReader(),o=new ArrayBuffer(0);for(let i of t){let s=await LW(i,async(c,u)=>(o=await mR(r,o,u),o.slice(c,u)));o=await mR(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=vR(i,a);if(n[i.name]=l,jd()==="webgpu"){let c=Bd();"uploadToGPU"in c&&xe(l.shape)>=J().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function $W(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(i=>{if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(t),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var zS=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function gR(e){return zS?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function bR(e){if(zS)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function wR(e){if(zS){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function _R(e){return yn.join(e)}function GS(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let n=e.split("/");return n[n.length-1]}function Zm(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function WS(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function Nc(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),WS(e,n,r)}function Go(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:gR(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:gR(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new yn(e.weightData).byteLength}}function Hd(e){let t=[];for(let n of e)t.push(...n.weights);return t}function VW(){let e=n=>{let r=n<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function jW(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function BW(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function HW(){let e=VW(),t=jW(),n=BW();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=e[n[a>>10]+(a&1023)]+t[a>>10];i[s]=l}return new Float32Array(o)}}var Gt=class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,n){return e.getHandlers(t,"load",n)}static getHandlers(t,n,r){let o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(s=>{let a=s(t,r);a!==null&&o.push(a)}),o}},ER=e=>Gt.registerSaveRouter(e),SR=e=>Gt.registerLoadRouter(e),xR=e=>Gt.getSaveHandlers(e),TR=(e,t)=>Gt.getLoadHandlers(e,t);var qS="tensorflowjs",KS=1,Ua="models_store",hs="model_info_store";function IR(){if(!J().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function YS(e){let t=e.result;t.createObjectStore(Ua,{keyPath:"modelPath"}),t.createObjectStore(hs,{keyPath:"modelPath"})}var za=(()=>{class e{constructor(n){if(this.indexedDB=IR(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)}async load(){return this.databaseAction(this.modelPath)}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(qS,KS);s.onupgradeneeded=()=>YS(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(Ua,"readonly"),u=l.objectStore(Ua).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=f=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=yn.join(r.weightData);let l=Go(r),c=a.transaction(hs,"readwrite"),u=c.objectStore(hs),f;try{f=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(m){return i(m)}let p;f.onsuccess=()=>{p=a.transaction(Ua,"readwrite");let m=p.objectStore(Ua),w;try{w=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(x){return i(x)}w.onsuccess=()=>o({modelArtifactsInfo:l}),w.onerror=x=>{u=c.objectStore(hs);let T=u.delete(this.modelPath);T.onsuccess=()=>(a.close(),i(w.error)),T.onerror=D=>(a.close(),i(w.error))}},f.onerror=m=>(a.close(),i(f.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return e.URL_SCHEME="indexeddb://",e})();var CR=e=>J().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(za.URL_SCHEME)?UW(e.slice(za.URL_SCHEME.length)):null;Gt.registerSaveRouter(CR);Gt.registerLoadRouter(CR);function UW(e){return new za(e)}function zW(e){return e.startsWith(za.URL_SCHEME)?e.slice(za.URL_SCHEME.length):e}var Qm=class{constructor(){this.indexedDB=IR()}async listModels(){return new Promise((t,n)=>{let r=this.indexedDB.open(qS,KS);r.onupgradeneeded=()=>YS(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(hs,"readonly"),a=i.objectStore(hs).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;t(l)},a.onerror=l=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(t){return t=zW(t),new Promise((n,r)=>{let o=this.indexedDB.open(qS,KS);o.onupgradeneeded=()=>YS(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(hs,"readwrite"),a=s.objectStore(hs),l=a.get(t),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{let u=a.delete(t),f=()=>{c=i.transaction(Ua,"readwrite");let m=c.objectStore(Ua).delete(t);m.onsuccess=()=>n(l.result.modelArtifactsInfo),m.onerror=w=>r(l.error)};u.onsuccess=f,u.onerror=p=>(f(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})}};var Di="/",Ac="tensorflowjs_models",DR="info",GW="model_topology",WW="weight_specs",qW="weight_data",KW="model_metadata";function NR(e){return{info:[Ac,e,DR].join(Di),topology:[Ac,e,GW].join(Di),weightSpecs:[Ac,e,WW].join(Di),weightData:[Ac,e,qW].join(Di),modelMetadata:[Ac,e,KW].join(Di)}}function AR(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function YW(e){let t=e.split(Di);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Di)}function XW(e){return e.startsWith(Ga.URL_SCHEME)?e.slice(Ga.URL_SCHEME.length):e}var Ga=(()=>{class e{constructor(n){if(!J().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=NR(this.modelPath)}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=Go(n),s=yn.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,bR(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw AR(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=wR(a),r}}return e.URL_SCHEME="localstorage://",e})();var MR=e=>J().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ga.URL_SCHEME)?ZW(e.slice(Ga.URL_SCHEME.length)):null;Gt.registerSaveRouter(MR);Gt.registerLoadRouter(MR);function ZW(e){return new Ga(e)}var Jm=class{constructor(){S(J().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),S(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let t={},n=Ac+Di,r=Di+DR;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=YW(i);t[s]=JSON.parse(this.LS.getItem(i))}}return t}async removeModel(t){t=XW(t);let n=NR(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);let r=JSON.parse(this.LS.getItem(n.info));return AR(n),r}};var Mc="://",vo=class e{constructor(){this.managers={}}static getInstance(){return e.instance==null&&(e.instance=new e),e.instance}static registerManager(t,n){S(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Mc)&&(t=t.slice(0,t.indexOf(Mc))),S(t.length>0,()=>"scheme must not be an empty string.");let r=e.getInstance();S(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){let n=e.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(e.getInstance().managers)}};function eg(e){if(e.indexOf(Mc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${vo.getSchemes().join(",")}`);return{scheme:e.split(Mc)[0],path:e.split(Mc)[1]}}async function kR(e,t,n=!1){S(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=Gt.getLoadHandlers(e);S(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),S(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let o=r[0],i=Gt.getSaveHandlers(t);S(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),S(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let s=i[0],a=eg(e).scheme,l=eg(e).path,c=a===eg(e).scheme,u=await o.load();n&&c&&await vo.getManager(a).removeModel(l);let f=await s.save(u);return n&&!c&&await vo.getManager(a).removeModel(l),f.modelArtifactsInfo}async function OR(){let e=vo.getSchemes(),t={};for(let n of e){let r=await vo.getManager(n).listModels();for(let o in r){let i=n+Mc+o;t[i]=r[o]}}return t}async function RR(e){let t=eg(e);return vo.getManager(t.scheme).removeModel(t.path)}async function PR(e,t){return kR(e,t,!1)}async function FR(e,t){return kR(e,t,!0)}var XS=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!J().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return $m(t)}};if(J().get("IS_BROWSER")){J().setPlatform("browser",new XS);try{vo.registerManager(Ga.URL_SCHEME,new Jm)}catch{}try{vo.registerManager(za.URL_SCHEME,new Qm)}catch{}}var JW={importFetch:()=>$R()},ZS;var QS=class{constructor(){this.util=VR(),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return J().global.fetch!=null?J().global.fetch(t,n):(ZS==null&&(ZS=JW.importFetch()),ZS(t,n))}now(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}};J().get("IS_NODE")&&!J().get("IS_BROWSER")&&J().setPlatform("node",new QS);function vn(e,t="float32",n){return t=t||"float32",ft(e),new Ti(e,t,n)}function e5(e,t){let n=y(e,"x","cast");if(!e0(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:t};return _.runKernel(Nd,r,o)}var de=b({cast_:e5});function t5(e){let n={x:y(e,"x","clone","string_or_numeric")};return _.runKernel(Ad,n)}var Jn=b({clone_:t5});function Ud(e,t=!1){console.log(e.toString(t))}BS();var n5={buffer:vn,cast:de,clone:Jn,print:Ud};oR(n5);function r5(e,t){let n=y(e,"a","add"),r=y(t,"b","add");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel("Add",o)}var Z=b({add_:r5});function o5(e,t){let n=y(e,"a","floorDiv"),r=y(t,"b","floorDiv");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel(Z0,o)}var zd=b({floorDiv_:o5});function i5(e,t){let n=y(e,"a","div"),r=y(t,"b","div");if([n,r]=_e(n,r),n.dtype==="int32"&&r.dtype==="int32")return zd(n,r);let o={a:n,b:r},i={};return _.runKernel(U0,o,i)}var Ce=b({div_:i5});function s5(e,t){let n=y(e,"a","mul"),r=y(t,"b","mul");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel(xE,o)}var V=b({mul_:s5});function a5(e){let t=y(e,"x","abs");if(t.dtype==="complex64"){let n={x:t};return _.runKernel(T0,n)}else{let n={x:t};return _.runKernel("Abs",n)}}var Wt=b({abs_:a5});function l5(e){let n={x:y(e,"x","acos")};return _.runKernel(i0,n)}var JS=b({acos_:l5});function c5(e){let n={x:y(e,"x","acosh")};return _.runKernel(s0,n)}var ex=b({acosh_:c5});function u5(e){S(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),S(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((o,i)=>y(o,`tensors${i}`,"addN")),n=t[0];t.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(o=>{if(!Fn(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return _.runKernel(a0,r)}var tx=b({addN_:u5});function d5(e,t=null,n=!1){let o={x:y(e,"x","all","bool")},i={axis:t,keepDims:n};return _.runKernel("All",o,i)}var nx=b({all_:d5});function f5(e,t=null,n=!1){let o={x:y(e,"x","any","bool")},i={axis:t,keepDims:n};return _.runKernel("Any",o,i)}var rx=b({any_:f5});function p5(e,t=0){let r={x:y(e,"x","argMax")},o={axis:t};return _.runKernel(l0,r,o)}var Gd=b({argMax_:p5});function h5(e,t=0){let r={x:y(e,"x","argMin")},o={axis:t};return _.runKernel(c0,r,o)}var ox=b({argMin_:h5});function m5(e){let n={x:y(e,"x","asin")};return _.runKernel(u0,n)}var ix=b({asin_:m5});function g5(e){let n={x:y(e,"x","asinh")};return _.runKernel(d0,n)}var sx=b({asinh_:g5});function y5(e){let n={x:y(e,"x","atan")};return _.runKernel(f0,n)}var ax=b({atan_:y5});function v5(e,t){let n=y(e,"a","atan2"),r=y(t,"b","atan2");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel(h0,o)}var lx=b({atan2_:v5});function b5(e){let n={x:y(e,"x","atanh")};return _.runKernel(p0,n)}var cx=b({atanh_:b5});function w5(e,t,n,r,o="NHWC",i){let s=e[3],a=[...t,s],l=BR(o);return Ka(e,a,n,i,r,null,null,l)}function dx(e,t,n,r,o,i,s="channelsLast"){let[a,l]=Wd(t),c;if(s==="channelsLast")c=[a,l,e[3],e[3]];else if(s==="channelsFirst")c=[a,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return Ka(e,c,n,r,o,i,!1,s)}function _5(e,t,n,r,o,i,s="NDHWC"){let[a,l,c]=ux(t),u,f;if(s==="NDHWC")f="channelsLast",u=[a,l,c,e[4],e[4]];else if(s==="NCDHW")f="channelsFirst",u=[a,l,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${s}`);return jR(e,u,n,r,o,!1,f,i)}function Ka(e,t,n,r,o,i,s=!1,a="channelsLast"){let[l,c,u,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,f]=e;else if(a==="channelsFirst")[l,f,c,u]=e;else throw new Error(`Unknown dataFormat ${a}`);let[p,m,,w]=t,[x,T]=Wd(n),[D,P]=Wd(r),A=Oc(p,D),M=Oc(m,P),{padInfo:$,outHeight:L,outWidth:H}=x5(o,c,u,x,T,A,M,i,a),G=s?w*f:w,W;return a==="channelsFirst"?W=[l,G,L,H]:a==="channelsLast"&&(W=[l,L,H,G]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:f,outHeight:L,outWidth:H,outChannels:G,padInfo:$,strideHeight:x,strideWidth:T,filterHeight:p,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:M,dilationHeight:D,dilationWidth:P,inShape:e,outShape:W,filterShape:t}}function jR(e,t,n,r,o,i=!1,s="channelsLast",a){let[l,c,u,f,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,f,p]=e;else if(s==="channelsFirst")[l,p,c,u,f]=e;else throw new Error(`Unknown dataFormat ${s}`);let[m,w,x,,T]=t,[D,P,A]=ux(n),[M,$,L]=ux(r),H=Oc(m,M),G=Oc(w,$),W=Oc(x,L),{padInfo:K,outDepth:U,outHeight:ue,outWidth:se}=T5(o,c,u,f,D,P,A,H,G,W,a),Oe=i?T*p:T,Le;return s==="channelsFirst"?Le=[l,Oe,U,ue,se]:s==="channelsLast"&&(Le=[l,U,ue,se,Oe]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:f,inChannels:p,outDepth:U,outHeight:ue,outWidth:se,outChannels:Oe,padInfo:K,strideDepth:D,strideHeight:P,strideWidth:A,filterDepth:m,filterHeight:w,filterWidth:x,effectiveFilterDepth:H,effectiveFilterHeight:G,effectiveFilterWidth:W,dilationDepth:M,dilationHeight:$,dilationWidth:L,inShape:e,outShape:Le,filterShape:t}}function E5(e,t,n,r,o){r==null&&(r=fx(e,t,n));let i=e[0],s=e[1],a=qd((i-t+2*r)/n+1,o),l=qd((s-t+2*r)/n+1,o);return[a,l]}function S5(e,t,n,r,o,i){o==null&&(o=fx(e,t[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)e[a]+2*o>=t[a]&&(s[a]=qd((e[a]-t[a]+2*o)/r[a]+1,i));return s}function fx(e,t,n,r=1){let o=Oc(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function Wd(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function ux(e){return typeof e=="number"?[e,e,e]:e}function Oc(e,t){return t<=1?e:e+(e-1)*(t-1)}function x5(e,t,n,r,o,i,s,a,l){let c,u,f;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};let m=E5([t,n],i,r,e,a);u=m[0],f=m[1]}else if(e==="same"){u=Math.ceil(t/r),f=Math.ceil(n/o);let p=Math.max(0,(u-1)*r+i-t),m=Math.max(0,(f-1)*o+s-n),w=Math.floor(p/2),x=p-w,T=Math.floor(m/2),D=m-T;c={top:w,bottom:x,left:T,right:D,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),f=Math.ceil((n-s+1)/o);else if(typeof e=="object"){let p=l==="channelsLast"?e[1][0]:e[2][0],m=l==="channelsLast"?e[1][1]:e[2][1],w=l==="channelsLast"?e[2][0]:e[3][0],x=l==="channelsLast"?e[2][1]:e[3][1];c={top:p,bottom:m,left:w,right:x,type:p===0&&m===0&&w===0&&x===0?"VALID":"EXPLICIT"},u=qd((t-i+p+m)/r+1,a),f=qd((n-s+w+x)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:u,outWidth:f}}function T5(e,t,n,r,o,i,s,a,l,c,u){let f,p,m,w;if(e==="valid"&&(e=0),typeof e=="number"){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};let T=S5([t,n,r,1],[a,l,c],1,[o,i,s],e,u);p=T[0],m=T[1],w=T[2]}else if(e==="same"){p=Math.ceil(t/o),m=Math.ceil(n/i),w=Math.ceil(r/s);let x=(p-1)*o+a-t,T=(m-1)*i+l-n,D=(w-1)*s+c-r,P=Math.floor(x/2),A=x-P,M=Math.floor(T/2),$=T-M,L=Math.floor(D/2),H=D-L;f={top:M,bottom:$,left:L,right:H,front:P,back:A,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:p,outHeight:m,outWidth:w}}function qd(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function qa(e){let[t,n,r]=Wd(e);return t===1&&n===1&&r===1}function Cn(e,t){return qa(e)||qa(t)}function Wo(e){return Wd(e).every(t=>t>0)}function BR(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Rt(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")S(xi(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(o=>{S(xi(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}function I5(e,t){let r={x:y(e,"x","reshape","string_or_numeric")},o={shape:t};return _.runKernel(HE,r,o)}var R=b({reshape_:I5});function C5(e,t,n,r,o){let i=y(e,"x","avgPool","float32"),s=1;S(Cn(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Rt("avgPool",r,o);let c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(m0,c,u);return f=de(f,i.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Kd=b({avgPool_:C5});function D5(e,t,n,r,o,i="NDHWC"){let s=y(e,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),S(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Rt("avgPool3d",r,o);let c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(g0,c,u);return f=de(f,a.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var px=b({avgPool3d_:D5});function N5(e,t=0){S(e.length>=1,()=>"Pass at least one tensor to concat");let n=Ii(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Jn(n[0]);let r=n,o={axis:t};return _.runKernel(I0,r,o)}var ot=b({concat_:N5});function A5(e,t,n=!1,r=!1){let o=y(e,"a","matMul"),i=y(t,"b","matMul");[o,i]=_e(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return _.runKernel(y0,s,a)}var Ne=b({matMul_:A5});function M5(e){let n={x:y(e,"x","sigmoid","float32")};return _.runKernel(rS,n)}var er=b({sigmoid_:M5});function k5(e,t,n){let r=y(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:t,size:n};return _.runKernel(eS,o,i)}var De=b({slice_:k5});function O5(e){let n={x:y(e,"x","tanh","float32")};return _.runKernel(wS,n)}var Rc=b({tanh_:O5});function R5(e,t,n,r,o,i){let s=y(e,"forgetBias","basicLSTMCell"),a=y(t,"lstmKernel","basicLSTMCell"),l=y(n,"lstmBias","basicLSTMCell"),c=y(r,"data","basicLSTMCell"),u=y(o,"c","basicLSTMCell"),f=y(i,"h","basicLSTMCell"),p=ot([c,f],1),m=Ne(p,a),w=Z(m,l),x=w.shape[0],T=w.shape[1]/4,D=[x,T],P=De(w,[0,0],D),A=De(w,[0,T],D),M=De(w,[0,T*2],D),$=De(w,[0,T*3],D),L=Z(V(er(P),Rc(A)),V(u,er(Z(s,M)))),H=V(Rc(L),er($));return[L,H]}var hx=b({basicLSTMCell_:R5});function P5(e,t,n){let r=y(e,"x","batchToSpaceND"),o=t.reduce((a,l)=>a*l);S(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),S(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),S(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);let i={x:r},s={blockShape:t,crops:n};return _.runKernel(v0,i,s)}var Yd=b({batchToSpaceND_:P5});function HR(e){let t;return e.rank===0||e.rank===1?t=R(e,[1,1,1,e.size]):e.rank===2?t=R(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}function F5(e,t,n,r,o,i){i==null&&(i=.001);let s=y(e,"x","batchNorm"),a=y(t,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;r!=null&&(u=y(r,"offset","batchNorm")),S(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),S(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),S(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:HR(s),scale:c,offset:u,mean:a,variance:l},m={varianceEpsilon:i},w=_.runKernel(Q0,p,m);return R(w,s.shape)}var Ni=b({batchNorm_:F5});function L5(e,t,n,r,o,i){let s=y(e,"x","batchNorm"),a=y(t,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),S(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),S(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var mx=b({batchNorm2d_:L5});function $5(e,t,n,r,o,i){let s=y(e,"x","batchNorm"),a=y(t,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),S(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),S(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var gx=b({batchNorm3d_:$5});function V5(e,t,n,r,o,i){let s=y(e,"x","batchNorm"),a=y(t,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),S(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),S(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var yx=b({batchNorm4d_:V5});function j5(e,t,n){let r=y(e,"x","bincount"),o=y(t,"weights","bincount");S(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return _.runKernel(b0,i,s)}var Xd=b({bincount_:j5});function B5(e,t){let n=y(e,"x","bitwiseAnd"),r=y(t,"y","bitwiseAnd");if(!Fn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return _.runKernel(w0,o)}var vx=b({bitwiseAnd_:B5});function H5(e,t){let n=y(e,"s0","broadcastArgs","int32"),r=y(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return _.runKernel(_0,o)}var bx=b({broadcastArgs_:H5});function U5(e,t){let n=y(e,"broadcastTo","x"),r=n.shape;if(ft(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=R(n,c)}let o=n.shape,i=Array.from(t);for(let c=t.length-1;c>=0;c--)if(o[c]===t[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Jn(n);let a={x:n},l={reps:i};return _.runKernel(Md,a,l)}var Ya=b({broadcastTo_:U5});function z5(e){let n={x:y(e,"x","ceil","float32")};return _.runKernel(E0,n)}var wx=b({ceil_:z5});function bo(e,t,n){ft(e),n=n||us(t);let r={shape:e,value:t,dtype:n};return _.runKernel(K0,{},r)}function G5(e,t,n){let r=y(e,"x","clipByValue");if(S(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return bo(r.shape,t,r.dtype);let o={x:r},i={clipValueMin:t,clipValueMax:n};return _.runKernel(S0,o,i)}var _x=b({clipByValue_:G5});function W5(e){return ot(e,0)}var Ex=b({concat1d_:W5});function q5(e,t){return ot(e,t)}var Sx=b({concat2d_:q5});function K5(e,t){return ot(e,t)}var xx=b({concat3d_:K5});function Y5(e,t){return ot(e,t)}var Tx=b({concat4d_:Y5});function X5(e,t,n,r,o="NHWC",i=[1,1],s){let a=y(e,"x","conv2d","float32"),l=y(t,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Rt("conv2d",r,s);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),S(Cn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(Wo(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),S(Wo(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel(C0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var Ai=b({conv2d_:X5});function Z5(e,t,n,r,o="NWC",i=1,s){let a=y(e,"x","conv1d"),l=y(t,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1]])),S(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),S(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Rt("conv1d",r,s),S(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),S(Cn(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),S(Wo(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),S(Wo(n),()=>"Error in conv1D: Stride should be larger than 0."),S(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let f=R(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=R(c,[c.shape[0],1,c.shape[1],c.shape[2]]),T=Ai(p,f,[1,n],r,"NHWC",[1,i],s);return u?R(T,[T.shape[2],T.shape[3]]):R(T,[T.shape[0],T.shape[2],T.shape[3]])}var Ix=b({conv1d_:Z5});function Q5(e,t,n,r,o,i="NHWC",s){S(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,l=t,c=!1;t.rank===3&&(c=!0,l=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),S(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),S(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),S(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let u=i==="NHWC"?a[3]:a[1],f=i==="NHWC"?l.shape[3]:l.shape[1];S(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),S(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Rt("conv2dDerInput",o,s);let p={dy:l,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},w=_.runKernel(N0,p,m);return c?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var tg=b({conv2DBackpropInput_:Q5});function J5(e,t,n,r,o,i){let s=y(e,"x","conv2dTranspose"),a=y(t,"filter","conv2dTranspose");return tg(n,s,a,r,o,"NHWC",i)}var Cx=b({conv2dTranspose_:J5});function e6(e,t,n,r,o="NDHWC",i=[1,1,1]){let s=y(e,"x","conv3d"),a=y(t,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),S(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),S(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),S(Cn(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),S(Wo(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),S(Wo(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},f={strides:n,pad:r,dataFormat:o,dilations:i},p=_.runKernel(A0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Dx=b({conv3d_:e6});function t6(e,t,n,r,o){S(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,s=t,a=!1;t.rank===4&&(a=!0,s=R(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let l=i[4],c=s.shape[4];S(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),S(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),S(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),S(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),S(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let u={dy:s,filter:n},f={pad:o,strides:r,inputShape:i},p=_.runKernel(M0,u,f);return a?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var UR=b({conv3DBackpropInput_:t6});function n6(e,t,n,r,o){let i=y(e,"x","conv3dTranspose"),s=y(t,"filter","conv3dTranspose");return UR(n,i,s,r,o)}var Nx=b({conv3dTranspose_:n6});function r6(e){let n={x:y(e,"x","cos","float32")};return _.runKernel("Cos",n)}var Ax=b({cos_:r6});function o6(e){let n={x:y(e,"x","cosh","float32")};return _.runKernel(k0,n)}var Mx=b({cosh_:o6});function i6(e,t=0,n=!1,r=!1){let i={x:y(e,"x","cumprod")},s={axis:t,exclusive:n,reverse:r};return _.runKernel(O0,i,s)}var kx=b({cumprod_:i6});function s6(e,t=0,n=!1,r=!1){let i={x:y(e,"x","cumsum")},s={axis:t,exclusive:n,reverse:r};return _.runKernel(R0,i,s)}var Ox=b({cumsum_:s6});function a6(e,t,n,r=!1){let o=y(e,"x","denseBincount"),i=y(t,"weights","denseBincount");S(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),S(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return _.runKernel(F0,s,a)}var Rx=b({denseBincount_:a6});function l6(e,t,n="NHWC"){let r=y(e,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];S(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),S(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${r.shape}`),S(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${t} for depthToSpace with input shape
        ${r.shape}`),S(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:t,dataFormat:n};return _.runKernel(L0,a,l)}var Px=b({depthToSpace_:l6});function c6(e,t,n,r,o="NHWC",i=[1,1],s){let a=y(e,"x","depthwiseConv2d","float32"),l=y(t,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Rt("depthwiseConv2d",r,s);let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel($0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var Xa=b({depthwiseConv2d_:c6});function u6(e){let n={x:y(e,"x","diag")};return _.runKernel(B0,n)}var Fx=b({diag_:u6});function d6(e,t,n,r,o=[1,1],i="NHWC"){let s=y(e,"x","dilation2d"),a=y(t,"filter","dilation2d");S(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),S(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),S(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=R(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),S(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},f={strides:n,pad:r,dilations:o},p=_.runKernel(H0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Lx=b({dilation2d_:d6});var Za={};He(Za,{assertAndGetBroadcastShape:()=>ze,getBroadcastDims:()=>zR,getReductionAxes:()=>ng});function zR(e,t){let n=e.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=e[i]||1;(t[t.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function ng(e,t){let n=[];for(let r=0;r<t.length;r++){let o=e[e.length-r-1],i=t.length-r-1,s=t[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function ze(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let o=0;o<n;o++){let i=e[e.length-o-1];i==null&&(i=1);let s=t[t.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else r[n-o-1]=i}return r}function f6(e,t){let n=y(e,"a","equal","string_or_numeric"),r=y(t,"b","equal","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(G0,o)}var ms=b({equal_:f6});function p6(e,t,n){let r=y(t,"a","where"),o=y(n,"b","where"),i=y(e,"condition","where","bool"),s=ze(ze(i.shape,r.shape),o.shape),a=Ya(i,s),l=Ya(r,s),c=Ya(o,s),u={condition:a,t:l,e:c};return _.runKernel(QE,u)}var hr=b({where_:p6});function h6(e){let n={x:y(e,"x","zerosLike")};return _.runKernel(IS,n)}var $t=b({zerosLike_:h6});function m6(e,t){let n=y(e,"a","div"),r=y(t,"b","div");[n,r]=_e(n,r);let o=Ce(n,r),i=$t(o),s=ms(r,i);return hr(s,i,o)}var $x=b({divNoNan_:m6});function g6(e,t){let n=y(e,"t1","dot"),r=y(t,"t2","dot");S((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(S(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=R(n,[1,-1]),a=R(r,[-1,1]),l=Ne(s,a);return R(l,[])}else if(n.rank===1&&r.rank===2){let s=R(n,[1,-1]),a=R(r,[r.shape[0],r.shape[1]]),l=Ne(s,a);return R(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=R(r,[-1,1]),a=Ne(n,s);return R(a,[a.size])}else{let s=R(r,[r.shape[0],r.shape[1]]);return Ne(n,s)}}var Vx=b({dot_:g6});function y6(e,...t){let n=t.map((o,i)=>y(o,`tensors${i}`,"einsum")),r={equation:e};return _.runKernel(z0,n,r)}var Mi=b({einsum_:y6});function v6(e){let n={x:y(e,"x","elu","float32")};return _.runKernel("Elu",n)}var Zd=b({elu_:v6});function b6(e,t){let n=y(e,"x","ensureShape","string_or_numeric");if(!X_(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}var jx=b({ensureShape_:b6});function w6(e){let t=y(e,"x","erf");S(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=de(t,"float32"));let n={x:t};return _.runKernel("Erf",n)}var Bx=b({erf_:w6});function Hx(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function GR(e,t,n){let r=e.length+t.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(e[i++]):o.push(t[s++]);return o}function _6(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)t.indexOf(i)===-1&&n.push(e[i]);let o=t.map(i=>e[i]);return[n,o]}function ki(e,t){let n=t.map(r=>1);return GR(e,n,t)}function E6(e,t,n){S(Hx(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function S6(e,t){if(Hx(e,t))return null;let n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function x6(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function T6(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}function C6(e,t=null,n=!1){let o={x:y(e,"x","max")},i={reductionIndices:t,keepDims:n};return _.runKernel("Max",o,i)}var wo=b({max_:C6});function D6(e,t=null,n=!1){let o={x:y(e,"x","min")},i={axis:t,keepDims:n};return _.runKernel("Min",o,i)}var Pc=b({min_:D6});function N6(e,t){let n=y(e,"base","pow"),r=y(t,"exp","pow");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel("Pow",o)}var Ko=b({pow_:N6});function ne(e,t){if((Dt(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Dt(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Vn(e,[],[],t)}function A6(e){let n={x:y(e,"x","sqrt","float32")};return _.runKernel(iS,n)}var Bn=b({sqrt_:A6});function M6(e){let t=y(e,"x","square"),n={};return _.runKernel("Square",{x:t},n)}var qt=b({square_:M6});function k6(e,t=null,n=!1){let r=y(e,"x","sum");r.dtype==="bool"&&(r=de(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return _.runKernel("Sum",o,i)}var Ge=b({sum_:k6});function O6(e,t="euclidean",n=null,r=!1){e=y(e,"x","norm");let o=WR(e,t,n),i=o.shape;if(r){let s=cs(n,e.shape);i=ki(o.shape,s)}return R(o,i)}function WR(e,t,n=null){if(e.rank===0)return Wt(e);if(e.rank!==1&&n===null)return WR(R(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Ge(Wt(e),n);if(t===1/0)return wo(Wt(e),n);if(t===-1/0)return Pc(Wt(e),n);if(t==="euclidean"||t===2)return Bn(Ge(Ko(Wt(e),ne(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return wo(Ge(Wt(e),n[0]),n[1]-1);if(t===1/0)return wo(Ge(Wt(e),n[1]),n[0]);if(t===-1/0)return Pc(Ge(Wt(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Bn(Ge(qt(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var gs=b({norm_:O6});function R6(e,t=null,n=!1){return gs(e,"euclidean",t,n)}var Ux=b({euclideanNorm_:R6});function P6(e){let n={x:y(e,"x","exp")};return _.runKernel("Exp",n)}var Ar=b({exp_:P6});function F6(e,t=0){let n=y(e,"x","expandDims","string_or_numeric");S(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:t};return _.runKernel(W0,r,o)}var nn=b({expandDims_:F6});function L6(e){let n={x:y(e,"x","expm1")};return _.runKernel(q0,n)}var zx=b({expm1_:L6});function $6(e,t){let n=y(e,"x","tile","string_or_numeric");S(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},o={reps:t};return _.runKernel(Md,r,o)}var Oi=b({tile_:$6});function V6(e,t,n,r="float32"){t==null&&(t=e);let o=vn([e,t],r),i=e<=t?e:t;for(let a=0;a<i;++a)o.set(1,a,a);let s=R(o.toTensor(),[e,t]);if(n==null)return s;if(n.length===1)return Oi(nn(s,0),[n[0],1,1]);if(n.length===2)return Oi(nn(nn(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Oi(nn(nn(nn(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var Qd=b({eye_:V6});function j6(e){let n={x:y(e,"x","floor","float32")};return _.runKernel(X0,n)}var Jd=b({floor_:j6});function B6(e,t,n=0,r=0){let o=y(e,"x","gather"),i=y(t,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return _.runKernel(J0,s,a)}var ef=b({gather_:B6});function H6(e,t){let n=y(e,"a","greater","string_or_numeric"),r=y(t,"b","greater","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(tE,o)}var Yo=b({greater_:H6});function U6(e,t){let n=y(e,"a","greaterEqual","string_or_numeric"),r=y(t,"b","greaterEqual","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(nE,o)}var tf=b({greaterEqual_:U6});function z6(e){let n={input:y(e,"input","imag")};return _.runKernel(oE,n)}var Ri=b({imag_:z6});function G6(e){let n={x:y(e,"x","isFinite")};return _.runKernel(iE,n)}var Gx=b({isFinite_:G6});function W6(e){let n={x:y(e,"x","isInf")};return _.runKernel(sE,n)}var Wx=b({isInf_:W6});function q6(e){let n={x:y(e,"x","isNaN")};return _.runKernel(aE,n)}var qx=b({isNaN_:q6});function K6(e,t=.2){let r={x:y(e,"x","leakyRelu")},o={alpha:t};return _.runKernel(lE,r,o)}var nf=b({leakyRelu_:K6});function Y6(e,t){let n=y(e,"a","less","string_or_numeric"),r=y(t,"b","less","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(cE,o)}var Fc=b({less_:Y6});function X6(e,t){let n=y(e,"a","lessEqual","string_or_numeric"),r=y(t,"b","lessEqual","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(uE,o)}var Qa=b({lessEqual_:X6});function Kx(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return _.runKernel(dE,{},r)}function Z6(e,t=5,n=1,r=1,o=.5){let i=y(e,"x","localResponseNormalization");S(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),S(xi(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=R(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:o},u=_.runKernel("LRN",l,c);return a?R(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var Yx=b({localResponseNormalization_:Z6});function Q6(e){let n={x:y(e,"x","log","float32")};return _.runKernel("Log",n)}var Xo=b({log_:Q6});function J6(e){let n={x:y(e,"x","log1p")};return _.runKernel(fE,n)}var rf=b({log1p_:J6});function qR(e){return S(Bo(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=y(t,"x","tf.grad","string_or_numeric"),o=n!=null?y(n,"dy","tf.grad"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>e(r),[r],o);return o!=null&&at(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),og(s),s[0]})}}function KR(e){return S(Bo(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{S(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Ii(t,"args","tf.grads","string_or_numeric"),o=n!=null?y(n,"dy","tf.grads"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>e(...r),r,o);return o!=null&&at(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),og(s),s})}}function YR(e){return S(Bo(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{S(t instanceof Ie,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=_.gradients(()=>e(t),[t],n);return og(r),{grad:r[0],value:o}}}function XR(e){return S(Bo(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{S(Array.isArray(t)&&t.every(o=>o instanceof Ie),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=_.gradients(()=>e(...t),t,n);return n!=null&&at(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),og(r.grads),r}}function rg(e,t){S(Bo(e),()=>"The f passed in variableGrads(f) must be a function"),S(t==null||Array.isArray(t)&&t.every(c=>c instanceof zo),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=t!=null;if(!n){t=[];for(let c in _.registeredVariables)t.push(_.registeredVariables[c])}let r=n?t.filter(c=>!c.trainable):null,o=t.length;t=t.filter(c=>c.trainable),S(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=_.gradients(e,t,null,i);S(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),S(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return t.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Dn(e){return _.customGrad(e)}function og(e){if(e.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function eq(e){let n={x:y(e,"x","neg")};return _.runKernel("Neg",n)}var rn=b({neg_:eq});function tq(e){let n={x:y(e,"x","softplus")};return _.runKernel(oS,n)}var of=b({softplus_:tq});function nq(e){let t=y(e,"x","logSigmoid");return Dn(r=>({value:rn(of(rn(r))),gradFunc:s=>V(s,er(rn(r)))}))(t)}var Xx=b({logSigmoid_:nq});function rq(e,t){let n=y(e,"a","sub"),r=y(t,"b","sub");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel("Sub",o)}var re=b({sub_:rq});function oq(e,t=-1){let n=y(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Dn((o,i)=>{let a=wo(o,t,!0),l=re(o,a),c=re(de(l,"float32"),Xo(Ge(Ar(l),t,!0)));return i([c]),{value:c,gradFunc:(f,p)=>{let[m]=p,w=!0,x=Ar(m);return re(f,V(Ge(f,t,w),x))}}})(n)}var Zx=b({logSoftmax_:oq});function iq(e,t=null,n=!1){let r=y(e,"x","logSumExp"),o=cs(t,r.shape),i=wo(r,o,!0),s=re(r,i),a=Ar(s),l=Ge(a,o),c=Xo(l),u=Z(R(i,c.shape),c);if(n){let f=ki(u.shape,o);return R(u,f)}return u}var sf=b({logSumExp_:iq});function sq(e,t){let n=y(e,"a","logicalAnd","bool"),r=y(t,"b","logicalAnd","bool");ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(pE,o)}var ys=b({logicalAnd_:sq});function aq(e){let n={x:y(e,"x","logicalNot","bool")};return _.runKernel(hE,n)}var af=b({logicalNot_:aq});function lq(e,t){let n=y(e,"a","logicalOr","bool"),r=y(t,"b","logicalOr","bool");ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(mE,o)}var lf=b({logicalOr_:lq});function cq(e,t){let n=y(e,"a","logicalXor","bool"),r=y(t,"b","logicalXor","bool");return ze(n.shape,r.shape),ys(lf(e,t),af(ys(e,t)))}var Qx=b({logicalXor_:cq});var ig=2147483648;function uq(e,t,n="left"){let r=y(e,"sortedSequence","searchSorted"),o=y(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=R(r,[-1,i]),l=R(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(xe(l.shape)>=ig)throw new Error(`values tensor size must less than ${ig}`);if(a.shape[1]>=ig)throw new Error(`trailing dim_size must less than ${ig} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:n};return _.runKernel(ZE,c,u)}var Lc=b({searchSorted_:uq});function Jx(e,t){return Lc(e,t,"left")}function dq(e,t,n,r,o){let i=y(e,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),S(Cn(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Rt("maxPool",r,o);let c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(yE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var cf=b({maxPool_:dq});function fq(e,t=[1,1,1],n,r,o,i="NDHWC"){let s=y(e,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Rt("maxPool3d",r,o);let c={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(vE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var eT=b({maxPool3d_:fq});function pq(e,t,n,r,o=!1){let s={x:y(e,"x","maxPoolWithArgmax")},a={filterSize:t,strides:n,pad:r,includeBatchInIndex:o},l=_.runKernel(bE,s,a);return{result:l[0],indexes:l[1]}}var tT=b({maxPoolWithArgmax_:pq});function hq(e,t){let n=y(e,"a","maximum"),r=y(t,"b","maximum");[n,r]=_e(n,r),n.dtype==="bool"&&(n=de(n,"int32"),r=de(r,"int32")),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(gE,o)}var uf=b({maximum_:hq});function mq(e,t=null,n=!1){let o={x:y(e,"x","mean")},i={axis:t,keepDims:n};return _.runKernel(wE,o,i)}var vs=b({mean_:mq});function _o(e,t="float32"){if(ft(e),t==="complex64"){let r=_o(e,"float32"),o=_o(e,"float32");return $n(r,o)}let n=_c(xe(e),t);return _.makeTensor(n,e,t)}function Eo(e,t="float32"){if(ft(e),t==="complex64"){let r=Eo(e,"float32"),o=_o(e,"float32");return $n(r,o)}let n=Cd(xe(e),t);return _.makeTensor(n,e,t)}function nT(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=y(e,"x","meshgrid",e instanceof Ie?e.dtype:"float32");if(t===void 0)return[r];let o=y(t,"y","meshgrid",t instanceof Ie?t.dtype:"float32"),i=xe(r.shape),s=xe(o.shape);return n==="xy"?(r=R(r,[1,-1]),o=R(o,[-1,1]),[Ne(Eo([s,1],r.dtype),r),Ne(o,Eo([1,i],o.dtype))]):(r=R(r,[-1,1]),o=R(o,[1,-1]),[Ne(r,Eo([1,s],r.dtype)),Ne(Eo([i,1],o.dtype),o)])}function gq(e,t){let n=y(e,"a","minimum"),r=y(t,"b","minimum");[n,r]=_e(n,r),n.dtype==="bool"&&(n=de(n,"int32"),r=de(r,"int32")),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(_E,o)}var bs=b({minimum_:gq});function yq(e,t,n){S(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=y(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");S(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)S(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),S(t[a][0]>=0&&t[a][0]<=r.shape[a]-o&&t[a][1]>=0&&t[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:t,mode:n},s={x:r};return _.runKernel(EE,s,i)}var df=b({mirrorPad_:yq});function vq(e,t){let n=y(e,"a","mod"),r=y(t,"b","mod");[n,r]=_e(n,r);let o={a:n,b:r};return _.runKernel("Mod",o)}var rT=b({mod_:vq});function bq(e,t=null,n=!1){e=y(e,"x","moments");let r=cs(t,e.shape),o=vs(e,r,n),i=o.shape;n||(i=ki(o.shape,r));let s=qt(re(de(e,"float32"),R(o,i))),a=vs(s,r,n);return{mean:o,variance:a}}var oT=b({moments_:bq});function wq(e,t,n,r){let o=y(t,"data","multiRNNCell"),i=Ii(n,"c","multiRNNCell"),s=Ii(r,"h","multiRNNCell"),a=o,l=[];for(let f=0;f<e.length;f++){let p=e[f](a,i[f],s[f]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let f=0;f<l.length;f+=2)c.push(l[f]),u.push(l[f+1]);return[c,u]}var iT=b({multiRNNCell_:wq});function _q(e,t,n,r=!1){let o=y(e,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let l={logits:s===1?R(o,[1,-1]):o},c={numSamples:t,seed:n,normalized:r},u=_.runKernel(SE,l,c);return s===1?R(u,[u.size]):u}var sT=b({multinomial_:_q});function Eq(e,t){let n=y(e,"a","notEqual","string_or_numeric"),r=y(t,"b","notEqual","string_or_numeric");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(TE,o)}var ff=b({notEqual_:Eq});function Sq(e,t,n=1,r=0,o="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let s={indices:y(e,"indices","oneHot","int32")},a={dtype:o,depth:t,onValue:n,offValue:r};return _.runKernel(AE,s,a)}var ws=b({oneHot_:Sq});function xq(e){let n={x:y(e,"x","onesLike")};return _.runKernel(NE,n)}var aT=b({onesLike_:xq});function Tq(e,t){let n=y(e,"v1","outerProduct"),r=y(t,"v2","outerProduct");S(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=R(n,[-1,1]),i=R(r,[1,-1]);return Ne(o,i)}var lT=b({outerProduct_:Tq});function Iq(e,t,n=0){let r=y(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:t,constantValue:n},i={x:r};return _.runKernel(kE,i,o)}var Mr=b({pad_:Iq});function Cq(e,t,n=0){return S(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Mr(e,[t],n)}var cT=b({pad1d_:Cq});function Dq(e,t,n=0){return S(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mr(e,t,n)}var uT=b({pad2d_:Dq});function Nq(e,t,n=0){return S(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mr(e,t,n)}var pf=b({pad3d_:Nq});function Aq(e,t,n=0){return S(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Mr(e,t,n)}var dT=b({pad4d_:Aq});function Mq(e,t,n){let r=y(e,"x","spaceToBatchND");S(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),S(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),S(r.shape.reduce((s,a,l)=>l>0&&l<=t.length?s&&(a+n[l-1][0]+n[l-1][1])%t[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let o={x:r},i={blockShape:t,paddings:n};return _.runKernel(sS,o,i)}var hf=b({spaceToBatchND_:Mq});function kq(e,t,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=y(e,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(Cn(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=dx(l.shape,t,i,o,r),f=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=Rq([u.filterHeight,u.filterWidth],f):p=[[0,0],[0,0]];let m=f[0]===1&&f[1]===1,[w,x]=Oq([u.inHeight,u.inWidth],f,p),T=m?r:"valid",D=m?l:hf(l,f,w),A=(n==="avg"?()=>Kd(D,t,i,T,s):()=>cf(D,t,i,T,s))(),M=m?A:Yd(A,f,x);return c?R(M,[M.shape[1],M.shape[2],M.shape[3]]):M}function Oq(e,t,n){let r=n.map(u=>u[0]),o=n.map(u=>u[1]),i=e.concat(r,o),s=t.map((u,f)=>(u-i[f]%u)%u),a=o.map((u,f)=>u+s[f]),l=t.map((u,f)=>[r[f],a[f]]),c=t.map((u,f)=>[0,s[f]]);return[l,c]}function Rq(e,t){let r=e.map((s,a)=>s+(s-1)*(t[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var fT=b({pool_:kq});function Pq(e,t){let n=y(e,"x","prelu"),r=y(t,"alpha","prelu"),o={x:n,alpha:r};return _.runKernel(OE,o)}var mf=b({prelu_:Pq});function Fq(e,t=null,n=!1){let r=y(e,"x","prod");r.dtype==="bool"&&(r=de(r,"int32"));let o={x:r},i={axis:t,keepDims:n};return _.runKernel(RE,o,i)}var pT=b({prod_:Fq});function Lq(e,t,n,r){let o=e.map((u,f)=>y(u,`tensors${f}`,"raggedGather","int32")),i=y(t,"paramsDenseValues","raggedGather"),s=y(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=_.runKernel(PE,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var hT=b({raggedGather_:Lq});function $q(e,t,n){let r=y(e,"starts","raggedRange"),o=y(t,"limits","raggedRange",r.dtype),i=y(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=_.runKernel(FE,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var mT=b({raggedRange_:$q});function Vq(e,t,n,r,o){let i=y(e,"shape","raggedTensorToTensor","int32"),s=y(t,"values","raggedTensorToTensor"),a=y(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((f,p)=>y(f,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return _.runKernel(LE,c,u)}var gT=b({raggedTensorToTensor_:Vq});function jq(e,t,n){ft(e);let r=xe(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=t();return _.makeTensor(o,e,n)}var yT=b({rand_:jq});var cg=Jy(pP());var CT={};He(CT,{TEST_EPSILON_FLOAT16:()=>hP,createVideoElement:()=>e8,encodeStrings:()=>mP,expectArrayBuffersEqual:()=>Jq,expectArraysClose:()=>Kq,expectArraysEqual:()=>Xq,expectNumbersClose:()=>Zq,expectPromiseToFail:()=>Yq,expectValuesInRange:()=>Qq,play:()=>t8,testEpsilon:()=>TT});var qq=.001,hP=.1;function Kq(e,t,n){return n==null&&(n=TT()),xT(e,t,(r,o)=>IT(r,o,n))}function TT(){return _.backend.floatPrecision()===32?qq:hP}function xT(e,t,n){let r=!0;if((Dt(e)||Dt(t))&&(r=!1),Dt(e)&&Dt(t)&&(r=!0),r){let s=e.constructor.name,a=t.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(e)&&Array.isArray(t)){let s=gn(e),a=gn(t);if(!Fn(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=Dt(e)?e:go(e),i=Dt(t)?t:go(t);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!n(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function Yq(e,t){e().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function Xq(e,t){let n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return ho(e)||ho(e[0])||ho(t)||ho(t[0])?xT(e,n,(r,o)=>r==o):xT(e,t,(r,o)=>IT(r,o,0))}function Zq(e,t,n){if(n==null&&(n=TT()),!IT(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function IT(e,t,n){return!isFinite(e)&&!isFinite(t)?!0:!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Qq(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Jq(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let o=0;o<r.length;o++)if(n[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${n[o]} instead`)}function mP(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?mP(n):e[t]=fs(n)}return e}function e8(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(n=>{t.addEventListener("loadeddata",r=>n(t)),t.load()})}async function t8(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var el=class{constructor(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=cg.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let t,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}},ag=class{constructor(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=cg.alea(i.toString()),this.randn=new el(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,t=o*o,n=1-.331*t*t,r=.5*t+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}},lg=class{constructor(t=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=cg.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function n8(e,t,n=1,r="float32",o){if(ft(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new ag(t,n,r,o),s=vn(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var DT=b({randomGamma_:n8});function r8(e,t=0,n=1,r,o){if(ft(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new el(t,n,r,!1,o),s=vn(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var gf=b({randomNormal_:r8});function o8(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return gf(e,0,1,t,n)}var NT=b({randomStandardNormal_:o8});function i8(e,t=0,n=1,r="float32",o){ft(e);let i=vn(e,r),s=new lg(t,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var tl=b({randomUniform_:i8});function s8(e,t,n,r){return tl(e,t,n,"int32",r)}var AT=b({randomUniformInt_:s8});function Xr(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:e,stop:t,step:n,dtype:r};return _.runKernel($E,{},o)}function a8(e){let n={input:y(e,"input","real")};return _.runKernel(VE,n)}var Zo=b({real_:a8});function l8(e){let n={x:y(e,"x","reciprocal")};return _.runKernel(jE,n)}var MT=b({reciprocal_:l8});function c8(e){let n={x:y(e,"x","relu")};return _.runKernel(BE,n)}var Pi=b({relu_:c8});function u8(e){let n={x:y(e,"x","relu6")};return _.runKernel(GE,n)}var yf=b({relu6_:u8});function d8(e,t){let r={x:y(e,"x","reverse")},o={dims:t};return _.runKernel(WE,r,o)}var mr=b({reverse_:d8});function f8(e){let t=y(e,"x","reverse");return S(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),mr(t,0)}var kT=b({reverse1d_:f8});function p8(e,t){let n=y(e,"x","reverse");return S(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),mr(n,t)}var OT=b({reverse2d_:p8});function h8(e,t){let n=y(e,"x","reverse");return S(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),mr(n,t)}var RT=b({reverse3d_:h8});function m8(e,t){let n=y(e,"x","reverse");return S(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),mr(n,t)}var PT=b({reverse4d_:m8});function g8(e){let n={x:y(e,"x","round")};return _.runKernel(qE,n)}var vf=b({round_:g8});function y8(e){let n={x:y(e,"x","rsqrt","float32")};return _.runKernel(KE,n)}var FT=b({rsqrt_:y8});function v8(e){let n={x:y(e,"x","selu")};return _.runKernel(JE,n)}var LT=b({selu_:v8});function b8(e,t,n,r,o,i=[1,1],s="NHWC"){let a=y(e,"x","separableConv2d"),l=y(t,"depthwiseFilter","separableConv2d"),c=y(n,"pointwiseFilter","separableConv2d"),u=a,f=!1;if(a.rank===3&&(f=!0,u=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");S(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),S(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),S(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),S(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),S(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],m=l.shape[3];S(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let w=Xa(u,l,r,o,s,i),T=Ai(w,c,1,"valid",s);return f?R(T,[T.shape[1],T.shape[2],T.shape[3]]):T}var $T=b({separableConv2d_:b8});async function w8(e,t){let n=y(e,"x","setdiff1d"),r=y(t,"y","setdiff1d");S(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),S(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),S(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=await n.data(),i=await r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new Ti([a],n.dtype),c=new Ti([a],"int32");for(let u=0,f=0;u<o.length;u++)s.has(o[u])||(l.values[f]=o[u],c.values[f]=u,f++);return[l.toTensor(),c.toTensor()]}var VT=w8;function _8(e){let n={x:y(e,"x","sign")};return _.runKernel(nS,n)}var jT=b({sign_:_8});function E8(e){let n={x:y(e,"x","sin","float32")};return _.runKernel("Sin",n)}var BT=b({sin_:E8});function S8(e){let n={x:y(e,"x","sinh")};return _.runKernel(tS,n)}var HT=b({sinh_:S8});function x8(e,t,n){let r=y(e,"x","slice1d");return S(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),De(r,[t],[n])}var UT=b({slice1d_:x8});function T8(e,t,n){let r=y(e,"x","slice2d");return S(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),De(r,t,n)}var zT=b({slice2d_:T8});function I8(e,t,n){let r=y(e,"x","slice3d");return S(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),De(r,t,n)}var GT=b({slice3d_:I8});function C8(e,t,n){let r=y(e,"x","slice4d");return S(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),De(r,t,n)}var WT=b({slice4d_:C8});function D8(e,t=-1){let n=y(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},o={dim:t};return _.runKernel(lS,r,o)}var qT=b({softmax_:D8});function N8(e){S(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return _.runKernel("FFT",t)}var nl=b({fft_:N8});function A8(e){S(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return _.runKernel(rE,t)}var _s=b({ifft_:A8});function M8(e){let t=e.shape[e.shape.length-1],n=e.size/t,r;if(t<=2){let o=R(e,[n,t]);r=_s(o)}else{let o=[n,2*(t-1)],i=R(Zo(e),[n,t]),s=R(Ri(e),[n,t]),a=mr(De(i,[0,1],[n,t-2]),1),l=V(mr(De(s,[0,1],[n,t-2]),1),ne(-1)),c=ot([i,a],1),u=ot([s,l],1),f=R($n(c,u),[o[0],o[1]]);r=_s(f)}if(r=Zo(r),e.rank===3&&e.shape[0]!==0){let o=r,i=e.shape[0];r=R(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var bf=b({irfft_:M8});function k8(e,t,n=0){let o={x:y(e,"x","split")},i={numOrSizeSplits:t,axis:n};return _.runKernel(aS,o,i)}var Qo=b({split_:k8});function O8(e,t){S(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1],r=e.size/n,o;if(t!=null&&t<n){let w=e.shape.map(T=>0),x=e.shape.map(T=>T);x[e.shape.length-1]=t,o=De(e,w,x),n=t}else if(t!=null&&t>n){let w=e.shape.map(x=>x);w[e.shape.length-1]=t-n,o=ot([e,_o(w)],e.shape.length-1),n=t}else o=e;let i=$t(o),s=R($n(o,i),[r,n]),a=nl(s),l=Math.floor(n/2)+1,c=Zo(a),u=Ri(a),f=Qo(c,[l,n-l],c.shape.length-1),p=Qo(u,[l,n-l],u.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=l,R($n(f[0],p[0]),m)}var rl=b({rfft_:O8});function R8(e,t){let n=y(e,"a","squaredDifference"),r=y(t,"b","squaredDifference");[n,r]=_e(n,r),ze(n.shape,r.shape);let o={a:n,b:r},i={};return _.runKernel(hS,o,i)}var wf=b({squaredDifference_:R8});function P8(e,t){let n=y(e,"x","squeeze","string_or_numeric");return R(n,Z_(n.shape,t).newShape)}var Hn=b({squeeze_:P8});function F8(e,t=0){let n=Ii(e,"tensors","stack","string_or_numeric");S(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&S(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:t};return _.runKernel(ME,r,o)}var Nn=b({stack_:F8});function L8(e,t=0){let r={x:y(e,"x","step")},o={alpha:t};return _.runKernel(CS,r,o)}var _f=b({step_:L8});function $8(e,t,n,r,o=0,i=0,s=0,a=0,l=0){let u={x:y(e,"x","stridedSlice","string_or_numeric")},f={begin:t,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return _.runKernel(gS,u,f)}var KT=b({stridedSlice_:$8});function V8(e){let n={x:y(e,"x","tan","float32")};return _.runKernel("Tan",n)}var YT=b({tan_:V8});function Kt(e,t){Nr(e);let n=gn(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Vn(e,null,n,t)}function So(e,t,n){if(Nr(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=gn(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Vn(e,t,r,n)}function Ef(e,t,n){if(Nr(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=gn(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Vn(e,t,r,n)}function XT(e,t,n){if(Nr(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=gn(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Vn(e,t,r,n)}function ZT(e,t,n){if(Nr(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=gn(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Vn(e,t,r,n)}function QT(e,t,n){if(Nr(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=gn(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Vn(e,t,r,n)}var Sf={};He(Sf,{calculateShapes:()=>gP,validateInput:()=>$c,validateUpdateShape:()=>JT});function JT(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(e.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+e.length-r)throw new Error(i+` update.rank != ${o+e.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==e[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${e[s+o]})`)}function $c(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}JT(n,t,e)}function gP(e,t,n){let r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let f=o;f<i;++f)s*=n[f];let a=o<1?1:o,l=xe(t.shape)/a,c=[...Ho(n.slice(0,o)),1],u=xe(n);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function j8(e,t,n){let r=y(e,"tensor","tensorScatterupdate"),o=y(t,"indices","tensorScatterupdate","int32"),i=y(n,"updates","tensorScatterupdate");if($c(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return _.runKernel(XE,s,a)}var eI=b({tensorScatterUpdate_:j8});function B8(e,t=1,n=!0){let r=y(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);let i={x:r},s={k:t,sorted:n},[a,l]=_.runKernel(_S,i,s);return{values:a,indices:l}}var tI=b({topk_:B8});function H8(e,t=0,n=1,r,o){if(ft(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new el(t,n,r,!0,o),s=vn(e,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var nI=b({truncatedNormal_:H8});function U8(e,t=0){let n=y(e,"x","unique","string_or_numeric");S(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:t},[i,s]=_.runKernel(SS,r,o);return{values:i,indices:s}}var rI=b({unique_:U8});function z8(e,t,n){let r=y(e,"x","unsortedSegmentSum"),o=y(t,"segmentIds","unsortedSegmentSum","int32");S(xi(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return _.runKernel(TS,i,s)}var oI=b({unsortedSegmentSum_:z8});function G8(e,t=0){let n=y(e,"x","unstack","string_or_numeric");S(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:t};return _.runKernel(xS,r,o)}var gr=b({unstack_:G8});function iI(e,t){return Lc(e,t,"right")}function sI(e,t=!0,n,r){return _.makeVariable(e,t,n,r)}function ug(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=vn(e,"int32"),o=vn([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*e.length;o.values.set(s,a)}return o.toTensor()}async function W8(e){let t=y(e,"condition","whereAsync","bool"),n=await t.data(),r=ug(t.shape,n);return e!==t&&t.dispose(),r}var xf=W8;async function q8(e,t,n){let r=y(e,"tensor","boolMask"),o=y(t,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;S(s>0,()=>"mask cannot be scalar"),at(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let x=i;x<i+s;x++)l*=a[x];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=R(r,c),f=R(o,[-1]),p=await xf(f),m=Hn(p,[1]),w=ef(u,m,i);return e!==r&&r.dispose(),t!==o&&o.dispose(),m.dispose(),u.dispose(),f.dispose(),p.dispose(),w}var yP=q8;function K8(e,t,n){let r=y(e,"x","transpose");if(t==null&&(t=r.shape.map((s,a)=>a).reverse()),S(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(s=>{S(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:t};return r.dtype==="complex64"?te(()=>{let s=Zo(r),a=Ri(r);return s=_.runKernel(kd,{x:s},i),a=_.runKernel(kd,{x:a},i),n&&(a=rn(a)),$n(s,a)}):_.runKernel(kd,o,i)}var ol=b({transpose_:K8});function Y8(e,t,n,r,o=!0){let i=y(e,"v","movingAverage"),s=y(t,"x","movingAverage"),a=y(n,"decay","movingAverage");$S(i,s),S(Fn(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=ne(1),c=re(l,a),u=V(re(s,i),c);if(o){S(r!=null,()=>"When using zeroDebias: true, step is required.");let f=y(r,"step","movingAverage");u=Ce(u,re(l,Ko(a,f)))}return Z(i,u)}var vP=b({movingAverage_:Y8});function X8(e,t,n){ft(n);let r=y(e,"indices","scatterND","int32"),o=y(t,"updates","scatterND");$c(o,r,n);let i={indices:r,updates:o},s={shape:n};return _.runKernel(YE,i,s)}var bP=b({scatterND_:X8});function wP(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${o}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function Q8(e,t,n,r=0){ft(n);let o=y(e,"sparseIndices","sparseToDense","int32"),i=y(t,"sparseValues","sparseToDense","string_or_numeric"),s=y(r,"defaultValue","sparseToDense",i.dtype);wP(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:n};return _.runKernel(pS,a,l)}var _P=b({sparseToDense_:Q8});function J8(e,t){let n=y(t,"indices","gatherND","int32"),o={params:y(e,"x","gatherND","string_or_numeric"),indices:n};return _.runKernel(eE,o)}var EP=b({gatherND_:J8});function SP(e,t){if(t==null)return e.shape.slice();if(Fn(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}function e7(e,t,n,r){let o=y(e,"x","dropout");if(S(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),S(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Ie?o.clone():o;let i=SP(o,n),s=1-t,a=Ce(Jd(Z(tl(i,0,1,"float32",r),s)),s);return V(o,a)}var xP=b({dropout_:e7});function dg(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Vc(e,t,n){let r=1-e%2,o=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(s)}return Kt(o,"float32")}async function t7(e,t,n=1){let r=y(e,"predictions","inTopK"),o=y(t,"targets","inTopK");S(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),S(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),at(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];S(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=await r.data(),a=await o.data(),[l,c]=[s.length/i,i],u=Q_("bool",l);for(let f=0;f<l;f++){let p=f*c,m=s.subarray(p,p+c),w=[];for(let x=0;x<m.length;x++)w.push({value:m[x],index:x});w.sort((x,T)=>T.value-x.value),u[f]=0;for(let x=0;x<n;x++)if(w[x].index===a[f]){u[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),tn(u,o.shape,"bool")}var TP=t7;var fg={};He(fg,{conv2d:()=>CP,depthwiseConv2d:()=>AP,matMul:()=>MP});function n7(e,t,n,r,o,i="NHWC",s){let a=e;e.rank===3&&(a=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=R(t,[1,t.shape[0],t.shape[1],t.shape[2]])),S(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),S(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),S(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];S(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),S(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Rt("conv2dDerFilter",o,s);let f={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return _.runKernel(D0,f,p)}var IP=b({conv2DBackpropFilter_:n7});function il(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return V(e,_f(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function sl(e,t){let n=t,r=ng(e.shape,t.shape);return r.length>0&&(n=Ge(n,r)),R(n,e.shape)}function al(e,t,n,r){if(t==="linear")return e;if(t==="relu")return Pi(e);if(t==="elu")return Zd(e);if(t==="relu6")return yf(e);if(t==="prelu")return mf(e,n);if(t==="leakyrelu")return nf(e,r);if(t==="sigmoid")return er(e);throw new Error(`Unknown fused activation ${t}.`)}var ll=(e,t)=>!(e>0)||t==="linear";function r7({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",ll(_.state.gradientDepth,l)===!1){S(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let L=Ai(e,t,n,r,o,i,s);return a!=null&&(L=Z(L,a)),al(L,l,c,u)}let f=y(e,"x","conv2d","float32"),p=y(t,"filter","conv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Rt("fused conv2d",r,s);let x=o==="NHWC"?m.shape[3]:m.shape[1];S(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),S(Cn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let T=Ka(m.shape,p.shape,n,i,r,s),D;a!=null&&(D=y(a,"bias","fused conv2d"),[D]=_e(D,f),o==="NHWC"?ze(T.outShape,D.shape):(S(D.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${D.shape.length}.`),S(D.shape.length===0||D.shape[0]===T.outChannels||D.shape[0]===1,()=>`Error in fused conv2d: bias shape (${D.shape}) is not compatible with the number of output channels (${T.outChannels})`)));let P;if(c!=null){let L=c.shape;if(S(L.length<=1||L.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${L.length}.`),L.length===1)S(L[0]===1||L[0]===T.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the number of output channels (${T.outChannels}).`);else if(L.length===3)try{ze(L,T.outShape)}catch{let G=`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the output shape of the conv2d (${T.outShape}).`;throw Error(G)}P=y(c,"prelu weights","fused conv2d")}let A=(L,H)=>{S(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[G,W,K,U]=H,ue=il(L,K,l);S(qa(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let se=tg(W.shape,ue,G,n,r),Oe=IP(W,ue,G.shape,n,r),Le=[se,Oe];if(U!=null){let bt=sl(U,ue);Le.push(bt)}return Le},M={x:m,filter:p,bias:D,preluActivationWeights:P},$={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Dn((H,G,W)=>{let K=_.runKernel(Pm,M,$);return W([G,H,K]),w&&(K=R(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:A}})(m,p):Dn((H,G,W,K)=>{let U=_.runKernel(Pm,M,$);return K([G,H,U,W]),w&&(U=R(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:A}})(m,p,D)}var CP=b({fusedConv2d_:r7});function o7(e,t,n,r,o,i=[1,1],s){let a=e;e.rank===3&&(a=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return _.runKernel(V0,c,u)}var DP=b({depthwiseConv2dNativeBackpropFilter_:o7});function i7(e,t,n,r,o,i=[1,1],s){let a=t,l=!1;t.rank===3&&(l=!0,a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:a,filter:n},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:e},f=_.runKernel(j0,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var NP=b({depthwiseConv2dNativeBackpropInput_:i7});function s7({x:e,filter:t,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(ll(_.state.gradientDepth,l)===!1){let $=Xa(e,t,n,r,o,i,s);return a!=null&&($=Z($,a)),al($,l,c,u)}let f=y(e,"x","depthwiseConv2d","float32"),p=y(t,"filter","depthwiseConv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),S(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),S(Cn(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Rt("fused depthwiseConv2d",r,s);let x=Ka(m.shape,p.shape,n,i,r,s,!0),T;a!=null&&(T=y(a,"bias","fused conv2d"),[T]=_e(T,f),ze(x.outShape,T.shape));let D;c!=null&&(D=y(c,"prelu weights","fused depthwiseConv2d"));let P=($,L)=>{S(qa(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[H,G,W,K]=L,U=il($,W,l),ue=NP(G.shape,U,H,n,r,i,s),se=DP(G,U,H.shape,n,r,i,s);if(K!=null){let Oe=sl(T,U);return[ue,se,Oe]}return[ue,se]},A={x:m,filter:p,bias:T,preluActivationWeights:D},M={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Dn((L,H,G)=>{let W=_.runKernel(Fm,A,M);return G([H,L,W]),w&&(W=R(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:P}})(m,p):Dn((L,H,G,W)=>{let K=_.runKernel(Fm,A,M);return W([H,L,K,G]),w&&(K=R(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:P}})(m,p,T)}var AP=b({fusedDepthwiseConv2d_:s7});function a7({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(ll(_.state.gradientDepth,i)===!1){let U=Ne(e,t,n,r);return o!=null&&(U=Z(U,o)),al(U,i,s,a)}let l=y(e,"a","fused matMul"),c=y(t,"b","fused matMul");[l,c]=_e(l,c);let u=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],w=l.shape.slice(0,-2),x=c.shape.slice(0,-2),T=xe(w),D=xe(x);S(u===f,()=>`Error in fused matMul: inner shapes (${u}) and (${f}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let A=ze(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),M=n?R(l,[T,u,p]):R(l,[T,p,u]),$=r?R(c,[D,m,f]):R(c,[D,f,m]),L;o!=null&&(L=y(o,"bias","fused matMul"),[L]=_e(L,l),ze(A,L.shape));let H;s!=null&&(H=y(s,"prelu weights","fused matMul"));let G=(U,ue)=>{let[se,Oe,Le,bt]=ue,xt=il(R(U,Le.shape),Le,i),on,Ut;if(!n&&!r?(on=Ne(xt,Oe,!1,!0),Ut=Ne(se,xt,!0,!1)):!n&&r?(on=Ne(xt,Oe,!1,!1),Ut=Ne(xt,se,!0,!1)):n&&!r?(on=Ne(Oe,xt,!1,!0),Ut=Ne(se,xt,!1,!1)):(on=Ne(Oe,xt,!0,!0),Ut=Ne(xt,se,!0,!0)),o!=null){let ei=sl(bt,xt);return[on,Ut,ei]}else return[on,Ut]},W={a:M,b:$,bias:L,preluActivationWeights:H},K={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?Dn((ue,se,Oe)=>{let Le=_.runKernel(Rm,W,K);return Oe([ue,se,Le]),{value:R(Le,A),gradFunc:G}})(M,$):Dn((ue,se,Oe,Le)=>{let bt=_.runKernel(Rm,W,K);return Le([ue,se,bt,Oe]),{value:R(bt,A),gradFunc:G}})(M,$,L)}var MP=b({fusedMatMul_:a7});function l7(e){return Vc(e,.54,.46)}var kP=b({hammingWindow_:l7});function c7(e){return Vc(e,.5,.5)}var pg=b({hannWindow_:c7});function u7(e,t,n,r=!1,o=0){let i=0,s=[];for(;i+t<=e.size;)s.push(De(e,i,t)),i+=n;if(r)for(;i<e.size;){let a=i+t-e.size,l=ot([De(e,i,t-a),bo([a],o)]);s.push(l),i+=n}return s.length===0?So([],[0,t]):R(ot(s),[s.length,t])}var hg=b({frame_:u7});function d7(e,t,n,r,o=pg){r==null&&(r=dg(t));let i=hg(e,t,n),s=V(i,o(t));return rl(s,r)}var OP=b({stft_:d7});function f7(e,t,n,r,o="bilinear",i=0){let s=y(e,"image","cropAndResize"),a=y(t,"boxes","cropAndResize","float32"),l=y(n,"boxInd","cropAndResize","int32"),c=a.shape[0];S(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),S(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),S(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),S(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),S(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},f={method:o,extrapolationValue:i,cropSize:r};return _.runKernel(P0,u,f)}var RP=b({cropAndResize_:f7});function p7(e){let t=y(e,"image","flipLeftRight","float32");S(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n={image:t};return _.runKernel(Y0,n,{})}var PP=b({flipLeftRight_:p7});function h7(e){let t=y(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];S(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),S(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,Oi(t,o)}var FP=b({grayscaleToRGB_:h7});function m7(e){let t=y(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];S(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),S(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=t.dtype,i=de(t,"float32"),s=Kt([.2989,.587,.114]),a;switch(t.rank){case 2:a=Mi("ij,j->i",i,s);break;case 3:a=Mi("ijk,k->ij",i,s);break;case 4:a=Mi("ijkl,l->ijk",i,s);break;case 5:a=Mi("ijklm,m->ijkl",i,s);break;case 6:a=Mi("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=nn(a,-1),de(a,o)}var LP=b({rgbToGrayscale_:m7});function g7(e,t,n=0,r=.5){let o=y(e,"image","rotateWithOffset","float32");S(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:t,fillValue:n,center:r};return _.runKernel(DS,i,s)}var $P=b({rotateWithOffset_:g7});function Zr(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=e.shape[0];return n=Math.min(n,s),S(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),S(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),S(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),S(t.rank===1,()=>"scores must be a 1D tensor"),S(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),S(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function y7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(e,"boxes","nonMaxSuppression","float32"),s=y(t,"scores","nonMaxSuppression","float32"),a=Zr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return _.runKernel(IE,{boxes:i,scores:s},l)}var VP=b({nonMaxSuppression_:y7});function jP(e,t,n){let r=v7(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function v7(e,t,n){return w7(e,t,n||b7)}function b7(e,t){return e>t?1:e<t?-1:0}function w7(e,t,n){let r=0,o=e.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(t,e[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function mg(e,t,n,r,o){return aI(e,t,n,r,o,0)}function gg(e,t,n,r,o,i){return aI(e,t,n,r,o,0,!1,i,!0)}function yg(e,t,n,r,o,i){return aI(e,t,n,r,o,i,!0)}function aI(e,t,n,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let T=0;T<t.length;T++)t[T]>o&&c.push({score:t[T],boxIndex:T,suppressBeginIndex:0});c.sort(BP);let u=i>0?-.5/i:0,f=[],p=[];for(;f.length<n&&c.length>0;){let T=c.pop(),{score:D,boxIndex:P,suppressBeginIndex:A}=T;if(D<o)break;let M=!1;for(let $=f.length-1;$>=A;--$){let L=_7(e,P,f[$]);if(L>=r){M=!0;break}if(T.score=T.score*E7(r,u,L),T.score<=o)break}T.suppressBeginIndex=f.length,M||(T.score===D?(f.push(P),p.push(T.score)):T.score>o&&jP(c,T,BP))}let m=f.length,w=n-m;a&&w>0&&(f.push(...new Array(w).fill(0)),p.push(...new Array(w).fill(0)));let x={selectedIndices:f};return s&&(x.selectedScores=p),l&&(x.validOutputs=m),x}function _7(e,t,n){let r=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(a-i)*(l-s),w=(f-c)*(p-u);if(m<=0||w<=0)return 0;let x=Math.max(i,c),T=Math.max(s,u),D=Math.min(a,f),P=Math.min(l,p),A=Math.max(D-x,0)*Math.max(P-T,0);return A/(m+w-A)}function E7(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function BP(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}async function S7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(e,"boxes","nonMaxSuppressionAsync"),s=y(t,"scores","nonMaxSuppressionAsync"),a=Zr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:f}=mg(c,u,n,r,o);return i!==e&&i.dispose(),s!==t&&s.dispose(),Kt(f,"int32")}var HP=S7;function x7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(e,"boxes","nonMaxSuppression"),a=y(t,"scores","nonMaxSuppression"),l=Zr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},f=_.runKernel(DE,c,u);return{selectedIndices:f[0],selectedScores:f[1]}}var UP=b({nonMaxSuppressionWithScore_:x7});async function T7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(e,"boxes","nonMaxSuppressionAsync"),a=y(t,"scores","nonMaxSuppressionAsync"),l=Zr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c=await Promise.all([s.data(),a.data()]),u=c[0],f=c[1],{selectedIndices:p,selectedScores:m}=yg(u,f,n,r,o,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:Kt(p,"int32"),selectedScores:Kt(m)}}var zP=T7;function I7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(e,"boxes","nonMaxSuppression"),a=y(t,"scores","nonMaxSuppression"),l=Zr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,p={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:u,scoreThreshold:f,padToMaxOutputSize:i},w=_.runKernel(CE,p,m);return{selectedIndices:w[0],validOutputs:w[1]}}var GP=b({nonMaxSuppressionPadded_:I7});async function C7(e,t,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(e,"boxes","nonMaxSuppressionAsync"),a=y(t,"scores","nonMaxSuppressionAsync"),l=Zr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,[p,m]=await Promise.all([s.data(),a.data()]),{selectedIndices:w,validOutputs:x}=gg(p,m,c,u,f,i);return s!==e&&s.dispose(),a!==t&&a.dispose(),{selectedIndices:Kt(w,"int32"),validOutputs:ne(x,"int32")}}var WP=C7;function D7(e,t,n=!1,r=!1){let o=y(e,"images","resizeBilinear");S(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),S(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),S(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=_.runKernel(zE,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var qP=b({resizeBilinear_:D7});function N7(e,t,n=!1,r=!1){let o=y(e,"images","resizeNearestNeighbor");S(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),S(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),S(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),S(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=t,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=_.runKernel(UE,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var KP=b({resizeNearestNeighbor_:N7});function A7(e,t="binary",n=!1,r=.5){let o=y(e,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=V(Kt([r]),255),u,f,p,m;if(S(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),S(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),S(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),S(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[u,f,p]=Qo(o,[1,1,1],-1);let T=V(u,i),D=V(f,s),P=V(p,a);m=Z(Z(T,D),P)}else m=e;if(t==="otsu"){let T=Xd(de(vf(m),"int32"),tn([]),256);c=M7(T,l)}let w=n?Qa(m,c):Yo(m,c);return de(V(w,255),"int32")}function M7(e,t){let n=Kt([-1]),r=Kt([0]),o=Kt([0]),i,s,a,l,c,u;for(let f=0;f<e.size-1;f++){i=De(e,0,f+1),s=De(e,f+1),c=Ce(Ge(i),t),u=Ce(Ge(s),t);let p=Ge(V(i,Xr(0,i.size)));a=Ce(p,Ge(i));let m=bo(s.shape,i.size),w=Z(Xr(0,s.size),m),x=V(s,w);l=Ce(Ge(x),Ge(s));let T=re(a,l),D=re(a,l),P=V(c,u);o=V(V(P,T),D);let A=Yo(o,r);r=hr(A,o,r),n=hr(A,Kt([f]),n)}return n}var YP=b({threshold_:A7});function k7(e,t,n="nearest",r="constant",o=0,i){let s=y(e,"image","transform","float32"),a=y(t,"transforms","transform","float32");S(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),S(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return _.runKernel(ES,l,c)}var XP=b({transform_:k7});function O7(e,t,n){let r=y(e,"a","bandPart");S(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof t=="number"?(S(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),S(t<=i,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`),a=y(t<0?i:t,"numLower","bandPart")):(S(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=hr(Fc(t,0),i,bs(t,i))),typeof n=="number"?(S(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),S(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=y(n<0?s:n,"numUpper","bandPart")):(S(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=hr(Fc(n,0),s,bs(n,s)));let c=R(Xr(0,i,1,"int32"),[-1,1]),u=Xr(0,s,1,"int32"),f=re(c,u),p=ys(Qa(f,a),tf(f,rn(l))),m=_o([i,s],r.dtype);return R(Nn(gr(R(r,[-1,i,s])).map(w=>hr(p,w,m))),o)}var ZP=b({bandPart_:O7});function R7(e){let t;if(Array.isArray(e)){t=!1,S(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=e[0].shape[0];for(let i=1;i<e.length;++i)S(e[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[i].shape[0]} vs. ${o})`)}else t=!0,e=Qo(e,e.shape[0],0).map(o=>Hn(o,[0]));S(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let o=0;o<e.length;++o)n.push(_.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=V(Ge(V(n[s],i)),n[s]);i=re(i,a)}return Ce(i,gs(i,"euclidean"))}));return t?Nn(n,0):n}var QP=b({gramSchmidt_:R7});function P7(e,t=!1){if(S(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return JP(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),r=gr(R(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=JP(l,t);o.push(c),i.push(u)});let s=R(Nn(o,0),e.shape),a=R(Nn(i,0),e.shape);return[s,a]}}function JP(e,t=!1){return _.tidy(()=>{S(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],o=Qd(n),i=Jn(e),s=So([[1]],[1,1]),a=Jn(s),l=n>=r?r:n;for(let c=0;c<l;++c){let u=i,f=a,p=o;[a,i,o]=_.tidy(()=>{let m=De(i,[c,c],[n-c,1]),w=gs(m),x=De(i,[c,c],[1,1]),T=hr(Yo(x,0),So([[-1]]),So([[1]])),D=re(x,V(T,w)),P=Ce(m,D);P.shape[0]===1?a=Jn(s):a=ot([s,De(P,[1,0],[P.shape[0]-1,P.shape[1]])],0);let A=rn(Ce(Ne(T,D),w)),M=De(i,[c,0],[n-c,r]),$=V(A,a),L=ol(a);if(c===0)i=re(M,Ne($,Ne(L,M)));else{let W=re(M,Ne($,Ne(L,M)));i=ot([De(i,[0,0],[c,r]),W],0)}let H=ol($),G=De(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=re(G,Ne(Ne(G,a),H));else{let W=re(G,Ne(Ne(G,a),H));o=ot([De(o,[0,0],[n,c]),W],1)}return[a,i,o]}),Et([u,f,p])}return!t&&n>r&&(o=De(o,[0,0],[n,r]),i=De(i,[0,0],[r,r])),[o,i]})}var e2=b({qr_:P7});var St=(function(e){return e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",e})(St||{});function F7(e,t,n=St.SUM_BY_NONZERO_WEIGHTS){let r=y(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=y(t,"weights","computeWeightedLoss"));let i=o==null?r:V(r,o);if(n===St.NONE)return i;if(n===St.SUM)return Ge(i);if(n===St.MEAN){if(o==null)return vs(i);{let s=r.size/o.size,a=Ce(Ge(i),Ge(o));return s>1?Ce(a,ne(s)):a}}if(n===St.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Ce(Ge(i),ne(r.size));{let s=V(o,Eo(r.shape)),a=de(Ge(ff(s,ne(0))),"float32");return Ce(Ge(i),a)}}throw Error(`Unknown reduction: ${n}`)}var bn=b({computeWeightedLoss_:F7});function L7(e,t,n,r=St.SUM_BY_NONZERO_WEIGHTS){let o=y(e,"labels","absoluteDifference"),i=y(t,"predictions","absoluteDifference"),s=null;n!=null&&(s=y(n,"weights","absoluteDifference")),at(o.shape,i.shape,"Error in absoluteDifference: ");let a=Wt(re(o,i));return bn(a,s,r)}var t2=b({absoluteDifference_:L7});function $7(e,t,n,r,o=St.SUM_BY_NONZERO_WEIGHTS){let i=y(e,"labels","cosineDistance"),s=y(t,"predictions","cosineDistance"),a=null;r!=null&&(a=y(r,"weights","cosineDistance")),at(i.shape,s.shape,"Error in cosineDistance: ");let l=ne(1),c=re(l,Ge(V(i,s),n,!0));return bn(c,a,o)}var n2=b({cosineDistance_:$7});function V7(e,t,n,r=St.SUM_BY_NONZERO_WEIGHTS){let o=y(e,"labels","hingeLoss"),i=y(t,"predictions","hingeLoss"),s=null;n!=null&&(s=y(n,"weights","hingeLoss")),at(o.shape,i.shape,"Error in hingeLoss: ");let a=ne(1);o=re(V(ne(2),o),a);let l=Pi(re(a,V(o,i)));return bn(l,s,r)}var r2=b({hingeLoss_:V7});function j7(e,t,n,r=1,o=St.SUM_BY_NONZERO_WEIGHTS){let i=y(e,"labels","huberLoss"),s=y(t,"predictions","huberLoss"),a=null;n!=null&&(a=y(n,"weights","huberLoss")),at(i.shape,s.shape,"Error in huberLoss: ");let l=ne(r),c=Wt(re(s,i)),u=bs(c,l),f=re(c,u),p=Z(V(ne(.5),qt(u)),V(l,f));return bn(p,a,o)}var o2=b({huberLoss_:j7});function B7(e,t,n,r=1e-7,o=St.SUM_BY_NONZERO_WEIGHTS){let i=y(e,"labels","logLoss"),s=y(t,"predictions","logLoss"),a=null;n!=null&&(a=y(n,"weights","logLoss")),at(i.shape,s.shape,"Error in logLoss: ");let l=ne(1),c=ne(r),u=rn(V(i,Xo(Z(s,c)))),f=V(re(l,i),Xo(Z(re(l,s),c))),p=re(u,f);return bn(p,a,o)}var i2=b({logLoss_:B7});function H7(e,t,n,r=St.SUM_BY_NONZERO_WEIGHTS){let o=y(e,"labels","meanSquaredError"),i=y(t,"predictions","meanSquaredError"),s=null;n!=null&&(s=y(n,"weights","meanSquaredError")),at(o.shape,i.shape,"Error in meanSquaredError: ");let a=wf(o,i);return bn(a,s,r)}var s2=b({meanSquaredError_:H7});function U7(e,t){let n=y(e,"labels","sigmoidCrossEntropyWithLogits"),r=y(t,"logits","sigmoidCrossEntropyWithLogits");at(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Pi(r),i=V(r,n),s=rf(Ar(rn(Wt(r))));return Z(re(o,i),s)}function z7(e,t,n,r=0,o=St.SUM_BY_NONZERO_WEIGHTS){let i=y(e,"multiClassLabels","sigmoidCrossEntropy"),s=y(t,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","sigmoidCrossEntropy")),at(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ne(r),u=ne(1),f=ne(.5);i=Z(V(i,re(u,c)),V(f,c))}let l=U7(i,s);return bn(l,a,o)}var a2=b({sigmoidCrossEntropy_:z7});function G7(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Dn((o,i,s)=>{let l=sf(i,[n],!0),c=re(de(i,"float32"),l);s([o,c]);let u=rn(V(c,o));return{value:Ge(u,[n]),gradFunc:(m,w)=>{let[x,T]=w,D=ki(m.shape,[n]);return[V(R(m,D),re(de(x,"float32"),Ar(T))),V(R(m,D),re(Ar(T),de(x,"float32")))]}}})(e,t)}function W7(e,t,n,r=0,o=St.SUM_BY_NONZERO_WEIGHTS){let i=y(e,"onehotLabels","softmaxCrossEntropy"),s=y(t,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","softmaxCrossEntropy")),at(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ne(r),u=ne(1),f=ne(i.shape[1]);i=Z(V(i,re(u,c)),Ce(c,f))}let l=G7(i,s);return bn(l,a,o)}var l2=b({softmaxCrossEntropy_:W7});function q7(e,t,n,r){let o=y(e,"indices","sparseFillEmptyRows","int32"),i=y(t,"values","sparseFillEmptyRows"),s=y(n,"denseShape","sparseFillEmptyRows","int32"),a=y(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=_.runKernel(cS,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var c2=b({sparseFillEmptyRows_:q7});function K7(e,t,n){let r=y(e,"inputIndices","sparseReshape","int32"),o=y(t,"inputShape","sparseReshape","int32"),i=y(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=_.runKernel(uS,s);return{outputIndices:a[0],outputShape:a[1]}}var u2=b({sparseReshape_:K7});function Y7(e,t,n){let r=y(e,"data","sparseSegmentMean"),o=y(t,"indices","sparseSegmentMean","int32"),i=y(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(dS,s)}var d2=b({sparseSegmentMean_:Y7});function X7(e,t,n){let r=y(e,"data","sparseSegmentSum"),o=y(t,"indices","sparseSegmentSum","int32"),i=y(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(fS,s)}var f2=b({sparseSegmentSum_:X7});function Z7(e,t,n,r,o,i,s,a){let l=y(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=y(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},f={data:l,dataSplits:c},p=_.runKernel(yS,f,u);return{nGrams:p[0],nGramsSplits:p[1]}}var p2=b({stringNGrams_:Z7});function Q7(e,t,n=!0){let r=y(e,"input","stringSplit","string"),o=y(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=_.runKernel(vS,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var h2=b({stringSplit_:Q7});function J7(e,t){let n=y(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return _.runKernel(bS,o,r)}var m2=b({stringToHashBucketFast_:J7});function e9(e,t,n,r=!0){let o=y(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return _.runKernel(mS,{x:o},i)}var g2=b({staticRegexReplace_:e9});var y2={fft:nl,ifft:_s,rfft:rl,irfft:bf},v2={hammingWindow:kP,hannWindow:pg,frame:hg,stft:OP},Es={flipLeftRight:PP,grayscaleToRGB:FP,resizeNearestNeighbor:KP,resizeBilinear:qP,rgbToGrayscale:LP,rotateWithOffset:$P,cropAndResize:RP,nonMaxSuppression:VP,nonMaxSuppressionAsync:HP,nonMaxSuppressionWithScore:UP,nonMaxSuppressionWithScoreAsync:zP,nonMaxSuppressionPadded:GP,nonMaxSuppressionPaddedAsync:WP,threshold:YP,transform:XP},b2={bandPart:ZP,gramSchmidt:QP,qr:e2},w2={absoluteDifference:t2,computeWeightedLoss:bn,cosineDistance:n2,hingeLoss:r2,huberLoss:o2,logLoss:i2,meanSquaredError:s2,sigmoidCrossEntropy:a2,softmaxCrossEntropy:l2},_2={sparseFillEmptyRows:c2,sparseReshape:u2,sparseSegmentMean:d2,sparseSegmentSum:f2},E2={stringNGrams:p2,stringSplit:h2,stringToHashBucketFast:m2,staticRegexReplace:g2};var uI={};He(uI,{Serializable:()=>Tf,SerializationMap:()=>vg,getRegisteredName:()=>n9,registerClass:()=>cI});var t9=new Map,lI=new Map,Tf=class{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}},vg=class e{constructor(){this.classNameMap={}}static getMap(){return e.instance==null&&(e.instance=new e),e.instance}static register(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}};function cI(e,t,n){S(e.className!=null,()=>"Class being registered does not have the static className property defined."),S(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),S(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);let r=n,o=t+">"+r;return vg.register(e),t9.set(o,e),lI.set(e,o),e}function n9(e){return lI.has(e)?lI.get(e):e.className}var An=class extends Tf{minimize(t,n=!1,r){let{value:o,grads:i}=this.computeGradients(t,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return Et(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return rg(t,n)}dispose(){this.iterations_!=null&&Et(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ne(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}};Object.defineProperty(An,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});var Ss=class extends An{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=_.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:te(()=>$t(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:te(()=>$t(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;te(()=>{let u=Z(V(l,this.rho),V(qt(a),1-this.rho)),f=V(Ce(Bn(Z(c,this.epsilon)),Bn(Z(l,this.epsilon))),a),p=Z(V(c,this.rho),V(qt(f),1-this.rho));l.assign(u),c.assign(p);let m=Z(V(f,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Et(this.accumulatedGrads.map(t=>t.variable)),Et(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);let n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}};var xs=class extends An{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:te(()=>bo(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(t)?t[o].tensor:t[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;te(()=>{let l=Z(a,qt(s));a.assign(l);let c=Z(V(Ce(s,Bn(Z(l,_.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Et(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);let n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}};var Ts=class extends An{static get className(){return"Adam"}constructor(t,n,r,o=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],te(()=>{this.accBeta1=ne(n).variable(),this.accBeta2=ne(r).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);te(()=>{let r=re(1,this.accBeta1),o=re(1,this.accBeta2);n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:te(()=>$t(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:te(()=>$t(a).variable(l))});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,p=Z(V(u,this.beta1),V(c,1-this.beta1)),m=Z(V(f,this.beta2),V(qt(c),1-this.beta2)),w=Ce(p,r),x=Ce(m,o);u.assign(p),f.assign(m);let T=Z(V(Ce(w,Z(Bn(x),this.epsilon)),-this.learningRate),a);a.assign(T)}),this.accBeta1.assign(V(this.accBeta1,this.beta1)),this.accBeta2.assign(V(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Et(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Et(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),te(()=>{this.accBeta1.assign(Ko(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ko(this.beta2,this.iterations_+1))});let n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var Is=class extends An{static get className(){return"Adamax"}constructor(t,n,r,o=null,i=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],te(()=>{this.iteration=ne(0).variable(),this.accBeta1=ne(n).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(t){let n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);te(()=>{let r=re(1,this.accBeta1),o=Ce(-this.learningRate,Z(V(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:$t(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:$t(a).variable(l)});let c=Array.isArray(t)?t[s].tensor:t[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,p=Z(V(u,this.beta1),V(c,1-this.beta1)),m=V(f,this.beta2),w=Wt(c),x=uf(m,w);u.assign(p),f.assign(x);let T=Z(V(Ce(o,r),Ce(p,Z(x,this.epsilon))),a);a.assign(T)}),this.iteration.assign(Z(this.iteration,1)),this.accBeta1.assign(V(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Et(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Et(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var Jo=class extends An{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=Array.isArray(t)?t[o].tensor:t[r];if(i==null)return;let s=_.registeredVariables[r];te(()=>{let a=Z(V(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=jn(ne(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}};var Cs=class extends Jo{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ne(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:te(()=>$t(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[r];a!=null&&te(()=>{let l,c=Z(V(this.m,s),a);this.useNesterov?l=Z(V(this.c,Z(a,V(c,this.m))),i):l=Z(V(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Et(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);let n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}};var Ds=class extends An{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=_.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:te(()=>$t(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:te(()=>$t(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:te(()=>$t(i).variable(s))});let a=Array.isArray(t)?t[o].tensor:t[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;te(()=>{let u=Z(V(l,this.decay),V(qt(a),1-this.decay));if(this.centered){let f=this.accumulatedMeanGrads[o].variable,p=Z(V(f,this.decay),V(a,1-this.decay)),m=Ce(V(a,this.learningRate),Bn(re(u,Z(qt(p),this.epsilon)))),w=Z(V(c,this.momentum),m);l.assign(u),f.assign(p),c.assign(w);let x=re(i,w);i.assign(x)}else{let f=Z(V(l,this.decay),V(qt(a),1-this.decay)),p=Z(V(c,this.momentum),Ce(V(a,this.learningRate),Bn(Z(f,this.epsilon))));l.assign(f),c.assign(p);let m=re(i,p);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Et(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Et(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Et(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);let n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var r9=[Ss,xs,Ts,Is,Cs,Ds,Jo];function S2(){for(let e of r9)cI(e)}var jc={};He(jc,{CompositeArrayBuffer:()=>yn,browserFiles:()=>T2,browserHTTPRequest:()=>A2,concatenateArrayBuffers:()=>_R,copyModel:()=>PR,decodeWeights:()=>Ym,decodeWeightsStream:()=>Xm,encodeWeights:()=>yR,fromMemory:()=>M2,fromMemorySync:()=>yI,getLoadHandlers:()=>TR,getModelArtifactsForJSON:()=>Nc,getModelArtifactsForJSONSync:()=>WS,getModelArtifactsInfoForJSON:()=>Go,getSaveHandlers:()=>xR,getWeightSpecs:()=>Hd,http:()=>wg,isHTTPScheme:()=>bg,listModels:()=>OR,loadWeights:()=>C2,moveModel:()=>FR,registerLoadRouter:()=>SR,registerSaveRouter:()=>ER,removeModel:()=>RR,weightsLoaderFactory:()=>mI,withSaveHandler:()=>k2,withSaveHandlerSync:()=>O2});var o9="model",i9=".json",s9=".weights.bin";function x2(e){return new Promise(t=>setTimeout(t)).then(e)}var dI=(()=>{class e{constructor(n){if(!J().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(e.URL_SCHEME)&&(n=n.slice(e.URL_SCHEME.length)),(n==null||n.length===0)&&(n=o9),this.modelJsonFileName=n+i9,this.weightDataFileName=n+s9}async save(n){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=yn.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=Zm(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,await x2(()=>l.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,await x2(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Go(n)}}}}return e.URL_SCHEME="downloads://",e})();var fI=class{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:s});return}let l=Nc(i,c=>this.loadWeights(c));t(l)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){let n=[],r=[];for(let s of t)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(t),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(t,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){let n=[],r=this.weightsFiles.map(i=>GS(i.name)),o={};for(let i of t)i.paths.forEach(s=>{let a=GS(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},a9=e=>J().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(dI.URL_SCHEME)?l9(e.slice(dI.URL_SCHEME.length)):null;Gt.registerSaveRouter(a9);function l9(e="model"){return new dI(e)}function T2(e){return new fI(e)}function pI(e,t,n,r){s(e),n=n??0,r=r??1,a(n,r);let o=0,i=l=>(l.then(c=>{let u=n+ ++o/e.length*(r-n);return t(u),c}),l);function s(l){S(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){S(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),S(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),S(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(e.map(i))}async function hI(e,t){t==null&&(t={});let n=t.fetchFunc==null?J().platform.fetch:t.fetchFunc,r=e.map(f=>n(f,t.requestInit,{isBinary:!0})),a=(t.onProgress==null?await Promise.all(r):await pI(r,t.onProgress,0,.5)).map(f=>f.arrayBuffer());return t.onProgress==null?await Promise.all(a):await pI(a,t.onProgress,.5,1)}function I2(e,t){var n;let r=t.fetchFunc==null?J().platform.fetch:t.fetchFunc,o=0,i;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async s=>{for(var a;o<e.length;){i||(i=(await r(e[o],t.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=await i.read();if(l){o++,i=void 0,(a=t.onProgress)===null||a===void 0||a.call(t,o/e.length);continue}s.enqueue(c);return}s.close()}})}async function C2(e,t="",n,r){return mI(s=>hI(s,{requestInit:r}))(e,t,n)}function mI(e){return async(t,n="",r)=>{let o=t.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(t.forEach((m,w)=>{let x=0;m.weights.forEach(T=>{let D="quantization"in T?T.quantization.dtype:T.dtype,P=Ci[D]*xe(T.shape),A=()=>{o[w]=!0,i[w]==null&&(i[w]=[]),i[w].push({manifestEntry:T,groupOffset:x,sizeBytes:P})};r!=null?r.forEach((M,$)=>{M===T.name&&(A(),s[$]=!0)}):A(),a.push(T.name),x+=P})}),!s.every(m=>m)){let m=r.filter((w,x)=>!s[x]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((m,w,x)=>(w&&m.push(x),m),[]),c=[];l.forEach(m=>{t[m].paths.forEach(w=>{let x=n+(n.endsWith("/")?"":"/")+w;c.push(x)})});let u=await e(c),f={},p=0;return l.forEach(m=>{let w=t[m].paths.length,x=new yn(u.slice(p,p+w));i[m].forEach(D=>{let P=x.slice(D.groupOffset,D.groupOffset+D.sizeBytes),A=Ym(P,[D.manifestEntry]);for(let M in A)f[M]=A[M]}),p+=w}),f}}var c9="application/octet-stream",u9="application/json",D2=(()=>{class e{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(S(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=J().platform.fetch,S(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&S(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=Zm(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:u9}),"model.json"),n.weightData!=null){let a=yn.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:c9}),"model.weights.bin")}let s=await this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:Go(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){let n=await this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=await n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let n=await this.loadModelJSON();return Nc(n,r=>this.loadWeights(r))}async loadStream(){let n=await this.loadModelJSON(),r=await this.getWeightUrls(n.weightsManifest),o=Hd(n.weightsManifest),i=()=>I2(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})}async getWeightUrls(n){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=d9(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of n)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...await Promise.all(l)),a}async loadWeights(n){let r=await this.getWeightUrls(n),o=Hd(n),i=await hI(r,this.loadOptions);return[o,i]}}return e.URL_SCHEME_REGEX=/^https?:\/\//,e})();function d9(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}function bg(e){return e.match(D2.URL_SCHEME_REGEX)!=null}var N2=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>bg(r)):n=bg(e),n)return wg(e,t)}return null};Gt.registerSaveRouter(N2);Gt.registerLoadRouter(N2);function wg(e,t){return new D2(e,t)}function A2(e,t){return wg(e,t)}var If=class{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}},_g=class{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}},gI=class{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}};function M2(e,t,n,r){let o=arguments;return new gI(yI(...o))}function yI(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new If(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function k2(e){return new _g(e)}function O2(e){return new _g(e)}var vI={};He(vI,{confusionMatrix:()=>R2});function f9(e,t,n){let r=y(e,"labels","confusionMatrix"),o=y(t,"predictions","confusionMatrix");S(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),S(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),S(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),S(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),S(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let i=ws(de(r,"int32"),n),s=ws(de(o,"int32"),n),a=ol(i),l=Ne(a,s);return de(l,"int32")}var R2=b({confusionMatrix_:f9});var xo={};He(xo,{draw:()=>w9,fromPixels:()=>_9,fromPixelsAsync:()=>y9,toPixels:()=>b9});var cl,P2=!1;function F2(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else if(e.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(Fa(Om,_.backendName)!=null){let w={pixels:e},x={numChannels:t};return _.runKernel(Om,w,x)}let[c,u]=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],f;if(s)f=e.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)f=e.data;else if(i||o||a){if(cl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")cl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else cl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});cl.canvas.width=c,cl.canvas.height=u,cl.drawImage(e,0,0,c,u),f=cl.getImageData(0,0,c,u).data}let p;if(t===4)p=new Int32Array(f);else{let w=c*u;p=new Int32Array(w*t);for(let x=0;x<w;x++)for(let T=0;T<t;++T)p[x*t+T]=f[x*4+T]}return Ef(p,[u,c,t],"int32")}function p9(e){return e!=null&&e.data instanceof Uint8Array}function h9(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function m9(e){return e!=null&&e.width!==0&&e.height!==0}function g9(e){return h9()&&!(e instanceof ImageBitmap)&&m9(e)&&!p9(e)}async function y9(e,t=3){let n=null;if(J().getBool("WRAP_TO_IMAGEBITMAP")&&g9(e)){let r;try{r=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===e.width&&r.height===e.height?n=r:n=e}else n=e;return F2(n,t)}function L2(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function v9(e){let t=e?.alpha||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}async function b9(e,t){let n=y(e,"img","toPixels");if(!(e instanceof Ie)){let c=n;n=de(c,"int32"),c.dispose()}L2(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let m=s[c*i+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(u[0]=m*a,u[1]=m*a,u[2]=m*a):u[p]=m*a}let f=c*4;l[f+0]=Math.round(u[0]),l[f+1]=Math.round(u[1]),l[f+2]=Math.round(u[2]),l[f+3]=Math.round(u[3])}if(t!=null){P2||Fa(km,_.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),P2=!0),t.width=o,t.height=r;let c=t.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return n!==e&&n.dispose(),l}function w9(e,t,n){let r=y(e,"img","draw");if(!(e instanceof Ie)){let s=r;r=de(s,"int32"),s.dispose()}L2(r),v9(n?.imageOptions);let o={image:r},i={canvas:t,options:n};_.runKernel(km,o,i)}var _9=b({fromPixels_:F2});var bI={};He(bI,{prepareAndValidate:()=>$2});function $2(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(xe(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let o=t.shape,i=o[o.length-1],s=1;for(let f=0;f<o.length-1;++f)s*=o[f];let a=e.shape,l=o.slice();l.pop();let c=1;for(let f=i;f<n;++f)c*=a[f],l.push(a[f]);let u=[...Ho(e.shape).map(f=>f/c),1].slice(0,i);return[l,s,c,u]}var Cf={};He(Cf,{assertParamsValid:()=>S9,computeFlatOffset:()=>D9,computeOutShape:()=>T9,getNormalizedAxes:()=>I9,isSliceContinous:()=>C9,maskToAxes:()=>x9,parseSliceParams:()=>N9,sliceInfo:()=>A9,startForAxis:()=>W2,startIndicesWithElidedDims:()=>U2,stopForAxis:()=>q2,stopIndicesWithElidedDims:()=>z2,stridesForAxis:()=>G2,stridesWithElidedDims:()=>j2});var wI=-2,E9=-1;function S9(e,t,n){let r=e.shape.length;S(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),S(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)S(t[o]+n[o]<=e.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function x9(e){let t=[],n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function T9(e,t,n){let r=[];for(let o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function j2(e,t,n,r){let o=[...e];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function B2(e,t,n){return n<=e?n:n-(t-1)}function H2(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function I9(e,t,n,r,o,i,s,a,l){let c=e.length,u=new Array(c),f=new Array(c),p=new Array(c);if(t.length&&n>0){let m=t[0],w=n+1;u=U2(s,m,w,r,e),f=z2(a,m,w,o,e),p=j2(i,m,w,e)}else for(let m=0;m<c;m++)u[m]=W2(s,r,i,e,m,l),f[m]=q2(a,o,i,e,m,l),p[m]=G2(i,m,l);return{begin:u,end:f,strides:p}}function U2(e,t,n,r,o){let i=[...o],s=H2(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=B2(t,n,a),c=r[l];e&1<<l&&(c=0),i[a]=c}return i}function z2(e,t,n,r,o){let i=[...o],s=H2(n,t);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=B2(t,n,a),c=r[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=vc(0,i[a],o[a])}return i}function G2(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function W2(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=vc(0,s,l-1),s}function q2(e,t,n,r,o,i){let s=t[o],a=n[o]||1;(e&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=vc(0,s,l):s=vc(-1,s,l-1),s}function C9(e,t,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function D9(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function N9(e,t,n){let r,o=e.shape.length;typeof t=="number"?r=[t,...new Array(o-1).fill(0)]:t.length<o?r=t.concat(new Array(o-t.length).fill(0)):r=t.slice(),r.forEach(s=>{S(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(S(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),e.shape[a]-r[a])),[r,i]}function A9(e,t,n,r,o,i,s,a,l){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let A=0;A<f.dims;A++)u&&(1<<A&a)!==0&&f.numAddAxisAfterEllipsis++,1<<A&s&&(u=!0);u||(f.ellipsisMask|=1<<f.dims,f.dims++);let p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};M9(f,p);let m=!0,w=!0,x=!0,T=[],D=[];for(let A=0;A<e.length;++A){if(p.strides[A]===0)throw Error(`strides[${A}] must be non-zero`);let M=!!(p.shrinkAxisMask&1<<A),$=e[A];if($===-1){T.push(M?1:-1);continue}let L=[p.beginMask&1<<A,p.endMask&1<<A],H=[p.strides[A]>0?0:-1,p.strides[A]>0?$:$-1];if(M&&p.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[A]===1;let G=!!(p.beginMask&1<<A&&p.endMask&1<<A);if(p.beginValid&&p.endValid){if(M){let ue=p.begin[A]<0?$+p.begin[A]:p.begin[A];if(p.begin[A]=ue,p.end[A]=p.begin[A]+1,ue<0||ue>=$)throw Error(`slice index ${p.begin[A]} of dimension ${A} out of bounds.`)}else p.begin[A]=V2(p.begin[A],0,p.strides[A],$,L,H),p.end[A]=V2(p.end[A],1,p.strides[A],$,L,H);let U=p.strides[A]===1&&p.begin[A]===0&&p.end[A]===$;m=m&&U,w=w&&(A===0&&p.strides[A]===1||U)}else m=m&&p.strides[A]===1&&G,w=w&&(A===0&&p.strides[A]===1||G);let W,K=!1;if(p.beginValid&&p.endValid?(W=p.end[A]-p.begin[A],K=!0):M?(W=1,K=!0):G&&$>=0&&(p.strides[A]<0?W=-$:W=$,K=!0),K){let U;W===0||W<0!=p.strides[A]<0?U=0:U=Math.trunc(W/p.strides[A])+(W%p.strides[A]!==0?1:0),T.push(U)}else T.push(-1)}for(let A=0;A<p.finalShapeGatherIndices.length;++A){let M=p.finalShapeGatherIndices[A];M>=0?D.push(T[M]):M===wI&&D.push(1)}return{finalShapeSparse:D.filter((A,M)=>p.finalShapeGatherIndices[M]!==wI),finalShape:D,isIdentity:m,sliceDim0:w,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function M9(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let o=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(wI),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(E9),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function V2(e,t,n,r,o,i){if(o[t])return n>0?i[t]:i[t+1&1];{let s=e<0?r+e:e;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var K2="4.22.0";var Bc=class{static sgd(t){return new Jo(t)}static momentum(t,n,r=!1){return new Cs(t,n,r)}static rmsprop(t,n=.9,r=0,o=null,i=!1){return new Ds(t,n,r,o,i)}static adam(t=.001,n=.9,r=.999,o=null){return new Ts(t,n,r,o)}static adadelta(t=.001,n=.95,r=null){return new Ss(t,n,r)}static adamax(t=.002,n=.9,r=.999,o=null,i=0){return new Is(t,n,r,o,i)}static adagrad(t,n=.1){return new xs(t,n)}};var k9=Bc;var O9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function Y2(){return new Promise(e=>O9(()=>e()))}var SI={};He(SI,{ERF_A1:()=>X9,ERF_A2:()=>Z9,ERF_A3:()=>Q9,ERF_A4:()=>J9,ERF_A5:()=>eK,ERF_P:()=>Y9,PARALLELIZE_THRESHOLD:()=>Eg,RowPartitionType:()=>Fi,SELU_SCALE:()=>K9,SELU_SCALEALPHA:()=>q9,applyActivation:()=>al,assertAndGetBroadcastShape:()=>ze,assertAxesAreInnerMostDims:()=>E6,assertParamsConsistent:()=>R9,assignToTypedArray:()=>sK,axesAreInnerMostDims:()=>Hx,calculateShapes:()=>gP,checkEinsumDimSizes:()=>fK,checkPadOnDimRoundingMode:()=>Rt,combineLocations:()=>GR,combineRaggedTensorToTensorShapes:()=>F9,complexWithEvenIndex:()=>rK,complexWithOddIndex:()=>oK,computeConv2DInfo:()=>Ka,computeConv3DInfo:()=>jR,computeDefaultPad:()=>fx,computeDilation2DInfo:()=>w5,computeOptimalWindowSize:()=>j9,computeOutAndReduceShapes:()=>_6,computeOutShape:()=>P9,computePool2DInfo:()=>dx,computePool3DInfo:()=>_5,convertConv2DDataFormat:()=>BR,decodeEinsumEquation:()=>uK,eitherStridesOrDilationsAreOne:()=>Cn,expandShapeToKeepDim:()=>ki,exponent:()=>lK,exponents:()=>aK,fromStringArrayToUint8:()=>OK,fromUint8ToStringArray:()=>kK,getAxesPermutation:()=>S6,getBroadcastDims:()=>zR,getComplexWithIndex:()=>iK,getEinsumComputePath:()=>pK,getEinsumPermutation:()=>dK,getFusedBiasGradient:()=>sl,getFusedDyActivation:()=>il,getImageCenter:()=>B9,getInnerMostAxes:()=>T6,getPermuted:()=>U9,getRaggedRank:()=>$9,getReductionAxes:()=>ng,getReshaped:()=>H9,getReshapedPermuted:()=>z9,getRowPartitionTypesHelper:()=>L9,getSliceBeginCoords:()=>G9,getSliceSize:()=>W9,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>yK,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>vK,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>bK,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>EK,getSparseReshapeInputOutputMismatchErrorMessage:()=>xK,getSparseReshapeInputOutputMultipleErrorMessage:()=>SK,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>wK,getSparseReshapeNegativeOutputDimErrorMessage:()=>_K,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>DK,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>TK,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>IK,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>CK,getUndoAxesPermutation:()=>x6,isIdentityPermutation:()=>hK,log:()=>KG,mergeRealAndImagArrays:()=>tK,prepareAndValidate:()=>$2,prepareSplitSize:()=>gK,segment_util:()=>EI,shouldFuse:()=>ll,slice_util:()=>Cf,splitRealAndImagArrays:()=>nK,stridesOrDilationsArePositive:()=>Wo,tupleValuesAreOne:()=>qa,upcastType:()=>Ha,validateDefaultValueShape:()=>V9,validateInput:()=>$c,validateUpdateShape:()=>JT,warn:()=>Uo});function R9(e,t){let n=e[0].length;e.forEach((o,i)=>{S(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),S(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((o,i)=>{for(let s=0;s<n;s++)S(s===t||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function P9(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var Fi=(function(e){return e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS",e})(Fi||{});function F9(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${o+e}] = ${i} but shape[${o+e}] = ${a}`)}else r[s]=i}return r}function L9(e){let t={FIRST_DIM_SIZE:Fi.FIRST_DIM_SIZE,VALUE_ROWIDS:Fi.VALUE_ROWIDS,ROW_LENGTHS:Fi.ROW_LENGTHS,ROW_SPLITS:Fi.ROW_SPLITS,ROW_LIMITS:Fi.ROW_LIMITS,ROW_STARTS:Fi.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function $9(e){return e.length===0?0:e[0]===Fi.FIRST_DIM_SIZE?e.length-1:e.length}function V9(e,t){if(e==null||t==null)return;let n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=e[o],s=t[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${o-e.length}] = ${i} but ragged tensor input.flatValues.shape[${o-e.length}] = ${s}`)}}var Eg=30;function j9(e){return e<=Eg?e:wc(e,Math.floor(Math.sqrt(e)))}function B9(e,t,n){let r=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[r,o]}function H9(e,t,n,r=!0){let o=[];if(r)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);let i=t.length;for(let s=0;s<i;++s)o=o.concat([e[s+1]/t[s],t[s]]);o=o.concat(e.slice(i+1))}return o}function U9(e,t,n=!0){let r=[];if(n){r.push(t);for(let o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<e;++s)s>=t*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function z9(e,t,n,r=!0){let o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function G9(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function W9(e,t,n){let r=e.slice(0,1);for(let o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}var q9=1.7580993408473768,K9=1.0507009873554805;var Y9=.3275911,X9=.254829592,Z9=-.284496736,Q9=1.421413741,J9=-1.453152027,eK=1.061405429;function tK(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function nK(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function rK(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function oK(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}function iK(e,t){let n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function sK(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function aK(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){let i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function lK(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var _I="->",cK=/->/g,X2=",",Z2="...";function uK(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(cK,"").length)/_I.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${_I}").`);let[r,o]=e.split(_I);S(r.indexOf(Z2)===-1,()=>`The ellipsis notation ("${Z2}") is not supported yet.`);let i=r.split(X2),s=i.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let m=o[p];if(!i.some(w=>w.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){let m=r[p];a.indexOf(m)===-1&&m!==X2&&a.push(m)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let m=0;m<i[p].length;++m)l[p].push(a.indexOf(i[p][m]))}let c=a.length,u=o.length,f=[];for(let p=u;p<c;++p)f.push(p);return{allDims:a,summedDims:f,idDims:l}}function dK(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;let r=[];for(let o=0;o<e;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function fK(e,t,n){let r=new Array(e);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<t[o].length;++s)r[t[o][s]]===void 0?r[t[o][s]]=i[s]:S(r[t[o][s]]===i[s],()=>`Expected dimension ${r[t[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function pK(e,t){let n=e,r=[],o=0;e.length===0&&n.push(-1),o=e.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],l=mK(t,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function hK(e){return e.every((t,n)=>t===n)}function mK(e,t){let n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function gK(e,t,n=0){let r=[];if(typeof t=="number")S(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let o=t.reduce((s,a)=>(a===-1&&(s+=1),s),0);S(o<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(i!==-1){let s=t.reduce((a,l)=>l>0?a+l:a);t[i]=e.shape[n]-s}S(e.shape[n]===t.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function yK(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function vK(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function bK(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function wK(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function _K(e,t){return`size ${e} must be non-negative, not ${t}`}function EK(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function SK(e,t){let n=xe(e),r=xe(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function xK(e,t){let n=xe(e),r=xe(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}function TK(){return"segment ids must be >= 0"}function IK(){return"segment ids are not increasing"}function CK(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function DK(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}var EI={};He(EI,{collectGatherOpShapeInfo:()=>MK,computeOutShape:()=>AK,segOpComputeOptimalWindowSize:()=>NK});function NK(e,t){let n=!1,r;for(e<=Eg?(r=e,n=!0):r=wc(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=wc(e,r+1);return r}function AK(e,t,n){let r=[],o=e.length;for(let i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}function MK(e,t,n,r){let o=t.shape.length,i=e.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(e.shape[f]!==t.shape[f])throw new Error(`x.shape[${f}]: ${e.shape[f]} should be equal to indices.shape[${f}]: ${t.shape[f]}.`);let s=e.shape[n],a=[],l=1,c=1,u=1;for(let f=0;f<r;++f)a.push(e.shape[f]),l*=e.shape[f];for(let f=r;f<n;f++)a.push(e.shape[f]),c*=e.shape[f];for(let f=r;f<o;f++)a.push(t.shape[f]);for(let f=n+1;f<i;f++)a.push(e.shape[f]),u*=e.shape[f];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function kK(e){try{return e.map(t=>Cc(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function OK(e){return e.map(t=>fs(t))}var xI={};He(xI,{nonMaxSuppressionV3Impl:()=>mg,nonMaxSuppressionV4Impl:()=>gg,nonMaxSuppressionV5Impl:()=>yg,whereImpl:()=>ug});S2();var RK=J();RK.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var yr=(function(e){return e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF",e})(yr||{}),Q2;(function(e){let t;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(Q2||(Q2={}));var FK={};function Sg(e){return FK[e]}function g(e,t,n,r,o){let i=t.inputParams[e];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?t.inputNames.length+a:a;if(i.type==="tensor")return Pt(t.inputNames[c],n,r,o);if(i.type==="tensors"){let p=t.inputs.slice(a,l);return t.inputNames.slice(a,l).filter((w,x)=>{var T;return((T=p[x])===null||T===void 0?void 0:T.op)!=="NoOp"}).map(w=>Pt(w,n,r,o))}let u=Pt(t.inputNames[c],n,r,o),f=u.dataSync();return i.type==="number"?f[0]:j.toNestedArray(u.shape,f)}let s=t.attrParams[e];return s&&s.value}function Pt(e,t,n,r){let[o,i]=Un(e,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!t[xg(o,a)]);return s!==void 0?t[xg(o,s)][i]:void 0}function TI(e,t,n){return t[xg(e,n.currentContextId)]}function To(e,t){let[n,r,o]=Un(e,t);return[xg(n,t&&t.currentContextId),r,o]}function xg(e,t){return t?`${e}-${t}`:e}function Un(e,t){if(e==="")return["",0,void 0];let n=t!=null&&t.parseNodeNameCache!=null;if(n){let i=t.parseNodeNameCache.get(e);if(i!=null)return i}let r=e.split(":"),o;if(r.length===1)o=[e,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&t.parseNodeNameCache.set(e,o),o}function Nf(e,t,n){let r=g("pad",e,t,n);if(r==="explicit"){r=g("explicitPaddings",e,t,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Io(e){return e.kept?e:Jn(e)}var II={};He(II,{json:()=>LK});var LK=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var CI={};He(CI,{json:()=>$K});var $K=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var DI={};He(DI,{json:()=>VK});var VK=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var NI={};He(NI,{json:()=>jK});var jK=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var AI={};He(AI,{json:()=>BK});var BK=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var MI={};He(MI,{json:()=>HK});var HK=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var kI={};He(kI,{json:()=>UK});var UK=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var OI={};He(OI,{json:()=>zK});var zK=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var RI={};He(RI,{json:()=>GK});var GK=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var PI={};He(PI,{json:()=>WK});var WK=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var FI={};He(FI,{json:()=>qK});var qK=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var LI={};He(LI,{json:()=>KK});var KK=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var $I={};He($I,{json:()=>YK});var YK=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var VI={};He(VI,{json:()=>XK});var XK=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var jI={};He(jI,{json:()=>ZK});var ZK=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var BI={};He(BI,{json:()=>QK});var QK=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var HI={};He(HI,{json:()=>JK});var JK=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var UI={};He(UI,{json:()=>eY});var eY=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var zI={};He(zI,{json:()=>tY});var tY=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var Af=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let t=[II,CI,DI,NI,AI,MI,kI,OI,RI,PI,FI,LI,$I,VI,jI,BI,HI,UI,zI],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(t,n={}){let r=t.node,o=[],i=[],s=[],a=r.reduce((x,T)=>(x[T.name]=this.mapNode(T),T.op.startsWith("Placeholder")?o.push(x[T.name]):T.op==="Const"?i.push(x[T.name]):(T.input==null||T.input.length===0)&&s.push(x[T.name]),x),{}),l=[],c=[],u={},f={};n!=null&&(u=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));let p=Object.keys(a);p.forEach(x=>{let T=a[x];T.inputNames.forEach((D,P)=>{let[A,,M]=To(D),$=a[A];if($.outputs!=null){let L=$.outputs.indexOf(M);if(L!==-1){let H=`${A}:${L}`;T.inputNames[P]=H}}T.inputs.push($),$.children.push(T)})}),Object.keys(f).length===0?p.forEach(x=>{let T=a[x];T.children.length===0&&c.push(T)}):Object.keys(f).forEach(x=>{let[T]=To(x),D=a[T];D!=null&&(D.signatureKey=f[x],c.push(D))}),Object.keys(u).length>0?Object.keys(u).forEach(x=>{let[T]=To(x),D=a[T];D&&(D.signatureKey=u[x],l.push(D))}):l=o;let m={};t.library!=null&&t.library.function!=null&&(m=t.library.function.reduce((x,T)=>(x[T.signature.name]=this.mapFunction(T),x),{}));let w={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(w.initNodes=s),w}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){let n=Sg(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});let r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=Tg(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Tg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=kg(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Cg(t.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Cg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Mg(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Mg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Ig(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ig(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Rg(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Rg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Ag(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ag(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Og(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Og(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Dg(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Dg(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Ng(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ng(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=J2(t.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=J2(t.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${t.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(t){let n=t.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((f,p)=>(f[p.name]=this.mapNode(p),p.op==="Const"&&o.push(f[p.name]),f),{}));let s=[],a=[];t.signature.inputArg.forEach(f=>{let[p]=To(f.name),m={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:GI(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,s.push(m),i[p]=m}),Object.keys(i).forEach(f=>{let p=i[f];p.inputNames.forEach((m,w)=>{let[x,,T]=To(m),D=i[x];if(D.outputs!=null){let P=D.outputs.indexOf(T);if(P!==-1){let A=`${x}:${P}`;p.inputNames[w]=A}}p.inputs.push(D),D.children.push(p)})});let c=t.ret;t.signature.outputArg.forEach(f=>{let[p,m]=To(c[f.name]),w=i[p];w!=null&&(w.defaultOutput=m,a.push(w))});let u=this.mapArgsToSignature(t);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}};function nY(e){let t=J().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function eF(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):nY(e);return t?n:n.toLowerCase()}function Tg(e,t,n,r=!1){let o=e[t];return o!=null?eF(o.s,r):n}function Ig(e,t,n){let r=e[t];return r?r.b:n}function Cg(e,t,n){let r=e[t]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function GI(e){switch(typeof e=="string"&&(e=yr[e]),e){case yr.DT_FLOAT:case yr.DT_HALF:return"float32";case yr.DT_INT32:case yr.DT_INT64:case yr.DT_INT8:case yr.DT_UINT8:return"int32";case yr.DT_BOOL:return"bool";case yr.DT_DOUBLE:return"float32";case yr.DT_STRING:return"string";case yr.DT_COMPLEX64:case yr.DT_COMPLEX128:return"complex64";default:return null}}function J2(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function Dg(e,t,n){let r=e[t];return r&&r.type?GI(r.type):n}function Ng(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(o=>GI(o)):n}function tF(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function Ag(e,t,n){let r=e[t];return r&&r.shape?tF(r.shape):n}function Mg(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function kg(e,t,n,r=!1){let o=e[t];return o&&o.list&&o.list.s?o.list.s.map(i=>eF(i,r)):n}function Og(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(o=>tF(o)):n}function Rg(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var Pg=class{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(o=>this.getInput(o)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(t){return Pt(t,this.tensorMap,this.context)}getAttr(t,n){let r=this.node.rawAttrs[t];if(r.tensor!=null)return Pt(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Cg(this.node.rawAttrs,t,n);if(r.s!=null)return Tg(this.node.rawAttrs,t,n);if(r.b!=null)return Ig(this.node.rawAttrs,t,n);if(r.shape!=null)return Ag(this.node.rawAttrs,t,n);if(r.type!=null)return Dg(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Mg(this.node.rawAttrs,t,n);if(r.list.s!=null)return kg(this.node.rawAttrs,t,n);if(r.list.shape!=null)return Og(this.node.rawAttrs,t,n);if(r.list.b!=null)return Rg(this.node.rawAttrs,t,n);if(r.list.type!=null)return Ng(this.node.rawAttrs,t,n)}return n}};var Ve={};He(Ve,{OP_SCOPE_SUFFIX:()=>qm,abs:()=>Wt,acos:()=>JS,acosh:()=>ex,add:()=>Z,addN:()=>tx,all:()=>nx,any:()=>rx,argMax:()=>Gd,argMin:()=>ox,asin:()=>ix,asinh:()=>sx,atan:()=>ax,atan2:()=>lx,atanh:()=>cx,avgPool:()=>Kd,avgPool3d:()=>px,basicLSTMCell:()=>hx,batchNorm:()=>Ni,batchNorm2d:()=>mx,batchNorm3d:()=>gx,batchNorm4d:()=>yx,batchToSpaceND:()=>Yd,bincount:()=>Xd,bitwiseAnd:()=>vx,booleanMaskAsync:()=>yP,broadcastArgs:()=>bx,broadcastTo:()=>Ya,buffer:()=>vn,cast:()=>de,ceil:()=>wx,clipByValue:()=>_x,clone:()=>Jn,complex:()=>$n,concat:()=>ot,concat1d:()=>Ex,concat2d:()=>Sx,concat3d:()=>xx,concat4d:()=>Tx,conv1d:()=>Ix,conv2d:()=>Ai,conv2dTranspose:()=>Cx,conv3d:()=>Dx,conv3dTranspose:()=>Nx,cos:()=>Ax,cosh:()=>Mx,cosineWindow:()=>Vc,cumprod:()=>kx,cumsum:()=>Ox,denseBincount:()=>Rx,depthToSpace:()=>Px,depthwiseConv2d:()=>Xa,diag:()=>Fx,dilation2d:()=>Lx,div:()=>Ce,divNoNan:()=>$x,dot:()=>Vx,dropout:()=>xP,einsum:()=>Mi,elu:()=>Zd,enclosingPowerOfTwo:()=>dg,ensureShape:()=>jx,equal:()=>ms,erf:()=>Bx,euclideanNorm:()=>Ux,exp:()=>Ar,expandDims:()=>nn,expm1:()=>zx,eye:()=>Qd,fft:()=>nl,fill:()=>bo,floor:()=>Jd,floorDiv:()=>zd,fused:()=>fg,gather:()=>ef,gatherND:()=>EP,greater:()=>Yo,greaterEqual:()=>tf,ifft:()=>_s,imag:()=>Ri,image:()=>Es,inTopKAsync:()=>TP,irfft:()=>bf,isFinite:()=>Gx,isInf:()=>Wx,isNaN:()=>qx,leakyRelu:()=>nf,less:()=>Fc,lessEqual:()=>Qa,linalg:()=>b2,linspace:()=>Kx,localResponseNormalization:()=>Yx,log:()=>Xo,log1p:()=>rf,logSigmoid:()=>Xx,logSoftmax:()=>Zx,logSumExp:()=>sf,logicalAnd:()=>ys,logicalNot:()=>af,logicalOr:()=>lf,logicalXor:()=>Qx,losses:()=>w2,lowerBound:()=>Jx,matMul:()=>Ne,max:()=>wo,maxPool:()=>cf,maxPool3d:()=>eT,maxPoolWithArgmax:()=>tT,maximum:()=>uf,mean:()=>vs,meshgrid:()=>nT,min:()=>Pc,minimum:()=>bs,mirrorPad:()=>df,mod:()=>rT,moments:()=>oT,movingAverage:()=>vP,mul:()=>V,multiRNNCell:()=>iT,multinomial:()=>sT,neg:()=>rn,norm:()=>gs,notEqual:()=>ff,oneHot:()=>ws,ones:()=>Eo,onesLike:()=>aT,op:()=>b,outerProduct:()=>lT,pad:()=>Mr,pad1d:()=>cT,pad2d:()=>uT,pad3d:()=>pf,pad4d:()=>dT,pool:()=>fT,pow:()=>Ko,prelu:()=>mf,print:()=>Ud,prod:()=>pT,raggedGather:()=>hT,raggedRange:()=>mT,raggedTensorToTensor:()=>gT,rand:()=>yT,randomGamma:()=>DT,randomNormal:()=>gf,randomStandardNormal:()=>NT,randomUniform:()=>tl,randomUniformInt:()=>AT,range:()=>Xr,real:()=>Zo,reciprocal:()=>MT,relu:()=>Pi,relu6:()=>yf,reshape:()=>R,reverse:()=>mr,reverse1d:()=>kT,reverse2d:()=>OT,reverse3d:()=>RT,reverse4d:()=>PT,rfft:()=>rl,round:()=>vf,rsqrt:()=>FT,scalar:()=>ne,scatterND:()=>bP,searchSorted:()=>Lc,selu:()=>LT,separableConv2d:()=>$T,setdiff1dAsync:()=>VT,sigmoid:()=>er,sign:()=>jT,signal:()=>v2,sin:()=>BT,sinh:()=>HT,slice:()=>De,slice1d:()=>UT,slice2d:()=>zT,slice3d:()=>GT,slice4d:()=>WT,softmax:()=>qT,softplus:()=>of,spaceToBatchND:()=>hf,sparse:()=>_2,sparseToDense:()=>_P,spectral:()=>y2,split:()=>Qo,sqrt:()=>Bn,square:()=>qt,squaredDifference:()=>wf,squeeze:()=>Hn,stack:()=>Nn,step:()=>_f,stridedSlice:()=>KT,string:()=>E2,sub:()=>re,sum:()=>Ge,tan:()=>YT,tanh:()=>Rc,tensor:()=>tn,tensor1d:()=>Kt,tensor2d:()=>So,tensor3d:()=>Ef,tensor4d:()=>XT,tensor5d:()=>ZT,tensor6d:()=>QT,tensorScatterUpdate:()=>eI,tile:()=>Oi,topk:()=>tI,transpose:()=>ol,truncatedNormal:()=>nI,unique:()=>rI,unsortedSegmentSum:()=>oI,unstack:()=>gr,upperBound:()=>iI,variable:()=>sI,where:()=>hr,whereAsync:()=>xf,zeros:()=>_o,zerosLike:()=>$t});var nF=(e,t,n,r=Ve)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(g("a",e,t,n),g("b",e,t,n))];case"AddN":return[r.addN(g("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(g("a",e,t,n),g("b",e,t,n))];case"Mul":return[r.mul(g("a",e,t,n),g("b",e,t,n))];case"RealDiv":case"Div":return[r.div(g("a",e,t,n),g("b",e,t,n))];case"DivNoNan":return[r.divNoNan(g("a",e,t,n),g("b",e,t,n))];case"FloorDiv":return[r.floorDiv(g("a",e,t,n),g("b",e,t,n))];case"Sub":return[r.sub(g("a",e,t,n),g("b",e,t,n))];case"Minimum":return[r.minimum(g("a",e,t,n),g("b",e,t,n))];case"Maximum":return[r.maximum(g("a",e,t,n),g("b",e,t,n))];case"Pow":return[r.pow(g("a",e,t,n),g("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(g("a",e,t,n),g("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var rF=(e,t,n,r=Ve)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(g("x",e,t,n))];case"Acos":return[r.acos(g("x",e,t,n))];case"Acosh":return[r.acosh(g("x",e,t,n))];case"Asin":return[r.asin(g("x",e,t,n))];case"Asinh":return[r.asinh(g("x",e,t,n))];case"Atan":return[r.atan(g("x",e,t,n))];case"Atan2":return[r.atan2(g("x",e,t,n),g("y",e,t,n))];case"Atanh":return[r.atanh(g("x",e,t,n))];case"Ceil":return[r.ceil(g("x",e,t,n))];case"Complex":return[r.complex(g("real",e,t,n),g("imag",e,t,n))];case"Cos":return[r.cos(g("x",e,t,n))];case"Cosh":return[r.cosh(g("x",e,t,n))];case"Elu":return[r.elu(g("x",e,t,n))];case"Erf":return[r.erf(g("x",e,t,n))];case"Exp":return[r.exp(g("x",e,t,n))];case"Expm1":return[r.expm1(g("x",e,t,n))];case"Floor":return[r.floor(g("x",e,t,n))];case"Log":return[r.log(g("x",e,t,n))];case"Log1p":return[r.log1p(g("x",e,t,n))];case"Imag":return[r.imag(g("x",e,t,n))];case"Neg":return[r.neg(g("x",e,t,n))];case"Reciprocal":return[r.reciprocal(g("x",e,t,n))];case"Real":return[r.real(g("x",e,t,n))];case"Relu":return[r.relu(g("x",e,t,n))];case"Round":return[r.round(g("x",e,t,n))];case"Selu":return[r.selu(g("x",e,t,n))];case"Sigmoid":return[r.sigmoid(g("x",e,t,n))];case"Sin":return[r.sin(g("x",e,t,n))];case"Sign":return[r.sign(g("x",e,t,n))];case"Sinh":return[r.sinh(g("x",e,t,n))];case"Softplus":return[r.softplus(g("x",e,t,n))];case"Sqrt":return[r.sqrt(g("x",e,t,n))];case"Square":return[r.square(g("x",e,t,n))];case"Tanh":return[r.tanh(g("x",e,t,n))];case"Tan":return[r.tan(g("x",e,t,n))];case"ClipByValue":return[r.clipByValue(g("x",e,t,n),g("clipValueMin",e,t,n),g("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(g("x",e,t,n))];case"Rsqrt":return[r.rsqrt(Pt(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(g("x",e,t,n),g("alpha",e,t,n))];case"Prelu":return[r.prelu(g("x",e,t,n),g("alpha",e,t,n))];case"IsNan":return[r.isNaN(Pt(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(Pt(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(Pt(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function vr(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){j.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let o=e[r],i=t[r];j.assert(o<0||i<0||o===i,()=>n+` Shapes ${e} and ${t} must match`)}}}function oF(e){return!(typeof e=="number"||e.some(t=>t<0))}function Hc(e,t,n){let r=Fg(e,n),o=!oF(r);if(o&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&t.forEach(i=>{r=Fg(i.shape,r)}),!oF(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Fg(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let o=e[r],i=t[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=o>=0?o:i}return n}var Lg=class{constructor(t,n,r,o,i,s,a){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ne(0),jn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);let n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),vr(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,jn(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,o)=>this.write(r,n[o]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let o=0;o<this.size();o++)t.push(o)}if(t.length===0)return tn([],[0].concat(this.elementShape));let r=this.readMany(t);return vr(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Nn(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return tn([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return vr(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ot(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);let r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,gr(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=t.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];te(()=>{n=R(n,[1,r,i]);for(let l=0;l<t.length;++l){let u=[0,l===0?0:o[l-1],0],f=[1,t[l],i];s[l]=R(De(n,u,f),this.elementShape)}return s});let a=[];for(let l=0;l<t.length;l++)a[l]=l;this.writeMany(a,s)}};var Uc=class e{get id(){return this.idTensor.id}constructor(t,n,r,o=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);vr(n,i.shape,"TensorList shape mismatch: "),jn(i)}),this.idTensor=ne(0),this.maxNumElements=o,jn(this.idTensor)}copy(){return new e([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);vr(t,this.elementShape,"TensorList shape mismatch: ");let o=Hc(this.elementShape,this.tensors,t);return te(()=>{let i=this.tensors.map(s=>R(s,o));return Nn(i,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Hc(this.elementShape,this.tensors,t),o=this.tensors.pop();return o.kept=!1,vr(o.shape,t,"TensorList shape mismatch: "),R(o,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(vr(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");jn(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);vr(this.tensors[t].shape,n,"TensorList shape mismatch: ");let o=Hc(this.elementShape,this.tensors,n);return R(this.tensors[t],o)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);vr(this.elementShape,n.shape,"TensorList shape mismatch: "),jn(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);vr(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());let o=Hc(this.elementShape,this.tensors,r);return t.length===0?tn([],[0].concat(o)):te(()=>{let i=t.map(s=>R(this.tensors[s],o));return Nn(i,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);vr(this.elementShape,n,"TensorList shape mismatch: ");let r=Hc(this.elementShape,this.tensors,n);return this.size()===0?tn([],[0].concat(r)):te(()=>{let o=this.tensors.map(i=>R(i,r));return ot(o,0)})}};function iF(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);let o=e.shape.slice(1);vr(o,t,"TensorList shape mismatch: ");let i=gr(e);return new Uc(i,t,r)}function sF(e,t,n,r){return new Uc([],e,t,r)}function aF(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let o=Math.max(...t);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new Uc([],n,e.dtype,r),s=gr(e,0);return t.forEach((a,l)=>{i.setItem(a,s[l])}),i}function lF(e,t,n){let r=0,o=t.map(u=>(r+=u,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let i=e.shape.slice(1),s=Fg(i,n),a=r===0?0:e.size/r,l=te(()=>{let u=[];e=R(e,[1,r,a]);for(let f=0;f<t.length;++f){let m=[0,f===0?0:o[f-1],0],w=[1,t[f],a];u[f]=R(De(e,m,w),s)}return e.dispose(),u}),c=new Uc([],n,e.dtype,t.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var cF=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=g("thenBranch",e,t,n),o=g("elseBranch",e,t,n),i=g("cond",e,t,n),s=g("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=g("body",e,t,n),o=g("cond",e,t,n),i=g("args",e,t,n),s=await n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id),l=await s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let f=c.map(m=>m.id);u.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});let p=await n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=g("pred",e,t,n);return[Io(r)]}case"Switch":{let r=g("pred",e,t,n),o=g("data",e,t,n);return o.kept||(o=Io(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=e.inputNames.find(o=>Pt(o,t,n)!==void 0);if(r){let o=Pt(r,t,n);return[Io(o)]}return}case"Enter":{let r=g("frameName",e,t,n),o=g("tensor",e,t,n);return n.enterFrame(r),[Io(o)]}case"Exit":{let r=g("tensor",e,t,n);return n.exitFrame(),[Io(r)]}case"NextIteration":{let r=g("tensor",e,t,n);return n.nextIteration(),[Io(r)]}case"TensorArrayV3":{let r=g("size",e,t,n),o=g("dtype",e,t,n),i=g("elementShape",e,t,n),s=g("dynamicSize",e,t,n),a=g("clearAfterRead",e,t,n),l=g("identicalElementShapes",e,t,n),c=g("name",e,t,n),u=new Lg(c,o,r,i,l,s,a);return n.addTensorArray(u),[u.idTensor,ne(1)]}case"TensorArrayWriteV3":{let r=g("tensorArrayId",e,t,n),o=g("index",e,t,n),i=g("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=g("tensorArrayId",e,t,n),o=g("index",e,t,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=g("tensorArrayId",e,t,n),o=g("indices",e,t,n),i=g("dtype",e,t,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=g("tensorArrayId",e,t,n),o=g("indices",e,t,n),i=g("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=g("tensorArrayId",e,t,n),o=n.getTensorArray(r.id),i=g("dtype",e,t,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=g("tensorArrayId",e,t,n),o=g("tensor",e,t,n),i=g("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=g("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return[ne(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=g("tensorArrayId",e,t,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=g("tensorListId",e,t,n),o=g("index",e,t,n),i=g("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=g("tensorListId",e,t,n),o=g("index",e,t,n),i=g("elementShape",e,t,n),s=g("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=g("indices",e,t,n),o=g("tensor",e,t,n),i=g("elementShape",e,t,n),s=g("numElements",e,t,n),a=aF(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=g("elementShape",e,t,n),o=g("elementDType",e,t,n),i;e.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=g(i,e,t,n),a=e.op==="TensorListReserve"?-1:s,l=sF(r,o,s,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=g("tensorListId",e,t,n),o=g("indices",e,t,n),i=g("elementShape",e,t,n),s=g("elementDType",e,t,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=g("tensorListId",e,t,n),o=g("elementShape",e,t,n),i=g("elementDType",e,t,n),s=g("numElements",e,t,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=g("tensor",e,t,n),o=g("elementShape",e,t,n),i=g("elementDType",e,t,n),s=iF(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=g("tensorListId",e,t,n),o=n.getTensorList(r.id),i=g("dtype",e,t,n),s=g("elementShape",e,t,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=g("tensorListId",e,t,n),o=g("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=g("tensorListId",e,t,n),o=g("elementShape",e,t,n),i=g("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=g("tensor",e,t,n),o=g("elementShape",e,t,n),i=g("lengths",e,t,n),s=lF(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=g("tensorListId",e,t,n),o=n.getTensorList(r.id);return[ne(o.size(),"int32")]}case"TensorListResize":{let r=g("tensorListId",e,t,n),o=g("size",e,t,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function uF(e,t,n){let[r,o]=g("fusedOps",e,t,n),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=g("numArgs",e,t,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=g("strides",e,t,n),f=Nf(e,t,n),p=g("dataFormat",e,t,n).toUpperCase(),m=g("dilations",e,t,n),[w,x]=g("args",e,t,n);s&&(x=w,w=void 0);let T=g("leakyreluAlpha",e,t,n);return{stride:u,pad:f,dataFormat:p,dilations:m,biasArg:w,preluArg:x,activationFunc:o,leakyreluAlpha:T}}var dF=(e,t,n,r=Ve)=>{switch(e.op){case"Conv1D":{let o=g("stride",e,t,n),i=g("pad",e,t,n),s=g("dataFormat",e,t,n).toUpperCase(),a=g("dilation",e,t,n);return[r.conv1d(g("x",e,t,n),g("filter",e,t,n),o,i,s,a)]}case"Conv2D":{let o=g("strides",e,t,n),i=Nf(e,t,n),s=g("dataFormat",e,t,n).toUpperCase(),a=g("dilations",e,t,n);return[r.conv2d(g("x",e,t,n),g("filter",e,t,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=uF(e,t,n);return[r.fused.conv2d({x:g("x",e,t,n),filter:g("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=uF(e,t,n);return[r.fused.depthwiseConv2d({x:g("x",e,t,n),filter:g("filter",e,t,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=g("outputShape",e,t,n),i=g("strides",e,t,n),s=Nf(e,t,n);return[r.conv2dTranspose(g("x",e,t,n),g("filter",e,t,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=g("strides",e,t,n),i=Nf(e,t,n),s=g("dilations",e,t,n),a=g("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(g("input",e,t,n),g("filter",e,t,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("dataFormat",e,t,n).toUpperCase(),a=g("dilations",e,t,n);return[r.conv3d(g("x",e,t,n),g("filter",e,t,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("kernelSize",e,t,n);return[r.avgPool(g("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("kernelSize",e,t,n);return[r.maxPool(g("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("kernelSize",e,t,n),a=g("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(g("x",e,t,n),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("kernelSize",e,t,n);return[r.avgPool3d(g("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("kernelSize",e,t,n);return[r.maxPool3d(g("x",e,t,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=g("strides",e,t,n),i=g("pad",e,t,n),s=g("dilations",e,t,n),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(g("x",e,t,n),g("filter",e,t,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var fF=(e,t,n,r=Ve)=>{switch(e.op){case"Fill":{let o=g("shape",e,t,n),i=g("dtype",e,t,n),s=g("value",e,t,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=g("start",e,t,n),i=g("stop",e,t,n),s=g("num",e,t,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=g("logits",e,t,n),i=g("numSamples",e,t,n),s=g("seed",e,t,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=g("indices",e,t,n),i=g("depth",e,t,n),s=g("onValue",e,t,n),a=g("offValue",e,t,n),l=g("dtype",e,t,n);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(g("shape",e,t,n),g("dtype",e,t,n))];case"OnesLike":return[r.onesLike(g("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(g("shape",e,t,n),g("dtype",e,t,n),g("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(g("shape",e,t,n),g("minval",e,t,n),g("maxval",e,t,n),g("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(g("shape",e,t,n),g("minval",e,t,n),g("maxval",e,t,n),g("seed",e,t,n))];case"Range":{let o=g("start",e,t,n),i=g("stop",e,t,n),s=g("step",e,t,n);return[r.range(o,i,s,g("dtype",e,t,n))]}case"TruncatedNormal":{let o=g("shape",e,t,n),i=g("mean",e,t,n),s=g("stdDev",e,t,n),a=g("seed",e,t,n);return[r.truncatedNormal(o,i,s,g("dtype",e,t,n),a)]}case"Zeros":return[r.zeros(g("shape",e,t,n),g("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(g("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function WI(e,t,n){let r=g("boxes",e,t,n),o=g("scores",e,t,n),i=g("maxOutputSize",e,t,n),s=g("iouThreshold",e,t,n),a=g("scoreThreshold",e,t,n),l=g("softNmsSigma",e,t,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var pF=async(e,t,n,r,o=Ve)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=WI(e,t,n),f=await o.image.nonMaxSuppressionWithScoreAsync(i,s,a,l,c,u);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(e,t,n),u=g("padToMaxOutputSize",e,t,n),f=await o.image.nonMaxSuppressionPaddedAsync(i,s,a,l,c,u);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(e,t,n);return[await o.image.nonMaxSuppressionAsync(i,s,a,l,c)]}case"Where":{let i=o.cast(g("condition",e,t,n),"bool"),s=[await o.whereAsync(i)];return i.dispose(),s}case"ListDiff":return o.setdiff1dAsync(g("x",e,t,n),g("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};var hF=(e,t,n,r=Ve)=>{switch(e.op){case"LowerBound":{let o=g("sortedSequence",e,t,n),i=g("values",e,t,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=g("x",e,t,n),i=g("k",e,t,n),s=g("sorted",e,t,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=g("sortedSequence",e,t,n),i=g("values",e,t,n);return[r.upperBound(o,i)]}case"Unique":{let o=g("x",e,t,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=g("x",e,t,n),i=g("axis",e,t,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var mF=(e,t,n,r=Ve)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let o=g("default",e,t,n);return[Pt(e.name,t,n)||o];case"Placeholder":return[Pt(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=g("x",e,t,n);return[Io(u)]}case"IdentityN":return g("x",e,t,n).map(u=>Io(u));case"Snapshot":let i=g("x",e,t,n);return[Io(i)];case"Shape":return[r.tensor1d(g("x",e,t,n).shape,"int32")];case"ShapeN":return g("x",e,t,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(g("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(g("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=g("x",e,t,n),a=g("data",e,t,n),l=g("message",e,t,n),c=g("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var $g=class{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=ne(0),this.tensorMap=new Map,jn(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ne(this.size(),"int32")}async import(t,n){this.checkKeyAndValueTensor(t,n);let r=await t.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),te(()=>{let o=gr(n),i=r.length,s=o.length;j.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];jn(c),this.tensorMap.set(l,c)}return this.handle})}async find(t,n){this.checkKeyAndValueTensor(t,n);let r=await t.data();return te(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return Nn(o)})}findWithDefault(t,n){let r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var gF=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(e.name);if(o!=null)return[o];{let i=g("keyDType",e,t,n),s=g("valueDType",e,t,n),a=new $g(i,s);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=g("tableHandle",e,t,n,r),i=g("keys",e,t,n),s=g("values",e,t,n);return[await r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=g("tableHandle",e,t,n,r),i=g("keys",e,t,n),s=g("defaultValue",e,t,n);return[await r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=g("tableHandle",e,t,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var yF=(e,t,n,r=Ve)=>{switch(e.op){case"ResizeBilinear":{let o=g("images",e,t,n),i=g("size",e,t,n),s=g("alignCorners",e,t,n),a=g("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=g("images",e,t,n),i=g("size",e,t,n),s=g("alignCorners",e,t,n),a=g("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=g("image",e,t,n),i=g("boxes",e,t,n),s=g("boxInd",e,t,n),a=g("cropSize",e,t,n),l=g("method",e,t,n),c=g("extrapolationValue",e,t,n);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=g("images",e,t,n),i=g("transforms",e,t,n),s=g("outputShape",e,t,n),a=g("fillValue",e,t,n),l=g("interpolation",e,t,n),c=g("fillMode",e,t,n);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var vF=(e,t,n,r=Ve)=>{switch(e.op){case"Equal":return[r.equal(g("a",e,t,n),g("b",e,t,n))];case"NotEqual":return[r.notEqual(g("a",e,t,n),g("b",e,t,n))];case"Greater":return[r.greater(g("a",e,t,n),g("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(g("a",e,t,n),g("b",e,t,n))];case"Less":return[r.less(g("a",e,t,n),g("b",e,t,n))];case"LessEqual":return[r.lessEqual(g("a",e,t,n),g("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(g("a",e,t,n),g("b",e,t,n))];case"LogicalNot":return[r.logicalNot(g("a",e,t,n))];case"LogicalOr":return[r.logicalOr(g("a",e,t,n),g("b",e,t,n))];case"Select":case"SelectV2":return[r.where(g("condition",e,t,n),g("a",e,t,n),g("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(g("a",e,t,n),g("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var bF=(e,t,n,r=Ve)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(g("a",e,t,n),g("b",e,t,n),g("transposeA",e,t,n),g("transposeB",e,t,n))];case"Einsum":return[r.einsum(g("equation",e,t,n),...g("tensors",e,t,n))];case"Transpose":return[r.transpose(g("x",e,t,n),g("perm",e,t,n))];case"_FusedMatMul":let[o,i]=g("fusedOps",e,t,n),s=o==="biasadd",a=i==="prelu",l=g("numArgs",e,t,n),c=g("leakyreluAlpha",e,t,n);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,f]=g("args",e,t,n);return[r.fused.matMul({a:g("a",e,t,n),b:g("b",e,t,n),transposeA:g("transposeA",e,t,n),transposeB:g("transposeB",e,t,n),bias:u,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(g("a",e,t,n),g("numLower",e,t,n),g("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var wF=(e,t,n,r=Ve)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(g("x",e,t,n),g("axis",e,t,n),g("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(g("x",e,t,n),g("mean",e,t,n),g("variance",e,t,n),g("offset",e,t,n),g("scale",e,t,n),g("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(g("x",e,t,n),g("mean",e,t,n),g("variance",e,t,n),g("offset",e,t,n),g("scale",e,t,n),g("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(g("x",e,t,n),g("radius",e,t,n),g("bias",e,t,n),g("alpha",e,t,n),g("beta",e,t,n))];case"Softmax":return[r.softmax(g("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(g("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var _F=(e,t,n,r=Ve)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(g("paramsNestedSplits",e,t,n),g("paramsDenseValues",e,t,n),g("indices",e,t,n),g("outputRaggedRank",e,t,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(g("starts",e,t,n),g("limits",e,t,n),g("splits",e,t,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(g("shape",e,t,n),g("values",e,t,n),g("defaultValue",e,t,n),g("rowPartitionTensors",e,t,n),g("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var EF=(e,t,n,r=Ve)=>{switch(e.op){case"Max":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.max(g("x",e,t,n),a,l)]}case"Mean":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.mean(g("x",e,t,n),a,l)]}case"Min":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.min(g("x",e,t,n),a,l)]}case"Sum":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.sum(g("x",e,t,n),a,l)]}case"All":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.all(g("x",e,t,n),a,l)]}case"Any":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.any(g("x",e,t,n),a,l)]}case"ArgMax":{let a=g("axis",e,t,n);return[r.argMax(g("x",e,t,n),a)]}case"ArgMin":{let a=g("axis",e,t,n);return[r.argMin(g("x",e,t,n),a)]}case"Prod":{let a=g("axis",e,t,n),l=g("keepDims",e,t,n);return[r.prod(g("x",e,t,n),a,l)]}case"Cumprod":{let a=g("axis",e,t,n),l=g("exclusive",e,t,n),c=g("reverse",e,t,n);return[r.cumprod(g("x",e,t,n),a,l,c)]}case"Cumsum":{let a=g("axis",e,t,n),l=g("exclusive",e,t,n),c=g("reverse",e,t,n);return[r.cumsum(g("x",e,t,n),a,l,c)]}case"Bincount":let o=g("x",e,t,n),i=g("weights",e,t,n),s=g("size",e,t,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=g("x",e,t,n),l=g("weights",e,t,n),c=g("size",e,t,n),u=g("binaryOutput",e,t,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var SF=(e,t,n,r=Ve)=>{switch(e.op){case"ConcatV2":case"Concat":{let o=g("n",e,t,n),i=g("axis",e,t,n),s=g("tensors",e,t,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=g("x",e,t,n),i=g("indices",e,t,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=g("axis",e,t,n),i=g("batchDims",e,t,n),s=g("x",e,t,n),a=g("indices",e,t,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=g("dims",e,t,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=g("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=g("axis",e,t,n),i=g("x",e,t,n);return[r.reverse(i,o)]}case"Slice":{let o=g("begin",e,t,n),i=g("size",e,t,n);return[r.slice(g("x",e,t,n),o,i)]}case"StridedSlice":{let o=g("begin",e,t,n),i=g("end",e,t,n),s=g("strides",e,t,n),a=g("beginMask",e,t,n),l=g("endMask",e,t,n),c=g("ellipsisMask",e,t,n),u=g("newAxisMask",e,t,n),f=g("shrinkAxisMask",e,t,n),p=g("x",e,t,n);return[r.stridedSlice(p,o,i,s,a,l,c,u,f)]}case"Pack":return te(()=>{let o=g("axis",e,t,n),i=g("tensors",e,t,n),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=j.arraysEqual(c.shape,s);if(!u&&!j.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=g("axis",e,t,n),i=g("tensor",e,t,n);return r.unstack(i,o)}case"Tile":{let o=g("reps",e,t,n);return[r.tile(g("x",e,t,n),o)]}case"Split":case"SplitV":{let o=g("axis",e,t,n),i=g("numOrSizeSplits",e,t,n),s=g("x",e,t,n);return r.split(s,i,o)}case"ScatterNd":{let o=g("indices",e,t,n),i=g("values",e,t,n),s=g("shape",e,t,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=g("x",e,t,n),i=g("indices",e,t,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=g("sparseIndices",e,t,n),i=g("outputShape",e,t,n),s=g("sparseValues",e,t,n),a=g("defaultValue",e,t,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=g("indices",e,t,n),i=g("values",e,t,n),s=g("tensor",e,t,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};var xF=(e,t,n,r=Ve)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(g("indices",e,t,n),g("values",e,t,n),g("denseShape",e,t,n),g("defaultValue",e,t,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(g("inputIndices",e,t,n),g("inputShape",e,t,n),g("newShape",e,t,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(g("data",e,t,n),g("indices",e,t,n),g("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(g("data",e,t,n),g("indices",e,t,n),g("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var TF=(e,t,n,r=Ve)=>{switch(e.op){case"FFT":return[r.fft(g("x",e,t,n))];case"IFFT":return[r.ifft(g("x",e,t,n))];case"RFFT":return[r.rfft(g("x",e,t,n))];case"IRFFT":return[r.irfft(g("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var IF=(e,t,n,r=Ve)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(g("input",e,t,n),g("pattern",e,t,n),g("rewrite",e,t,n),g("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(g("data",e,t,n),g("dataSplits",e,t,n),g("separator",e,t,n),g("nGramWidths",e,t,n),g("leftPad",e,t,n),g("rightPad",e,t,n),g("padWidth",e,t,n),g("preserveShortSequences",e,t,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(g("input",e,t,n),g("delimiter",e,t,n),g("skipEmpty",e,t,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(g("input",e,t,n),g("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};var CF=(e,t,n,r=Ve)=>{switch(e.op){case"Cast":return[r.cast(g("x",e,t,n),g("dtype",e,t,n))];case"ExpandDims":{let o=g("axis",e,t,n);return[r.expandDims(g("x",e,t,n),o)]}case"Squeeze":{let o=g("axis",e,t,n);return[r.squeeze(g("x",e,t,n),o)]}case"Reshape":return[r.reshape(g("x",e,t,n),g("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(g("x",e,t,n),g("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(g("x",e,t,n),g("padding",e,t,n),g("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(g("x",e,t,n),g("padding",e,t,n),g("constantValue",e,t,n))];case"SpaceToBatchND":{let o=g("blockShape",e,t,n),i=g("paddings",e,t,n);return[r.spaceToBatchND(g("x",e,t,n),o,i)]}case"BatchToSpaceND":{let o=g("blockShape",e,t,n),i=g("crops",e,t,n);return[r.batchToSpaceND(g("x",e,t,n),o,i)]}case"DepthToSpace":{let o=g("blockSize",e,t,n),i=g("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(g("x",e,t,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(g("x",e,t,n),g("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(g("s0",e,t,n),g("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};function qI(e,t,n,r,o=te){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>nF(s,a,l));case"basic_math":return o(()=>rF(s,a,l));case"control":return cF(s,a,l);case"convolution":return o(()=>dF(s,a,l));case"creation":return o(()=>fF(s,a,l));case"dynamic":return pF(s,a,l);case"evaluation":return o(()=>hF(s,a,l));case"image":return o(()=>yF(s,a,l));case"graph":return o(()=>mF(s,a,l));case"logical":return o(()=>vF(s,a,l));case"matrices":return o(()=>bF(s,a,l));case"normalization":return o(()=>wF(s,a,l));case"ragged":return o(()=>_F(s,a,l));case"reduction":return o(()=>EF(s,a,l));case"slice_join":return o(()=>SF(s,a,l));case"sparse":return o(()=>xF(s,a,l));case"spectral":return o(()=>TF(s,a,l));case"string":return o(()=>IF(s,a,l));case"transformation":return o(()=>CF(s,a,l));case"hash_table":return gF(s,a,l,r);case"custom":let c=Sg(s.op);if(c&&c.customExecutor)return c.customExecutor(new Pg(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return j.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var Mf=class{constructor(t={},n={},r={},o={},i){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let t=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}};function KI(e,t,n,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(e).map(p=>Un(p)[0]));r=r||[];let u=new Set(r.map(p=>Un(p.name)[0])),f=[...t];for(;f.length>0;){let p=f.pop();if((Ns(p)||DY(p)||NY(p))&&s==null&&(s=p,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(p.name),n[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(m=>{l.has(m.name)||(l.add(m.name),f.push(m))})}}return{inputs:e,outputs:t,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function DF(e,t){let{usedNodes:n,inputs:r}=t,o=Object.keys(r).map(T=>Un(T)[0]).map(T=>e.nodes[T]),i=e.initNodes||[],s=T=>n.has(typeof T=="string"?T:T.name);function a(T){return[...new Map(T.map(D=>[D.name,D])).values()]}let l=a([...o,...e.weights,...i]).filter(s),c=a([...l,...Object.values(e.nodes)]).filter(s),u=new Map(c.map(T=>[T.name,T])),f={};for(let T of c){f[T.name]=f[T.name]||0;for(let D of T.children)s(D)||(f[D.name]=Number.POSITIVE_INFINITY),f[D.name]=(f[D.name]||0)+1}let p=Object.entries(f).filter(([,T])=>T===0).map(([T])=>T),m=[...p];for(;p.length>0;){let T=p.pop(),D=u.get(T);for(let P of D.children.filter(s))--f[P.name]===0&&(m.push(P.name),p.push(P.name))}let w=m.map(T=>u.get(T)),x=SY(w,l);return xY(x,l),x}function SY(e,t){let n=new Map(e.map(s=>[s.name,s])),r=t.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let l of a.children)!n.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return e.filter(s=>o.has(s.name))}var zc=class extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}};function xY(e,t){let n=new Map(e.map((a,l)=>[a.name,l])),r=new Set(t.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(e.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of e){for(let l of a.children.filter(s)){if(!n.has(l.name))throw new zc(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new zc(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!n.has(l.name))throw new zc(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new zc(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function NF(e){let t=new Map(e.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((a,l)=>Ns(a)?n:l),o=a=>{let l=r[t.get(a.name)];return l??-1},i=e.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<e.length;++a){let l=i[a];if(l===n)continue;let c=e[a],u=e[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var TY=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),IY=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),CY=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ns(e){return TY.has(e.op)}function DY(e){return IY.has(e.op)}function NY(e){return CY.has(e.op)}var kf=class e{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let n=Object.keys(t).map(r=>t[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new e(t.functions[r],this)})}getCompilationKey(t,n){let r=t.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(t,n){let r=KI(t,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(f=>f.name),u=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=DF(this.graph,r),l=NF(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(t){if(t==null)return null;let n=t.clone();return jn(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);let r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(p=>this.graph.nodes[Un(p)[0]]),i=n.map(p=>Un(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(t,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},f={};return te(()=>{let p=new Mf(this.weightMap,u,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(D=>{let[P,A]=Un(D,p),M=[];M[A]=t[D],m[P]=M,this.keepIntermediateTensors&&(this.clonedTensorsMap[P]=this.cloneTensorList(M))});let w=this.getFrozenTensorIds(m),{orderedNodes:x,nodeLiveUntilMap:T}=c;for(let D of x){if(m[D.name])continue;let P=qI(D,m,p,this._resourceManager);if(j.isPromise(P))throw new Error(`The execution of the op '${D.op}' returned a promise. Please use model.executeAsync() instead.`);m[D.name]=P,this.keepIntermediateTensors&&(this.clonedTensorsMap[D.name]=this.cloneTensorList(P)),this.checkTensorForDisposalWithNodeLiveUntilInfo(D,m,p,w,s,T.get(D.name))}return this.parent==null&&p.dispose(w),n.map(D=>Pt(D,m,p))})}getFrozenTensorIds(t){let n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(t,n,r,o,i,s,a){if(!(Ns(n)||s.has(t))){for(let l of r[t])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(let l of n.inputs){if(Ns(l))continue;let c=TI(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let f=a[u.id];f===1?(u.dispose(),delete a[u.id]):f!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,o,i,s){function a(l){return Ns(l)||i.has(l.name)}if(!(Ns(t)||s==null))for(let l of s){if(a(l))continue;let c=TI(l.name,n,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let s=new Mf(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let a=await this.executeWithControlFlow(t,s,n,r),l=n.map(p=>Pt(p,a,s)),c=l.map(p=>p.id),u=Object.keys(t).map(p=>t[p].id),f=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(p=>{p.forEach(m=>{m&&!m.isDisposed&&!f.has(m.id)&&m.dispose()})}),this.parent==null&&s.dispose(f),l}async executeFunctionAsync(t,n,r){let o=t.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,o){let i=Object.keys(t),s=i.map(M=>this.graph.nodes[Un(M)[0]]),a=r.map(M=>Un(M)[0]),l=new Set(a),c=a.map(M=>this.graph.nodes[M]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:f,dynamicNode:p,syncInputs:m}=KI(t,c,this.weightMap,this._initNodes),w=[...s,...this.graph.weights,...this._initNodes||[]].map(M=>({node:M,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(t).forEach(M=>{let[$,L]=Un(M),H=[];H[L]=t[M],x[$]=H});let T={},D=this.getFrozenTensorIds(x),P={};for(;w.length>0;){let M=this.processStack(s,w,n,x,P,D,l,T,u);await Promise.all(M)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let A=c.filter(M=>!Ns(M)&&!Pt(M.name,x,n)).map(M=>M.name);if(A.length>0){let M="";throw p!=null&&(M=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${A}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${M}`)}return x}processStack(t,n,r,o,i,s,a,l,c){let u=[];for(;n.length>0;){let f=n.pop();r.currentContext=f.contexts;let p="";if(f.node.op==="Enter"&&g("isConstant",f.node,o,r)&&([p]=To(f.node.name,r)),o[f.node.name]==null){let m=qI(f.node,o,r,this._resourceManager);p||([p]=To(f.node.name,r));let w=r.currentContext;j.isPromise(m)?u.push(m.then(x=>(o[p]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(x)),r.currentContext=w,this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c),x))):(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c))}else this.processChildNodes(f.node,n,r,o,i,c)}return u}processChildNodes(t,n,r,o,i,s){t.children.forEach(a=>{let[l]=To(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Pt(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Pt(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{let r=t[n],[o]=Un(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);j.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&j.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;let o={};for(let i in t){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=t[i]:o[i]=t[i]}return o}checkInputs(t){let n=Object.keys(t).filter(r=>{let[o]=Un(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(t){t.forEach(n=>{let[r]=Un(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var Vg=class{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(let t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(let t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}};var AY="?tfjs-format=file",MY="model.json",jg=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=jc){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Vg}findIOHandler(){let t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{let n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let t=this.handler.load();return j.isPromise(t)?t.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(t)}loadSync(t){let n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)}async loadStreaming(t){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=await Xm(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,n)}loadWithWeightMap(t,n){this.artifacts=t;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new kf(Af.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){let i=Af.Instance.transformGraph(t.modelInitializer);this.initializer=new kf(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,n){if(typeof t=="string"){let r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){let n=t instanceof Ie?[t]:t,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return t}predict(t,n){let r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,n){let r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var n;if(!(t instanceof Ie)&&!Array.isArray(t)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(t[s]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];let r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=t[o++],i},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=t[o]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=this.executor.execute(t,n);return r.length>1?r:r[0]}async executeAsync(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);let r=await this.executor.executeAsync(t,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Et(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function Of(e,t={},n=jc){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=kY(e));let r=new jg(e,t,n);return await r.load(),r}function kY(e){return e.endsWith("/")||(e=e+"/"),`${e}${MY}${AY}`}var ZF=Jy(MF());var eC=function(e,t){return eC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},eC(e,t)};function QF(e,t){function n(){this.constructor=e}eC(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zn=function(){return zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},zn.apply(this,arguments)};function je(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof n?u:new n(function(f){f(u)})).then(s,a)}l((r=r.apply(e,t||[])).next())})}function Be(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(u[0]===6&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(f){u=[6,f],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([l,c])}}}function Yg(e){return e instanceof SVGAnimatedLength?e.baseVal.value:e}function nC(e){return je(this,void 0,void 0,function(){var t,n;return Be(this,function(r){switch(r.label){case 0:return t=document.createElement("canvas"),e instanceof Ie?[4,xo.toPixels(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:t.width=Yg(e.width),t.height=Yg(e.height),n=t.getContext("2d"),e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0),r.label=3;case 3:return[2,t]}})})}function JF(e){return je(this,void 0,void 0,function(){var t,n,r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return e instanceof Ie?(t=e.shape.slice(0,2),n=t[0],r=t[1],o=ImageData.bind,[4,xo.toPixels(e)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return i=document.createElement("canvas"),s=i.getContext("2d"),i.width=Yg(e.width),i.height=Yg(e.height),s.drawImage(e,0,0),[2,s.getImageData(0,0,i.width,i.height)]}})})}function eL(e){return je(this,void 0,void 0,function(){var t,n;return Be(this,function(r){switch(r.label){case 0:return e instanceof SVGImageElement||e instanceof OffscreenCanvas?[4,nC(e)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=e,r.label=3;case 3:return t=n,[2,xo.fromPixels(t,4)]}})})}function Zg(e){if(e<0||e>=256)throw new Error("Mask value must be in range [0, 255] but got "+e);if(!Number.isInteger(e))throw new Error("Mask value must be an integer but got "+e)}function tL(e){var t=e.shape[2],n=Gd(e,2),r=R(n,[-1]);return ws(r,t)}function Bg(e,t){return te(function(){return de(Yo(e,ne(t)),"int32")})}function OY(e,t){var n=t.shape,r=n[0],o=n[1],i=n[2];return te(function(){var s=tL(t),a=nn(Xr(0,i,1,"int32"),1),l=de(Ne(s,a),"int32"),c=R(l,[r,o]),u=Z(c,ne(1,"int32"));return re((function(f,p){return V(f,p)})(u,e),ne(1,"int32"))})}var nL=(function(){function e(t,n){this.model=t,this.outputStride=n;var r=this.model.inputs[0].shape;j.assert(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return e.prototype.predict=function(t){var n=this;return te(function(){var r=n.preprocessInput(de(t,"float32")),o=nn(r,0),i=n.model.predict(o).map(function(a){return Hn(a,[0])}),s=n.nameOutputResults(i);return{heatmapScores:er(s.heatmap),offsets:s.offsets,displacementFwd:s.displacementFwd,displacementBwd:s.displacementBwd,segmentation:s.segmentation,partHeatmaps:s.partHeatmaps,longOffsets:s.longOffsets,partOffsets:s.partOffsets}})},e.prototype.dispose=function(){this.model.dispose()},e})(),RY=(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return QF(t,e),t.prototype.preprocessInput=function(n){return te(function(){return re(Ce(n,127.5),1)})},t.prototype.nameOutputResults=function(n){return{offsets:n[0],segmentation:n[1],partHeatmaps:n[2],longOffsets:n[3],heatmap:n[4],displacementFwd:n[5],displacementBwd:n[6],partOffsets:n[7]}},t})(nL),Qg=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Co=Qg.length,Xg=Qg.reduce(function(e,t,n){return e[t]=n,e},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(e){var t=e[0],n=e[1];return[Xg[t],Xg[n]]});function rC(e,t,n){var r=e[0],o=e[1],i=t[0],s=t[1],a=n.top,l=n.bottom;return[s/(n.left+n.right+o),i/(a+l+r)]}function rL(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+Co)}}function oL(e,t,n){var r=rL(e.heatmapY,e.heatmapX,e.id,n),o=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+o}}function kF(e,t,n){return e<t?t:e>n?n:e}function OF(e,t){return{x:e.x+t.x,y:e.y+t.y}}function PY(e,t,n){n===void 0&&(n=.3);for(var r=0,o=0,i=0;i<e.length;i++)t.keypoints[i].score>n&&(o+=1,r+=Math.pow(e[i].x-t.keypoints[i].position.x,2)+Math.pow(e[i].y-t.keypoints[i].position.y,2));return o===0?r=1/0:r/=o,r}function FY(e,t,n,r,o,i,s){for(var a=s[0],l=s[1],c=n(e),u=c.y*r+c.x,f=o[Co*(2*u)+t],p=o[Co*(2*u+1)+t],m=e.y+f,w=e.x+p,x=0;x<i;x++){m=Math.min(m,a-1);var T=n({x:w=Math.min(w,l-1),y:m}),D=T.y*r+T.x;m+=f=o[Co*(2*D)+t],w+=p=o[Co*(2*D+1)+t]}return{x:w,y:m}}function iL(e,t,n,r,o,i,s,a,l,c){for(var u=o[0],f=o[1],p=i[0],m=i[1],w=a[0],x=a[1],T=[],D=function(G){return(function(W,K,U,ue){var se=K[0],Oe=K[1],Le=U[0],bt=U[1],xt=Math.round(((se+W.y+1)*bt-1)/ue);return{x:Math.round(((Oe+W.x+1)*Le-1)/ue),y:xt}})(G,[u,f],[p,m],l)},P=0;P<r;P++){var A=FY(e,P,D,s,t,c,[w,x]);T.push(A)}for(var M=-1,$=1/0,L=0;L<n.length;L++){var H=PY(T,n[L]);H<$&&(M=L,$=H)}return M}function sL(e,t){var n=e[0],r=e[1];return[Math.round((r-1)/t+1),Math.round((n-1)/t+1)]}function aL(e,t,n,r,o,i,s,a,l,c,u){for(var f=s[0],p=s[1],m=e.shape,w=m[0],x=m[1],T=t.shape.slice(0,2),D=T[0],P=T[1],A=R(t,[D,P,2,Co]),M=new Float32Array(u*Co*3).fill(0),$=0;$<n.length;$++)for(var L=$*Co*3,H=n[$],G=0;G<Co;G++){var W=H.keypoints[G],K=L+3*G;M[K]=W.score,M[K+1]=W.position.y,M[K+2]=W.position.x}var U=rC([r,o],[f,p],a),ue=U[0],se=U[1],Oe=tn(M,[u,Co,3]),Le=a.top,bt=a.left,xt={variableNames:["segmentation","longOffsets","poses"],outputShape:[w,x],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+Le+", "+se+", "+i+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+bt+", "+ue+", "+i+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+u+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+Co+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+l+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(o-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+Le+", "+se+", "+i+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+bt+", "+ue+", "+i+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+c+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return Bd().compileAndRun(xt,[e,A,Oe])}function lL(){return jd()==="webgl"}function LY(e,t,n,r,o,i,s,a,l,c,u,f){var p=s[0],m=s[1];return l===void 0&&(l=.2),c===void 0&&(c=8),u===void 0&&(u=.3),f===void 0&&(f=10),je(this,void 0,void 0,function(){var w,x,T,D,P;return Be(this,function(A){switch(A.label){case 0:return w=n.filter(function(M){return M.score>=l}),lL()?(T=te(function(){var M=aL(e,t,w,r,o,i,[p,m],a,c,u,f),$=Km().makeTensorFromDataId(M.dataId,M.shape,M.dtype);return w.map(function(L,H){return(function(G,W){return te(function(){return de(ms(G,ne(W)),"int32")})})($,H)})}),[4,Promise.all(T.map(function(M){return M.data()}))]):[3,2];case 1:return x=A.sent(),T.forEach(function(M){return M.dispose()}),[3,5];case 2:return[4,e.data()];case 3:return D=A.sent(),[4,t.data()];case 4:P=A.sent(),x=(function(M,$,L,H,G,W,K,U,ue,se){var Oe=K[0],Le=K[1];se===void 0&&(se=5);for(var bt=L.map(function(ni){return new Uint8Array(H*G).fill(0)}),xt=U.top,on=U.left,Ut=rC([H,G],[Oe,Le],U),ei=Ut[0],Os=Ut[1],ti=sL([Oe,Le],W)[0],kr=0;kr<H;kr+=1)for(var Or=0;Or<G;Or+=1){var Qr=kr*G+Or;if(M[Qr]===1){var Rr=iL({x:Or,y:kr},$,L,se,[xt,on],[ei,Os],ti,[H,G],W,ue);Rr>=0&&(bt[Rr][Qr]=1)}}return bt})(D,P,w,r,o,i,[p,m],a,c),A.label=5;case 5:return[2,x.map(function(M,$){return{data:M,pose:w[$],width:o,height:r}})]}})})}function $Y(e,t,n,r,o,i,s,a,l,c,u,f,p){var m=a[0],w=a[1];return c===void 0&&(c=.2),u===void 0&&(u=8),f===void 0&&(f=.3),p===void 0&&(p=10),je(this,void 0,void 0,function(){var x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return x=r.filter(function(L){return L.score>=c}),lL()?(D=te(function(){var L=aL(e,t,x,o,i,s,[m,w],l,u,f,p),H=Km().makeTensorFromDataId(L.dataId,L.shape,L.dtype);return x.map(function(G,W){return(function(K,U,ue){return te(function(){return re(V(de(ms(K,ne(ue)),"int32"),Z(U,1)),1)})})(H,n,W)})}),[4,Promise.all(D.map(function(L){return L.data()}))]):[3,2];case 1:return T=$.sent(),D.forEach(function(L){return L.dispose()}),[3,6];case 2:return[4,e.data()];case 3:return P=$.sent(),[4,t.data()];case 4:return A=$.sent(),[4,n.data()];case 5:M=$.sent(),T=(function(L,H,G,W,K,U,ue,se,Oe,Le,bt){var xt=se[0],on=se[1];bt===void 0&&(bt=5);for(var Ut=W.map(function(ml){return new Int32Array(K*U).fill(-1)}),ei=Oe.top,Os=Oe.left,ti=rC([K,U],[xt,on],Oe),kr=ti[0],Or=ti[1],Qr=sL([xt,on],ue)[0],Rr=0;Rr<K;Rr+=1)for(var ni=0;ni<U;ni+=1){var $i=Rr*U+ni;if(L[$i]===1){var Rs=iL({x:ni,y:Rr},H,W,bt,[ei,Os],[kr,Or],Qr,[K,U],ue,Le);Rs>=0&&(Ut[Rs][$i]=G[$i])}}return Ut})(P,A,M,x,o,i,s,[m,w],l,u),$.label=6;case 6:return[2,T.map(function(L,H){return{pose:x[H],data:L,height:o,width:i}})]}})})}function YI(e){return Math.floor(e/2)}var VY=(function(){function e(t,n){this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=n}return e.prototype.enqueue=function(t){this.priorityQueue[++this.numberOfElements]=t,this.swim(this.numberOfElements)},e.prototype.dequeue=function(){var t=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,t},e.prototype.empty=function(){return this.numberOfElements===-1},e.prototype.size=function(){return this.numberOfElements+1},e.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},e.prototype.max=function(){return this.priorityQueue[0]},e.prototype.swim=function(t){for(;t>0&&this.less(YI(t),t);)this.exchange(t,YI(t)),t=YI(t)},e.prototype.sink=function(t){for(;2*t<=this.numberOfElements;){var n=2*t;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(t,n))break;this.exchange(t,n),t=n}},e.prototype.getValueAt=function(t){return this.getElementValue(this.priorityQueue[t])},e.prototype.less=function(t,n){return this.getValueAt(t)<this.getValueAt(n)},e.prototype.exchange=function(t,n){var r=this.priorityQueue[t];this.priorityQueue[t]=this.priorityQueue[n],this.priorityQueue[n]=r},e})();function jY(e,t,n,r,o,i){for(var s=i.shape,a=s[0],l=s[1],c=!0,u=Math.max(n-o,0),f=Math.min(n+o+1,a),p=u;p<f;++p){for(var m=Math.max(r-o,0),w=Math.min(r+o+1,l),x=m;x<w;++x)if(i.get(p,x,e)>t){c=!1;break}if(!c)break}return c}var cL=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(e){var t=e[0],n=e[1];return[Xg[t],Xg[n]]}),XI=cL.map(function(e){return e[1]}),RF=cL.map(function(e){return e[0]});function ZI(e,t,n,r){return{y:kF(Math.round(e.y/t),0,n-1),x:kF(Math.round(e.x/t),0,r-1)}}function PF(e,t,n,r,o,i,s,a){a===void 0&&(a=2);for(var l=r.shape,c=l[0],u=l[1],f=(function(P,A,M){var $=M.shape[2]/2;return{y:M.get(A.y,A.x,P),x:M.get(A.y,A.x,$+P)}})(e,ZI(t.position,i,c,u),s),p=OF(t.position,f),m=0;m<a;m++){var w=ZI(p,i,c,u),x=rL(w.y,w.x,n,o);p=OF({x:w.x*i,y:w.y*i},{x:x.x,y:x.y})}var T=ZI(p,i,c,u),D=r.get(T.y,T.x,n);return{position:p,part:Qg[n],score:D}}function BY(e,t,n,r,o,i){var s=t.shape[2],a=XI.length,l=new Array(s),c=e.part,u=e.score,f=oL(c,r,n);l[c.id]={score:u,part:Qg[c.id],position:f};for(var p=a-1;p>=0;--p){var m=XI[p],w=RF[p];l[m]&&!l[w]&&(l[w]=PF(p,l[m],w,t,n,r,i))}for(p=0;p<a;++p)m=RF[p],w=XI[p],l[m]&&!l[w]&&(l[w]=PF(p,l[m],w,t,n,r,o));return l}function uL(e,t,n,r){var o=n.x,i=n.y;return e.some(function(s){var a,l,c,u,f,p,m=s.keypoints[r].position;return a=i,l=o,c=m.y,u=m.x,(f=c-a)*f+(p=u-l)*p<=t})}function HY(e,t,n){var r=n.reduce(function(o,i,s){var a=i.position,l=i.score;return uL(e,t,a,s)||(o+=l),o},0);return r/n.length}function Hg(e,t,n,r,o,i,s,a){s===void 0&&(s=.5),a===void 0&&(a=20);for(var l=[],c=(function(w,x,T){for(var D=T.shape,P=D[0],A=D[1],M=D[2],$=new VY(P*A*M,function(K){return K.score}),L=0;L<P;++L)for(var H=0;H<A;++H)for(var G=0;G<M;++G){var W=T.get(L,H,G);W<w||jY(G,W,L,H,x,T)&&$.enqueue({score:W,part:{heatmapY:L,heatmapX:H,id:G}})}return $})(s,1,e),u=a*a;l.length<i&&!c.empty();){var f=c.dequeue();if(!uL(l,u,oL(f.part,o,t),f.part.id)){var p=BY(f,e,t,o,n,r),m=HY(l,u,p);l.push({keypoints:p,score:m})}}return l}var Rf,UY=[-123.15,-115.9,-103.06],zY=(function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return QF(t,e),t.prototype.preprocessInput=function(n){return Z(n,UY)},t.prototype.nameOutputResults=function(n){var r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5];return{offsets:a,segmentation:n[6],partHeatmaps:l,longOffsets:s,heatmap:i,displacementFwd:o,displacementBwd:r,partOffsets:n[7]}},t})(nL),FF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",LF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function Pf(e){if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)return(function(t){if("offsetHeight"in t&&t.offsetHeight!==0&&"offsetWidth"in t&&t.offsetWidth!==0)return[t.offsetHeight,t.offsetWidth];if(t.height!=null&&t.width!=null)return[t.height,t.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(e);if(typeof ImageData<"u"&&e instanceof ImageData)return[e.height,e.width];if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)return(function(t){return t.hasAttribute("height")&&t.hasAttribute("width")?[t.height,t.width]:[t.videoHeight,t.videoWidth]})(e);if(e instanceof Ie)return[e.shape[0],e.shape[1]];throw new Error("error: Unknown input type: "+e+".")}function $F(e,t){return(function(n,r){return(n-1)%r==0})(e,t)?e:Math.floor(e/t)*t+1}var Ff={low:"low",medium:"medium",high:"high",full:"full"},GY=((Rf={})[Ff.low]=.25,Rf[Ff.medium]=.5,Rf[Ff.high]=.75,Rf[Ff.full]=1,Rf);function Ug(e,t,n){var r=n[0],o=n[1],i=(function(s){if(typeof s=="string"){var a=GY[s];return j.assert(typeof a=="number",function(){return"string value of inputResolution must be one of "+Object.values(Ff).join(",")+" but was "+s+"."}),a}return j.assert(typeof s=="number"&&s<=2&&s>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+s}),s})(e);return[$F(r*i,t),$F(o*i,t)]}function Gc(e,t,n,r,o){var i=t[0],s=t[1],a=n[0],l=n[1],c=r[0],u=c[0],f=c[1],p=r[1],m=p[0],w=p[1];return o===void 0&&(o=!1),te(function(){var x=Es.resizeBilinear(e,[a,l],!0);return o&&(x=er(x)),(function(T,D,P){var A=D[0],M=D[1],$=P[0],L=$[0],H=$[1],G=P[1],W=G[0],K=G[1];return te(function(){var U=nn(T);return Hn(Es.cropAndResize(U,[[L/(A+L+H-1),W/(M+W+K-1),(L+A-1)/(A+L+H-1),(W+M-1)/(M+W+K-1)]],[0],[A,M]),[0])})})(x,[i,s],[[u,f],[m,w]])})}function zg(e,t){var n=t[0],r=t[1],o=Pf(e),i=o[0],s=o[1],a=r/n,l=[0,0,0,0],c=l[0],u=l[1],f=l[2],p=l[3];s/i<a?(c=0,u=0,f=Math.round(.5*(a*i-s)),p=Math.round(.5*(a*i-s))):(c=Math.round(.5*(1/a*s-i)),u=Math.round(.5*(1/a*s-i)),f=0,p=0);var m=te(function(){var w=(function(x){return x instanceof Ie?x:xo.fromPixels(x)})(e);return w=pf(w,[[c,u],[f,p],[0,0]]),Es.resizeBilinear(w,[n,r])});return{resized:m,padding:{top:c,left:f,right:p,bottom:u}}}function Gg(e){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,Promise.all(e.map(function(n){return n.buffer()}))]})})}function Wg(e,t,n,r,o){var i=t[0],s=t[1],a=n[0],l=n[1],c=(function(u,f,p,m,w){return m===void 0&&(m=0),w===void 0&&(w=0),p===1&&f===1&&m===0&&w===0?u:u.map(function(x){return(function(T,D,P,A,M){return A===void 0&&(A=0),M===void 0&&(M=0),{score:T.score,keypoints:T.keypoints.map(function($){var L=$.score,H=$.part,G=$.position;return{score:L,part:H,position:{x:G.x*P+M,y:G.y*D+A}}})}})(x,f,p,m,w)})})(e,(i+r.top+r.bottom)/a,(s+r.left+r.right)/l,-r.top,-r.left);return o?(function(u,f){return f<=0?u:u.map(function(p){return(function(m,w){return{score:m.score,keypoints:m.keypoints.map(function(x){var T=x.score,D=x.part,P=x.position;return{score:T,part:D,position:{x:w-1-P.x,y:P.y}}})}})(p,f)})})(c,s):c}var VF={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},jF=["MobileNetV1","ResNet50"],BF={MobileNetV1:[8,16,32],ResNet50:[32,16]},HF={MobileNetV1:[.5,.75,1],ResNet50:[1]},UF=[1,2,4],qg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Kg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function zF(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,o=e.nmsRadius;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function GF(e){var t=e.segmentationThreshold,n=e.maxDetections,r=e.scoreThreshold,o=e.nmsRadius,i=e.minKeypointScore,s=e.refineSteps;if(t<0||t>1)throw new Error("segmentationThreshold "+t+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(i<0||i>1)throw new Error("Invalid minKeypointScore "+i+".Should be in range [0.0, 1.0]");if(s<=0||s>20)throw new Error("Invalid refineSteps "+s+".Should be in range [1, 20]")}var dL=(function(){function e(t){this.baseModel=t}return e.prototype.predictForPersonSegmentation=function(t){var n=this.baseModel.predict(t);return{segmentLogits:n.segmentation,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},e.prototype.predictForPersonSegmentationAndPart=function(t){var n=this.baseModel.predict(t);return{segmentLogits:n.segmentation,partHeatmapLogits:n.partHeatmaps,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},e.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(t){var n=this.baseModel.predict(t);return{segmentLogits:n.segmentation,longOffsets:n.longOffsets,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd,partHeatmaps:n.partHeatmaps}},e.prototype.segmentPersonActivation=function(t,n,r){var o=this;r===void 0&&(r=.5);var i=Pf(t),s=i[0],a=i[1],l=Ug(n,this.baseModel.outputStride,[s,a]),c=zg(t,l),u=c.resized,f=c.padding,p=te(function(){var P=o.predictForPersonSegmentation(u),A=P.segmentLogits,M=P.heatmapScores,$=P.offsets,L=P.displacementFwd,H=P.displacementBwd,G=u.shape,W=G[0],K=G[1],U=Gc(A,[s,a],[W,K],[[f.top,f.bottom],[f.left,f.right]],!0);return{segmentation:Bg(Hn(U),r),heatmapScores:M,offsets:$,displacementFwd:L,displacementBwd:H}}),m=p.segmentation,w=p.heatmapScores,x=p.offsets,T=p.displacementFwd,D=p.displacementBwd;return u.dispose(),{segmentation:m,heatmapScores:w,offsets:x,displacementFwd:T,displacementBwd:D,padding:f,internalResolutionHeightAndWidth:l}},e.prototype.segmentPerson=function(t,n){return n===void 0&&(n=qg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return zF(n=zn(zn({},qg),n)),r=this.segmentPersonActivation(t,n.internalResolution,n.segmentationThreshold),o=r.segmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=$.sent(),o.dispose(),[4,Gg([i,s,a,l])];case 2:return x=$.sent(),T=x[0],D=x[1],P=x[2],A=x[3],M=Wg(M=Hg(T,D,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:M}]}})})},e.prototype.segmentMultiPerson=function(t,n){return n===void 0&&(n=Kg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M,$,L,H,G=this;return Be(this,function(W){switch(W.label){case 0:return GF(n=zn(zn({},Kg),n)),r=Pf(t),o=r[0],i=r[1],s=Ug(n.internalResolution,this.baseModel.outputStride,[o,i]),a=zg(t,s),l=a.resized,c=a.padding,u=te(function(){var K,U=G.predictForMultiPersonInstanceSegmentationAndPart(l),ue=U.segmentLogits,se=U.longOffsets,Oe=U.heatmapScores,Le=U.offsets,bt=U.displacementFwd,xt=U.displacementBwd,on=Gc(ue,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0);return K=se,{segmentation:Bg(Hn(on),n.segmentationThreshold),longOffsets:K,heatmapScoresRaw:Oe,offsetsRaw:Le,displacementFwdRaw:bt,displacementBwdRaw:xt}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,T=u.displacementBwdRaw,[4,Gg([m,w,x,T])];case 1:return D=W.sent(),P=D[0],A=D[1],M=D[2],$=D[3],L=Wg(L=Hg(P,A,M,$,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,LY(f,p,L,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return H=W.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),T.dispose(),[2,H]}})})},e.prototype.segmentPersonPartsActivation=function(t,n,r){var o=this;r===void 0&&(r=.5);var i=Pf(t),s=i[0],a=i[1],l=Ug(n,this.baseModel.outputStride,[s,a]),c=zg(t,l),u=c.resized,f=c.padding,p=te(function(){var P=o.predictForPersonSegmentationAndPart(u),A=P.segmentLogits,M=P.partHeatmapLogits,$=P.heatmapScores,L=P.offsets,H=P.displacementFwd,G=P.displacementBwd,W=u.shape,K=W[0],U=W[1],ue=Gc(A,[s,a],[K,U],[[f.top,f.bottom],[f.left,f.right]],!0),se=Gc(M,[s,a],[K,U],[[f.top,f.bottom],[f.left,f.right]],!0);return{partSegmentation:OY(Bg(Hn(ue),r),se),heatmapScores:$,offsets:L,displacementFwd:H,displacementBwd:G}}),m=p.partSegmentation,w=p.heatmapScores,x=p.offsets,T=p.displacementFwd,D=p.displacementBwd;return u.dispose(),{partSegmentation:m,heatmapScores:w,offsets:x,displacementFwd:T,displacementBwd:D,padding:f,internalResolutionHeightAndWidth:l}},e.prototype.segmentPersonParts=function(t,n){return n===void 0&&(n=qg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return zF(n=zn(zn({},qg),n)),r=this.segmentPersonPartsActivation(t,n.internalResolution,n.segmentationThreshold),o=r.partSegmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=$.sent(),o.dispose(),[4,Gg([i,s,a,l])];case 2:return x=$.sent(),T=x[0],D=x[1],P=x[2],A=x[3],M=Wg(M=Hg(T,D,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:M}]}})})},e.prototype.segmentMultiPersonParts=function(t,n){return n===void 0&&(n=Kg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M,$,L,H,G,W=this;return Be(this,function(K){switch(K.label){case 0:return GF(n=zn(zn({},Kg),n)),r=Pf(t),o=r[0],i=r[1],s=Ug(n.internalResolution,this.baseModel.outputStride,[o,i]),a=zg(t,s),l=a.resized,c=a.padding,u=te(function(){var U=W.predictForMultiPersonInstanceSegmentationAndPart(l),ue=U.segmentLogits,se=U.longOffsets,Oe=U.heatmapScores,Le=U.offsets,bt=U.displacementFwd,xt=U.displacementBwd,on=U.partHeatmaps,Ut=Gc(ue,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),ei=Gc(on,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),Os=se,ti=Bg(Hn(Ut),n.segmentationThreshold),kr=(function(Or){var Qr=Or.shape,Rr=Qr[0],ni=Qr[1],$i=Qr[2];return te(function(){var Rs=tL(Or),ml=nn(Xr(0,$i,1,"int32"),1),Ps=de(Ne(Rs,ml),"int32");return R(Ps,[Rr,ni])})})(ei);return{segmentation:ti,longOffsets:Os,heatmapScoresRaw:Oe,offsetsRaw:Le,displacementFwdRaw:bt,displacementBwdRaw:xt,partSegmentation:kr}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,T=u.displacementBwdRaw,D=u.partSegmentation,[4,Gg([m,w,x,T])];case 1:return P=K.sent(),A=P[0],M=P[1],$=P[2],L=P[3],H=Wg(H=Hg(A,M,$,L,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,$Y(f,p,D,H,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return G=K.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),T.dispose(),D.dispose(),[2,G]}})})},e.prototype.dispose=function(){this.baseModel.dispose()},e})();function WY(e){return je(this,void 0,void 0,function(){var t,n,r,o,i,s;return Be(this,function(a){switch(a.label){case 0:if(t=e.outputStride,n=e.quantBytes,r=e.multiplier,Df==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return o=(function(l,c,u){var f={1:"100",.75:"075",.5:"050"},p="model-stride"+l+".json";return u===4?LF+"float/"+f[c]+"/"+p:LF+"quant"+u+"/"+f[c]+"/"+p})(t,r,n),[4,Of(e.modelUrl||o)];case 1:return i=a.sent(),s=new RY(i,t),[2,new dL(s)]}})})}function qY(e){return je(this,void 0,void 0,function(){var t,n,r,o,i;return Be(this,function(s){switch(s.label){case 0:if(t=e.outputStride,n=e.quantBytes,Df==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=(function(a,l){var c="model-stride"+a+".json";return l===4?FF+"float/"+c:FF+"quant"+l+"/"+c})(t,n),[4,Of(e.modelUrl||r)];case 1:return o=s.sent(),i=new zY(o,t),[2,new dL(i)]}})})}function KY(e){return e===void 0&&(e=VF),je(this,void 0,void 0,function(){return Be(this,function(t){return(e=(function(n){if((n=n||VF).architecture==null&&(n.architecture="MobileNetV1"),jF.indexOf(n.architecture)<0)throw new Error("Invalid architecture "+n.architecture+". Should be one of "+jF);if(n.outputStride==null&&(n.outputStride=16),BF[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride "+n.outputStride+". Should be one of "+BF[n.architecture]+" for architecture "+n.architecture+".");if(n.multiplier==null&&(n.multiplier=1),HF[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier "+n.multiplier+". Should be one of "+HF[n.architecture]+" for architecture "+n.architecture+".");if(n.quantBytes==null&&(n.quantBytes=4),UF.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes "+n.quantBytes+". Should be one of "+UF+" for architecture "+n.architecture+".");return n})(e)).architecture==="ResNet50"?[2,qY(e)]:e.architecture==="MobileNetV1"?[2,WY(e)]:[2,null]})})}var tC=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],WF=(function(){function e(t){this.mask=t}return e.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,nC(this.mask)]})})},e.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,this.mask]})})},e.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,eL(this.mask)]})})},e.prototype.getUnderlyingType=function(){return"imagedata"},e})();function YY(e){if(Zg(e),e!==255)throw new Error("Foreground id must be 255 but got "+e);return"person"}function XY(e){if(Zg(e),e>=tC.length)throw new Error("Invalid body part value "+e);return tC[e]}var ZY=(function(){function e(t){this.bodyPixModel=t}return e.prototype.segmentPeople=function(t,n){return je(this,void 0,void 0,function(){var r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return t instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(t,0,0),t=r),n.segmentBodyParts?n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(t,n)]:[3,2]:[3,5];case 1:return i=a.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(t,n)];case 3:i=[a.sent()],a.label=4;case 4:return o=i.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===-1?(p[4*w]=tC.length,p[4*w+3]=0):(p[4*w]=m,p[4*w+3]=255)}),{maskValueToLabel:XY,mask:new WF(new ImageData(p,u,f))}}),[3,10];case 5:return n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(t,n)]:[3,7];case 6:return s=a.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(t,n)];case 8:s=[a.sent()],a.label=9;case 9:o=s.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===0?(p[4*w]=0,p[4*w+3]=0):(p[4*w]=255,p[4*w+3]=255)}),{maskValueToLabel:YY,mask:new WF(new ImageData(p,u,f))}}),a.label=10;case 10:return[2,o]}})})},e.prototype.dispose=function(){this.bodyPixModel.dispose()},e.prototype.reset=function(){},e})();function QY(e){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,KY(e).then(function(n){return new ZY(n)})]})})}var qF={runtime:"mediapipe",modelType:"general"},JY=(function(){function e(t){this.mask=t}return e.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,this.mask]})})},e.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,JF(this.mask)]})})},e.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,eL(this.mask)]})})},e.prototype.getUnderlyingType=function(){return"canvasimagesource"},e})();function eX(e){return Zg(e),"person"}var tX=(function(){function e(t){var n,r=this;this.selfieMode=!1;var o;this.selfieSegmentationSolution=new ZF.SelfieSegmentation({locateFile:(n=t.locateFile)!==null&&n!==void 0?n:function(i,s){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),t.modelType==="landscape"?o=1:o=0,this.selfieSegmentationSolution.setOptions({modelSelection:o,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(i){r.segmentation=[{maskValueToLabel:eX,mask:new JY(i.segmentationMask)}]})}return e.prototype.segmentPeople=function(t,n){return je(this,void 0,void 0,function(){var r,o;return Be(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),t instanceof Ie?(o=ImageData.bind,[4,xo.toPixels(t)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,i.label=3;case 3:return t=r,[4,this.selfieSegmentationSolution.send({image:t})];case 4:return i.sent(),[2,this.segmentation]}})})},e.prototype.dispose=function(){this.selfieSegmentationSolution.close()},e.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},e})();function nX(e){return je(this,void 0,void 0,function(){var t,n;return Be(this,function(r){switch(r.label){case 0:return t=(function(o){if(o==null)return zn({},qF);var i=zn({},o);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=qF.modelType),i})(e),[4,(n=new tX(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function rX(e,t,n,r){var o=e.width,i=e.height,s=r?-1:1,a=Math.cos(e.rotation),l=Math.sin(e.rotation),c=e.xCenter,u=e.yCenter,f=1/t,p=1/n,m=new Array(16);return m[0]=o*a*s*f,m[1]=-i*l*f,m[2]=0,m[3]=(-.5*o*a*s+.5*i*l+c)*f,m[4]=o*l*s*p,m[5]=i*a*p,m[6]=0,m[7]=(-.5*i*a-.5*o*l*s+u)*p,m[8]=0,m[9]=0,m[10]=o*f,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,(function(w){if(w.length!==16)throw new Error("Array length must be 16 but got "+w.length);return[[w[0],w[1],w[2],w[3]],[w[4],w[5],w[6],w[7]],[w[8],w[9],w[10],w[11]],[w[12],w[13],w[14],w[15]]]})(m)}function fL(e){return e instanceof Ie?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function QI(e,t){j.assert(e.width!==0,function(){return t+" width cannot be 0."}),j.assert(e.height!==0,function(){return t+" height cannot be 0."})}function oX(e,t){var n=(function(r,o,i,s){var a=o-r,l=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=l/a;return{scale:c,offset:i-r*c}})(0,255,t[0],t[1]);return te(function(){return Z(V(e,n.scale),n.offset)})}function iX(e,t,n){var r=t.outputTensorSize,o=t.keepAspectRatio,i=t.borderMode,s=t.outputTensorFloatRange,a=fL(e),l=(function(p,m){return m?{xCenter:m.xCenter*p.width,yCenter:m.yCenter*p.height,width:m.width*p.width,height:m.height*p.height,rotation:m.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}})(a,n),c=(function(p,m,w){if(w===void 0&&(w=!1),!w)return{top:0,left:0,right:0,bottom:0};var x=m.height,T=m.width;QI(m,"targetSize"),QI(p,"roi");var D,P,A=x/T,M=p.height/p.width,$=0,L=0;return A>M?(D=p.width,P=p.width*A,L=(1-M/A)/2):(D=p.height/A,P=p.height,$=(1-A/M)/2),p.width=D,p.height=P,{top:L,left:$,right:$,bottom:L}})(l,r,o),u=rX(l,a.width,a.height,!1),f=te(function(){var p,m=(p=e)instanceof Ie?p:xo.fromPixels(p),w=So((function(D,P,A){return QI(A,"inputResolution"),[1/A.width*D[0][0]*P.width,1/A.height*D[0][1]*P.width,D[0][3]*P.width,1/A.width*D[1][0]*P.height,1/A.height*D[1][1]*P.height,D[1][3]*P.height,0,0]})(u,a,r),[1,8]),x=i==="zero"?"constant":"nearest",T=Es.transform(nn(de(m,"float32")),w,"bilinear",x,0,[r.height,r.width]);return s!=null?oX(T,s):T});return{imageTensor:f,padding:c,transformationMatrix:u}}function sX(e,t,n){return te(function(){var r=Hn(e,[0]),o=r.shape[2];if(o===1){var i=r;switch(t.activation){case"none":break;case"sigmoid":i=er(i);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+t.activation+")")}var s=n?Es.resizeBilinear(i,[n.height,n.width]):i;return Hn(s,[2])}throw new Error("Unsupported number of tensor channels "+o)})}var KF={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},YF={flipHorizontal:!1},aX={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},lX={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},cX={activation:"none"},uX=(function(){function e(t){this.mask=t}return e.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,nC(this.mask)]})})},e.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,JF(this.mask)]})})},e.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(t){return[2,this.mask]})})},e.prototype.getUnderlyingType=function(){return"tensor"},e})();function dX(e){return Zg(e),"person"}var Wc,fX=(function(){function e(t,n){this.modelType=t,this.model=n}return e.prototype.segmentPeople=function(t,n){return je(this,void 0,void 0,function(){var r,o=this;return Be(this,function(i){return n=(function(s){if(s==null)return zn({},YF);var a=zn({},s);return a.flipHorizontal==null&&(a.flipHorizontal=YF.flipHorizontal),a})(n),t==null?(this.reset(),[2,[]]):(r=te(function(){var s=iX(t,o.modelType==="general"?aX:lX).imageTensor,a=De(o.model.predict(s),[0,0,0,1],-1),l=fL(t),c=sX(a,cX,l),u=nn(c,2),f=Mr(u,[[0,0],[0,0],[0,1]]);return df(f,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:dX,mask:new uX(r)}]])})})},e.prototype.dispose=function(){this.model.dispose()},e.prototype.reset=function(){},e})();function pX(e){return je(this,void 0,void 0,function(){var t,n,r;return Be(this,function(o){switch(o.label){case 0:return t=(function(i){if(i==null)return zn({},KF);var s=zn({},i);if(s.runtime="tfjs",s.modelType==null&&(s.modelType=KF.modelType),s.modelType!=="general"&&s.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+s.modelType);return s.modelUrl==null&&(s.modelType==="general"?s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),s})(e),n=typeof t.modelUrl=="string"&&t.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Of(t.modelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[2,new fX(t.modelType,r)]}})})}function pL(e,t){return je(this,void 0,void 0,function(){var n,r;return Be(this,function(o){switch(e){case Wc.MediaPipeSelfieSegmentation:if(n=void 0,(r=t)!=null){if(r.runtime==="tfjs")return[2,pX(r)];if(r.runtime==="mediapipe")return[2,nX(r)];n=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+n);case Wc.BodyPix:return[2,QY(r=t)];default:throw new Error(e+" is not a supported model name.")}})})}(function(e){e.BodyPix="BodyPix",e.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(Wc||(Wc={}));var hX="blurred",mX="blurred-mask",gX="mask";var yX="draw-image",JI={};function Jg(e){if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)return(function(t){if("offsetHeight"in t&&t.offsetHeight!==0&&"offsetWidth"in t&&t.offsetWidth!==0)return[t.offsetHeight,t.offsetWidth];if(t.height!=null&&t.width!=null)return[t.height,t.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(e);if(typeof ImageData<"u"&&e instanceof ImageData)return[e.height,e.width];if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)return(function(t){return t.hasAttribute("height")&&t.hasAttribute("width")?[t.height,t.width]:[t.videoHeight,t.videoWidth]})(e);if(e instanceof Ie)return[e.shape[0],e.shape[1]];throw new Error("error: Unknown input type: "+e+".")}function hL(e){return JI[e]||(JI[e]=(function(){if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(0,0);throw new Error("Cannot create a canvas in this context")})()),JI[e]}function mL(e,t){var n=hL(t);return(function(r,o){o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r,0,0)})(e,n),n}function Lf(e,t,n,r,o,i){return je(this,void 0,void 0,function(){var s,a,l,c;return Be(this,function(u){switch(u.label){case 0:return t instanceof Ie?[4,xo.toPixels(t)]:[3,2];case 1:s=u.sent(),a=Jg(t),l=a[0],c=a[1],t=new ImageData(s,c,l),u.label=2;case 2:return t instanceof ImageData&&(t=mL(t,yX)),o==null||i==null?e.drawImage(t,n,r):e.drawImage(t,n,r,o,i),[2]}})})}function vX(e,t){return je(this,void 0,void 0,function(){var n,r,o;return Be(this,function(i){switch(i.label){case 0:return n=Jg(e),r=n[0],o=n[1],t.width=o,t.height=r,[4,Lf(t.getContext("2d"),e,0,0,o,r)];case 1:return i.sent(),[2]}})})}function bX(e){var t=e.getContext("2d");t.scale(-1,1),t.translate(-e.width,0)}function XF(e,t,n){return je(this,void 0,void 0,function(){return Be(this,function(r){switch(r.label){case 0:return e.globalCompositeOperation=n,[4,Lf(e,t,0,0)];case 1:return r.sent(),[2]}})})}function wX(e,t,n){return je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u;return Be(this,function(f){switch(f.label){case 0:for(r=e.getContext("2d"),o=0,i=5,s=1/(2*Math.PI*i*i),a=n<3?1:2,c=-n;c<=n;c+=a)for(u=-n;u<=n;u+=a)l=s*Math.exp(-(u*u+c*c)/(2*i*i)),o+=l;c=-n,f.label=1;case 1:if(!(c<=n))return[3,6];u=-n,f.label=2;case 2:return u<=n?(r.globalAlpha=s*Math.exp(-(u*u+c*c)/(2*i*i))/o*n,[4,Lf(r,t,u,c)]):[3,5];case 3:f.sent(),f.label=4;case 4:return u+=a,[3,2];case 5:return c+=a,[3,1];case 6:return r.globalAlpha=1,[2]}})})}function _X(e,t,n){return je(this,void 0,void 0,function(){var r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return r=Jg(e),o=r[0],i=r[1],s=n.getContext("2d"),n.width=i,n.height=o,s.clearRect(0,0,i,o),s.save(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?[4,wX(n,e,t)]:[3,2];case 1:return a.sent(),[3,4];case 2:return s.filter="blur("+t+"px)",[4,Lf(s,e,0,0,i,o)];case 3:a.sent(),a.label=4;case 4:return s.restore(),[2]}})})}function gL(e,t,n){return je(this,void 0,void 0,function(){var r;return Be(this,function(o){switch(o.label){case 0:return r=hL(n),t!==0?[3,2]:[4,vX(e,r)];case 1:return o.sent(),[3,4];case 2:return[4,_X(e,t,r)];case 3:o.sent(),o.label=4;case 4:return[2,r]}})})}function EX(e,t,n,r,o,i){i===void 0&&(i={r:0,g:255,b:255,a:255});for(var s=-o;s<=o;s++)for(var a=-o;a<=o;a++)if(s!==0&&a!==0){var l=(t+s)*r+(n+a);e[4*l+0]=i.r,e[4*l+1]=i.g,e[4*l+2]=i.b,e[4*l+3]=i.a}}function SX(e,t,n,r,o,i,s){s===void 0&&(s=1);for(var a=0,l=-s;l<=s;l++)for(var c=-s;c<=s;c++)if(l!==0&&c!==0){var u=(t+l)*r+(n+c);(!o[e[4*u]]||e[4*u+3]<i)&&(a+=1)}return a>0}function oC(e,t,n,r,o,i){return t===void 0&&(t={r:0,g:0,b:0,a:0}),n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),o===void 0&&(o=.5),i===void 0&&(i=Array.from(Array(256).keys())),je(this,void 0,void 0,function(){var s,a,l,c,u,f,p,m,w,x,T,D,P,A;return Be(this,function(M){switch(M.label){case 0:return(s=Array.isArray(e)?e:[e]).length===0?[2,null]:[4,Promise.all(s.map(function($){return $.mask.toImageData()}))];case 1:for(a=M.sent(),l=a[0],c=l.width,u=l.height,f=new Uint8ClampedArray(c*u*4),p=Math.round(255*o),m=new Array(256).fill(!1),i.forEach(function($){return m[$]=!0}),w=0;w<u;w++)for(x=0;x<c;x++)for(f[4*(T=w*c+x)+0]=n.r,f[4*T+1]=n.g,f[4*T+2]=n.b,f[4*T+3]=n.a,D=0,P=a;D<P.length;D++)A=P[D],m[A.data[4*T]]&&A.data[4*T+3]>=p&&(f[4*T]=t.r,f[4*T+1]=t.g,f[4*T+2]=t.b,f[4*T+3]=t.a,r&&w-1>=0&&w+1<u&&x-1>=0&&x+1<c&&SX(A.data,w,x,c,m,p)&&EX(f,w,x,c,1));return[2,new ImageData(f,c,u)]}})})}function xX(e,t,n){return je(this,void 0,void 0,function(){var r,o;return Be(this,function(i){switch(i.label){case 0:return[4,oC(e,{r:0,g:0,b:0,a:255},{r:0,g:0,b:0,a:0},!1,t)];case 1:return r=i.sent(),o=mL(r,gX),n===0?[2,o]:[2,gL(o,n,mX)]}})})}function yL(e,t,n,r,o,i,s){return r===void 0&&(r=.5),o===void 0&&(o=3),i===void 0&&(i=3),s===void 0&&(s=!1),je(this,void 0,void 0,function(){var a,l,c,u,f,p;return Be(this,function(m){switch(m.label){case 0:return[4,gL(t,o,hX)];case 1:return a=m.sent(),e.width=a.width,e.height=a.height,l=e.getContext("2d"),Array.isArray(n)&&n.length===0?(l.drawImage(a,0,0),[2]):[4,xX(n,r,i)];case 2:return c=m.sent(),l.save(),s&&bX(e),u=Jg(t),f=u[0],p=u[1],[4,Lf(l,t,0,0,p,f)];case 3:return m.sent(),[4,XF(l,c,"destination-in")];case 4:return m.sent(),[4,XF(l,a,"destination-over")];case 5:return m.sent(),l.restore(),[2]}})})}var bL=async()=>{let e=Wc.MediaPipeSelfieSegmentation;return pL(e,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation",modelType:"general"})};var TX=["video"],IX=["canvas"],CX=["circle"],DX=["rectangle"],NX=["circleHandle"],AX=["mask"];function MX(e,t){if(e&1&&et(0,"video",6),e&2){let n=dt();Wu("srcObject",n.srcObject()),cn("width",n.width())}}function kX(e,t){if(e&1&&et(0,"img",14),e&2){let n=dt();lr("transform",`scale(${n.blurCanvasScale()})`)}}var ey=class e{resizeObserver=null;video=Tn("video");canvas=Tn("canvas");circle=Tn("circle");rectangle=Tn("rectangle");circleHandle=Tn("circleHandle");mask=Tn("mask");srcObject=Ot(void 0);width=mn(400);height=mn(300);blurCanvasScale=Vo(()=>{let t=this.width(),n=this.videoDO().settings.width;return t/(n||1)});videoDO=Ot.required();el=O(ut);x=Se(0);y=Se(0);selected=Jl();clipType=mn("none");showClippedHint=mn(!0);scale=Ot(1);border=mn(!0);borderColor=mn("#ffffff");borderWidth=mn(4);circleProps=mn({cx:160,cy:120,r:120});rectProps=mn({x:0,y:0,width:320,height:240});constructor(){wi(()=>{let t=this.videoDO();t&&(t.component=this)}),wi(()=>{this.videoDO().backgroundType()==="none"?this.stopBackgroundEffect():this.startBackgroundEffect()}),_t(()=>{this.addDragNDrop(),this.addDragNDropCircle(),this.addCircleHandleDnD(),this.addDragNDropRect(),this.watchResize()})}onClick(t){this.selected.emit(this)}addCircleHandleDnD(){console.log("add drag n drop circle");let t=this.circleHandle()?.nativeElement;if(!t)return;let{dragMove$:n,dragStart$:r}=Id(t),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx+this.circleProps().r,a=this.circleProps().cy}),n.subscribe(l=>{let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u;let f=o-this.circleProps().cx;this.circleProps.update(p=>fe(B({},p),{r:f}))})}addDragNDropRect(){let t=this.rectangle()?.nativeElement;if(!t)return;let{dragMove$:n,dragStart$:r}=Id(t),o=0,i=0,s=0,a=0,l="none",c=this.rectProps();r.subscribe(u=>{s=this.rectProps().x,a=this.rectProps().y,c=this.rectProps()}),n.subscribe(u=>{let f=u.deltaX/this.scale(),p=u.deltaY/this.scale();if(o=s+f,i=a+p,!(u.startOffsetX<10))if(u.startOffsetX/this.scale()>c.width-50){let w=u.originalEvent.x/this.scale()-c.x;this.rectProps.update(x=>fe(B({},x),{width:Math.round(w)}))}else u.startOffsetY<10||u.startOffsetY>this.rectProps().height-10||this.rectProps.update(m=>fe(B({},m),{x:o,y:i}))})}addDragNDropCircle(){console.log("add drag n drop circle");let t=this.circle()?.nativeElement;if(!t)return;let{dragMove$:n,dragStart$:r}=Id(t),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx,a=this.circleProps().cy}),n.subscribe(l=>{let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u,this.circleProps.update(f=>fe(B({},f),{cx:o,cy:i})),this.mask()?.nativeElement.setAttribute("cx",`${o}`),this.mask()?.nativeElement.setAttribute("cy",`${i}`),this.mask()?.nativeElement.setAttribute("r",`${this.circleProps().r}`)})}addDragNDrop(){console.log("add drag n drop");let{dragMove$:t,dragStart$:n}=Id(this.el.nativeElement),r=0,o=0,i=this.el.nativeElement.getBoundingClientRect();n.subscribe(s=>{i=this.el.nativeElement.getBoundingClientRect(),r=this.x(),o=this.y()}),t.subscribe(s=>{if(console.log(s),s.startOffsetX<10)console.log("left resize");else if(s.startOffsetX>i.width-10){console.log("right resize");let l=s.originalEvent.x/this.scale()-i.left/this.scale();console.log("new width",l),this.width.set(Math.round(l))}else if(s.startOffsetY<10)console.log("top resize");else if(s.startOffsetY>i.height-10)console.log("bottom resize");else{console.log("move"),console.log("scale is",this.scale());let a=s.deltaX/this.scale(),l=s.deltaY/this.scale();this.x.set(r+a),this.y.set(o+l),this.el.nativeElement.style.transform=`translate(${r+a}px, ${o+l}px)`}})}watchResize(){this.resizeObserver=new ResizeObserver(t=>{for(let n of t)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;this.height.set(Math.round(i))}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}videoLoaded(t){this.video()?.nativeElement&&setTimeout(()=>{let r=this.el.nativeElement.getBoundingClientRect();this.height.set(Math.round(r.height/this.scale())),this.width.set(Math.round(r.width/this.scale()))},1e3)}segmenter=null;getSegmenter=async()=>(this.segmenter||(this.segmenter=await bL()),this.segmenter);animationId=null;async stopBackgroundEffect(){let t=this.canvas()?.nativeElement;t&&(t.style.display="none"),this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}async startBackgroundEffect(){let t=this.videoDO().backgroundType();t==="blur"?await this.blurBackground():t==="image"&&await this.changeBackground()}async blurBackground(){let t=await this.getSegmenter(),n=this.video()?.nativeElement,r=this.canvas()?.nativeElement;if(!n||!r)return;r.style.display="block",console.log("canvas size",r.width,r.height);let o=async()=>{let i=n.getBoundingClientRect(),s=this.videoDO().foregroundThreshold(),a=this.videoDO().edgeBlurAmount(),l=!1,c=this.videoDO().blurAmount();console.log("updated canvas size",r.width,r.height);let u=await t.segmentPeople(n);await yL(r,n,u,s,c,a,l),this.animationId=requestAnimationFrame(o)};this.animationId=requestAnimationFrame(o)}async changeBackground(){let t=this.video()?.nativeElement,n=this.canvas()?.nativeElement;if(!t||!n)return;n.style.display="block";let r=n.getContext("2d");if(!r)return;let o=await this.getSegmenter(),i=async()=>{console.log("process frame for remove"),r.drawImage(t,0,0);let s=await o.segmentPeople(t),c=await oC(s,{r:255,g:255,b:255,a:0},{r:0,g:0,b:0,a:255}),u=r.getImageData(0,0,t.videoWidth,t.videoHeight);for(let f=3;f<u.data.length;f+=4)c.data[f]===255&&(u.data[f]=0);r.putImageData(u,0,0),this.animationId=requestAnimationFrame(i)};this.animationId=requestAnimationFrame(i)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-video"]],viewQuery:function(n,r){n&1&&(fn(r.video,TX,5),fn(r.canvas,IX,5),fn(r.circle,CX,5),fn(r.rectangle,DX,5),fn(r.circleHandle,NX,5),fn(r.mask,AX,5)),n&2&&ar(6)},hostBindings:function(n,r){n&1&&Jt("click",function(i){return r.onClick(i)})},inputs:{srcObject:[1,"srcObject"],width:[1,"width"],height:[1,"height"],videoDO:[1,"videoDO"],clipType:[1,"clipType"],showClippedHint:[1,"showClippedHint"],scale:[1,"scale"],border:[1,"border"],borderColor:[1,"borderColor"],borderWidth:[1,"borderWidth"],circleProps:[1,"circleProps"],rectProps:[1,"rectProps"]},outputs:{width:"widthChange",height:"heightChange",selected:"selected",clipType:"clipTypeChange",showClippedHint:"showClippedHintChange",border:"borderChange",borderColor:"borderColorChange",borderWidth:"borderWidthChange",circleProps:"circlePropsChange",rectProps:"rectPropsChange"},decls:15,vars:30,consts:[["compositionsource",""],["video",""],["canvas",""],["rectangle",""],["circle",""],["circleHandle",""],["autoplay","",2,"position","absolute","left","0","top","0","opacity","0.2",3,"srcObject"],["autoplay","",3,"loadedmetadata","srcObject"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left",3,"transform"],[2,"position","absolute","top","0","left","0","transform-origin","top left"],[2,"position","absolute","top","0","left","0","width","100%","height","100%"],["fill","rgba(255, 0, 0, 0.1)"],["fill","rgba(255, 0, 0, 0.001)"],["stroke","black","stroke-width","5","fill","black",2,"cursor","pointer"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left"]],template:function(n,r){if(n&1){let o=Cr();un(0,MX,1,2,"video",6),Je(1,"div",null,0)(3,"video",7,1),bi("loadedmetadata",function(s){return It(o),Ct(r.videoLoaded(s))}),st(),un(5,kX,1,2,"img",8),et(6,"canvas",9,2),st(),ln(),Je(8,"svg",10),et(9,"rect",11,3)(11,"circle",12,4)(13,"circle",13,5),st()}if(n&2){dn(r.showClippedHint()?0:-1),le(),lr("clip-path",r.clipType()==="circle"?"circle("+r.circleProps().r+"px at "+r.circleProps().cx+"px "+r.circleProps().cy+"px)":r.clipType()==="rectangle"?`polygon(${r.rectProps().x}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y+r.rectProps().height}px, ${r.rectProps().x}px ${r.rectProps().y+r.rectProps().height}px)`:"none"),le(2),Wu("srcObject",r.srcObject()),cn("width",r.width()),le(2),dn(r.videoDO().backgroundType()==="image"?5:-1),le(),lr("transform",`scale(${r.blurCanvasScale()})`),cn("width",r.width())("height",r.height());let o=r.circleProps();le(3),lr("visibility",r.clipType()==="rectangle"?"visible":"hidden"),cn("x",r.rectProps().x)("y",r.rectProps().y)("width",r.rectProps().width)("height",r.rectProps().height)("stroke",r.borderColor())("stroke-width",r.borderWidth()),le(2),lr("visibility",r.clipType()==="circle"?"visible":"hidden"),cn("cx",o.cx)("cy",o.cy)("r",o.r)("stroke",r.borderColor())("stroke-width",r.borderWidth()),le(2),lr("visibility",r.clipType()==="circle"?"visible":"hidden"),cn("cx",o.cx+o.r)("cy",o.cy)("r",10)}},styles:["[_nghost-%COMP%]{display:inline-block;position:absolute;top:0;left:0}"]})};var OX=["canvas"],qc=class e{canvasElement=Tn("canvas");canvas;ctx;canvasWidth=Ot(800);canvasHeight=Ot(600);videos=Ot([]);background=Ot("#000000");constructor(){_t(()=>{this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d")}),wi(()=>{let t=this.background();this.draw()})}requestId=null;stopDrawing(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null)}startDrawing(){this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d");let t=()=>{this.draw(),this.requestId=requestAnimationFrame(t)};this.requestId=requestAnimationFrame(t)}draw(){if(!this.ctx||!this.canvas)return;let{width:t,height:n}=this.canvas;this.ctx.clearRect(0,0,t,n),this.ctx.fillStyle=this.background(),this.ctx.fillRect(0,0,t,n),this.videos().forEach(r=>{let o=r.component,i=o?.video()?.nativeElement;if(!o)return;let s=o.videoDO();if((s.backgroundType()==="blur"||s.backgroundType()==="image")&&(i=o.canvas()?.nativeElement),i)if(o&&o?.clipType()==="circle"){this.ctx?.save(),this.ctx?.beginPath();let{cx:a,cy:l,r:c}=o.circleProps();this.ctx?.arc(a+o.x(),l+o.y(),c,0,Math.PI*2,!1),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else if(o?.clipType()==="rectangle"){this.ctx?.save(),this.ctx?.beginPath();let{x:a,y:l,width:c,height:u}=o.rectProps();this.ctx?.moveTo(a+o.x()+20,l+o.y()),this.ctx?.lineTo(a+o.x()+c-20,l+o.y()),this.ctx?.quadraticCurveTo(a+o.x()+c,l+o.y(),a+o.x()+c,l+o.y()+20),this.ctx?.lineTo(a+o.x()+c,l+o.y()+u-20),this.ctx?.quadraticCurveTo(a+o.x()+c,l+o.y()+u,a+o.x()+c-20,l+o.y()+u),this.ctx?.lineTo(a+o.x()+20,l+o.y()+u),this.ctx?.quadraticCurveTo(a+o.x(),l+o.y()+u,a+o.x(),l+o.y()+u-20),this.ctx?.lineTo(a+o.x(),l+o.y()+20),this.ctx?.quadraticCurveTo(a+o.x(),l+o.y(),a+o.x()+20,l+o.y()),this.ctx?.closePath(),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height())})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-canvas"]],viewQuery:function(n,r){n&1&&fn(r.canvasElement,OX,5),n&2&&ar()},inputs:{canvasWidth:[1,"canvasWidth"],canvasHeight:[1,"canvasHeight"],videos:[1,"videos"],background:[1,"background"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&et(0,"canvas",null,0),n&2&&cn("width",r.canvasWidth())("height",r.canvasHeight())},styles:["[_nghost-%COMP%]{display:block}"]})};var As=class e{scale=Se(1);recordingWidth=Se(1920);recordingHeight=Se(1080);backgroundColor=Se("#000000");selectedVideo=Se(null);setSelectedVideo(t){this.selectedVideo.set(t)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})};var RX=["*"],ty=class e{settings=O(As);contentWidth=mn(400);contentHeight=mn(300);contentScale=mn(1);scaleChange=Jl();el=O(ut);background=Ot("#000000");resizeObserver=null;constructor(){_t(()=>{this.watchResize()})}watchResize(){this.resizeObserver=new ResizeObserver(t=>{for(let n of t)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;console.log("resize",o,i);let s=this.contentWidth()/this.contentHeight(),a=o/s,l=Math.min(o/this.contentWidth(),i/this.contentHeight());this.contentScale.set(l),this.scaleChange.emit(l),this.el.nativeElement.style.height=`${a}px`}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}ngOnDestroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-editor"]],inputs:{contentWidth:[1,"contentWidth"],contentHeight:[1,"contentHeight"],contentScale:[1,"contentScale"],background:[1,"background"]},outputs:{contentWidth:"contentWidthChange",contentHeight:"contentHeightChange",contentScale:"contentScaleChange",scaleChange:"scaleChange"},ngContentSelectors:RX,decls:3,vars:8,consts:[["content",""],[1,"content"]],template:function(n,r){n&1&&(Ea(),Je(0,"div",1,0),Sa(2),st()),n&2&&lr("background-color",r.background())("transform",`scale(${r.contentScale()})`)("width",r.contentWidth(),"px")("height",r.contentHeight(),"px")},styles:["[_nghost-%COMP%]{display:block;overflow:hidden;border:solid 2px black}.content[_ngcontent-%COMP%]{transform-origin:top left}"]})};var PX="0.12.9",m8e=`https://unpkg.com/@ffmpeg/core@${PX}/dist/umd/ffmpeg-core.js`,it=(function(e){return e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT",e})(it||{});var wL=(()=>{let e=0;return()=>e++})();var v8e=new Error("unknown message type"),_L=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),EL=new Error("called FFmpeg.terminate()"),b8e=new Error("failed to import ffmpeg-core.js");var ny=class{#t=null;#r={};#n={};#o=[];#i=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:t,type:n,data:r}})=>{switch(n){case it.LOAD:this.loaded=!0,this.#r[t](r);break;case it.MOUNT:case it.UNMOUNT:case it.EXEC:case it.FFPROBE:case it.WRITE_FILE:case it.READ_FILE:case it.DELETE_FILE:case it.RENAME:case it.CREATE_DIR:case it.LIST_DIR:case it.DELETE_DIR:this.#r[t](r);break;case it.LOG:this.#o.forEach(o=>o(r));break;case it.PROGRESS:this.#i.forEach(o=>o(r));break;case it.ERROR:this.#n[t](r);break}delete this.#r[t],delete this.#n[t]})};#e=({type:t,data:n},r=[],o)=>this.#t?new Promise((i,s)=>{let a=wL();this.#t&&this.#t.postMessage({id:a,type:t,data:n},r),this.#r[a]=i,this.#n[a]=s,o?.addEventListener("abort",()=>{s(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(_L);on(t,n){t==="log"?this.#o.push(n):t==="progress"&&this.#i.push(n)}off(t,n){t==="log"?this.#o=this.#o.filter(r=>r!==n):t==="progress"&&(this.#i=this.#i.filter(r=>r!==n))}load=(o={},{signal:r}={})=>{var i=o,{classWorkerURL:t}=i,n=wD(i,["classWorkerURL"]);return this.#t||(this.#t=t?new Worker(new URL(t,import.meta.url),{type:"module"}):new Worker(new URL("./worker.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:it.LOAD,data:n},void 0,r)};exec=(t,n=-1,{signal:r}={})=>this.#e({type:it.EXEC,data:{args:t,timeout:n}},void 0,r);ffprobe=(t,n=-1,{signal:r}={})=>this.#e({type:it.FFPROBE,data:{args:t,timeout:n}},void 0,r);terminate=()=>{let t=Object.keys(this.#n);for(let n of t)this.#n[n](EL),delete this.#n[n],delete this.#r[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(t,n,{signal:r}={})=>{let o=[];return n instanceof Uint8Array&&o.push(n.buffer),this.#e({type:it.WRITE_FILE,data:{path:t,data:n}},o,r)};mount=(t,n,r)=>{let o=[];return this.#e({type:it.MOUNT,data:{fsType:t,options:n,mountPoint:r}},o)};unmount=t=>{let n=[];return this.#e({type:it.UNMOUNT,data:{mountPoint:t}},n)};readFile=(t,n="binary",{signal:r}={})=>this.#e({type:it.READ_FILE,data:{path:t,encoding:n}},void 0,r);deleteFile=(t,{signal:n}={})=>this.#e({type:it.DELETE_FILE,data:{path:t}},void 0,n);rename=(t,n,{signal:r}={})=>this.#e({type:it.RENAME,data:{oldPath:t,newPath:n}},void 0,r);createDir=(t,{signal:n}={})=>this.#e({type:it.CREATE_DIR,data:{path:t}},void 0,n);listDir=(t,{signal:n}={})=>this.#e({type:it.LIST_DIR,data:{path:t}},void 0,n);deleteDir=(t,{signal:n}={})=>this.#e({type:it.DELETE_DIR,data:{path:t}},void 0,n)};var SL=new Error("failed to get response body reader"),xL=new Error("failed to complete download");var TL="Content-Length";var FX=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{let{result:o}=r;o instanceof ArrayBuffer?t(new Uint8Array(o)):t(new Uint8Array)},r.onerror=o=>{n(Error(`File could not be read! Code=${o?.target?.error?.code||-1}`))},r.readAsArrayBuffer(e)}),iC=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(n=>n.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await FX(e);else return new Uint8Array;return new Uint8Array(t)};var LX=async(e,t)=>{let n=await fetch(e),r;try{let o=parseInt(n.headers.get(TL)||"-1"),i=n.body?.getReader();if(!i)throw SL;let s=[],a=0;for(;;){let{done:u,value:f}=await i.read(),p=f?f.length:0;if(u){if(o!=-1&&o!==a)throw xL;t&&t({url:e,total:o,received:a,delta:p,done:u});break}s.push(f),a+=p,t&&t({url:e,total:o,received:a,delta:p,done:u})}let l=new Uint8Array(a),c=0;for(let u of s)l.set(u,c),c+=u.length;r=l.buffer}catch(o){console.log("failed to send download progress event: ",o),r=await n.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},sC=async(e,t,n=!1,r)=>{let o=n?await LX(e,r):await(await fetch(e)).arrayBuffer(),i=new Blob([o],{type:t});return URL.createObjectURL(i)};var Kc=class e{ffmpeg;constructor(){}async loadFFmpeg(){this.ffmpeg=new ny,this.ffmpeg.on("progress",n=>{console.log("ffmpeg progress",n.progress)}),this.ffmpeg.on("log",({message:n})=>{console.log("ffmpeg message",n)});let t=await this.loadConfig();try{await this.ffmpeg.load(t)}catch(n){console.error(n)}}async loadConfig(){let t="https://unpkg.com/@ffmpeg/core@0.12.10/dist/esm";return{coreURL:await sC(`${t}/ffmpeg-core.js`,"text/javascript"),wasmURL:await sC(`${t}/ffmpeg-core.wasm`,"application/wasm"),classWorkerURL:"assets/ffmpeg/worker.js"}}async trimVideo(t,n,r){if(!this.ffmpeg){console.error("ffmpeg not loaded");return}let o=new Blob(t,{type:"video/webm"}),i="input.webm";return await this.ffmpeg.writeFile(i,await iC(o)),await this.ffmpeg.exec(["-i",i,"-ss",n.toString(),"-t",(r-n).toString(),"trimmed.mp4"]),console.log("conversion done"),await this.ffmpeg.readFile("trimmed.mp4")}async convert(t){if(!this.ffmpeg){console.error("ffmpeg not loaded");return}let n=new Blob(t,{type:"video/webm"}),r="input.webm";return await this.ffmpeg.writeFile(r,await iC(n)),await this.ffmpeg.exec(["-i",r,"-t","60","-c:v","libx264","-preset","ultrafast","-r","20","-s","480x360","-crf","28","output.mp4"]),console.log("conversion done"),await this.ffmpeg.readFile("output.mp4")}static \u0275fac=function(n){return new(n||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})};var $f=class{constructor(t){this.stream=t;this.settings=t.getVideoTracks()[0].getSettings()}id="";component;blured=Se(!1);blurAmount=Se(5);edgeBlurAmount=Se(15);foregroundThreshold=Se(.5);backgroundType=Se("none");settings},ry=class{constructor(t){this.stream=t}},oy=class{constructor(t){this.videoService=t}chunks=[];name;convertedData=Se(null);startTime;endTime;duration;getRecordingUrl(){console.log("chunks",this.chunks);let t=new Blob(this.chunks,{type:this.chunks[0].type});return URL.createObjectURL(t)}getConvertedUrl(){let t=this.convertedData();return t?URL.createObjectURL(t):null}download(){let t=document.createElement("a");t.href=this.getRecordingUrl(),t.download=this.name+".webm",t.dispatchEvent(new MouseEvent("click",{view:window}))}async convertRecording(){await this.videoService.loadFFmpeg();let t=await this.videoService.convert(this.chunks);if(t){let n=new Blob([t.buffer],{type:"video/mp4"});this.convertedData.set(n)}return console.log("conversion done!"),t}};var Ms=class e{videoService=O(Kc);recorder=null;recordingCount=Se(1);isRecording=Se(!1);recordings=Se([]);videos=Se([]);audioSources=Se([]);audioStream=null;canvasComponent=void 0;videoCount=0;constructor(){}async getDesktopStream(){let t=await navigator.mediaDevices.getDisplayMedia({video:!0}),n=new $f(t);n.id=`video-${this.videoCount++}`,t.getVideoTracks().forEach(r=>{console.log("track",r.getSettings()),r.onended=()=>{console.log("track ended")}}),n.stream=t,this.videos.update(r=>[...r,n])}async getWebcamDevices(){let t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),n=new $f(t);t.getVideoTracks().forEach(r=>{console.log("webcam track",r.getSettings())}),n.id=`video-${this.videoCount++}`,this.videos.update(r=>[...r,n])}async getAudioStream(){this.audioStream=await navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});let t=new ry(this.audioStream);this.audioSources.update(n=>[...n,t])}startRecording(){console.log("startRecording called",this.canvasComponent),this.isRecording.set(!0),this.canvasComponent&&(console.log("start drawing"),this.canvasComponent.startDrawing());let t=`recording-${this.recordingCount()}`;this.recordingCount.set(this.recordingCount()+1);let n=new oy(this.videoService);if(n.name=t,this.recordings.update(s=>[...s,n]),!this.canvasComponent||!this.canvasComponent.ctx||!this.canvasComponent.canvas){console.log("no canvas component");return}let r=this.canvasComponent.canvas.captureStream(30),o=new MediaStream([...r.getTracks(),...this.audioStream?.getTracks()||[]]),i=[];this.recorder=new MediaRecorder(o,{mimeType:"video/webm;codecs=vp9"}),this.recorder.ondataavailable=s=>{console.log("data available",s.data),i.push(s.data)},this.recorder.onstop=()=>{this.isRecording.set(!1),this.canvasComponent&&this.canvasComponent.stopDrawing(),this.recordings.update(s=>{let a=s[s.length-1];return a&&(a.chunks=i),[...s]})},console.log("start recording"),this.recorder.start()}stopRecording(){this.recorder?.stop()}bringToFront(t){let n=this.videos().filter(r=>r!==t);return this.videos.set([...n,t]),[...n]}static \u0275fac=function(n){return new(n||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})};var Vf=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},ul=class extends Vf{component;viewContainerRef;injector;projectableNodes;constructor(t,n,r,o){super(),this.component=t,this.viewContainerRef=n,this.injector=r,this.projectableNodes=o}},dl=class extends Vf{templateRef;viewContainerRef;context;injector;constructor(t,n,r,o){super(),this.templateRef=t,this.viewContainerRef=n,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},aC=class extends Vf{element;constructor(t){super(),this.element=t instanceof ut?t.nativeElement:t}},Yc=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof ul)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof dl)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof aC)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},iy=class extends Yc{outletElement;_appRef;_defaultInjector;constructor(t,n,r){super(),this.outletElement=t,this._appRef=n,this._defaultInjector=r}attachComponentPortal(t){let n;if(t.viewContainerRef){let r=t.injector||t.viewContainerRef.injector,o=r.get(gi,null,{optional:!0})||void 0;n=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let r=this._appRef,o=t.injector||this._defaultInjector||Ye.NULL,i=o.get(kt,r.injector);n=Yh(t.component,{elementInjector:o,environmentInjector:i,projectableNodes:t.projectableNodes||void 0}),r.attachView(n.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let n=t.viewContainerRef,r=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(r);o!==-1&&n.remove(o)}),this._attachedPortal=t,r}attachDomPortal=t=>{let n=t.element;n.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(r,n),this.outletElement.appendChild(n),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},sy=(()=>{class e extends dl{constructor(){let n=O(uo),r=O(Ur);super(n,r)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Qt({type:e,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Xn]})}return e})();var lC=(()=>{class e extends Yc{_moduleRef=O(gi,{optional:!0});_document=O(Ue);_viewContainerRef=O(Ur);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new ct;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,o=r.createComponent(n.component,{index:r.length,injector:n.injector||r.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=n=>{let r=n.element;r.parentNode;let o=this._document.createComment("dom-portal");n.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=n,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Qt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Xn]})}return e})();function IL(e){return e.buttons===0||e.detail===0}function CL(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var cC;function $X(){if(cC==null){let e=typeof document<"u"?document.head:null;cC=!!(e&&(e.createShadowRoot||e.attachShadow))}return cC}function DL(e){if($X()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function ay(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function Li(e){return e.composedPath?e.composedPath()[0]:e.target}var uC;try{uC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{uC=!1}var br=(()=>{class e{_platformId=O(ts);isBrowser=this._platformId?qM(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||uC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var jf;function VX(){if(jf==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jf=!0}))}finally{jf=jf||!1}return jf}function NL(e){return VX()?e:!!e.capture}function Xc(e){return e instanceof ut?e.nativeElement:e}var jX=new ee("cdk-input-modality-detector-options"),BX={ignoreKeys:[18,17,224,91,16]},AL=650,dC={passive:!0,capture:!0},HX=(()=>{class e{_platform=O(br);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Nt(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(r=>r===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Li(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<AL||(this._modality.next(IL(n)?"keyboard":"mouse"),this._mostRecentTarget=Li(n))};_onTouchstart=n=>{if(CL(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Li(n)};constructor(){let n=O(We),r=O(Ue),o=O(jX,{optional:!0});if(this._options=B(B({},BX),o),this.modalityDetected=this._modality.pipe(Ev(1)),this.modalityChanged=this.modalityDetected.pipe(Bp()),this._platform.isBrowser){let i=O(On).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[i.listen(r,"keydown",this._onKeydown,dC),i.listen(r,"mousedown",this._onMousedown,dC),i.listen(r,"touchstart",this._onTouchstart,dC)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cy=(function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e})(cy||{}),UX=new ee("cdk-focus-monitor-default-options"),ly=NL({passive:!0,capture:!0}),ML=(()=>{class e{_ngZone=O(We);_platform=O(br);_inputModalityDetector=O(HX);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=O(Ue);_stopInputModalityDetector=new Me;constructor(){let n=O(UX,{optional:!0});this._detectionMode=n?.detectionMode||cy.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let r=Li(n);for(let o=r;o;o=o.parentElement)n.type==="focus"?this._onFocus(n,o):this._onBlur(n,o)};monitor(n,r=!1){let o=Xc(n);if(!this._platform.isBrowser||o.nodeType!==1)return ge();let i=DL(o)||this._document,s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new Me,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let r=Xc(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let i=Xc(n),s=this._document.activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===cy.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===cy.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?AL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),i=Li(n);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ly),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ly)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(sn(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ly),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ly),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,i)=>{(i===n||o.checkChildren&&i.contains(n))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let i=n.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var uy=new WeakMap,Bf=(()=>{class e{_appRef;_injector=O(Ye);_environmentInjector=O(kt);load(n){let r=this._appRef=this._appRef||this._injector.get(Ir),o=uy.get(r);o||(o={loaders:new Set,refs:[]},uy.set(r,o),r.onDestroy(()=>{uy.get(r)?.refs.forEach(i=>i.destroy()),uy.delete(r)})),o.loaders.has(n)||(o.loaders.add(n),o.refs.push(Yh(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var kL=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function fC(e){return Array.isArray(e)?e:[e]}var hC=(()=>{class e{_platform=O(br);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return GX(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=zX(JX(n));if(r&&(OL(r)===-1||!this.isVisible(r)))return!1;let o=n.nodeName.toLowerCase(),i=OL(n);return n.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!ZX(n)?!1:o==="audio"?n.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return QX(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function zX(e){try{return e.frameElement}catch{return null}}function GX(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function WX(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function qX(e){return YX(e)&&e.type=="hidden"}function KX(e){return XX(e)&&e.hasAttribute("href")}function YX(e){return e.nodeName.toLowerCase()=="input"}function XX(e){return e.nodeName.toLowerCase()=="a"}function RL(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function OL(e){if(!RL(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function ZX(e){let t=e.nodeName.toLowerCase(),n=t==="input"&&e.type;return n==="text"||n==="password"||t==="select"||t==="textarea"}function QX(e){return qX(e)?!1:WX(e)||KX(e)||e.hasAttribute("contenteditable")||RL(e)}function JX(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var pC=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,n,r,o,i=!1,s){this._element=t,this._checker=n,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let t=this._startAnchor,n=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let n=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(t),!!r}return n.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let n=this._getRegionBoundary("start");return n&&n.focus(t),!!n}focusLastTabbableElement(t){let n=this._getRegionBoundary("end");return n&&n.focus(t),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let r=0;r<n.length;r++){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(o)return o}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let n=t.children;for(let r=n.length-1;r>=0;r--){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(o)return o}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,n){t?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?_t(t,{injector:this._injector}):setTimeout(t)}},PL=(()=>{class e{_checker=O(hC);_ngZone=O(We);_document=O(Ue);_injector=O(Ye);constructor(){O(Bf).load(kL)}create(n,r=!1){return new pC(n,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function FL(e,...t){return t.length?t.some(n=>e[n]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function mC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ht(e){return e==null?"":typeof e=="string"?e:`${e}px`}var eZ=new ee("cdk-dir-doc",{providedIn:"root",factory:tZ});function tZ(){return O(Ue)}var nZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function rZ(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?nZ.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Hf=(()=>{class e{get value(){return this.valueSignal()}valueSignal=Se("ltr");change=new ct;constructor(){let n=O(eZ,{optional:!0});if(n){let r=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(rZ(r||o||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fl;function LL(){if(fl==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return fl=!1,fl;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)fl=!0;else{let e=Element.prototype.scrollTo;e?fl=!/\{\s*\[native code\]\s*\}/.test(e.toString()):fl=!1}}return fl}var oZ=20,gC=(()=>{class e{_ngZone=O(We);_platform=O(br);_renderer=O(On).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Me;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=oZ){return this._platform.isBrowser?new Te(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=n>0?this._scrolled.pipe(jp(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ge()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(At(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,n)&&r.push(i)}),r}_scrollableContainsElement(n,r){let o=Xc(r),i=n.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var iZ=20,Uf=(()=>{class e{_platform=O(br);_listeners;_viewportSize;_change=new Me;_document=O(Ue);constructor(){let n=O(We),r=O(On).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),o=n.documentElement,i=o.getBoundingClientRect(),s=-i.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(n=iZ){return n>0?this._change.pipe(jp(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var yC={},dy=(()=>{class e{_appId=O(Xl);getId(n){return this._appId!=="ng"&&(n+=this._appId),yC.hasOwnProperty(n)||(yC[n]=0),`${n}${yC[n]++}`}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var $L=LL();function vy(e){return new fy(e.get(Uf),e.get(Ue))}var fy=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,n){this._viewportRuler=t,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Ht(-this._previousScrollPosition.left),t.style.top=Ht(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,r=t.style,o=n.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),$L&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),$L&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};function GL(e,t){return new py(e.get(gC),e.get(We),e.get(Uf),t)}var py=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,n,r,o){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=r,this._config=o}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(At(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var zf=class{enable(){}disable(){}attach(){}};function vC(e,t){return t.some(n=>{let r=e.bottom<n.top,o=e.top>n.bottom,i=e.right<n.left,s=e.left>n.right;return r||o||i||s})}function VL(e,t){return t.some(n=>{let r=e.top<n.top,o=e.bottom>n.bottom,i=e.left<n.left,s=e.right>n.right;return r||o||i||s})}function WL(e,t){return new hy(e.get(gC),e.get(Uf),e.get(We),t)}var hy=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,n,r,o){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this._config=o}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();vC(n,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},qL=(()=>{class e{_injector=O(Ye);constructor(){}noop=()=>new zf;close=n=>GL(this._injector,n);block=()=>vy(this._injector);reposition=n=>WL(this._injector,n);static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ks=class{positionStrategy;scrollStrategy=new zf;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let n=Object.keys(t);for(let r of n)t[r]!==void 0&&(this[r]=t[r])}}};var my=class{connectionPair;scrollableViewProperties;constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var KL=(()=>{class e{_attachedOverlays=[];_document=O(Ue);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),YL=(()=>{class e extends KL{_ngZone=O(We);_renderer=O(On).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),XL=(()=>{class e extends KL{_platform=O(br);_ngZone=O(We);_renderer=O(On).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let r=this._document.body,o={capture:!0},i=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[i.listen(r,"pointerdown",this._pointerDownListener,o),i.listen(r,"click",this._clickListener,o),i.listen(r,"auxclick",this._clickListener,o),i.listen(r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=Li(n)};_clickListener=n=>{let r=Li(n),o=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(jL(a.overlayElement,r)||jL(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=Hr(e)))(o||e)}})();static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jL(e,t){let n=typeof ShadowRoot<"u"&&ShadowRoot,r=t;for(;r;){if(r===e)return!0;r=n&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var ZL=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return e})(),by=(()=>{class e{_platform=O(br);_containerElement;_document=O(Ue);_styleLoader=O(Bf);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||mC()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(n),mC()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(ZL)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bC=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,n,r,o){this._renderer=n,this._ngZone=r,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Zc=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Me;_attachments=new Me;_detachments=new Me;_positionStrategy;_scrollStrategy;_locationChanges=mt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Me;_outsidePointerEvents=new Me;_afterNextRenderRef;constructor(t,n,r,o,i,s,a,l,c,u=!1,f,p){this._portalOutlet=t,this._host=n,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=f,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=_t(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=B(B({},this._config),t),this._updateElementSize()}setDirection(t){this._config=fe(B({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Ht(this._config.width),t.height=Ht(this._config.height),t.minWidth=Ht(this._config.minWidth),t.minHeight=Ht(this._config.minHeight),t.maxWidth=Ht(this._config.maxWidth),t.maxHeight=Ht(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new bC(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,n,r){let o=fC(n||[]).filter(i=>!!i);o.length&&(r?t.classList.add(...o):t.classList.remove(...o))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=_t(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(n){if(t)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},BL="cdk-overlay-connected-position-bounding-box",aZ=/([A-Za-z%]+)$/;function QL(e,t){return new gy(t,e.get(Uf),e.get(Ue),e.get(br),e.get(by))}var gy=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Me;_resizeSubscription=mt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,n,r,o,i){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(BL),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,o,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&pl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,r){let o;if(r.originX=="center")o=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;o=r.originX=="start"?s:a}n.left<0&&(o-=n.left);let i;return r.originY=="center"?i=t.top+t.height/2:i=r.originY=="top"?t.top:t.bottom,n.top<0&&(i-=n.top),{x:o,y:i}}_getOverlayPoint(t,n,r){let o;r.overlayX=="center"?o=-n.width/2:r.overlayX==="start"?o=this._isRtl()?-n.width:0:o=this._isRtl()?0:-n.width;let i;return r.overlayY=="center"?i=-n.height/2:i=r.overlayY=="top"?0:-n.height,{x:t.x+o,y:t.y+i}}_getOverlayFit(t,n,r,o){let i=UL(n),{x:s,y:a}=t,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,f=s+i.width-r.width,p=0-a,m=a+i.height-r.height,w=this._subtractOverflows(i.width,u,f),x=this._subtractOverflows(i.height,p,m),T=w*x;return{visibleArea:T,isCompletelyWithinViewport:i.width*i.height===T,fitsInViewportVertically:x===i.height,fitsInViewportHorizontally:w==i.width}}_canFitWithFlexibleDimensions(t,n,r){if(this._hasFlexibleDimensions){let o=r.bottom-n.y,i=r.right-n.x,s=HL(this._overlayRef.getConfig().minHeight),a=HL(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||s!=null&&s<=o,c=t.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(t,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let o=UL(n),i=this._viewportRect,s=Math.max(t.x+o.width-i.width,0),a=Math.max(t.y+o.height-i.height,0),l=Math.max(i.top-r.top-t.y,0),c=Math.max(i.left-r.left-t.x,0),u=0,f=0;return o.width<=i.width?u=c||-s:u=t.x<this._viewportMargin?i.left-r.left-t.x:0,o.height<=i.height?f=l||-a:f=t.y<this._viewportMargin?i.top-r.top-t.y:0,this._previousPushAmount={x:u,y:f},{x:t.x+u,y:t.y+f}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!lZ(this._lastScrollVisibility,r)){let o=new my(t,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=t.overlayY;t.overlayX==="center"?r="center":this._isRtl()?r=t.overlayX==="start"?"right":"left":r=t.overlayX==="start"?"left":"right";for(let i=0;i<n.length;i++)n[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(t,n){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(n.overlayY==="top")s=t.y,i=r.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-t.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let m=Math.min(r.bottom-t.y+r.top,t.y),w=this._lastBoundingBoxSize.height;i=m*2,s=t.y-m,i>w&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-w/2)}let l=n.overlayX==="start"&&!o||n.overlayX==="end"&&o,c=n.overlayX==="end"&&!o||n.overlayX==="start"&&o,u,f,p;if(c)p=r.width-t.x+this._viewportMargin*2,u=t.x-this._viewportMargin;else if(l)f=t.x,u=r.right-t.x;else{let m=Math.min(r.right-t.x+r.left,t.x),w=this._lastBoundingBoxSize.width;u=m*2,f=t.x-m,u>w&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-w/2)}return{top:s,left:f,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(t,n){let r=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Ht(r.height),o.top=Ht(r.top),o.bottom=Ht(r.bottom),o.width=Ht(r.width),o.left=Ht(r.left),o.right=Ht(r.right),n.overlayX==="center"?o.alignItems="center":o.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?o.justifyContent="center":o.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=Ht(i)),s&&(o.maxWidth=Ht(s))}this._lastBoundingBoxSize=r,pl(this._boundingBox.style,o)}_resetBoundingBoxStyles(){pl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){pl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();pl(r,this._getExactOverlayY(n,t,u)),pl(r,this._getExactOverlayX(n,t,u))}else r.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=Ht(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=Ht(s.maxWidth):i&&(r.maxWidth="")),pl(this._pane.style,r)}_getExactOverlayY(t,n,r){let o={top:"",bottom:""},i=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=Ht(i.y);return o}_getExactOverlayX(t,n,r){let o={left:"",right:""},i=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=Ht(i.x);return o}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:VL(t,r),isOriginOutsideView:vC(t,r),isOverlayClipped:VL(n,r),isOverlayOutsideView:vC(n,r)}}_subtractOverflows(t,...n){return n.reduce((r,o)=>r-Math.max(o,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&fC(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof ut)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+n,height:r,width:n}}};function pl(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function HL(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(aZ);return!n||n==="px"?parseFloat(t):null}return e||null}function UL(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function lZ(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var zL="cdk-global-overlay-wrapper";function wy(e){return new yy}var yy=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(zL),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,f=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",w="",x="";l?x="flex-start":u==="center"?(x="center",p?w=f:m=f):p?u==="left"||u==="end"?(x="flex-end",m=f):(u==="right"||u==="start")&&(x="flex-start",w=f):u==="left"||u==="start"?(x="flex-start",m=f):(u==="right"||u==="end")&&(x="flex-end",w=f),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":w,n.justifyContent=x,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(zL),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},JL=(()=>{class e{_injector=O(Ye);constructor(){}global(){return wy()}flexibleConnectedTo(n){return QL(this._injector,n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _y(e,t){e.get(Bf).load(ZL);let n=e.get(by),r=e.get(Ue),o=e.get(dy),i=e.get(Ir),s=e.get(Hf),a=r.createElement("div"),l=r.createElement("div");l.id=o.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),n.getContainerElement().appendChild(a);let c=new iy(l,i,e),u=new ks(t),f=e.get(vi,null,{optional:!0})||e.get(On).createRenderer(null,null);return u.direction=u.direction||s.value,new Zc(c,a,l,u,e.get(We),e.get(YL),r,e.get(is),e.get(XL),t?.disableAnimations??e.get(fw,null,{optional:!0})==="NoopAnimations",e.get(kt),f)}var wC=(()=>{class e{scrollStrategies=O(qL);_positionBuilder=O(JL);_injector=O(Ye);constructor(){}create(n){return _y(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function uZ(e,t){}var Qc=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var dZ=(()=>{class e extends Yc{_elementRef=O(ut);_focusTrapFactory=O(PL);_config;_interactivityChecker=O(hC);_ngZone=O(We);_focusMonitor=O(ML);_renderer=O(vi);_changeDetectorRef=O(Ia);_injector=O(Ye);_platform=O(br);_document=O(Ue);_portalOutlet;_focusTrapped=new Me;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=O(Qc,{optional:!0})||new Qc,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){let r=this._ariaLabelledByQueue.indexOf(n);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),r}attachTemplatePortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),r}attachDomPortal=n=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(n);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,r){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),n.removeAttribute("tabindex")},i=this._renderer.listen(n,"blur",o),s=this._renderer.listen(n,"mousedown",o)})),n.focus(r)}_focusByCssSelector(n,r){let o=this._elementRef.nativeElement.querySelector(n);o&&this._forceFocus(o,r)}_trapFocus(n){this._isDestroyed||_t(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(n);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(n)||this._focusDialogContainer(n);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',n);break;default:this._focusByCssSelector(this._config.autoFocus,n);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let n=this._config.restoreFocus,r=null;if(typeof n=="string"?r=this._document.querySelector(n):typeof n=="boolean"?r=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(r=n),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=ay(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(n){this._elementRef.nativeElement.focus?.(n)}_containsFocus(){let n=this._elementRef.nativeElement,r=ay();return n===r||n.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ay()))}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Ku(lC,7),r&2){let i;Yu(i=Xu())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&cn("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Xn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&Zl(0,uZ,0,0,"ng-template",0)},dependencies:[lC],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return e})(),hl=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Me;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,n){this.overlayRef=t,this.config=n,this.disableClose=n.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!FL(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=t.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(t,n){if(this._canClose(t)){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",n=""){return this.overlayRef.updateSize({width:t,height:n}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}_canClose(t){let n=this.config;return!!this.containerInstance&&(!n.closePredicate||n.closePredicate(t,n,this.componentInstance))}},fZ=new ee("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=O(Ye);return()=>vy(e)}}),EC=new ee("DialogData"),pZ=new ee("DefaultDialogConfig");function hZ(e){let t=Se(e),n=new ct;return{valueSignal:t,get value(){return t()},change:n,ngOnDestroy(){n.complete()}}}var e$=(()=>{class e{_injector=O(Ye);_defaultOptions=O(pZ,{optional:!0});_parentDialog=O(e,{optional:!0,skipSelf:!0});_overlayContainer=O(by);_idGenerator=O(dy);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Me;_afterOpenedAtThisLevel=new Me;_ariaHiddenElements=new Map;_scrollStrategy=O(fZ);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Xs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(oo(void 0)));constructor(){}open(n,r){let o=this._defaultOptions||new Qc;r=B(B({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=_y(this._injector,i),a=new hl(s,r),l=this._attachContainer(s,a,r);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(kn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(n,a,l,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){_C(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(r=>r.id===n)}ngOnDestroy(){_C(this._openDialogsAtThisLevel,n=>{n.config.closeOnDestroy===!1&&this._removeOpenDialog(n,!1)}),_C(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){let r=new ks({positionStrategy:n.positionStrategy||wy().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation,disableAnimations:n.disableAnimations});return n.backdropClass&&(r.backdropClass=n.backdropClass),r}_attachContainer(n,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Qc,useValue:o},{provide:hl,useValue:r},{provide:Zc,useValue:n}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=dZ;let l=new ul(a,o.viewContainerRef,Ye.create({parent:i||this._injector,providers:s}));return n.attach(l).instance}_attachDialogContent(n,r,o,i){if(n instanceof uo){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=B(B({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new dl(n,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new ul(n,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(n,r,o,i){let s=n.injector||n.viewContainerRef?.injector,a=[{provide:EC,useValue:n.data},{provide:hl,useValue:r}];return n.providers&&(typeof n.providers=="function"?a.push(...n.providers(r,n,o)):a.push(...n.providers)),n.direction&&(!s||!s.get(Hf,null,{optional:!0}))&&a.push({provide:Hf,useValue:hZ(n.direction)}),Ye.create({parent:s||i,providers:a})}_removeOpenDialog(n,r){let o=this.openDialogs.indexOf(n);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(n){if(n.parentElement){let r=n.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==n&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _C(e,t){let n=e.length;for(;n--;)t(e[n])}var mZ=["videoPlayer"],Ey=class e{dialogRef=O(hl);data=O(EC);videoPlayer=Tn("videoPlayer");videoElement;constructor(){_t(()=>{console.log("video player",this.videoPlayer()),console.log("dialog data",this.data),this.videoElement=this.videoPlayer()?.nativeElement,this.videoElement.src=this.data.getRecordingUrl()})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-video-editor"]],viewQuery:function(n,r){n&1&&fn(r.videoPlayer,mZ,5),n&2&&ar()},decls:5,vars:0,consts:[["videoPlayer",""],["controls",""],[1,"timeline"],[1,"thumb","start"],[1,"thumb","end"]],template:function(n,r){n&1&&(et(0,"video",1,0),Je(2,"div",2),et(3,"div",3)(4,"div",4),st())},styles:["[_nghost-%COMP%]{display:block;background:#222;width:100%;height:100%}video[_ngcontent-%COMP%]{width:100%;height:auto}.timeline[_ngcontent-%COMP%]{position:relative;height:50px;background:#333;margin-top:10px}.thumb[_ngcontent-%COMP%]{position:absolute;top:0;width:10px;height:100%;background:#666;cursor:ew-resize}.thumb.start[_ngcontent-%COMP%]{left:0}.thumb.end[_ngcontent-%COMP%]{right:0}"]})};var Sy=class e{dialog=O(e$);open(t){let n=this.dialog.open(Ey,{height:"600px",width:"800px",panelClass:"editor-dialog",data:t})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})};var xy=no(document,"pointermove").pipe(_r()),Ty=no(document,"pointerup").pipe(_r());function t$(e,t=new Nt(!1)){let n=no(e,"pointerdown").pipe(At(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Mt(a=>{!(a.target instanceof HTMLInputElement)&&t.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),we(a=>{let l=e.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:e}}),_r()),r=n.pipe(qe(a=>xy.pipe(we(l=>fe(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),kn(1)).pipe(sn(Ty))),_r()),o=r.pipe(qe(a=>xy.pipe(we(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Ty))),_r()),i=r.pipe(qe(a=>xy.pipe(oo(a),we(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Ty),Ui()))),s=n.pipe(qe(a=>Ty.pipe(sn(xy))));return{dragStart$:t.pipe(qe(a=>a?ro:r)),dragMove$:t.pipe(qe(a=>a?ro:o)),dragEnd$:t.pipe(qe(a=>a?ro:i)),click$:t.pipe(qe(a=>a?ro:s))}}var n$=["*"];function gZ(e,t){e&1&&(ae(0,"div",2)(1,"div",3),Sa(2),ce()())}function yZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",1),st())}function vZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",2),st())}function bZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",3),st())}function wZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",4),st())}function _Z(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",5),st())}function EZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",6),st())}function SZ(e,t){e&1&&(ln(),Je(0,"svg",0),et(1,"path",7),st())}function xZ(e,t){if(e&1&&(ae(0,"div",0)(1,"span"),Ze(2),ce()()),e&2){let n=dt();le(2),Ql(n.prefix())}}function TZ(e,t){if(e&1&&(Ze(0),ae(1,"div",0),Zn(2,"ed-icon",2),ce()),e&2){let n=dt();Ta(" ",n.suffixIcon()," "),le(2),Rn("icon",n.prefixIcon())}}function IZ(e,t){if(e&1&&(ae(0,"div",0)(1,"span"),Ze(2),ce()()),e&2){let n=dt();le(2),Ql(n.suffix())}}function CZ(e,t){if(e&1&&(ae(0,"div",0),Zn(1,"ed-icon",2),ce()),e&2){let n=dt();le(),Rn("icon",n.prefixIcon())}}var r$=(()=>{class e{value=mn("#ff0000");writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){this.onTouched=n}onChange=()=>{};onTouched=()=>{};static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["color"]],inputs:{value:[1,"value"]},outputs:{value:"valueChange"},features:[zr([{provide:ls,useExisting:sr(()=>e),multi:!0}])],decls:4,vars:4,consts:[["type","color",3,"ngModelChange","ngModel"],[1,"color-icon"],["type","text",3,"ngModelChange","ngModel"]],template:function(r,o){r&1&&(ae(0,"label")(1,"input",0),hn("ngModelChange",function(s){return xn(o.value,s)||(o.value=s),s}),ce(),Zn(2,"div",1),ae(3,"input",2),hn("ngModelChange",function(s){return xn(o.value,s)||(o.value=s),s}),ce()()),r&2&&(le(),pn("ngModel",o.value),le(),lr("background-color",o.value()),le(),pn("ngModel",o.value))},dependencies:[ka,Ma,Td,gc],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box;color:var(--form-item-color)}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}input[_ngcontent-%COMP%]{background:transparent;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[type=color][_ngcontent-%COMP%]{-webkit-appearance:none;padding:0;border:none}label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;height:1.5rem}label[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{visibility:hidden;width:1px;height:1px}label[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:.3125rem;border:solid 1px var(--form-border)}"],changeDetection:0})}return e})(),Iy=(()=>{class e{value=Ot();select=O(SC);elementRef=O(ut);onSelect(){console.log("option selected",this.value()),this.select.selected.set(this.value())}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ed-select-option"]],hostVars:2,hostBindings:function(r,o){r&1&&Jt("click",function(){return o.onSelect()}),r&2&&xa("selected",o.select.selected()===o.value)},inputs:{value:[1,"value"]},ngContentSelectors:n$,decls:1,vars:0,template:function(r,o){r&1&&(Ea(),Sa(0))},styles:["[_nghost-%COMP%]{display:block;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color);padding:5px 10px;border-radius:.3125rem;cursor:pointer}[_nghost-%COMP%]:hover{background:#0f8be8}"]})}return e})(),SC=(()=>{class e{selected=mn();options=LM(Iy);contentTemplate=Tn(sy);writeValue(n){this.selected.set(n)}registerOnChange(n){this.selected.subscribe(n)}registerOnTouched(n){this.onTouched=n}onTouched=()=>{};overlayRef=null;elementRef=O(ut);change=Jl();overlay=O(wC);label=Vo(()=>{let n=this.selected();return n||"Select..."});selectedOption=Vo(()=>this.options().find(n=>n.value===this.selected()));constructor(){wi(()=>{let n=this.selected();this.change.emit(n?n.value:null),this.hide()})}toggleDropdown(){this.showDropdown()}showDropdown(){this.overlayRef=this.overlay.create(this.getOverlayConfig()),this.overlayRef.attach(this.contentTemplate()),this.overlayRef.backdropClick().subscribe(()=>this.hide())}hide(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}getOverlayConfig(){let n=this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPush(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]),r=this.overlay.scrollStrategies.reposition();return new ks({positionStrategy:n,scrollStrategy:r,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop"})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ed-select"]],contentQueries:function(r,o,i){r&1&&Vw(i,o.options,Iy,4),r&2&&ar()},viewQuery:function(r,o){r&1&&fn(o.contentTemplate,sy,5),r&2&&ar()},inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange",change:"change"},features:[zr([{provide:ls,useExisting:sr(()=>e),multi:!0}])],ngContentSelectors:n$,decls:4,vars:1,consts:[[1,"custom-select",3,"click"],["cdk-portal","","cdkPortal","",1,"dropdown"],[1,"custom-dropdown-menu",2,"width","100%"],[1,"dropdown-options-container"]],template:function(r,o){r&1&&(Ea(),ae(0,"label",0),Jt("click",function(){return o.toggleDropdown()}),ae(1,"span"),Ze(2),ce()(),Zl(3,gZ,3,0,"ng-template",1)),r&2&&(le(2),Ql(o.label()))},dependencies:[sy],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px #444444;padding-left:6px;padding-right:6px;box-sizing:border-box;cursor:pointer}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}label[_ngcontent-%COMP%]{display:flex;gap:5px;height:1.5rem;align-items:center;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}.custom-dropdown-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#1e1e1e;box-shadow:0 10px 16px #00000059,0 2px 5px #00000059,inset 0 .5px #ffffff14,inset 0 0 .5px #ffffff59;padding:.5rem;border-radius:.8125rem;min-width:150px;z-index:1000}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e1e1e;text-align:left;border-radius:3px;line-height:24px;height:auto}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0f8be8}"],changeDetection:0})}return e})();var DZ=(()=>{class e{icon=Ot();static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["ed-icon"]],inputs:{icon:[1,"icon"]},decls:7,vars:1,consts:[["width","24","height","24","fill","none","viewBox","0 0 24 24"],["fill","#c3c3c3","fill-rule","evenodd","d","M8.9 6h-.02c-.403 0-.735 0-1.006.022-.28.023-.54.072-.782.196a2 2 0 0 0-.874.874c-.124.243-.173.501-.196.782C6 8.144 6 8.477 6 8.88v.62a.5.5 0 0 0 1 0v-.6c0-.428 0-.72.019-.944.018-.22.05-.332.09-.41a1 1 0 0 1 .437-.437c.078-.04.19-.072.41-.09C8.18 7 8.472 7 8.9 7h.6a.5.5 0 0 0 0-1zm6.2 0h.02c.403 0 .735 0 1.006.022.281.023.54.072.782.196a2 2 0 0 1 .874.874c.124.243.173.501.196.782.022.27.022.603.022 1.005V9.5a.5.5 0 0 1-1 0v-.6c0-.428 0-.72-.019-.944-.018-.22-.05-.332-.09-.41a1 1 0 0 0-.437-.437c-.078-.04-.19-.072-.41-.09A13 13 0 0 0 15.1 7h-.6a.5.5 0 0 1 0-1zm.02 12h-.62a.5.5 0 0 1 0-1h.6c.428 0 .72 0 .944-.019.22-.018.332-.05.41-.09a1 1 0 0 0 .437-.437c.04-.078.072-.19.09-.41.019-.225.019-.516.019-.944v-.6a.5.5 0 0 1 1 0v.62c0 .403 0 .735-.022 1.006-.023.281-.072.54-.196.782a2 2 0 0 1-.874.874c-.243.124-.501.173-.782.196-.27.022-.603.022-1.005.022M8.9 18h-.02c-.403 0-.735 0-1.006-.022-.281-.023-.54-.072-.782-.196a2 2 0 0 1-.874-.874c-.124-.243-.173-.501-.196-.782A13 13 0 0 1 6 15.12v-.62a.5.5 0 0 1 1 0v.6c0 .428 0 .72.019.944.018.22.05.332.09.41a1 1 0 0 0 .437.437c.078.04.19.072.41.09.225.019.516.019.944.019h.6a.5.5 0 0 1 0 1z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M4.886 3.21a1 1 0 0 1 .812-.19l7.698 1.56.338.076a7.67 7.67 0 0 1 5.806 7.266v.346l-.008.329 1.197 1.197a1 1 0 0 1 0 1.414l-5.523 5.522a1 1 0 0 1-1.413 0l-1.198-1.197-.328.008a7.67 7.67 0 0 1-7.612-5.806l-.077-.338L3.02 5.7a1 1 0 0 1 .274-.906l1.5-1.5zm.674 9.99a6.666 6.666 0 0 0 6.383 5.342h.3l.756-.018 1.5 1.5 5.523-5.522-1.5-1.5.018-.756a6.67 6.67 0 0 0-5.048-6.619l-.295-.066L5.5 4l-.396.397 5.16 5.16A3 3 0 0 1 12 9.001 3.001 3.001 0 0 1 12 15a3 3 0 0 1-2.444-4.737l-5.16-5.16L4 5.5zM12 10.001a2 2 0 0 0-2 2l.01.204a2 2 0 0 0 1.786 1.785L12 14a2 2 0 0 0 1.989-1.795l.01-.204a2 2 0 0 0-1.795-1.99z"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M18 5H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M6 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M19.5 4a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V5h-6.5v14H15a.5.5 0 0 1 0 1H9a.5.5 0 0 1 0-1h2.5V5H5v2.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5z"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zm2.725 5.582a.5.5 0 0 1 .629.064l6.5 6.5a.5.5 0 1 1-.707.707L9 11.708l-2.146 2.146a.5.5 0 1 1-.708-.707l2.5-2.5zM14.5 7a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M9 8.5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1H13a4 4 0 0 0-4-4zM9 12v3h3a3 3 0 0 0-3-3","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M6 6.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5M7 10v1h10v-1zm-.25-1a.75.75 0 0 0-.75.75v1.5c0 .414.336.75.75.75h10.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 0-.75-.75zM7 17v-2h10v2zm-1-2.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75z","clip-rule","evenodd"]],template:function(r,o){r&1&&un(0,yZ,2,0,":svg:svg",0)(1,vZ,2,0,":svg:svg",0)(2,bZ,2,0,":svg:svg",0)(3,wZ,2,0,":svg:svg",0)(4,_Z,2,0,":svg:svg",0)(5,EZ,2,0,":svg:svg",0)(6,SZ,2,0,":svg:svg",0),r&2&&dn(o.icon()==="iconRadius"?0:o.icon()==="pen"?1:o.icon()==="container"?2:o.icon()==="text"?3:o.icon()==="image"?4:o.icon()==="rotate"?5:o.icon()==="strokeWeight"?6:-1)},styles:["[_nghost-%COMP%]{display:inline-flex}"],changeDetection:0})}return e})(),o$=(()=>{class e{prefixIcon=Ot();suffixIcon=Ot();el=O(ut);writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){}value=mn("");type=Ot("text");prefix=Ot("");suffix=Ot("");constructor(){_t(()=>{this.initDrag()})}initDrag(){let{dragStart$:n,dragMove$:r,dragEnd$:o}=t$(this.el.nativeElement),i=this.value();n.subscribe(s=>{i=this.value()}),r.subscribe(s=>{this.value.set(Math.round(i+s.deltaX))})}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Xe({type:e,selectors:[["input-component"]],inputs:{prefixIcon:[1,"prefixIcon"],suffixIcon:[1,"suffixIcon"],value:[1,"value"],type:[1,"type"],prefix:[1,"prefix"],suffix:[1,"suffix"]},outputs:{value:"valueChange"},features:[zr([{provide:ls,useExisting:sr(()=>e),multi:!0}])],decls:7,vars:6,consts:[[1,"icon"],[3,"ngModelChange","ngModel"],[3,"icon"]],template:function(r,o){r&1&&(ae(0,"label"),un(1,xZ,3,1,"div",0),un(2,TZ,3,2),ae(3,"div")(4,"input",1),hn("ngModelChange",function(s){return xn(o.value,s)||(o.value=s),s}),ce()(),un(5,IZ,3,1,"div",0),un(6,CZ,2,1,"div",0),ce()),r&2&&(le(),dn(o.prefix()&&o.prefix()!==""?1:-1),le(),dn(o.prefixIcon()?2:-1),le(2),pn("ngModel",o.value),cn("type",o.type()),le(),dn(o.suffix()&&o.suffix()!==""?5:-1),le(),dn(o.suffixIcon()?6:-1))},dependencies:[ka,Ma,Td,gc,DZ],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}label[_ngcontent-%COMP%]{display:flex;gap:3px;height:1.5rem;align-items:center;padding-left:.3rem;padding-right:.3rem}.icon[_ngcontent-%COMP%]{display:flex;align-items:center;width:24px;height:24px;line-height:24px;justify-content:center;color:var(--form-item-color-secondary);font-family:var(--font-family)}input[_ngcontent-%COMP%]{background:transparent;width:100%;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}return e})();var NZ=["canvas"],Cy=class e{stream=Ot.required();canvas=Tn("canvas");canvasCtx=null;audioCtx;analyser;dataArray;bufferLength=0;width=Se(160);height=Se(20);constructor(){_t(()=>{let t=this.canvas()?.nativeElement;t&&(this.canvasCtx=t.getContext("2d"),this.prepare(),this.draw())})}prepare(){let t=this.stream();if(!t)return;this.audioCtx=new AudioContext,this.analyser=this.audioCtx.createAnalyser(),this.audioCtx.createMediaStreamSource(t).connect(this.analyser),this.analyser.connect(this.audioCtx.destination),this.analyser.fftSize=64,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-15,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength)}draw(){if(!this.analyser||!this.dataArray||!this.canvasCtx)return;let t=requestAnimationFrame(this.draw.bind(this));this.canvasCtx.fillStyle="rgb(0, 0, 0)",this.canvasCtx.fillRect(0,0,this.width(),this.height()),this.canvasCtx.lineTo(this.width(),this.height()/2),this.canvasCtx.stroke(),this.analyser.getByteFrequencyData(this.dataArray);let n=this.width()/this.bufferLength;console.log("barWidth",n);for(let r=0;r<this.bufferLength;r++){let o=r*n,i=(1-this.dataArray[r]/255)*this.height();console.log("bar",r,o,i),this.canvasCtx.fillStyle=`rgb(${i+100} 50 50)`,this.canvasCtx.fillRect(o,i,n,this.height()-i)}}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-audio-visualizer"]],viewQuery:function(n,r){n&1&&fn(r.canvas,NZ,5),n&2&&ar()},inputs:{stream:[1,"stream"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&et(0,"canvas",null,0),n&2&&cn("width",r.width())("height",r.height())},styles:["[_nghost-%COMP%]{display:block}"]})};function AZ(e,t){if(e&1){let n=Cr();ae(0,"div",2)(1,"label"),Ze(2,"Border"),ce(),ae(3,"color",5),hn("ngModelChange",function(o){It(n),dt(2);let i=cr(13);return xn(i.borderColor,o)||(i.borderColor=o),Ct(o)}),ce(),ae(4,"input-component",13),hn("ngModelChange",function(o){It(n),dt(2);let i=cr(13);return xn(i.borderWidth,o)||(i.borderWidth=o),Ct(o)}),ce()()}if(e&2){dt(2);let n=cr(13);le(3),pn("ngModel",n.borderColor),le(),pn("ngModel",n.borderWidth)}}function MZ(e,t){if(e&1){let n=Cr();ae(0,"div",2)(1,"label"),Ze(2,"Blur"),ce(),ae(3,"input",14),hn("ngModelChange",function(o){It(n),dt(2);let i=cr(13);return xn(i.videoDO().blurAmount,o)||(i.videoDO().blurAmount=o),Ct(o)}),ce()(),ae(4,"div",2)(5,"label"),Ze(6,"Edge Blur"),ce(),ae(7,"input",14),hn("ngModelChange",function(o){It(n),dt(2);let i=cr(13);return xn(i.videoDO().edgeBlurAmount,o)||(i.videoDO().edgeBlurAmount=o),Ct(o)}),ce()(),ae(8,"div",2)(9,"label"),Ze(10,"FG. Thr."),ce(),ae(11,"input",15),hn("ngModelChange",function(o){It(n),dt(2);let i=cr(13);return xn(i.videoDO().foregroundThreshold,o)||(i.videoDO().foregroundThreshold=o),Ct(o)}),ce()()}if(e&2){dt(2);let n=cr(13);le(3),Rn("min",0),pn("ngModel",n.videoDO().blurAmount),le(4),Rn("min",0),pn("ngModel",n.videoDO().edgeBlurAmount),le(4),Rn("min",0),pn("ngModel",n.videoDO().foregroundThreshold)}}function kZ(e,t){if(e&1){let n=Cr();ae(0,"div",1)(1,"h2"),Ze(2,"Clipping"),ce()(),ae(3,"div",2)(4,"label"),Ze(5,"Type"),ce(),ae(6,"ed-select",5),hn("ngModelChange",function(o){It(n),dt();let i=cr(13);return xn(i.clipType,o)||(i.clipType=o),Ct(o)}),ae(7,"ed-select-option",6),Ze(8,"None"),ce(),ae(9,"ed-select-option",7),Ze(10,"Circle"),ce(),ae(11,"ed-select-option",8),Ze(12,"Rectangle"),ce()()(),un(13,AZ,5,2,"div",2),ae(14,"div",1)(15,"h2"),Ze(16,"Background"),ce()(),ae(17,"div",2)(18,"label"),Ze(19,"Type"),ce(),ae(20,"ed-select",5),hn("ngModelChange",function(o){It(n),dt();let i=cr(13);return xn(i.videoDO().backgroundType,o)||(i.videoDO().backgroundType=o),Ct(o)}),ae(21,"ed-select-option",6),Ze(22,"None"),ce(),ae(23,"ed-select-option",9),Ze(24,"Blur"),ce(),ae(25,"ed-select-option",10),Ze(26,"Image"),ce()()(),un(27,MZ,12,6),ae(28,"div",2)(29,"button",11),Jt("click",function(){It(n);let o=dt(),i=cr(13);return Ct(o.recordingService.bringToFront(i.videoDO()))}),Ze(30," Bring to Front "),ce()(),ae(31,"input",12),hn("ngModelChange",function(o){It(n),dt();let i=cr(13);return xn(i.showClippedHint,o)||(i.showClippedHint=o),Ct(o)}),ce()}if(e&2){dt();let n=cr(13);le(6),pn("ngModel",n.clipType),le(7),dn(n.clipType()!=="none"?13:-1),le(7),pn("ngModel",n.videoDO().backgroundType),le(7),dn(n.videoDO().backgroundType()==="blur"?27:-1),le(4),pn("ngModel",n.showClippedHint)}}function OZ(e,t){if(e&1){let n=Cr();ae(0,"div"),Ze(1),ae(2,"button",11),Jt("click",function(){let o=It(n).$implicit;return Ct(o.convertRecording())}),Ze(3,"Convert"),ce(),ae(4,"button",11),Jt("click",function(){let o=It(n).$implicit;return Ct(o.download())}),Ze(5,"Download"),ce(),ae(6,"button",11),Jt("click",function(){let o=It(n).$implicit,i=dt();return Ct(i.editorService.open(o))}),Ze(7,"Edit"),ce()()}if(e&2){let n=t.$implicit;le(),Ta(" ",n.name," ")}}function RZ(e,t){if(e&1&&(Ze(0," audio "),Zn(1,"app-audio-visualizer",16)),e&2){let n=t.$implicit;le(),Rn("stream",n.stream)}}var Dy=class e{settings=O(As);recordingService=O(Ms);editorService=O(Sy);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-sidebar"]],decls:19,vars:5,consts:[[1,"properties-panel"],[1,"properties-panel_header"],[1,"properties-panel_row"],["prefix","W",3,"ngModelChange","ngModel"],["prefix","H",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","none"],["value","circle"],["value","rectangle"],["value","blur"],["value","image"],[3,"click"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["type","range","max","50",3,"ngModelChange","min","ngModel"],["type","range","max","1","step","0.01",3,"ngModelChange","min","ngModel"],[3,"stream"]],template:function(n,r){if(n&1){let o=Cr();ae(0,"div",0)(1,"div",1)(2,"h2"),Ze(3,"Canvas"),ce()(),ae(4,"div",2)(5,"label"),Ze(6,"Size"),ce(),ae(7,"input-component",3),hn("ngModelChange",function(s){return It(o),xn(r.settings.recordingWidth,s)||(r.settings.recordingWidth=s),Ct(s)}),ce(),ae(8,"input-component",4),hn("ngModelChange",function(s){return It(o),xn(r.settings.recordingHeight,s)||(r.settings.recordingHeight=s),Ct(s)}),ce()(),ae(9,"div",2)(10,"label"),Ze(11,"BG Color"),ce(),ae(12,"color",5),hn("ngModelChange",function(s){return It(o),xn(r.settings.backgroundColor,s)||(r.settings.backgroundColor=s),Ct(s)}),ce()(),Wh(13),un(14,kZ,32,5),ce(),wa(15,OZ,8,1,"div",null,Gu),wa(17,RZ,2,1,null,null,Gu)}if(n&2){le(7),pn("ngModel",r.settings.recordingWidth),le(),pn("ngModel",r.settings.recordingHeight),le(4),pn("ngModel",r.settings.backgroundColor),le();let o=jw(r.settings.selectedVideo());le(),dn(o?14:-1),le(),_a(r.recordingService.recordings()),le(2),_a(r.recordingService.audioSources())}},dependencies:[ka,Ma,Y_,q_,Td,gc,o$,r$,SC,Iy,Cy],styles:["[_nghost-%COMP%]{display:block;width:280px;background:#181818;flex-shrink:0;border-left:solid 1px #484848}.properties-panel_row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap;min-width:50px}"]})};function PZ(e,t){e&1&&(ln(),Je(0,"svg",2),et(1,"rect",11),st())}function FZ(e,t){e&1&&(ln(),Je(0,"svg",3)(1,"g",12),et(2,"circle",13),st(),Je(3,"defs")(4,"filter",14),et(5,"feFlood",15)(6,"feBlend",16)(7,"feColorMatrix",17)(8,"feOffset",18)(9,"feGaussianBlur",19)(10,"feComposite",20)(11,"feColorMatrix",21)(12,"feBlend",22),st()()())}var Ny=class e{recordingService=O(Ms);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-controls"]],decls:15,vars:1,consts:[[2,"display","flex","align-items","center","gap","10px"],[1,"btn",3,"click"],["width","21","height","21","viewBox","0 0 21 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","19","height","19","viewBox","0 0 19 19","fill","none","xmlns","http://www.w3.org/2000/svg"],[1,"btn-small",3,"click"],["width","24px","height","24px","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","13","r","3","stroke","#fff","stroke-width","1.5"],["d","M2 13.3636C2 10.2994 2 8.76721 2.74902 7.6666C3.07328 7.19014 3.48995 6.78104 3.97524 6.46268C4.69555 5.99013 5.59733 5.82123 6.978 5.76086C7.63685 5.76086 8.20412 5.27068 8.33333 4.63636C8.52715 3.68489 9.37805 3 10.3663 3H13.6337C14.6219 3 15.4728 3.68489 15.6667 4.63636C15.7959 5.27068 16.3631 5.76086 17.022 5.76086C18.4027 5.82123 19.3044 5.99013 20.0248 6.46268C20.51 6.78104 20.9267 7.19014 21.251 7.6666C22 8.76721 22 10.2994 22 13.3636C22 16.4279 22 17.9601 21.251 19.0607C20.9267 19.5371 20.51 19.9462 20.0248 20.2646C18.9038 21 17.3433 21 14.2222 21H9.77778C6.65675 21 5.09624 21 3.97524 20.2646C3.48995 19.9462 3.07328 19.5371 2.74902 19.0607C2.53746 18.7498 2.38566 18.4045 2.27673 18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M19 10H18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M12 20.5H16M12 20.5H8M12 20.5V16.5M12 16.5C16 16.5 19.5 16.1667 20 15.8333C20.5 15.5 21 12.6667 21 10C21 7.33333 20.5 4.5 20 4.16667C19.5 3.83333 16 3.5 12 3.5C8 3.5 4.5 3.83333 4 4.16667C3.5 4.5 3 7.33333 3 10C3 12.6667 3.5 15.5 4 15.8333C4.5 16.1667 8 16.5 12 16.5Z","stroke","#fff","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z","stroke","#fff","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["width","21","height","21","rx","5","fill","#D9D9D9"],["filter","url(#filter0_i_2_5)"],["cx","9.5","cy","9.5","r","9.5","fill","#FE3030"],["id","filter0_i_2_5","x","0","y","0","width","19","height","21","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["mode","normal","in","SourceGraphic","in2","BackgroundImageFix","result","shape"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","2"],["stdDeviation","1"],["in2","hardAlpha","operator","arithmetic","k2","-1","k3","1"],["type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"],["mode","normal","in2","shape","result","effect1_innerShadow_2_5"]],template:function(n,r){n&1&&(Je(0,"div",0)(1,"div",1),bi("click",function(){return r.recordingService.isRecording()?r.recordingService.stopRecording():r.recordingService.startRecording()}),un(2,PZ,2,0,":svg:svg",2)(3,FZ,13,0,":svg:svg",3),st(),Je(4,"div",4),bi("click",function(){return r.recordingService.getWebcamDevices()}),ln(),Je(5,"svg",5),et(6,"circle",6)(7,"path",7)(8,"path",8),st()(),Cu(),Je(9,"div",4),bi("click",function(){return r.recordingService.getDesktopStream()}),ln(),Je(10,"svg",5),et(11,"path",9),st()(),Cu(),Je(12,"div",4),bi("click",function(){return r.recordingService.getAudioStream()}),ln(),Je(13,"svg",5),et(14,"path",10),st()()()),n&2&&(le(2),dn(r.recordingService.isRecording()?2:3))},styles:['[_nghost-%COMP%]{width:100%;height:100px;z-index:1000;background:#181818;border-top:solid 1px #484848;display:flex;align-items:center;justify-items:center;justify-content:center}.btn[_ngcontent-%COMP%]{position:relative;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-items:center;justify-content:center;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(360deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:50%;z-index:-1;background:linear-gradient(202.15deg,#646361 -9.36%,#242424 58.02%)}.btn-small[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:10px;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn-small[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:10px;z-index:-1;background:linear-gradient(223deg,#646361 -9.36%,#242424 58.02%);transition:all .3s}.btn-small[_ngcontent-%COMP%]:hover:before{background:linear-gradient(43deg,#646361 -9.36%,#242424 58.02%)}']})};var LZ=(e,t)=>t.id;function $Z(e,t){if(e&1){let n=Cr();ae(0,"app-video",10,1),Jt("selected",function(o){It(n);let i=dt();return Ct(i.settings.setSelectedVideo(o))}),ce()}if(e&2){let n=t.$implicit,r=dt();Rn("scale",r.settings.scale())("width",r.settings.recordingWidth())("srcObject",n.stream)("videoDO",n)}}function VZ(e,t){if(e&1&&(ae(0,"h3"),Ze(1,"Playback"),ce(),Zn(2,"video",11,2)),e&2){let n=dt();le(2),Rn("src",n.currentVideo(),mw)}}var Ay=class e{title=Se("demo");videoService=O(Kc);recordingService=O(Ms);currentVideo=Se(null);settings=O(As);canvasComponent=Tn(qc);downloadData=null;constructor(){_t(()=>{console.log("canvas component",this.canvasComponent()),this.recordingService.canvasComponent=this.canvasComponent()})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Xe({type:e,selectors:[["app-root"]],viewQuery:function(n,r){n&1&&fn(r.canvasComponent,qc,5),n&2&&ar()},decls:12,vars:11,consts:[["canvasComponent",""],["screenVideo",""],["playbackVideo",""],[2,"display","flex","width","100%","height","100%","overflow","hidden"],[2,"display","flex","flex-direction","column","width","100%","overflow","hidden","height","100%"],[2,"padding","40px","background","#222","overflow","hidden","flex","1","display","flex","align-items","center","justify-content","center"],[2,"width","100%",3,"scaleChange","background","contentWidth","contentHeight"],[3,"scale","width","srcObject","videoDO"],[2,"width","100%","display","none",3,"background","contentWidth","contentHeight"],[3,"background","canvasHeight","canvasWidth","videos"],[3,"selected","scale","width","srcObject","videoDO"],["controls","",3,"src"]],template:function(n,r){if(n&1){let o=Cr();ae(0,"div",3)(1,"div",4)(2,"div",5)(3,"app-editor",6),Jt("scaleChange",function(s){return It(o),Ct(r.settings.scale.set(s))}),wa(4,$Z,2,4,"app-video",7,LZ),ce()(),Zn(6,"app-controls"),ce(),Zn(7,"app-sidebar"),ce(),un(8,VZ,4,1),ae(9,"app-editor",8),Zn(10,"app-canvas",9,0),ce()}n&2&&(le(3),Rn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),le(),_a(r.recordingService.videos()),le(4),dn(r.currentVideo()?8:-1),le(),Rn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),le(),Rn("background",r.settings.backgroundColor())("canvasHeight",r.settings.recordingHeight())("canvasWidth",r.settings.recordingWidth())("videos",r.recordingService.videos()))},dependencies:[ka,ey,qc,ty,Dy,Ny],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background:#121212;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;box-sizing:border-box}"]})};i_(Ay,qk).catch(e=>console.error(e));
