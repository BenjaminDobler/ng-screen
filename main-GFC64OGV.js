var Q$=Object.create;var op=Object.defineProperty,J$=Object.defineProperties,eV=Object.getOwnPropertyDescriptor,tV=Object.getOwnPropertyDescriptors,nV=Object.getOwnPropertyNames,rp=Object.getOwnPropertySymbols,rV=Object.getPrototypeOf,Qy=Object.prototype.hasOwnProperty,bD=Object.prototype.propertyIsEnumerable;var vD=(t,e,n)=>e in t?op(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||={})Qy.call(e,n)&&vD(t,n,e[n]);if(rp)for(var n of rp(e))bD.call(e,n)&&vD(t,n,e[n]);return t},ce=(t,e)=>J$(t,tV(e));var wD=(t,e)=>{var n={};for(var r in t)Qy.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rp)for(var r of rp(t))e.indexOf(r)<0&&bD.call(t,r)&&(n[r]=t[r]);return n};var br=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),He=(t,e)=>{for(var n in e)op(t,n,{get:e[n],enumerable:!0})},oV=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nV(e))!Qy.call(t,o)&&o!==n&&op(t,o,{get:()=>e[o],enumerable:!(r=eV(e,o))||r.enumerable});return t};var Jy=(t,e,n)=>(n=t!=null?Q$(rV(t)):{},oV(e||!t||!t.__esModule?op(n,"default",{value:t,enumerable:!0}):n,t));var KO=br((fme,qO)=>{"use strict";qO.exports=mt;var Wr=null;try{Wr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function mt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}mt.prototype.__isLong__;Object.defineProperty(mt.prototype,"__isLong__",{value:!0});function fr(t){return(t&&t.__isLong__)===!0}mt.isLong=fr;var $O={},VO={};function Va(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=VO[t],r)?r:(n=gt(t,(t|0)<0?-1:0,!0),o&&(VO[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=$O[t],r)?r:(n=gt(t,t<0?-1:0,!1),o&&($O[t]=n),n))}mt.fromInt=Va;function qr(t,e){if(isNaN(t))return e?$a:Kr;if(e){if(t<0)return $a;if(t>=UO)return WO}else{if(t<=-BO)return dr;if(t+1>=BO)return GO}return t<0?qr(-t,e).neg():gt(t%Ic|0,t/Ic|0,e)}mt.fromNumber=qr;function gt(t,e,n){return new mt(t,e,n)}mt.fromBits=gt;var Vm=Math.pow;function MS(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Kr;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return MS(t.substring(1),e,n).neg();for(var o=qr(Vm(n,8)),i=Kr,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),n);if(a<8){var c=qr(Vm(n,a));i=i.mul(c).add(qr(l))}else i=i.mul(o),i=i.add(qr(l))}return i.unsigned=e,i}mt.fromString=MS;function go(t,e){return typeof t=="number"?qr(t,e):typeof t=="string"?MS(t,e):gt(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}mt.fromValue=go;var jO=65536,JG=1<<24,Ic=jO*jO,UO=Ic*Ic,BO=UO/2,HO=Va(JG),Kr=Va(0);mt.ZERO=Kr;var $a=Va(0,!0);mt.UZERO=$a;var Tc=Va(1);mt.ONE=Tc;var zO=Va(1,!0);mt.UONE=zO;var AS=Va(-1);mt.NEG_ONE=AS;var GO=gt(-1,2147483647,!1);mt.MAX_VALUE=GO;var WO=gt(-1,-1,!0);mt.MAX_UNSIGNED_VALUE=WO;var dr=gt(0,-2147483648,!1);mt.MIN_VALUE=dr;var X=mt.prototype;X.toInt=function(){return this.unsigned?this.low>>>0:this.low};X.toNumber=function(){return this.unsigned?(this.high>>>0)*Ic+(this.low>>>0):this.high*Ic+(this.low>>>0)};X.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(dr)){var n=qr(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=qr(Vm(e,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};X.getHighBits=function(){return this.high};X.getHighBitsUnsigned=function(){return this.high>>>0};X.getLowBits=function(){return this.low};X.getLowBitsUnsigned=function(){return this.low>>>0};X.getNumBitsAbs=function(){if(this.isNegative())return this.eq(dr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&(e&1<<n)==0;n--);return this.high!=0?n+33:n+1};X.isZero=function(){return this.high===0&&this.low===0};X.eqz=X.isZero;X.isNegative=function(){return!this.unsigned&&this.high<0};X.isPositive=function(){return this.unsigned||this.high>=0};X.isOdd=function(){return(this.low&1)===1};X.isEven=function(){return(this.low&1)===0};X.equals=function(e){return fr(e)||(e=go(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};X.eq=X.equals;X.notEquals=function(e){return!this.eq(e)};X.neq=X.notEquals;X.ne=X.notEquals;X.lessThan=function(e){return this.comp(e)<0};X.lt=X.lessThan;X.lessThanOrEqual=function(e){return this.comp(e)<=0};X.lte=X.lessThanOrEqual;X.le=X.lessThanOrEqual;X.greaterThan=function(e){return this.comp(e)>0};X.gt=X.greaterThan;X.greaterThanOrEqual=function(e){return this.comp(e)>=0};X.gte=X.greaterThanOrEqual;X.ge=X.greaterThanOrEqual;X.compare=function(e){if(fr(e)||(e=go(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};X.comp=X.compare;X.negate=function(){return!this.unsigned&&this.eq(dr)?dr:this.not().add(Tc)};X.neg=X.negate;X.add=function(e){fr(e)||(e=go(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,f=0,p=0,m=0;return m+=i+c,p+=m>>>16,m&=65535,p+=o+l,f+=p>>>16,p&=65535,f+=r+a,u+=f>>>16,f&=65535,u+=n+s,u&=65535,gt(p<<16|m,u<<16|f,this.unsigned)};X.subtract=function(e){return fr(e)||(e=go(e)),this.add(e.neg())};X.sub=X.subtract;X.multiply=function(e){if(this.isZero())return Kr;if(fr(e)||(e=go(e)),Wr){var n=Wr.mul(this.low,this.high,e.low,e.high);return gt(n,Wr.get_high(),this.unsigned)}if(e.isZero())return Kr;if(this.eq(dr))return e.isOdd()?dr:Kr;if(e.eq(dr))return this.isOdd()?dr:Kr;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(HO)&&e.lt(HO))return qr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,f=0,p=0,m=0,w=0;return w+=s*u,m+=w>>>16,w&=65535,m+=i*u,p+=m>>>16,m&=65535,m+=s*c,p+=m>>>16,m&=65535,p+=o*u,f+=p>>>16,p&=65535,p+=i*c,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u+o*c+i*l+s*a,f&=65535,gt(m<<16|w,f<<16|p,this.unsigned)};X.mul=X.multiply;X.divide=function(e){if(fr(e)||(e=go(e)),e.isZero())throw Error("division by zero");if(Wr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Wr.div_u:Wr.div_s)(this.low,this.high,e.low,e.high);return gt(n,Wr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?$a:Kr;var r,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return $a;if(e.gt(this.shru(1)))return zO;i=$a}else{if(this.eq(dr)){if(e.eq(Tc)||e.eq(AS))return dr;if(e.eq(dr))return Tc;var s=this.shr(1);return r=s.div(e).shl(1),r.eq(Kr)?e.isNegative()?Tc:AS:(o=this.sub(e.mul(r)),i=r.add(o.div(e)),i)}else if(e.eq(dr))return this.unsigned?$a:Kr;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Kr}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Vm(2,a-48),c=qr(r),u=c.mul(e);u.isNegative()||u.gt(o);)r-=l,c=qr(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Tc),i=i.add(c),o=o.sub(u)}return i};X.div=X.divide;X.modulo=function(e){if(fr(e)||(e=go(e)),Wr){var n=(this.unsigned?Wr.rem_u:Wr.rem_s)(this.low,this.high,e.low,e.high);return gt(n,Wr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};X.mod=X.modulo;X.rem=X.modulo;X.not=function(){return gt(~this.low,~this.high,this.unsigned)};X.and=function(e){return fr(e)||(e=go(e)),gt(this.low&e.low,this.high&e.high,this.unsigned)};X.or=function(e){return fr(e)||(e=go(e)),gt(this.low|e.low,this.high|e.high,this.unsigned)};X.xor=function(e){return fr(e)||(e=go(e)),gt(this.low^e.low,this.high^e.high,this.unsigned)};X.shiftLeft=function(e){return fr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gt(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):gt(0,this.low<<e-32,this.unsigned)};X.shl=X.shiftLeft;X.shiftRight=function(e){return fr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gt(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):gt(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};X.shr=X.shiftRight;X.shiftRightUnsigned=function(e){if(fr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return gt(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?gt(n,0,this.unsigned):gt(n>>>e-32,0,this.unsigned)};X.shru=X.shiftRightUnsigned;X.shr_u=X.shiftRightUnsigned;X.toSigned=function(){return this.unsigned?gt(this.low,this.high,!1):this};X.toUnsigned=function(){return this.unsigned?this:gt(this.low,this.high,!0)};X.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};X.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};X.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};mt.fromBytes=function(e,n,r){return r?mt.fromBytesLE(e,n):mt.fromBytesBE(e,n)};mt.fromBytesLE=function(e,n){return new mt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};mt.fromBytesBE=function(e,n){return new mt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)}});var $R=br((Oc,LR)=>{"use strict";var QW=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},qa=QW();LR.exports=Oc=qa.fetch;qa.fetch&&(Oc.default=qa.fetch.bind(qa));Oc.Headers=qa.Headers;Oc.Request=qa.Request;Oc.Response=qa.Response});var VR=br(()=>{"use strict"});var QR=br((ZR,vT)=>{"use strict";(function(t,e,n){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var f=.02519603282416938*a;a=f>>>0,f-=a,f*=a,a=f>>>0,f-=a,a+=f*4294967296}return(a>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(ZR,typeof vT=="object"&&vT,typeof define=="function"&&define)});var eP=br((JR,bT)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(JR,typeof bT=="object"&&bT,typeof define=="function"&&define)});var nP=br((tP,wT)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(tP,typeof wT=="object"&&wT,typeof define=="function"&&define)});var oP=br((rP,_T)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,f,p,m;return f=c[u],f^=f>>>7,p=f^f<<24,f=c[u+1&7],p^=f^f>>>10,f=c[u+3&7],p^=f^f>>>3,f=c[u+4&7],p^=f^f<<7,f=c[u+7&7],f=f^f<<13,p^=f^f<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var f,p,m=[];if(u===(u|0))p=m[0]=u;else for(u=""+u,f=0;f<u.length;++f)m[f&7]=m[f&7]<<15^u.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?p=m[7]=-1:p=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(rP,typeof _T=="object"&&_T,typeof define=="function"&&define)});var sP=br((iP,ET)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,f=a.i,p,m;return a.w=c=c+1640531527|0,m=u[f+34&127],p=u[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=u[f]=m^p,a.i=f,m+(c^c>>>16)|0};function l(c,u){var f,p,m,w,x,T=[],D=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,D=Math.max(D,u.length)),m=0,w=-32;w<D;++w)u&&(p^=u.charCodeAt((w+32)%u.length)),w===0&&(x=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,w>=0&&(x=x+1640531527|0,f=T[w&127]^=p+x,m=f==0?m+1:0);for(m>=128&&(T[(u&&u.length||0)&127]=-1),m=127,w=512;w>0;--w)p=T[m+34&127],f=T[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,T[m]=p^f;c.w=x,c.X=T,c.i=m}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(iP,typeof ET=="object"&&ET,typeof define=="function"&&define)});var lP=br((aP,ST)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.next=function(){var u=a.b,f=a.c,p=a.d,m=a.a;return u=u<<25^u>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-u|0,a.b=u=u<<20^u>>>12^f,a.c=f=f-p|0,a.d=p<<16^f>>>16^m,a.a=m-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(aP,typeof ST=="object"&&ST,typeof define=="function"&&define)});var cP=br(()=>{"use strict"});var dP=br((uP,sg)=>{"use strict";(function(t,e,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),l=n.pow(2,i),c=l*2,u=r-1,f;function p(A,M,$){var L=[];M=M==!0?{entropy:!0}:M||{};var H=T(x(M.entropy?[A,P(e)]:A??D(),3),L),G=new m(L),W=function(){for(var K=G.g(o),U=a,ae=0;K<l;)K=(K+ae)*r,U*=r,ae=G.g(1);for(;K>=c;)K/=2,U/=2,ae>>>=1;return(K+ae)/U};return W.int32=function(){return G.g(4)|0},W.quick=function(){return G.g(4)/4294967296},W.double=W,T(P(G.S),e),(M.pass||$||function(K,U,ae,se){return se&&(se.S&&w(se,G),K.state=function(){return w(G,{})}),ae?(n[s]=K,U):K})(W,H,"global"in M?M.global:this==n,M.state)}function m(A){var M,$=A.length,L=this,H=0,G=L.i=L.j=0,W=L.S=[];for($||(A=[$++]);H<r;)W[H]=H++;for(H=0;H<r;H++)W[H]=W[G=u&G+A[H%$]+(M=W[H])],W[G]=M;(L.g=function(K){for(var U,ae=0,se=L.i,Oe=L.j,Le=L.S;K--;)U=Le[se=u&se+1],ae=ae*r+Le[u&(Le[se]=Le[Oe=u&Oe+U])+(Le[Oe]=U)];return L.i=se,L.j=Oe,ae})(r)}function w(A,M){return M.i=A.i,M.j=A.j,M.S=A.S.slice(),M}function x(A,M){var $=[],L=typeof A,H;if(M&&L=="object")for(H in A)try{$.push(x(A[H],M-1))}catch{}return $.length?$:L=="string"?A:A+"\0"}function T(A,M){for(var $=A+"",L,H=0;H<$.length;)M[u&H]=u&(L^=M[u&H]*19)+$.charCodeAt(H++);return P(M)}function D(){try{var A;return f&&(A=f.randomBytes)?A=A(r):(A=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(A)),P(A)}catch{var M=t.navigator,$=M&&M.plugins;return[+new Date,t,$,t.screen,P(e)]}}function P(A){return String.fromCharCode.apply(0,A)}if(T(n.random(),e),typeof sg=="object"&&sg.exports){sg.exports=p;try{f=cP()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+s]=p})(typeof self<"u"?self:uP,[],Math)});var pP=br((M1e,fP)=>{"use strict";var Bq=QR(),Hq=eP(),Uq=nP(),zq=oP(),Gq=sP(),Wq=lP(),el=dP();el.alea=Bq;el.xor128=Hq;el.xorwow=Uq;el.xorshift7=zq;el.xor4096=Gq;el.tychei=Wq;fP.exports=el});var MF=br(AF=>{"use strict";(function(){"use strict";var t;function e(d){var h=0;return function(){return h<d.length?{done:!1,value:d[h++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,h,v){return d==Array.prototype||d==Object.prototype||(d[h]=v.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<d.length;++h){var v=d[h];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=r(this);function i(d,h){if(h)e:{var v=o;d=d.split(".");for(var E=0;E<d.length-1;E++){var I=d[E];if(!(I in v))break e;v=v[I]}d=d[d.length-1],E=v[d],h=h(E),h!=E&&h!=null&&n(v,d,{configurable:!0,writable:!0,value:h})}}i("Symbol",function(d){function h(N){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new v(E+(N||"")+"_"+I++,N)}function v(N,C){this.h=N,n(this,"description",{configurable:!0,writable:!0,value:C})}if(d)return d;v.prototype.toString=function(){return this.h};var E="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",I=0;return h}),i("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<h.length;v++){var E=o[h[v]];typeof E=="function"&&typeof E.prototype[d]!="function"&&n(E.prototype,d,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return d});function s(d){return d={next:d},d[Symbol.iterator]=function(){return this},d}function a(d){var h=typeof Symbol<"u"&&Symbol.iterator&&d[Symbol.iterator];return h?h.call(d):{next:e(d)}}function l(d){if(!(d instanceof Array)){d=a(d);for(var h,v=[];!(h=d.next()).done;)v.push(h.value);d=v}return d}var c=typeof Object.assign=="function"?Object.assign:function(d,h){for(var v=1;v<arguments.length;v++){var E=arguments[v];if(E)for(var I in E)Object.prototype.hasOwnProperty.call(E,I)&&(d[I]=E[I])}return d};i("Object.assign",function(d){return d||c});var u=typeof Object.create=="function"?Object.create:function(d){function h(){}return h.prototype=d,new h},f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var p;e:{var m={a:!0},w={};try{w.__proto__=m,p=w.a;break e}catch{}p=!1}f=p?function(d,h){if(d.__proto__=h,d.__proto__!==h)throw new TypeError(d+" is not extensible");return d}:null}var x=f;function T(d,h){if(d.prototype=u(h.prototype),d.prototype.constructor=d,x)x(d,h);else for(var v in h)if(v!="prototype")if(Object.defineProperties){var E=Object.getOwnPropertyDescriptor(h,v);E&&Object.defineProperty(d,v,E)}else d[v]=h[v];d.za=h.prototype}function D(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function P(d){if(d.m)throw new TypeError("Generator is already running");d.m=!0}D.prototype.u=function(d){this.i=d};function A(d,h){d.l={ma:h,na:!0},d.h=d.s||d.v}D.prototype.return=function(d){this.l={return:d},this.h=this.v};function M(d,h,v){return d.h=v,{value:h}}function $(d){this.h=new D,this.i=d}function L(d,h){P(d.h);var v=d.h.j;return v?H(d,"return"in v?v.return:function(E){return{value:E,done:!0}},h,d.h.return):(d.h.return(h),G(d))}function H(d,h,v,E){try{var I=h.call(d.h.j,v);if(!(I instanceof Object))throw new TypeError("Iterator result "+I+" is not an object");if(!I.done)return d.h.m=!1,I;var N=I.value}catch(C){return d.h.j=null,A(d.h,C),G(d)}return d.h.j=null,E.call(d.h,N),G(d)}function G(d){for(;d.h.h;)try{var h=d.i(d.h);if(h)return d.h.m=!1,{value:h.value,done:!1}}catch(v){d.h.i=void 0,A(d.h,v)}if(d.h.m=!1,d.h.l){if(h=d.h.l,d.h.l=null,h.na)throw h.ma;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function W(d){this.next=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.next,h,d.h.u):(d.h.u(h),h=G(d)),h},this.throw=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.throw,h,d.h.u):(A(d.h,h),h=G(d)),h},this.return=function(h){return L(d,h)},this[Symbol.iterator]=function(){return this}}function K(d){function h(E){return d.next(E)}function v(E){return d.throw(E)}return new Promise(function(E,I){function N(C){C.done?E(C.value):Promise.resolve(C.value).then(h,v).then(N,I)}N(d.next())})}function U(d){return K(new W(new $(d)))}i("Promise",function(d){function h(C){this.i=0,this.j=void 0,this.h=[],this.u=!1;var k=this.l();try{C(k.resolve,k.reject)}catch(F){k.reject(F)}}function v(){this.h=null}function E(C){return C instanceof h?C:new h(function(k){k(C)})}if(d)return d;v.prototype.i=function(C){if(this.h==null){this.h=[];var k=this;this.j(function(){k.m()})}this.h.push(C)};var I=o.setTimeout;v.prototype.j=function(C){I(C,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var C=this.h;this.h=[];for(var k=0;k<C.length;++k){var F=C[k];C[k]=null;try{F()}catch(z){this.l(z)}}}this.h=null},v.prototype.l=function(C){this.j(function(){throw C})},h.prototype.l=function(){function C(z){return function(Y){F||(F=!0,z.call(k,Y))}}var k=this,F=!1;return{resolve:C(this.I),reject:C(this.m)}},h.prototype.I=function(C){if(C===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(C instanceof h)this.L(C);else{e:switch(typeof C){case"object":var k=C!=null;break e;case"function":k=!0;break e;default:k=!1}k?this.F(C):this.s(C)}},h.prototype.F=function(C){var k=void 0;try{k=C.then}catch(F){this.m(F);return}typeof k=="function"?this.M(k,C):this.s(C)},h.prototype.m=function(C){this.v(2,C)},h.prototype.s=function(C){this.v(1,C)},h.prototype.v=function(C,k){if(this.i!=0)throw Error("Cannot settle("+C+", "+k+"): Promise already settled in state"+this.i);this.i=C,this.j=k,this.i===2&&this.K(),this.H()},h.prototype.K=function(){var C=this;I(function(){if(C.D()){var k=o.console;typeof k<"u"&&k.error(C.j)}},1)},h.prototype.D=function(){if(this.u)return!1;var C=o.CustomEvent,k=o.Event,F=o.dispatchEvent;return typeof F>"u"?!0:(typeof C=="function"?C=new C("unhandledrejection",{cancelable:!0}):typeof k=="function"?C=new k("unhandledrejection",{cancelable:!0}):(C=o.document.createEvent("CustomEvent"),C.initCustomEvent("unhandledrejection",!1,!0,C)),C.promise=this,C.reason=this.j,F(C))},h.prototype.H=function(){if(this.h!=null){for(var C=0;C<this.h.length;++C)N.i(this.h[C]);this.h=null}};var N=new v;return h.prototype.L=function(C){var k=this.l();C.T(k.resolve,k.reject)},h.prototype.M=function(C,k){var F=this.l();try{C.call(k,F.resolve,F.reject)}catch(z){F.reject(z)}},h.prototype.then=function(C,k){function F(ie,Q){return typeof ie=="function"?function(ge){try{z(ie(ge))}catch($e){Y($e)}}:Q}var z,Y,me=new h(function(ie,Q){z=ie,Y=Q});return this.T(F(C,z),F(k,Y)),me},h.prototype.catch=function(C){return this.then(void 0,C)},h.prototype.T=function(C,k){function F(){switch(z.i){case 1:C(z.j);break;case 2:k(z.j);break;default:throw Error("Unexpected state: "+z.i)}}var z=this;this.h==null?N.i(F):this.h.push(F),this.u=!0},h.resolve=E,h.reject=function(C){return new h(function(k,F){F(C)})},h.race=function(C){return new h(function(k,F){for(var z=a(C),Y=z.next();!Y.done;Y=z.next())E(Y.value).T(k,F)})},h.all=function(C){var k=a(C),F=k.next();return F.done?E([]):new h(function(z,Y){function me(ge){return function($e){ie[ge]=$e,Q--,Q==0&&z(ie)}}var ie=[],Q=0;do ie.push(void 0),Q++,E(F.value).T(me(ie.length-1),Y),F=k.next();while(!F.done)})},h});function ae(d,h){d instanceof String&&(d+="");var v=0,E=!1,I={next:function(){if(!E&&v<d.length){var N=v++;return{value:h(N,d[N]),done:!1}}return E=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}i("Array.prototype.keys",function(d){return d||function(){return ae(this,function(h){return h})}}),i("Array.prototype.fill",function(d){return d||function(h,v,E){var I=this.length||0;for(0>v&&(v=Math.max(0,I+v)),(E==null||E>I)&&(E=I),E=Number(E),0>E&&(E=Math.max(0,I+E)),v=Number(v||0);v<E;v++)this[v]=h;return this}});function se(d){return d||Array.prototype.fill}i("Int8Array.prototype.fill",se),i("Uint8Array.prototype.fill",se),i("Uint8ClampedArray.prototype.fill",se),i("Int16Array.prototype.fill",se),i("Uint16Array.prototype.fill",se),i("Int32Array.prototype.fill",se),i("Uint32Array.prototype.fill",se),i("Float32Array.prototype.fill",se),i("Float64Array.prototype.fill",se),i("Object.is",function(d){return d||function(h,v){return h===v?h!==0||1/h===1/v:h!==h&&v!==v}}),i("Array.prototype.includes",function(d){return d||function(h,v){var E=this;E instanceof String&&(E=String(E));var I=E.length;for(v=v||0,0>v&&(v=Math.max(v+I,0));v<I;v++){var N=E[v];if(N===h||Object.is(N,h))return!0}return!1}}),i("String.prototype.includes",function(d){return d||function(h,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,v||0)!==-1}});var Oe=this||self;function Le(d,h){d=d.split(".");var v=Oe;d[0]in v||typeof v.execScript>"u"||v.execScript("var "+d[0]);for(var E;d.length&&(E=d.shift());)d.length||h===void 0?v[E]&&v[E]!==Object.prototype[E]?v=v[E]:v=v[E]={}:v[E]=h}function yt(d){var h;e:{if((h=Oe.navigator)&&(h=h.userAgent))break e;h=""}return h.indexOf(d)!=-1}var St=Array.prototype.map?function(d,h){return Array.prototype.map.call(d,h,void 0)}:function(d,h){for(var v=d.length,E=Array(v),I=typeof d=="string"?d.split(""):d,N=0;N<v;N++)N in I&&(E[N]=h.call(void 0,I[N],N,d));return E},on={},Ut=null;function ti(d){var h=d.length,v=3*h/4;v%3?v=Math.floor(v):"=.".indexOf(d[h-1])!=-1&&(v="=.".indexOf(d[h-2])!=-1?v-2:v-1);var E=new Uint8Array(v),I=0;return Os(d,function(N){E[I++]=N}),I!==v?E.subarray(0,I):E}function Os(d,h){function v(F){for(;E<d.length;){var z=d.charAt(E++),Y=Ut[z];if(Y!=null)return Y;if(!/^[\s\xa0]*$/.test(z))throw Error("Unknown base64 encoding at char: "+z)}return F}ni();for(var E=0;;){var I=v(-1),N=v(0),C=v(64),k=v(64);if(k===64&&I===-1)break;h(I<<2|N>>4),C!=64&&(h(N<<4&240|C>>2),k!=64&&h(C<<6&192|k))}}function ni(){if(!Ut){Ut={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var E=d.concat(h[v].split(""));on[v]=E;for(var I=0;I<E.length;I++){var N=E[I];Ut[N]===void 0&&(Ut[N]=I)}}}}var Ar=typeof Uint8Array<"u",Mr=!(yt("Trident")||yt("MSIE"))&&typeof Oe.btoa=="function";function Zr(d){if(!Mr){var h;h===void 0&&(h=0),ni(),h=on[h];for(var v=Array(Math.floor(d.length/3)),E=h[64]||"",I=0,N=0;I<d.length-2;I+=3){var C=d[I],k=d[I+1],F=d[I+2],z=h[C>>2];C=h[(C&3)<<4|k>>4],k=h[(k&15)<<2|F>>6],F=h[F&63],v[N++]=z+C+k+F}switch(z=0,F=E,d.length-I){case 2:z=d[I+1],F=h[(z&15)<<2]||E;case 1:d=d[I],v[N]=h[d>>2]+h[(d&3)<<4|z>>4]+F+E}return v.join("")}for(h="";10240<d.length;)h+=String.fromCharCode.apply(null,d.subarray(0,10240)),d=d.subarray(10240);return h+=String.fromCharCode.apply(null,d),btoa(h)}var kr=RegExp("[-_.]","g");function ri(d){switch(d){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function $i(d){if(!Mr)return ti(d);kr.test(d)&&(d=d.replace(kr,ri)),d=atob(d);for(var h=new Uint8Array(d.length),v=0;v<d.length;v++)h[v]=d.charCodeAt(v);return h}var Rs;function gl(){return Rs||(Rs=new Uint8Array(0))}var Ps={},i$=typeof Uint8Array.prototype.slice=="function",Yt=0,Gn=0;function xC(d){var h=0>d;d=Math.abs(d);var v=d>>>0;d=Math.floor((d-v)/4294967296),h&&(v=a(TC(v,d)),h=v.next().value,d=v.next().value,v=h),Yt=v>>>0,Gn=d>>>0}var s$=typeof BigInt=="function";function TC(d,h){return h=~h,d?d=~d+1:h+=1,[d,h]}function IC(d,h){this.i=d>>>0,this.h=h>>>0}function CC(d){if(!d)return DC||(DC=new IC(0,0));if(!/^-?\d+$/.test(d))return null;if(16>d.length)xC(Number(d));else if(s$)d=BigInt(d),Yt=Number(d&BigInt(4294967295))>>>0,Gn=Number(d>>BigInt(32)&BigInt(4294967295));else{var h=+(d[0]==="-");Gn=Yt=0;for(var v=d.length,E=h,I=(v-h)%6+h;I<=v;E=I,I+=6)E=Number(d.slice(E,I)),Gn*=1e6,Yt=1e6*Yt+E,4294967296<=Yt&&(Gn+=Yt/4294967296|0,Yt%=4294967296);h&&(h=a(TC(Yt,Gn)),d=h.next().value,h=h.next().value,Yt=d,Gn=h)}return new IC(Yt,Gn)}var DC;function NC(d,h){return Error("Invalid wire type: "+d+" (at position "+h+")")}function My(){return Error("Failed to read varint, encoding is invalid.")}function AC(d,h){return Error("Tried to read past the end of the data "+h+" > "+d)}function Fs(){throw Error("Invalid UTF8")}function MC(d,h){return h=String.fromCharCode.apply(null,h),d==null?h:d+h}var Gf=void 0,ky,a$=typeof TextDecoder<"u",kC,l$=typeof TextEncoder<"u",OC;function RC(d){if(d!==Ps)throw Error("illegal external caller")}function eu(d,h){if(RC(h),this.V=d,d!=null&&d.length===0)throw Error("ByteString should be constructed with non-empty values")}function Oy(){return OC||(OC=new eu(null,Ps))}function PC(d){RC(Ps);var h=d.V;return h=h==null||Ar&&h!=null&&h instanceof Uint8Array?h:typeof h=="string"?$i(h):null,h==null?h:d.V=h}function c$(d){if(typeof d=="string")return{buffer:$i(d),C:!1};if(Array.isArray(d))return{buffer:new Uint8Array(d),C:!1};if(d.constructor===Uint8Array)return{buffer:d,C:!1};if(d.constructor===ArrayBuffer)return{buffer:new Uint8Array(d),C:!1};if(d.constructor===eu)return{buffer:PC(d)||gl(),C:!0};if(d instanceof Uint8Array)return{buffer:new Uint8Array(d.buffer,d.byteOffset,d.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function FC(d,h){this.i=null,this.m=!1,this.h=this.j=this.l=0,Ry(this,d,h)}function Ry(d,h,v){v=v===void 0?{}:v,d.S=v.S===void 0?!1:v.S,h&&(h=c$(h),d.i=h.buffer,d.m=h.C,d.l=0,d.j=d.i.length,d.h=d.l)}FC.prototype.reset=function(){this.h=this.l};function Ls(d,h){if(d.h=h,h>d.j)throw AC(d.j,h)}function tu(d){var h=d.i,v=d.h,E=h[v++],I=E&127;if(E&128&&(E=h[v++],I|=(E&127)<<7,E&128&&(E=h[v++],I|=(E&127)<<14,E&128&&(E=h[v++],I|=(E&127)<<21,E&128&&(E=h[v++],I|=E<<28,E&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128)))))throw My();return Ls(d,v),I}function LC(d,h){if(0>h)throw Error("Tried to read a negative byte length: "+h);var v=d.h,E=v+h;if(E>d.j)throw AC(h,d.j-v);return d.h=E,v}var $C=[];function Py(){this.h=[]}Py.prototype.length=function(){return this.h.length},Py.prototype.end=function(){var d=this.h;return this.h=[],d};function VC(d,h,v){for(;0<v||127<h;)d.h.push(h&127|128),h=(h>>>7|v<<25)>>>0,v>>>=7;d.h.push(h)}function $s(d,h){for(;127<h;)d.h.push(h&127|128),h>>>=7;d.h.push(h)}function Fy(d,h){if($C.length){var v=$C.pop();Ry(v,d,h),d=v}else d=new FC(d,h);this.h=d,this.j=this.h.h,this.i=this.l=-1,this.setOptions(h)}Fy.prototype.setOptions=function(d){d=d===void 0?{}:d,this.ca=d.ca===void 0?!1:d.ca},Fy.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function jC(d){var h=d.h;if(h.h==h.j)return!1;d.j=d.h.h;var v=tu(d.h)>>>0;if(h=v>>>3,v&=7,!(0<=v&&5>=v))throw NC(v,d.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+d.j+")");return d.l=h,d.i=v,!0}function Wf(d){switch(d.i){case 0:if(d.i!=0)Wf(d);else e:{d=d.h;for(var h=d.h,v=h+10,E=d.i;h<v;)if((E[h++]&128)===0){Ls(d,h);break e}throw My()}break;case 1:d=d.h,Ls(d,d.h+8);break;case 2:d.i!=2?Wf(d):(h=tu(d.h)>>>0,d=d.h,Ls(d,d.h+h));break;case 5:d=d.h,Ls(d,d.h+4);break;case 3:h=d.l;do{if(!jC(d))throw Error("Unmatched start-group tag: stream EOF");if(d.i==4){if(d.l!=h)throw Error("Unmatched end-group tag");break}Wf(d)}while(!0);break;default:throw NC(d.i,d.j)}}var qf=[];function u$(){this.j=[],this.i=0,this.h=new Py}function yl(d,h){h.length!==0&&(d.j.push(h),d.i+=h.length)}function d$(d,h){if(h=h.R){yl(d,d.h.end());for(var v=0;v<h.length;v++)yl(d,PC(h[v])||gl())}}var oi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Vs(d,h){return oi?d[oi]|=h:d.A!==void 0?d.A|=h:(Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}}),h)}function BC(d,h){oi?d[oi]&&(d[oi]&=~h):d.A!==void 0&&(d.A&=~h)}function Vt(d){var h;return oi?h=d[oi]:h=d.A,h??0}function No(d,h){oi?d[oi]=h:d.A!==void 0?d.A=h:Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}})}function Ly(d){return Vs(d,1),d}function f$(d,h){No(h,(d|0)&-51)}function Kf(d,h){No(h,(d|18)&-41)}var $y={};function Yf(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&d.constructor===Object}var nu,HC=[];No(HC,23),nu=Object.freeze(HC);function Vy(d){if(Vt(d.o)&2)throw Error("Cannot mutate an immutable Message")}function jy(d){var h=d.length;(h=h?d[h-1]:void 0)&&Yf(h)?h.g=1:(h={},d.push((h.g=1,h)))}function UC(d){var h=d.i+d.G;return d.B||(d.B=d.o[h]={})}function Qr(d,h){return h===-1?null:h>=d.i?d.B?d.B[h]:void 0:d.o[h+d.G]}function Ao(d,h,v,E){Vy(d),ru(d,h,v,E)}function ru(d,h,v,E){d.j&&(d.j=void 0),h>=d.i||E?UC(d)[h]=v:(d.o[h+d.G]=v,(d=d.B)&&h in d&&delete d[h])}function By(d,h,v,E){var I=Qr(d,h);Array.isArray(I)||(I=nu);var N=Vt(I);if(N&1||Ly(I),E)N&2||Vs(I,2),v&1||Object.freeze(I);else{E=!(v&2);var C=N&2;v&1||!C?E&&N&16&&!C&&BC(I,16):(I=Ly(Array.prototype.slice.call(I)),ru(d,h,I))}return I}function Hy(d,h){var v=Qr(d,h),E=v==null?v:typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"?Number(v):void 0;return E!=null&&E!==v&&ru(d,h,E),E}function zC(d,h,v,E,I){d.h||(d.h={});var N=d.h[v],C=By(d,v,3,I);if(!N){var k=C;N=[];var F=!!(Vt(d.o)&16);C=!!(Vt(k)&2);var z=k;!I&&C&&(k=Array.prototype.slice.call(k));for(var Y=C,me=0;me<k.length;me++){var ie=k[me],Q=h,ge=!1;if(ge=ge===void 0?!1:ge,ie=Array.isArray(ie)?new Q(ie):ge?new Q:void 0,ie!==void 0){Q=ie.o;var $e=ge=Vt(Q);C&&($e|=2),F&&($e|=16),$e!=ge&&No(Q,$e),Q=$e,Y=Y||!!(2&Q),N.push(ie)}}return d.h[v]=N,F=Vt(k),h=F|33,h=Y?h&-9:h|8,F!=h&&(Y=k,Object.isFrozen(Y)&&(Y=Array.prototype.slice.call(Y)),No(Y,h),k=Y),z!==k&&ru(d,v,k),(I||E&&C)&&Vs(N,2),E&&Object.freeze(N),N}return I||(I=Object.isFrozen(N),E&&!I?Object.freeze(N):!E&&I&&(N=Array.prototype.slice.call(N),d.h[v]=N)),N}function Uy(d,h,v){var E=!!(Vt(d.o)&2);if(h=zC(d,h,v,E,E),d=By(d,v,3,E),!(E||Vt(d)&8)){for(E=0;E<h.length;E++){if(v=h[E],Vt(v.o)&2){var I=XC(v,!1);I.j=v}else I=v;v!==I&&(h[E]=I,d[E]=I.o)}Vs(d,8)}return h}function Mo(d,h,v){if(v!=null&&typeof v!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof v+": "+v);Ao(d,h,v)}function GC(d,h,v,E,I){Vy(d);var N=zC(d,v,h,!1,!1);return v=E??new v,d=By(d,h,2,!1),I!=null?(N.splice(I,0,v),d.splice(I,0,v.o)):(N.push(v),d.push(v.o)),v.C()&&BC(d,8),v}function Xf(d,h){return d??h}function ko(d,h,v){return v=v===void 0?0:v,Xf(Hy(d,h),v)}var Zf;function p$(d){switch(typeof d){case"number":return isFinite(d)?d:String(d);case"object":if(d)if(Array.isArray(d)){if((Vt(d)&128)!==0)return d=Array.prototype.slice.call(d),jy(d),d}else{if(Ar&&d!=null&&d instanceof Uint8Array)return Zr(d);if(d instanceof eu){var h=d.V;return h==null?"":typeof h=="string"?h:d.V=Zr(h)}}}return d}function WC(d,h,v,E){if(d!=null){if(Array.isArray(d))d=zy(d,h,v,E!==void 0);else if(Yf(d)){var I={},N;for(N in d)I[N]=WC(d[N],h,v,E);d=I}else d=h(d,E);return d}}function zy(d,h,v,E){var I=Vt(d);E=E?!!(I&16):void 0,d=Array.prototype.slice.call(d);for(var N=0;N<d.length;N++)d[N]=WC(d[N],h,v,E);return v(I,d),d}function h$(d){return d.ja===$y?d.toJSON():p$(d)}function m$(d,h){d&128&&jy(h)}function qC(d,h,v){if(v=v===void 0?Kf:v,d!=null){if(Ar&&d instanceof Uint8Array)return d.length?new eu(new Uint8Array(d),Ps):Oy();if(Array.isArray(d)){var E=Vt(d);return E&2?d:h&&!(E&32)&&(E&16||E===0)?(No(d,E|2),d):(d=zy(d,qC,E&4?Kf:v,!0),h=Vt(d),h&4&&h&2&&Object.freeze(d),d)}return d.ja===$y?YC(d):d}}function KC(d,h,v,E,I,N,C){if(d=d.h&&d.h[v]){if(E=Vt(d),E&2?E=d:(N=St(d,YC),Kf(E,N),Object.freeze(N),E=N),Vy(h),C=E==null?nu:Ly([]),E!=null){for(N=!!E.length,d=0;d<E.length;d++){var k=E[d];N=N&&!(Vt(k.o)&2),C[d]=k.o}N=(N?8:0)|1,d=Vt(C),(d&N)!==N&&(Object.isFrozen(C)&&(C=Array.prototype.slice.call(C)),No(C,d|N)),h.h||(h.h={}),h.h[v]=E}else h.h&&(h.h[v]=void 0);ru(h,v,C,I)}else Ao(h,v,qC(E,N,C),I)}function YC(d){return Vt(d.o)&2||(d=XC(d,!0),Vs(d.o,2)),d}function XC(d,h){var v=d.o,E=[];Vs(E,16);var I=d.constructor.h;if(I&&E.push(I),I=d.B,I){E.length=v.length,E.fill(void 0,E.length,v.length);var N={};E[E.length-1]=N}(Vt(v)&128)!==0&&jy(E),h=h||d.C()?Kf:f$,N=d.constructor,Zf=E,E=new N(E),Zf=void 0,d.R&&(E.R=d.R.slice()),N=!!(Vt(v)&16);for(var C=I?v.length-1:v.length,k=0;k<C;k++)KC(d,E,k-d.G,v[k],!1,N,h);if(I)for(var F in I)KC(d,E,+F,I[F],!0,N,h);return E}function tr(d,h,v){d==null&&(d=Zf),Zf=void 0;var E=this.constructor.i||0,I=0<E,N=this.constructor.h,C=!1;if(d==null){d=N?[N]:[];var k=48,F=!0;I&&(E=0,k|=128),No(d,k)}else{if(!Array.isArray(d)||N&&N!==d[0])throw Error();var z=k=Vs(d,0);if((F=(16&z)!==0)&&((C=(32&z)!==0)||(z|=32)),I){if(128&z)E=0;else if(0<d.length){var Y=d[d.length-1];if(Yf(Y)&&"g"in Y){E=0,z|=128,delete Y.g;var me=!0,ie;for(ie in Y){me=!1;break}me&&d.pop()}}}else if(128&z)throw Error();k!==z&&No(d,z)}this.G=(N?0:-1)-E,this.h=void 0,this.o=d;e:{if(N=this.o.length,E=N-1,N&&(N=this.o[E],Yf(N))){this.B=N,this.i=E-this.G;break e}h!==void 0&&-1<h?(this.i=Math.max(h,E+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!I&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){h=F&&!C&&!0,I=this.i;var Q;for(F=0;F<v.length;F++)C=v[F],C<I?(C+=this.G,(E=d[C])?ZC(E,h):d[C]=nu):(Q||(Q=UC(this)),(E=Q[C])?ZC(E,h):Q[C]=nu)}}tr.prototype.toJSON=function(){return zy(this.o,h$,m$)},tr.prototype.C=function(){return!!(Vt(this.o)&2)};function ZC(d,h){if(Array.isArray(d)){var v=Vt(d),E=1;!h||v&2||(E|=16),(v&E)!==E&&No(d,v|E)}}tr.prototype.ja=$y,tr.prototype.toString=function(){return this.o.toString()};function QC(d,h,v){if(v){var E={},I;for(I in v){var N=v[I],C=N.ra;C||(E.J=N.xa||N.oa.W,N.ia?(E.aa=rD(N.ia),C=(function(k){return function(F,z,Y){return k.J(F,z,Y,k.aa)}})(E)):N.ka?(E.Z=oD(N.da.P,N.ka),C=(function(k){return function(F,z,Y){return k.J(F,z,Y,k.Z)}})(E)):C=E.J,N.ra=C),C(h,d,N.da),E={J:E.J,aa:E.aa,Z:E.Z}}}d$(h,d)}var Qf=Symbol();function JC(d,h,v){return d[Qf]||(d[Qf]=function(E,I){return h(E,I,v)})}function eD(d){var h=d[Qf];if(!h){var v=Wy(d);h=function(E,I){return iD(E,I,v)},d[Qf]=h}return h}function g$(d){var h=d.ia;if(h)return eD(h);if(h=d.wa)return JC(d.da.P,h,d.ka)}function y$(d){var h=g$(d),v=d.da,E=d.oa.U;return h?function(I,N){return E(I,N,v,h)}:function(I,N){return E(I,N,v)}}function tD(d,h){var v=d[h];return typeof v=="function"&&v.length===0&&(v=v(),d[h]=v),Array.isArray(v)&&(iu in v||ou in v||0<v.length&&typeof v[0]=="function")?v:void 0}function nD(d,h,v,E,I,N){h.P=d[0];var C=1;if(d.length>C&&typeof d[C]!="number"){var k=d[C++];v(h,k)}for(;C<d.length;){v=d[C++];for(var F=C+1;F<d.length&&typeof d[F]!="number";)F++;switch(k=d[C++],F-=C,F){case 0:E(h,v,k);break;case 1:(F=tD(d,C))?(C++,I(h,v,k,F)):E(h,v,k,d[C++]);break;case 2:F=C++,F=tD(d,F),I(h,v,k,F,d[C++]);break;case 3:N(h,v,k,d[C++],d[C++],d[C++]);break;case 4:N(h,v,k,d[C++],d[C++],d[C++],d[C++]);break;default:throw Error("unexpected number of binary field arguments: "+F)}}return h}var Jf=Symbol();function rD(d){var h=d[Jf];if(!h){var v=Gy(d);h=function(E,I){return sD(E,I,v)},d[Jf]=h}return h}function oD(d,h){var v=d[Jf];return v||(v=function(E,I){return QC(E,I,h)},d[Jf]=v),v}var ou=Symbol();function v$(d,h){d.push(h)}function b$(d,h,v){d.push(h,v.W)}function w$(d,h,v,E){var I=rD(E),N=Gy(E).P,C=v.W;d.push(h,function(k,F,z){return C(k,F,z,N,I)})}function _$(d,h,v,E,I,N){var C=oD(E,N),k=v.W;d.push(h,function(F,z,Y){return k(F,z,Y,E,C)})}function Gy(d){var h=d[ou];return h||(h=nD(d,d[ou]=[],v$,b$,w$,_$),iu in d&&ou in d&&(d.length=0),h)}var iu=Symbol();function E$(d,h){d[0]=h}function S$(d,h,v,E){var I=v.U;d[h]=E?function(N,C,k){return I(N,C,k,E)}:I}function x$(d,h,v,E,I){var N=v.U,C=eD(E),k=Wy(E).P;d[h]=function(F,z,Y){return N(F,z,Y,k,C,I)}}function T$(d,h,v,E,I,N,C){var k=v.U,F=JC(E,I,N);d[h]=function(z,Y,me){return k(z,Y,me,E,F,C)}}function Wy(d){var h=d[iu];return h||(h=nD(d,d[iu]={},E$,S$,x$,T$),iu in d&&ou in d&&(d.length=0),h)}function iD(d,h,v){for(;jC(h)&&h.i!=4;){var E=h.l,I=v[E];if(!I){var N=v[0];N&&(N=N[E])&&(I=v[E]=y$(N))}if(!I||!I(h,d,E)){I=h,E=d,N=I.j,Wf(I);var C=I;if(!C.ca){if(I=C.h.h-N,C.h.h=N,C=C.h,I==0)I=Oy();else{if(N=LC(C,I),C.S&&C.m)I=C.i.subarray(N,N+I);else{C=C.i;var k=N;I=N+I,I=k===I?gl():i$?C.slice(k,I):new Uint8Array(C.subarray(k,I))}I=I.length==0?Oy():new eu(I,Ps)}(N=E.R)?N.push(I):E.R=[I]}}}return d}function sD(d,h,v){for(var E=v.length,I=E%2==1,N=I?1:0;N<E;N+=2)(0,v[N+1])(h,d,v[N]);QC(d,h,I?v[0]:void 0)}function su(d,h){return{U:d,W:h}}var Jr=su(function(d,h,v){if(d.i!==5)return!1;d=d.h;var E=d.i,I=d.h,N=E[I],C=E[I+1],k=E[I+2];return E=E[I+3],Ls(d,d.h+4),C=(N<<0|C<<8|k<<16|E<<24)>>>0,d=2*(C>>31)+1,N=C>>>23&255,C&=8388607,Ao(h,v,N==255?C?NaN:1/0*d:N==0?d*Math.pow(2,-149)*C:d*Math.pow(2,N-150)*(C+Math.pow(2,23))),!0},function(d,h,v){if(h=Hy(h,v),h!=null){$s(d.h,8*v+5),d=d.h;var E=+h;E===0?0<1/E?Yt=Gn=0:(Gn=0,Yt=2147483648):isNaN(E)?(Gn=0,Yt=2147483647):(E=(v=0>E?-2147483648:0)?-E:E,34028234663852886e22<E?(Gn=0,Yt=(v|2139095040)>>>0):11754943508222875e-54>E?(E=Math.round(E/Math.pow(2,-149)),Gn=0,Yt=(v|E)>>>0):(h=Math.floor(Math.log(E)/Math.LN2),E*=Math.pow(2,-h),E=Math.round(8388608*E),16777216<=E&&++h,Gn=0,Yt=(v|h+127<<23|E&8388607)>>>0)),v=Yt,d.h.push(v>>>0&255),d.h.push(v>>>8&255),d.h.push(v>>>16&255),d.h.push(v>>>24&255)}}),I$=su(function(d,h,v){if(d.i!==0)return!1;var E=d.h,I=0,N=d=0,C=E.i,k=E.h;do{var F=C[k++];I|=(F&127)<<N,N+=7}while(32>N&&F&128);for(32<N&&(d|=(F&127)>>4),N=3;32>N&&F&128;N+=7)F=C[k++],d|=(F&127)<<N;if(Ls(E,k),128>F)E=I>>>0,F=d>>>0,(d=F&2147483648)&&(E=~E+1>>>0,F=~F>>>0,E==0&&(F=F+1>>>0)),E=4294967296*F+(E>>>0);else throw My();return Ao(h,v,d?-E:E),!0},function(d,h,v){h=Qr(h,v),h!=null&&(typeof h=="string"&&CC(h),h!=null&&($s(d.h,8*v),typeof h=="number"?(d=d.h,xC(h),VC(d,Yt,Gn)):(v=CC(h),VC(d.h,v.i,v.h))))}),C$=su(function(d,h,v){return d.i!==0?!1:(Ao(h,v,tu(d.h)),!0)},function(d,h,v){if(h=Qr(h,v),h!=null&&h!=null)if($s(d.h,8*v),d=d.h,v=h,0<=v)$s(d,v);else{for(h=0;9>h;h++)d.h.push(v&127|128),v>>=7;d.h.push(1)}}),aD=su(function(d,h,v){if(d.i!==2)return!1;var E=tu(d.h)>>>0;d=d.h;var I=LC(d,E);if(d=d.i,a$){var N=d,C;(C=ky)||(C=ky=new TextDecoder("utf-8",{fatal:!0})),d=I+E,N=I===0&&d===N.length?N:N.subarray(I,d);try{var k=C.decode(N)}catch(me){if(Gf===void 0){try{C.decode(new Uint8Array([128]))}catch{}try{C.decode(new Uint8Array([97])),Gf=!0}catch{Gf=!1}}throw!Gf&&(ky=void 0),me}}else{k=I,E=k+E,I=[];for(var F=null,z,Y;k<E;)z=d[k++],128>z?I.push(z):224>z?k>=E?Fs():(Y=d[k++],194>z||(Y&192)!==128?(k--,Fs()):I.push((z&31)<<6|Y&63)):240>z?k>=E-1?Fs():(Y=d[k++],(Y&192)!==128||z===224&&160>Y||z===237&&160<=Y||((N=d[k++])&192)!==128?(k--,Fs()):I.push((z&15)<<12|(Y&63)<<6|N&63)):244>=z?k>=E-2?Fs():(Y=d[k++],(Y&192)!==128||(z<<28)+(Y-144)>>30!==0||((N=d[k++])&192)!==128||((C=d[k++])&192)!==128?(k--,Fs()):(z=(z&7)<<18|(Y&63)<<12|(N&63)<<6|C&63,z-=65536,I.push((z>>10&1023)+55296,(z&1023)+56320))):Fs(),8192<=I.length&&(F=MC(F,I),I.length=0);k=MC(F,I)}return Ao(h,v,k),!0},function(d,h,v){if(h=Qr(h,v),h!=null){var E=!1;if(E=E===void 0?!1:E,l$){if(E&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(kC||(kC=new TextEncoder)).encode(h)}else{for(var I=0,N=new Uint8Array(3*h.length),C=0;C<h.length;C++){var k=h.charCodeAt(C);if(128>k)N[I++]=k;else{if(2048>k)N[I++]=k>>6|192;else{if(55296<=k&&57343>=k){if(56319>=k&&C<h.length){var F=h.charCodeAt(++C);if(56320<=F&&57343>=F){k=1024*(k-55296)+F-56320+65536,N[I++]=k>>18|240,N[I++]=k>>12&63|128,N[I++]=k>>6&63|128,N[I++]=k&63|128;continue}else C--}if(E)throw Error("Found an unpaired surrogate");k=65533}N[I++]=k>>12|224,N[I++]=k>>6&63|128}N[I++]=k&63|128}}h=I===N.length?N:N.subarray(0,I)}$s(d.h,8*v+2),$s(d.h,h.length),yl(d,d.h.end()),yl(d,h)}}),lD=su(function(d,h,v,E,I){if(d.i!==2)return!1;h=GC(h,v,E),v=d.h.j,E=tu(d.h)>>>0;var N=d.h.h+E,C=N-v;if(0>=C&&(d.h.j=N,I(h,d,void 0,void 0,void 0),C=N-d.h.h),C)throw Error("Message parsing ended unexpectedly. Expected to read "+(E+" bytes, instead read "+(E-C)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return d.h.h=N,d.h.j=v,!0},function(d,h,v,E,I){if(h=Uy(h,E,v),h!=null)for(E=0;E<h.length;E++){var N=d;$s(N.h,8*v+2);var C=N.h.end();yl(N,C),C.push(N.i),N=C,I(h[E],d),C=d;var k=N.pop();for(k=C.i+C.h.length()-k;127<k;)N.push(k&127|128),k>>>=7,C.i++;N.push(k),C.i++}});function qy(d){return function(h,v){e:{if(qf.length){var E=qf.pop();E.setOptions(v),Ry(E.h,h,v),h=E}else h=new Fy(h,v);try{var I=Wy(d),N=iD(new I.P,h,I);break e}finally{I=h.h,I.i=null,I.m=!1,I.l=0,I.j=0,I.h=0,I.S=!1,h.l=-1,h.i=-1,100>qf.length&&qf.push(h)}N=void 0}return N}}function Ky(d){return function(){var h=new u$;sD(this,h,Gy(d)),yl(h,h.h.end());for(var v=new Uint8Array(h.i),E=h.j,I=E.length,N=0,C=0;C<I;C++){var k=E[C];v.set(k,N),N+=k.length}return h.j=[v],v}}function vl(d){tr.call(this,d)}T(vl,tr);var cD=[vl,1,C$,2,Jr,3,aD,4,aD];vl.prototype.l=Ky(cD);function Yy(d){tr.call(this,d,-1,D$)}T(Yy,tr),Yy.prototype.addClassification=function(d,h){return GC(this,1,vl,d,h),this};var D$=[1],N$=qy([Yy,1,lD,cD]);function au(d){tr.call(this,d)}T(au,tr);var uD=[au,1,Jr,2,Jr,3,Jr,4,Jr,5,Jr];au.prototype.l=Ky(uD);function dD(d){tr.call(this,d,-1,A$)}T(dD,tr);var A$=[1],M$=qy([dD,1,lD,uD]);function ep(d){tr.call(this,d)}T(ep,tr);var fD=[ep,1,Jr,2,Jr,3,Jr,4,Jr,5,Jr,6,I$],k$=qy(fD);ep.prototype.l=Ky(fD);function pD(d,h,v){if(v=d.createShader(v===0?d.VERTEX_SHADER:d.FRAGMENT_SHADER),d.shaderSource(v,h),d.compileShader(v),!d.getShaderParameter(v,d.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+d.getShaderInfoLog(v));return v}function O$(d){return Uy(d,vl,1).map(function(h){var v=Qr(h,1);return{index:v??0,qa:ko(h,2),label:Qr(h,3)!=null?Xf(Qr(h,3),""):void 0,displayName:Qr(h,4)!=null?Xf(Qr(h,4),""):void 0}})}function R$(d){return{x:ko(d,1),y:ko(d,2),z:ko(d,3),visibility:Hy(d,4)!=null?ko(d,4):void 0}}function Xy(d,h){this.i=d,this.h=h,this.m=0}function hD(d,h,v){return P$(d,h),typeof d.h.canvas.transferToImageBitmap=="function"?Promise.resolve(d.h.canvas.transferToImageBitmap()):v?Promise.resolve(d.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(d.h.canvas):(d.j===void 0&&(d.j=document.createElement("canvas")),new Promise(function(E){d.j.height=d.h.canvas.height,d.j.width=d.h.canvas.width,d.j.getContext("2d",{}).drawImage(d.h.canvas,0,0,d.h.canvas.width,d.h.canvas.height),E(d.j)}))}function P$(d,h){var v=d.h;if(d.s===void 0){var E=pD(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),I=pD(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),N=v.createProgram();if(v.attachShader(N,E),v.attachShader(N,I),v.linkProgram(N),!v.getProgramParameter(N,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(N));E=d.s=N,v.useProgram(E),I=v.getUniformLocation(E,"sampler0"),d.l={O:v.getAttribLocation(E,"aVertex"),N:v.getAttribLocation(E,"aTex"),ya:I},d.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.enableVertexAttribArray(d.l.O),v.vertexAttribPointer(d.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),d.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.enableVertexAttribArray(d.l.N),v.vertexAttribPointer(d.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(I,0)}E=d.l,v.useProgram(d.s),v.canvas.width=h.width,v.canvas.height=h.height,v.viewport(0,0,h.width,h.height),v.activeTexture(v.TEXTURE0),d.i.bindTexture2d(h.glName),v.enableVertexAttribArray(E.O),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.vertexAttribPointer(E.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.vertexAttribPointer(E.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(E.O),v.disableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,null),d.i.bindTexture2d(0)}function F$(d){this.h=d}var L$=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function $$(d,h){return h+d}function mD(d,h){window[d]=h}function V$(d){var h=document.createElement("script");return h.setAttribute("src",d),h.setAttribute("crossorigin","anonymous"),new Promise(function(v){h.addEventListener("load",function(){v()},!1),h.addEventListener("error",function(){v()},!1),document.body.appendChild(h)})}function j$(){return U(function(d){switch(d.h){case 1:return d.s=2,M(d,WebAssembly.instantiate(L$),4);case 4:d.h=3,d.s=0;break;case 2:return d.s=0,d.l=null,d.return(!1);case 3:return d.return(!0)}})}function Zy(d){if(this.h=d,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=d&&d.locateFile||$$,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=h,d.options){h=a(Object.keys(d.options));for(var v=h.next();!v.done;v=h.next()){v=v.value;var E=d.options[v].default;E!==void 0&&(this.l[v]=typeof E=="function"?E():E)}}}t=Zy.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function B$(d){var h,v,E,I,N,C,k,F,z,Y,me;return U(function(ie){switch(ie.h){case 1:return d.ga?(h=d.h.files===void 0?[]:typeof d.h.files=="function"?d.h.files(d.l):d.h.files,M(ie,j$(),2)):ie.return();case 2:if(v=ie.i,typeof window=="object")return mD("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),mD("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),C=h.filter(function(Q){return Q.data!==void 0}),k=h.filter(function(Q){return Q.data===void 0}),F=Promise.all(C.map(function(Q){var ge=tp(d,Q.url);if(Q.path!==void 0){var $e=Q.path;ge=ge.then(function(vt){return d.overrideFile($e,vt),Promise.resolve(vt)})}return ge})),z=Promise.all(k.map(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v?V$(d.locateFile(Q.url,d.ha)):Promise.resolve()})).then(function(){var Q,ge,$e;return U(function(vt){if(vt.h==1)return Q=window.createMediapipeSolutionsWasm,ge=window.createMediapipeSolutionsPackedAssets,$e=d,M(vt,Q(ge),2);$e.i=vt.i,vt.h=0})}),Y=(function(){return U(function(Q){return d.h.graph&&d.h.graph.url?Q=M(Q,tp(d,d.h.graph.url),0):(Q.h=0,Q=void 0),Q})})(),M(ie,Promise.all([z,F,Y]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return E=h.filter(function(Q){return Q.simd===void 0||Q.simd&&v||!Q.simd&&!v}).map(function(Q){return d.locateFile(Q.url,d.ha)}),importScripts.apply(null,l(E)),I=d,M(ie,createMediapipeSolutionsWasm(Module),6);case 6:I.i=ie.i,d.m=new OffscreenCanvas(1,1),d.i.canvas=d.m,N=d.i.GL.createContext(d.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),d.i.GL.makeContextCurrent(N),ie.h=4;break;case 7:if(d.m=document.createElement("canvas"),me=d.m.getContext("webgl2",{}),!me&&(me=d.m.getContext("webgl",{}),!me))return alert("Failed to create WebGL canvas context when passing video frame."),ie.return();d.K=me,d.i.canvas=d.m,d.i.createContext(d.m,!0,!0,{});case 4:d.j=new d.i.SolutionWasm,d.ga=!1,ie.h=0}})}function H$(d){var h,v,E,I,N,C,k,F;return U(function(z){if(z.h==1){if(d.h.graph&&d.h.graph.url&&d.fa===d.h.graph.url)return z.return();if(d.u=!0,!d.h.graph||!d.h.graph.url){z.h=2;return}return d.fa=d.h.graph.url,M(z,tp(d,d.h.graph.url),3)}for(z.h!=2&&(h=z.i,d.j.loadGraph(h)),v=a(Object.keys(d.D)),E=v.next();!E.done;E=v.next())I=E.value,d.j.overrideFile(I,d.D[I]);if(d.D={},d.h.listeners)for(N=a(d.h.listeners),C=N.next();!C.done;C=N.next())k=C.value,W$(d,k);F=d.l,d.l={},d.setOptions(F),z.h=0})}t.reset=function(){var d=this;return U(function(h){d.j&&(d.j.reset(),d.s={},d.v={}),h.h=0})},t.setOptions=function(d,h){var v=this;if(h=h||this.h.options){for(var E=[],I=[],N={},C=a(Object.keys(d)),k=C.next();!k.done;N={X:N.X,Y:N.Y},k=C.next())if(k=k.value,!(k in this.l&&this.l[k]===d[k])){this.l[k]=d[k];var F=h[k];F!==void 0&&(F.onChange&&(N.X=F.onChange,N.Y=d[k],E.push((function(z){return function(){var Y;return U(function(me){if(me.h==1)return M(me,z.X(z.Y),2);Y=me.i,Y===!0&&(v.u=!0),me.h=0})}})(N))),F.graphOptionXref&&(k=Object.assign({},{calculatorName:"",calculatorIndex:0},F.graphOptionXref,{valueNumber:F.type===1?d[k]:0,valueBoolean:F.type===0?d[k]:!1,valueString:F.type===2?d[k]:""}),I.push(k)))}(E.length!==0||I.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(I),this.F=(this.F===void 0?[]:this.F).concat(E))}};function U$(d){var h,v,E,I,N,C,k;return U(function(F){switch(F.h){case 1:if(!d.u)return F.return();if(!d.F){F.h=2;break}h=a(d.F),v=h.next();case 3:if(v.done){F.h=5;break}return E=v.value,M(F,E(),4);case 4:v=h.next(),F.h=3;break;case 5:d.F=void 0;case 2:if(d.H){for(I=new d.i.GraphOptionChangeRequestList,N=a(d.H),C=N.next();!C.done;C=N.next())k=C.value,I.push_back(k);d.j.changeOptions(I),I.delete(),d.H=void 0}d.u=!1,F.h=0}})}t.initialize=function(){var d=this;return U(function(h){return h.h==1?M(h,B$(d),2):h.h!=3?M(h,H$(d),3):M(h,U$(d),0)})};function tp(d,h){var v,E;return U(function(I){return h in d.L?I.return(d.L[h]):(v=d.locateFile(h,""),E=fetch(v).then(function(N){return N.arrayBuffer()}),d.L[h]=E,I.return(E))})}t.overrideFile=function(d,h){this.j?this.j.overrideFile(d,h):this.D[d]=h},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(d,h){var v=this,E,I,N,C,k,F,z,Y,me;return U(function(ie){switch(ie.h){case 1:return v.h.inputs?(E=1e3*(h??performance.now()),M(ie,v.I,2)):ie.return();case 2:return M(ie,v.initialize(),3);case 3:for(I=new v.i.PacketDataList,N=a(Object.keys(d)),C=N.next();!C.done;C=N.next())if(k=C.value,F=v.h.inputs[k]){e:{var Q=d[k];switch(F.type){case"video":var ge=v.s[F.stream];if(ge||(ge=new Xy(v.i,v.K),v.s[F.stream]=ge),ge.m===0&&(ge.m=ge.i.createTexture()),typeof HTMLVideoElement<"u"&&Q instanceof HTMLVideoElement)var $e=Q.videoWidth,vt=Q.videoHeight;else typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?($e=Q.naturalWidth,vt=Q.naturalHeight):($e=Q.width,vt=Q.height);vt={glName:ge.m,width:$e,height:vt},$e=ge.h,$e.canvas.width=vt.width,$e.canvas.height=vt.height,$e.activeTexture($e.TEXTURE0),ge.i.bindTexture2d(ge.m),$e.texImage2D($e.TEXTURE_2D,0,$e.RGBA,$e.RGBA,$e.UNSIGNED_BYTE,Q),ge.i.bindTexture2d(0),ge=vt;break e;case"detections":for(ge=v.s[F.stream],ge||(ge=new F$(v.i),v.s[F.stream]=ge),ge.data||(ge.data=new ge.h.DetectionListData),ge.data.reset(Q.length),vt=0;vt<Q.length;++vt){$e=Q[vt];var ft=ge.data,vn=ft.setBoundingBox,Or=vt,nr=$e.la,Ke=new ep;if(Mo(Ke,1,nr.sa),Mo(Ke,2,nr.ta),Mo(Ke,3,nr.height),Mo(Ke,4,nr.width),Mo(Ke,5,nr.rotation),Ao(Ke,6,nr.pa),nr=Ke.l(),vn.call(ft,Or,nr),$e.ea)for(ft=0;ft<$e.ea.length;++ft){Ke=$e.ea[ft],vn=ge.data,Or=vn.addNormalizedLandmark,nr=vt,Ke=Object.assign({},Ke,{visibility:Ke.visibility?Ke.visibility:0});var bn=new au;Mo(bn,1,Ke.x),Mo(bn,2,Ke.y),Mo(bn,3,Ke.z),Ke.visibility&&Mo(bn,4,Ke.visibility),Ke=bn.l(),Or.call(vn,nr,Ke)}if($e.ba)for(ft=0;ft<$e.ba.length;++ft)vn=ge.data,Or=vn.addClassification,nr=vt,Ke=$e.ba[ft],bn=new vl,Mo(bn,2,Ke.qa),Ke.index&&Ao(bn,1,Ke.index),Ke.label&&Ao(bn,3,Ke.label),Ke.displayName&&Ao(bn,4,Ke.displayName),Ke=bn.l(),Or.call(vn,nr,Ke)}ge=ge.data;break e;default:ge={}}}switch(z=ge,Y=F.stream,F.type){case"video":I.pushTexture2d(Object.assign({},z,{stream:Y,timestamp:E}));break;case"detections":me=z,me.stream=Y,me.timestamp=E,I.pushDetectionList(me);break;default:throw Error("Unknown input config type: '"+F.type+"'")}}return v.j.send(I),M(ie,v.I,4);case 4:I.delete(),ie.h=0}})};function z$(d,h,v){var E,I,N,C,k,F,z,Y,me,ie,Q,ge,$e,vt;return U(function(ft){switch(ft.h){case 1:if(!v)return ft.return(h);for(E={},I=0,N=a(Object.keys(v)),C=N.next();!C.done;C=N.next())k=C.value,F=v[k],typeof F!="string"&&F.type==="texture"&&h[F.stream]!==void 0&&++I;1<I&&(d.M=!1),z=a(Object.keys(v)),C=z.next();case 2:if(C.done){ft.h=4;break}if(Y=C.value,me=v[Y],typeof me=="string")return $e=E,vt=Y,M(ft,G$(d,Y,h[me]),14);if(ie=h[me.stream],me.type==="detection_list"){if(ie){for(var vn=ie.getRectList(),Or=ie.getLandmarksList(),nr=ie.getClassificationsList(),Ke=[],bn=0;bn<vn.size();++bn){var Vi=k$(vn.get(bn)),q$=ko(Vi,1),K$=ko(Vi,2),Y$=ko(Vi,3),X$=ko(Vi,4),Z$=ko(Vi,5,0),np=void 0;np=np===void 0?0:np,Vi={la:{sa:q$,ta:K$,height:Y$,width:X$,rotation:Z$,pa:Xf(Qr(Vi,6),np)},ea:Uy(M$(Or.get(bn)),au,1).map(R$),ba:O$(N$(nr.get(bn)))},Ke.push(Vi)}vn=Ke}else vn=[];E[Y]=vn,ft.h=7;break}if(me.type==="proto_list"){if(ie){for(vn=Array(ie.size()),Or=0;Or<ie.size();Or++)vn[Or]=ie.get(Or);ie.delete()}else vn=[];E[Y]=vn,ft.h=7;break}if(ie===void 0){ft.h=3;break}if(me.type==="float_list"){E[Y]=ie,ft.h=7;break}if(me.type==="proto"){E[Y]=ie,ft.h=7;break}if(me.type!=="texture")throw Error("Unknown output config type: '"+me.type+"'");return Q=d.v[Y],Q||(Q=new Xy(d.i,d.K),d.v[Y]=Q),M(ft,hD(Q,ie,d.M),13);case 13:ge=ft.i,E[Y]=ge;case 7:me.transform&&E[Y]&&(E[Y]=me.transform(E[Y])),ft.h=3;break;case 14:$e[vt]=ft.i;case 3:C=z.next(),ft.h=2;break;case 4:return ft.return(E)}})}function G$(d,h,v){var E;return U(function(I){return typeof v=="number"||v instanceof Uint8Array||v instanceof d.i.Uint8BlobList?I.return(v):v instanceof d.i.Texture2dDataOut?(E=d.v[h],E||(E=new Xy(d.i,d.K),d.v[h]=E),I.return(hD(E,v,d.M))):I.return(void 0)})}function W$(d,h){for(var v=h.name||"$",E=[].concat(l(h.wants)),I=new d.i.StringList,N=a(h.wants),C=N.next();!C.done;C=N.next())I.push_back(C.value);N=d.i.PacketListener.implement({onResults:function(k){for(var F={},z=0;z<h.wants.length;++z)F[E[z]]=k.get(z);var Y=d.listeners[v];Y&&(d.I=z$(d,F,h.outs).then(function(me){me=Y(me);for(var ie=0;ie<h.wants.length;++ie){var Q=F[E[ie]];typeof Q=="object"&&Q.hasOwnProperty&&Q.hasOwnProperty("delete")&&Q.delete()}me&&(d.I=me)}))}}),d.j.attachMultiListener(I,N),I.delete()}t.onResults=function(d,h){this.listeners[h||"$"]=d},Le("Solution",Zy),Le("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function gD(d){switch(d===void 0&&(d=0),d){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function yD(d){var h=this;d=d||{},this.h=new Zy({locateFile:d.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:gD(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var E,I,N;return U(function(C){return C.h==1?(E=gD(v),I="third_party/mediapipe/modules/selfie_segmentation/"+E,M(C,tp(h.h,E),2)):(N=C.i,h.h.overrideFile(I,N),C.return(!0))})}}}})}t=yD.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(d){this.h.onResults(d)},t.initialize=function(){var d=this;return U(function(h){return M(h,d.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(d){var h=this;return U(function(v){return M(v,h.h.send(d),0)})},t.setOptions=function(d){this.h.setOptions(d)},Le("SelfieSegmentation",yD),Le("VERSION","0.1.1675465747")}).call(AF)});var ev;function ip(){return ev}function Oo(t){let e=ev;return ev=t,e}var _D=Symbol("NotFound");function bl(t){return t===_D||t?.name==="\u0275NotFound"}var Nn=null,sp=!1,tv=1,iV=null,Xt=Symbol("SIGNAL");function pe(t){let e=Nn;return Nn=t,e}function up(){return Nn}var js={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bs(t){if(sp)throw new Error("");if(Nn===null)return;Nn.consumerOnSignalRead(t);let e=Nn.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Nn.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Nn.producers,n!==void 0&&n.producer===t)){Nn.producersTail=n,n.lastReadVersion=t.version;return}let o=t.consumersTail;if(o!==void 0&&o.consumer===Nn&&(!r||aV(o,Nn)))return;let i=El(Nn),s={producer:t,consumer:Nn,nextProducer:n,prevConsumer:o,lastReadVersion:t.version,nextConsumer:void 0};Nn.producersTail=s,e!==void 0?e.nextProducer=s:Nn.producers=s,i&&TD(t,s)}function ED(){tv++}function dp(t){if(!(El(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===tv)){if(!t.producerMustRecompute(t)&&!_l(t)){cp(t);return}t.producerRecomputeValue(t),cp(t)}}function nv(t){if(t.consumers===void 0)return;let e=sp;sp=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||sV(r)}}finally{sp=e}}function rv(){return Nn?.consumerAllowSignalWrites!==!1}function sV(t){t.dirty=!0,nv(t),t.consumerMarkedDirty?.(t)}function cp(t){t.dirty=!1,t.lastCleanEpoch=tv}function Hs(t){return t&&SD(t),pe(t)}function SD(t){t.producersTail=void 0,t.recomputing=!0}function wl(t,e){pe(e),t&&xD(t)}function xD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(El(t))do n=ov(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function _l(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(dp(n),r!==n.version))return!0}return!1}function Us(t){if(El(t)){let e=t.producers;for(;e!==void 0;)e=ov(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function TD(t,e){let n=t.consumersTail,r=El(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let o=t.producers;o!==void 0;o=o.nextProducer)TD(o.producer,o)}function ov(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,o=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!El(e)){let i=e.producers;for(;i!==void 0;)i=ov(i)}return n}function El(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function fp(t){iV?.(t)}function aV(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function pp(t,e){return Object.is(t,e)}function cu(t,e){let n=Object.create(lV);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(dp(n),Bs(n),n.value===lu)throw n.error;return n.value};return r[Xt]=n,fp(n),r}var ap=Symbol("UNSET"),lp=Symbol("COMPUTING"),lu=Symbol("ERRORED"),lV=ce(B({},js),{value:ap,dirty:!0,error:null,equal:pp,kind:"computed",producerMustRecompute(t){return t.value===ap||t.value===lp},producerRecomputeValue(t){if(t.value===lp)throw new Error("");let e=t.value;t.value=lp;let n=Hs(t),r,o=!1;try{r=t.computation(),pe(null),o=e!==ap&&e!==lu&&r!==lu&&t.equal(e,r)}catch(i){r=lu,t.error=i}finally{wl(t,n)}if(o){t.value=e;return}t.value=r,t.version++}});function cV(){throw new Error}var ID=cV;function CD(t){ID(t)}function iv(t){ID=t}var uV=null;function sv(t,e){let n=Object.create(hp);n.value=t,e!==void 0&&(n.equal=e);let r=()=>DD(n);return r[Xt]=n,fp(n),[r,s=>zs(n,s),s=>av(n,s)]}function DD(t){return Bs(t),t.value}function zs(t,e){rv()||CD(t),t.equal(t.value,e)||(t.value=e,dV(t))}function av(t,e){rv()||CD(t),zs(t,e(t.value))}var hp=ce(B({},js),{equal:pp,value:void 0,kind:"signal"});function dV(t){t.version++,ED(),nv(t),uV?.(t)}function ue(t){return typeof t=="function"}function Sl(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mp=Sl(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(i){e=i instanceof mp?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{ND(i)}catch(s){e=e??[],s instanceof mp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ND(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gs(n,e)}remove(e){let{_finalizers:n}=this;n&&Gs(n,e),e instanceof t&&e._removeParent(this)}};pt.EMPTY=(()=>{let t=new pt;return t.closed=!0,t})();var lv=pt.EMPTY;function gp(t){return t instanceof pt||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function ND(t){ue(t)?t():t.unsubscribe()}var eo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xl={setTimeout(t,e,...n){let{delegate:r}=xl;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=xl;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yp(t){xl.setTimeout(()=>{let{onUnhandledError:e}=eo;if(e)e(t);else throw t})}function Ws(){}var AD=cv("C",void 0,void 0);function MD(t){return cv("E",void 0,t)}function kD(t){return cv("N",t,void 0)}function cv(t,e,n){return{kind:t,value:e,error:n}}var qs=null;function Tl(t){if(eo.useDeprecatedSynchronousErrorHandling){let e=!qs;if(e&&(qs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=qs;if(qs=null,n)throw r}}else t()}function OD(t){eo.useDeprecatedSynchronousErrorHandling&&qs&&(qs.errorThrown=!0,qs.error=t)}var Ks=class extends pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gp(e)&&e.add(this)):this.destination=hV}static create(e,n,r){return new ii(e,n,r)}next(e){this.isStopped?dv(kD(e),this):this._next(e)}error(e){this.isStopped?dv(MD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dv(AD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fV=Function.prototype.bind;function uv(t,e){return fV.call(t,e)}var fv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vp(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vp(r)}else vp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vp(n)}}},ii=class extends Ks{constructor(e,n,r){super();let o;if(ue(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&eo.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&uv(e.next,i),error:e.error&&uv(e.error,i),complete:e.complete&&uv(e.complete,i)}):o=e}this.destination=new fv(o)}};function vp(t){eo.useDeprecatedSynchronousErrorHandling?OD(t):yp(t)}function pV(t){throw t}function dv(t,e){let{onStoppedNotification:n}=eo;n&&xl.setTimeout(()=>n(t,e))}var hV={closed:!0,next:Ws,error:pV,complete:Ws};var Il=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Wn(t){return t}function pv(...t){return hv(t)}function hv(t){return t.length===0?Wn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=gV(n)?n:new ii(n,r,o);return Tl(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=RD(r),new r((o,i)=>{let s=new ii({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Il](){return this}pipe(...n){return hv(n)(this)}toPromise(n){return n=RD(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function RD(t){var e;return(e=t??eo.Promise)!==null&&e!==void 0?e:Promise}function mV(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}function gV(t){return t&&t instanceof Ks||mV(t)&&gp(t)}function mv(t){return ue(t?.lift)}function Re(t){return e=>{if(mv(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(t,e,n,r,o){return new gv(t,e,n,r,o)}var gv=class extends Ks{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Cl(){return Re((t,e)=>{let n=null;t._refCount++;let r=Ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Dl=class extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pt;let n=this.getSubject();e.add(this.source.subscribe(Ae(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pt.EMPTY)}return e}refCount(){return Cl()(this)}};var PD=Sl(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PD}next(n){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Tl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?lv:(this.currentObservers=null,i.push(n),new pt(()=>{this.currentObservers=null,Gs(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return t.create=(e,n)=>new bp(e,n),t})(),bp=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:lv}};var Nt=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yv={now(){return(yv.delegate||Date).now()},delegate:void 0};var wp=class extends pt{constructor(e,n){super()}schedule(e,n=0){return this}};var uu={setInterval(t,e,...n){let{delegate:r}=uu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=uu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _p=class extends wp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return uu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&uu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Gs(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Nl=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Nl.now=yv.now;var Ep=class extends Nl{constructor(e,n=Nl.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var vv=new Ep(_p),FD=vv;var rr=new Te(t=>t.complete());function Sp(t){return t&&ue(t.schedule)}function LD(t){return t[t.length-1]}function xp(t){return ue(LD(t))?t.pop():void 0}function ji(t){return Sp(LD(t))?t.pop():void 0}function VD(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(f){s(f)}}function l(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function $D(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ys(t){return this instanceof Ys?(this.v=t,this):new Ys(t)}function jD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(o[m]=function(x){return new Promise(function(T,D){i.push([m,x,T,D])>1||l(m,x)})},w&&(o[m]=w(o[m])))}function l(m,w){try{c(r[m](w))}catch(x){p(i[0][3],x)}}function c(m){m.value instanceof Ys?Promise.resolve(m.value.v).then(u,f):p(i[0][2],m)}function u(m){l("next",m)}function f(m){l("throw",m)}function p(m,w){m(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function BD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $D=="function"?$D(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var Al=t=>t&&typeof t.length=="number"&&typeof t!="function";function Tp(t){return ue(t?.then)}function Ip(t){return ue(t[Il])}function Cp(t){return Symbol.asyncIterator&&ue(t?.[Symbol.asyncIterator])}function Dp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Np=yV();function Ap(t){return ue(t?.[Np])}function Mp(t){return jD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield Ys(n.read());if(o)return yield Ys(void 0);yield yield Ys(r)}}finally{n.releaseLock()}})}function kp(t){return ue(t?.getReader)}function st(t){if(t instanceof Te)return t;if(t!=null){if(Ip(t))return vV(t);if(Al(t))return bV(t);if(Tp(t))return wV(t);if(Cp(t))return HD(t);if(Ap(t))return _V(t);if(kp(t))return EV(t)}throw Dp(t)}function vV(t){return new Te(e=>{let n=t[Il]();if(ue(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bV(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wV(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,yp)})}function _V(t){return new Te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HD(t){return new Te(e=>{SV(t,e).catch(n=>e.error(n))})}function EV(t){return HD(Mp(t))}function SV(t,e){var n,r,o,i;return VD(this,void 0,void 0,function*(){try{for(n=BD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function or(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function Op(t,e=0){return Re((n,r)=>{n.subscribe(Ae(r,o=>or(r,t,()=>r.next(o),e),()=>or(r,t,()=>r.complete(),e),o=>or(r,t,()=>r.error(o),e)))})}function Rp(t,e=0){return Re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function UD(t,e){return st(t).pipe(Rp(e),Op(e))}function zD(t,e){return st(t).pipe(Rp(e),Op(e))}function GD(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function WD(t,e){return new Te(n=>{let r;return or(n,e,()=>{r=t[Np](),or(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>ue(r?.return)&&r.return()})}function Pp(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{or(n,e,()=>{let r=t[Symbol.asyncIterator]();or(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function qD(t,e){return Pp(Mp(t),e)}function KD(t,e){if(t!=null){if(Ip(t))return UD(t,e);if(Al(t))return GD(t,e);if(Tp(t))return zD(t,e);if(Cp(t))return Pp(t,e);if(Ap(t))return WD(t,e);if(kp(t))return qD(t,e)}throw Dp(t)}function Ft(t,e){return e?KD(t,e):st(t)}function he(...t){let e=ji(t);return Ft(t,e)}function Ml(t,e){let n=ue(t)?t:()=>t,r=o=>o.error(n());return new Te(e?o=>e.schedule(r,0,o):r)}function Fp(t){return!!t&&(t instanceof Te||ue(t.lift)&&ue(t.subscribe))}var si=Sl(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function YD(t){return t instanceof Date&&!isNaN(t)}function ve(t,e){return Re((n,r)=>{let o=0;n.subscribe(Ae(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:xV}=Array;function TV(t,e){return xV(e)?t(...e):t(e)}function kl(t){return ve(e=>TV(t,e))}var{isArray:IV}=Array,{getPrototypeOf:CV,prototype:DV,keys:NV}=Object;function Lp(t){if(t.length===1){let e=t[0];if(IV(e))return{args:e,keys:null};if(AV(e)){let n=NV(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function AV(t){return t&&typeof t=="object"&&CV(t)===DV}function $p(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Vp(...t){let e=ji(t),n=xp(t),{args:r,keys:o}=Lp(t);if(r.length===0)return Ft([],e);let i=new Te(MV(r,e,o?s=>$p(o,s):Wn));return n?i.pipe(kl(n)):i}function MV(t,e,n=Wn){return r=>{XD(e,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)XD(e,()=>{let c=Ft(t[l],e),u=!1;c.subscribe(Ae(r,f=>{i[l]=f,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function XD(t,e,n){t?or(n,t,e):e()}function ZD(t,e,n,r,o,i,s,a){let l=[],c=0,u=0,f=!1,p=()=>{f&&!l.length&&!c&&e.complete()},m=x=>c<r?w(x):l.push(x),w=x=>{i&&e.next(x),c++;let T=!1;st(n(x,u++)).subscribe(Ae(e,D=>{o?.(D),i?m(D):e.next(D)},()=>{T=!0},void 0,()=>{if(T)try{for(c--;l.length&&c<r;){let D=l.shift();s?or(e,s,()=>w(D)):w(D)}p()}catch(D){e.error(D)}}))};return t.subscribe(Ae(e,m,()=>{f=!0,p()})),()=>{a?.()}}function jt(t,e,n=1/0){return ue(e)?jt((r,o)=>ve((i,s)=>e(r,i,o,s))(st(t(r,o))),n):(typeof e=="number"&&(n=e),Re((r,o)=>ZD(r,o,t,n)))}function QD(t=1/0){return jt(Wn,t)}function JD(){return QD(1)}function Ol(...t){return JD()(Ft(t,ji(t)))}function Xs(t){return new Te(e=>{st(t()).subscribe(e)})}function bv(...t){let e=xp(t),{args:n,keys:r}=Lp(t),o=new Te(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let f=!1;st(n[u]).subscribe(Ae(i,p=>{f||(f=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||i.next(r?$p(r,a):a),i.complete())}))}});return e?o.pipe(kl(e)):o}var kV=["addListener","removeListener"],OV=["addEventListener","removeEventListener"],RV=["on","off"];function to(t,e,n,r){if(ue(n)&&(r=n,n=void 0),r)return to(t,e,n).pipe(kl(r));let[o,i]=LV(t)?OV.map(s=>a=>t[s](e,a,n)):PV(t)?kV.map(eN(t,e)):FV(t)?RV.map(eN(t,e)):[];if(!o&&Al(t))return jt(s=>to(s,e,n))(st(t));if(!o)throw new TypeError("Invalid event target");return new Te(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function eN(t,e){return n=>r=>t[n](e,r)}function PV(t){return ue(t.addListener)&&ue(t.removeListener)}function FV(t){return ue(t.on)&&ue(t.off)}function LV(t){return ue(t.addEventListener)&&ue(t.removeEventListener)}function tN(t=0,e,n=FD){let r=-1;return e!=null&&(Sp(e)?n=e:r=e),new Te(o=>{let i=YD(t)?+t-n.now():t;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}var no=new Te(Ws);function At(t,e){return Re((n,r)=>{let o=0;n.subscribe(Ae(r,i=>t.call(e,i,o++)&&r.next(i)))})}function nN(t){return Re((e,n)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,n.next(c)}s&&n.complete()},l=()=>{i=null,s&&n.complete()};e.subscribe(Ae(n,c=>{r=!0,o=c,i||st(t(c)).subscribe(i=Ae(n,a,l))},()=>{s=!0,(!r||!i||i.closed)&&n.complete()}))})}function jp(t,e=vv){return nN(()=>tN(t,e))}function Bi(t){return Re((e,n)=>{let r=null,o=!1,i;r=e.subscribe(Ae(n,void 0,void 0,s=>{i=st(t(s,Bi(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function rN(t,e,n,r,o){return(i,s)=>{let a=n,l=e,c=0;i.subscribe(Ae(s,u=>{let f=c++;l=a?t(l,u,f):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function Rl(t,e){return ue(e)?jt(t,e,1):jt(t,1)}function Hi(t){return Re((e,n)=>{let r=!1;e.subscribe(Ae(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function An(t){return t<=0?()=>rr:Re((e,n)=>{let r=0;e.subscribe(Ae(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Bp(t,e=Wn){return t=t??$V,Re((n,r)=>{let o,i=!0;n.subscribe(Ae(r,s=>{let a=e(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}function $V(t,e){return t===e}function Hp(t=VV){return Re((e,n)=>{let r=!1;e.subscribe(Ae(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function VV(){return new si}function du(t){return Re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ai(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((o,i)=>t(o,i,r)):Wn,An(1),n?Hi(e):Hp(()=>new si))}function Pl(t){return t<=0?()=>rr:Re((e,n)=>{let r=[];e.subscribe(Ae(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Ui(t,e){let n=arguments.length>=2;return r=>r.pipe(t?At((o,i)=>t(o,i,r)):Wn,Pl(1),n?Hi(e):Hp(()=>new si))}function wv(t,e){return Re(rN(t,e,arguments.length>=2,!0))}function wr(t={}){let{connector:e=()=>new Me,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=l=void 0,u=f=!1},w=()=>{let x=s;m(),x?.unsubscribe()};return Re((x,T)=>{c++,!f&&!u&&p();let D=l=l??e();T.add(()=>{c--,c===0&&!f&&!u&&(a=_v(w,o))}),D.subscribe(T),!s&&c>0&&(s=new ii({next:P=>D.next(P),error:P=>{f=!0,p(),a=_v(m,n,P),D.error(P)},complete:()=>{u=!0,p(),a=_v(m,r),D.complete()}}),st(x).subscribe(s))})(i)}}function _v(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new ii({next:()=>{r.unsubscribe(),t()}});return st(e(...n)).subscribe(r)}function Ev(t){return At((e,n)=>t<=n)}function ro(...t){let e=ji(t);return Re((n,r)=>{(e?Ol(t,n,e):Ol(t,n)).subscribe(r)})}function qe(t,e){return Re((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(Ae(r,l=>{o?.unsubscribe();let c=0,u=i++;st(t(l,u)).subscribe(o=Ae(r,f=>r.next(e?e(l,f,u,c++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function sn(t){return Re((e,n)=>{st(t).subscribe(Ae(n,()=>n.complete(),Ws)),!n.closed&&e.subscribe(n)})}function Mt(t,e,n){let r=ue(t)||e||n?{next:t,error:e,complete:n}:t;return r?Re((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Ae(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Wn}function oN(t){let e=pe(null);try{return t()}finally{pe(e)}}var iN=ce(B({},js),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function sN(t){if(t.dirty=!1,t.version>0&&!_l(t))return;t.version++;let e=Hs(t);try{t.cleanup(),t.fn()}finally{wl(t,e)}}var Wp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",oe=class extends Error{code;constructor(e,n){super(gu(e,n)),this.code=e}};function jV(t){return`NG0${Math.abs(t)}`}function gu(t,e){return`${jV(t)}${e?": "+e:""}`}function Ze(t){for(let e in t)if(t[e]===Ze)return e;throw Error("")}function cN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ci(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ci).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ov(t,e){return t?e?`${t} ${e}`:t:e||""}var BV=Ze({__forward_ref__:Ze});function sr(t){return t.__forward_ref__=sr,t.toString=function(){return ci(this())},t}function wn(t){return Rv(t)?t():t}function Rv(t){return typeof t=="function"&&t.hasOwnProperty(BV)&&t.__forward_ref__===sr}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function yu(t){return HV(t,qp)}function Pv(t){return yu(t)!==null}function HV(t,e){return t.hasOwnProperty(e)&&t[e]||null}function UV(t){let e=t?.[qp]??null;return e||null}function xv(t){return t&&t.hasOwnProperty(zp)?t[zp]:null}var qp=Ze({\u0275prov:Ze}),zp=Ze({\u0275inj:Ze}),ee=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fv(t){return t&&!!t.\u0275providers}var Lv=Ze({\u0275cmp:Ze}),$v=Ze({\u0275dir:Ze}),Vv=Ze({\u0275pipe:Ze}),jv=Ze({\u0275mod:Ze}),pu=Ze({\u0275fac:Ze}),na=Ze({__NG_ELEMENT_ID__:Ze}),aN=Ze({__NG_ENV_ID__:Ze});function vu(t){return typeof t=="string"?t:t==null?"":String(t)}function uN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():vu(t)}var dN=Ze({ngErrorCode:Ze}),zV=Ze({ngErrorMessage:Ze}),GV=Ze({ngTokenPath:Ze});function Bv(t,e){return fN("",-200,e)}function Kp(t,e){throw new oe(-201,!1)}function fN(t,e,n){let r=new oe(e,t);return r[dN]=e,r[zV]=t,n&&(r[GV]=n),r}function WV(t){return t[dN]}var Tv;function pN(){return Tv}function _r(t){let e=Tv;return Tv=t,e}function Hv(t,e,n){let r=yu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Kp(t,"Injector")}var qV={},Zs=qV,KV="__NG_DI_FLAG__",Iv=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Qs(n)||0;try{return this.injector.get(e,r&8?null:Zs,r)}catch(o){if(bl(o))return o;throw o}}};function YV(t,e=0){let n=ip();if(n===void 0)throw new oe(-203,!1);if(n===null)return Hv(t,void 0,e);{let r=XV(e),o=n.retrieve(t,r);if(bl(o)){if(r.optional)return null;throw o}return o}}function Pe(t,e=0){return(pN()||YV)(wn(t),e)}function O(t,e){return Pe(t,Qs(e))}function Qs(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function XV(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Cv(t){let e=[];for(let n=0;n<t.length;n++){let r=wn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],l=ZV(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}e.push(Pe(o,i))}else e.push(Pe(r))}return e}function ZV(t){return t[KV]}function Js(t,e){let n=t.hasOwnProperty(pu);return n?t[pu]:null}function hN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function mN(t){return t.flat(Number.POSITIVE_INFINITY)}function Yp(t,e){t.forEach(n=>Array.isArray(n)?Yp(n,e):e(n))}function Uv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function yN(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let i=o-2;t[o]=t[i],o--}t[e]=n,t[e+1]=r}}function vN(t,e,n){let r=Ll(t,e);return r>=0?t[r|1]=n:(r=~r,yN(t,r,e,n)),r}function Xp(t,e){let n=Ll(t,e);if(n>=0)return t[n|1]}function Ll(t,e){return QV(t,e,1)}function QV(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}var Gi={},ir=[],ui=new ee(""),zv=new ee("",-1),Gv=new ee(""),hu=class{get(e,n=Zs){if(n===Zs){let o=fN("",-201);throw o.name="\u0275NotFound",o}return n}};function Wv(t){return t[jv]||null}function di(t){return t[Lv]||null}function qv(t){return t[$v]||null}function bN(t){return t[Vv]||null}function ra(t){return{\u0275providers:t}}function wN(t){return ra([{provide:ui,multi:!0,useValue:t}])}function _N(...t){return{\u0275providers:Kv(!0,t),\u0275fromNgModule:!0}}function Kv(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return Yp(e,s=>{let a=s;Gp(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&EN(o,i),n}function EN(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];Yv(o,i=>{e(i,r)})}}function Gp(t,e,n,r){if(t=wn(t),!t)return!1;let o=null,i=xv(t),s=!i&&di(t);if(!i&&!s){let l=t.ngModule;if(i=xv(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Gp(c,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{Yp(i.imports,u=>{Gp(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&EN(c,e)}if(!a){let c=Js(o)||(()=>new o);e({provide:o,useFactory:c,deps:ir},o),e({provide:Gv,useValue:o,multi:!0},o),e({provide:ui,useValue:()=>Pe(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=t;Yv(l,u=>{e(u,c)})}}else return!1;return o!==t&&t.providers!==void 0}function Yv(t,e){for(let n of t)Fv(n)&&(n=n.\u0275providers),Array.isArray(n)?Yv(n,e):e(n)}var JV=Ze({provide:String,useValue:Ze});function SN(t){return t!==null&&typeof t=="object"&&JV in t}function ej(t){return!!(t&&t.useExisting)}function tj(t){return!!(t&&t.useFactory)}function ea(t){return typeof t=="function"}function xN(t){return!!t.useClass}var wu=new ee(""),Up={},lN={},Sv;function $l(){return Sv===void 0&&(Sv=new hu),Sv}var kt=class{},ta=class extends kt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Nv(e,s=>this.processProvider(s)),this.records.set(zv,Fl(void 0,this)),o.has("environment")&&this.records.set(kt,Fl(void 0,this));let i=this.records.get(wu);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Gv,ir,{self:!0}))}retrieve(e,n){let r=Qs(n)||0;try{return this.get(e,Zs,r)}catch(o){if(bl(o))return o;throw o}}destroy(){fu(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return fu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fu(this);let n=Oo(this),r=_r(void 0),o;try{return e()}finally{Oo(n),_r(r)}}get(e,n=Zs,r){if(fu(this),e.hasOwnProperty(aN))return e[aN](this);let o=Qs(r),i,s=Oo(this),a=_r(void 0);try{if(!(o&4)){let c=this.records.get(e);if(c===void 0){let u=sj(e)&&yu(e);u&&this.injectableDefInScope(u)?c=Fl(Dv(e),Up):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,o)}let l=o&2?$l():this.parent;return n=o&8&&n===Zs?null:n,l.get(e,n)}catch(l){let c=WV(l);throw c===-200||c===-201?new oe(c,null):l}finally{_r(a),Oo(s)}}resolveInjectorInitializers(){let e=pe(null),n=Oo(this),r=_r(void 0),o;try{let i=this.get(ui,ir,{self:!0});for(let s of i)s()}finally{Oo(n),_r(r),pe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ci(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=wn(e);let n=ea(e)?e:wn(e&&e.provide),r=rj(e);if(!ea(e)&&e.multi===!0){let o=this.records.get(n);o||(o=Fl(void 0,Up,!0),o.factory=()=>Cv(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let o=pe(null);try{if(n.value===lN)throw Bv(ci(e));return n.value===Up&&(n.value=lN,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&ij(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{pe(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=wn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dv(t){let e=yu(t),n=e!==null?e.factory:Js(t);if(n!==null)return n;if(t instanceof ee)throw new oe(204,!1);if(t instanceof Function)return nj(t);throw new oe(204,!1)}function nj(t){if(t.length>0)throw new oe(204,!1);let n=UV(t);return n!==null?()=>n.factory(t):()=>new t}function rj(t){if(SN(t))return Fl(void 0,t.useValue);{let e=Xv(t);return Fl(e,Up)}}function Xv(t,e,n){let r;if(ea(t)){let o=wn(t);return Js(o)||Dv(o)}else if(SN(t))r=()=>wn(t.useValue);else if(tj(t))r=()=>t.useFactory(...Cv(t.deps||[]));else if(ej(t))r=(o,i)=>Pe(wn(t.useExisting),i!==void 0&&i&8?8:void 0);else{let o=wn(t&&(t.useClass||t.provide));if(oj(t))r=()=>new o(...Cv(t.deps));else return Js(o)||Dv(o)}return r}function fu(t){if(t.destroyed)throw new oe(205,!1)}function Fl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oj(t){return!!t.deps}function ij(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function sj(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Nv(t,e){for(let n of t)Array.isArray(n)?Nv(n,e):n&&Fv(n)?Nv(n.\u0275providers,e):e(n)}function qn(t,e){let n;t instanceof ta?(fu(t),n=t):n=new Iv(t);let r,o=Oo(n),i=_r(void 0);try{return e()}finally{Oo(o),_r(i)}}function TN(){return pN()!==void 0||ip()!=null}var io=0,de=1,ye=2,Zt=3,Pr=4,Kn=5,oa=6,Vl=7,Bt=8,Wi=9,Ro=10,ht=11,jl=12,Zv=13,ia=14,Yn=15,qi=16,sa=17,Po=18,_u=19,Qv=20,li=21,Zp=22,fi=23,Sr=24,aa=25,la=26,Lt=27,IN=1,Jv=6,Ki=7,Eu=8,ca=9,zt=10;function Fo(t){return Array.isArray(t)&&typeof t[IN]=="object"}function so(t){return Array.isArray(t)&&t[IN]===!0}function eb(t){return(t.flags&4)!==0}function Yi(t){return t.componentOffset>-1}function Su(t){return(t.flags&1)===1}function Lo(t){return!!t.template}function Bl(t){return(t[ye]&512)!==0}function ua(t){return(t[ye]&256)===256}var tb="svg",CN="math";function Fr(t){for(;Array.isArray(t);)t=t[io];return t}function nb(t,e){return Fr(e[t])}function ao(t,e){return Fr(e[t.index])}function xu(t,e){return t.data[e]}function DN(t,e){return t[e]}function Qp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Lr(t,e){let n=e[t];return Fo(n)?n:n[io]}function NN(t){return(t[ye]&4)===4}function Jp(t){return(t[ye]&128)===128}function AN(t){return so(t[Zt])}function $r(t,e){return e==null?null:t[e]}function rb(t){t[sa]=0}function ob(t){t[ye]&1024||(t[ye]|=1024,Jp(t)&&Xi(t))}function MN(t,e){for(;t>0;)e=e[ia],t--;return e}function Tu(t){return!!(t[ye]&9216||t[Sr]?.dirty)}function eh(t){t[Ro].changeDetectionScheduler?.notify(8),t[ye]&64&&(t[ye]|=1024),Tu(t)&&Xi(t)}function Xi(t){t[Ro].changeDetectionScheduler?.notify(0);let e=zi(t);for(;e!==null&&!(e[ye]&8192||(e[ye]|=8192,!Jp(e)));)e=zi(e)}function ib(t,e){if(ua(t))throw new oe(911,!1);t[li]===null&&(t[li]=[]),t[li].push(e)}function kN(t,e){if(t[li]===null)return;let n=t[li].indexOf(e);n!==-1&&t[li].splice(n,1)}function zi(t){let e=t[Zt];return so(e)?e[Zt]:e}function sb(t){return t[Vl]??=[]}function ab(t){return t.cleanup??=[]}function ON(t,e,n,r){let o=sb(e);o.push(n),t.firstCreatePass&&ab(t).push(r,o.length-1)}var Fe={lFrame:GN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Av=!1;function RN(){return Fe.lFrame.elementDepthCount}function PN(){Fe.lFrame.elementDepthCount++}function lb(){Fe.lFrame.elementDepthCount--}function cb(){return Fe.bindingsEnabled}function ub(){return Fe.skipHydrationRootTNode!==null}function db(t){return Fe.skipHydrationRootTNode===t}function fb(){Fe.skipHydrationRootTNode=null}function we(){return Fe.lFrame.lView}function xt(){return Fe.lFrame.tView}function Tt(t){return Fe.lFrame.contextLView=t,t[Bt]}function It(t){return Fe.lFrame.contextLView=null,t}function an(){let t=pb();for(;t!==null&&t.type===64;)t=t.parent;return t}function pb(){return Fe.lFrame.currentTNode}function FN(){let t=Fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function da(t,e){let n=Fe.lFrame;n.currentTNode=t,n.isParent=e}function hb(){return Fe.lFrame.isParent}function mb(){Fe.lFrame.isParent=!1}function LN(){return Fe.lFrame.contextLView}function gb(){return Av}function Hl(t){let e=Av;return Av=t,e}function $N(t){return Fe.lFrame.bindingIndex=t}function Zi(){return Fe.lFrame.bindingIndex++}function VN(t){let e=Fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function jN(){return Fe.lFrame.inI18n}function BN(t,e){let n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,th(e)}function HN(){return Fe.lFrame.currentDirectiveIndex}function th(t){Fe.lFrame.currentDirectiveIndex=t}function UN(t){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function nh(){return Fe.lFrame.currentQueryIndex}function Iu(t){Fe.lFrame.currentQueryIndex=t}function aj(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Kn]:null}function yb(t,e,n){if(n&4){let o=e,i=t;for(;o=o.parent,o===null&&!(n&1);)if(o=aj(i),o===null||(i=i[ia],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=Fe.lFrame=zN();return r.currentTNode=e,r.lView=t,!0}function rh(t){let e=zN(),n=t[de];Fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zN(){let t=Fe.lFrame,e=t===null?null:t.child;return e===null?GN(t):e}function GN(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function WN(){let t=Fe.lFrame;return Fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var vb=WN;function oh(){let t=WN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qN(t){return(Fe.lFrame.contextLView=MN(t,Fe.lFrame.contextLView))[Bt]}function pi(){return Fe.lFrame.selectedIndex}function Qi(t){Fe.lFrame.selectedIndex=t}function Cu(){let t=Fe.lFrame;return xu(t.tView,t.selectedIndex)}function ln(){Fe.lFrame.currentNamespace=tb}function fa(){lj()}function lj(){Fe.lFrame.currentNamespace=null}function KN(){return Fe.lFrame.currentNamespace}var YN=!0;function ih(){return YN}function sh(t){YN=t}function Mv(t,e=null,n=null,r){let o=bb(t,e,n,r);return o.resolveInjectorInitializers(),o}function bb(t,e=null,n=null,r,o=new Set){let i=[n||ir,_N(t)];return r=r||(typeof t=="object"?void 0:ci(t)),new ta(i,e||$l(),r||null,o)}var Ye=class t{static THROW_IF_NOT_FOUND=Zs;static NULL=new hu;static create(e,n){if(Array.isArray(e))return Mv({name:""},n,e,"");{let r=e.name??"";return Mv({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:t,providedIn:"any",factory:()=>Pe(zv)});static __NG_ELEMENT_ID__=-1},Ue=new ee(""),xr=(()=>{class t{static __NG_ELEMENT_ID__=cj;static __NG_ENV_ID__=n=>n}return t})(),mu=class extends xr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ua(this._lView)}onDestroy(e){let n=this._lView;return ib(n,e),()=>kN(n,e)}};function cj(){return new mu(we())}var Er=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Vr=new ee("",{providedIn:"root",factory:()=>{let t=O(kt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Er),e.handleError(n))}}}),XN={provide:ui,useValue:()=>void O(Er),multi:!0},uj=new ee("",{providedIn:"root",factory:()=>{let t=O(Ue).defaultView;if(!t)return;let e=O(Vr),n=i=>{e(i.reason),i.preventDefault()},r=i=>{i.error?e(i.error):e(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),O(xr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function wb(){return ra([wN(()=>void O(uj))])}function _b(t){return typeof t=="function"&&t[Xt]!==void 0}function Ee(t,e){let[n,r,o]=sv(t,e?.equal),i=n,s=i[Xt];return i.set=r,i.update=o,i.asReadonly=ah.bind(i),i}function ah(){let t=this[Xt];if(t.readonlyFn===void 0){let e=()=>this();e[Xt]=t,t.readonlyFn=e}return t.readonlyFn}function Eb(t){return _b(t)&&typeof t.set=="function"}var oo=class{},Du=new ee("",{providedIn:"root",factory:()=>!1});var Sb=new ee(""),lh=new ee("");var Ul=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=dj}return t})();function dj(){return new Ul(we(),an())}var hi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})();function pa(...t){}var Nu=(()=>{class t{static \u0275prov=q({token:t,providedIn:"root",factory:()=>new kv})}return t})(),kv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Vu(t){return{toString:t}.toString()}function yj(t){return typeof t=="function"}var mh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function N1(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var es=(()=>{let t=()=>A1;return t.ngInherit=!0,t})();function A1(t){return t.type.prototype.ngOnChanges&&(t.setInput=bj),vj}function vj(){let t=k1(this),e=t?.current;if(e){let n=t.previous;if(n===Gi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bj(t,e,n,r,o){let i=this.declaredInputs[r],s=k1(t)||wj(t,{previous:Gi,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new mh(c&&c.currentValue,n,l===Gi),N1(t,e,o,n)}var M1="__ngSimpleChanges__";function k1(t){return t[M1]||null}function wj(t,e){return t[M1]=e}var ZN=[];var nt=function(t,e=null,n){for(let r=0;r<ZN.length;r++){let o=ZN[r];o(t,e,n)}};function _j(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=A1(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function O1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function uh(t,e,n){R1(t,e,3,n)}function dh(t,e,n,r){(t[ye]&3)===n&&R1(t,e,n,r)}function xb(t,e){let n=t[ye];(n&3)===e&&(n&=16383,n+=1,t[ye]=n)}function R1(t,e,n,r){let o=r!==void 0?t[sa]&65535:0,i=r??-1,s=e.length-1,a=0;for(let l=o;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[sa]+=65536),(a<i||i==-1)&&(Ej(t,n,e,l),t[sa]=(t[sa]&4294901760)+l+2),l++}function QN(t,e){nt(4,t,e);let n=pe(null);try{e.call(t)}finally{pe(n),nt(5,t,e)}}function Ej(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=t[s];o?t[ye]>>14<t[sa]>>16&&(t[ye]&3)===e&&(t[ye]+=16384,QN(a,i)):QN(a,i)}var Gl=-1,ma=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function Sj(t){return(t.flags&8)!==0}function xj(t){return(t.flags&16)!==0}function Tj(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{let i=o,s=n[++r];Cj(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function Ij(t){return t===3||t===4||t===6}function Cj(t){return t.charCodeAt(0)===64}function Wl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?JN(t,n,o,null,e[++r]):JN(t,n,o,null,null))}}return t}function JN(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),o!==null&&t.splice(i++,0,o)}function P1(t){return t!==Gl}function gh(t){return t&32767}function Dj(t){return t>>16}function yh(t,e){let n=Dj(t),r=e;for(;n>0;)r=r[ia],n--;return r}var Rb=!0;function e1(t){let e=Rb;return Rb=t,e}var Nj=256,F1=Nj-1,L1=5,Aj=0,$o={};function Mj(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(na)&&(r=n[na]),r==null&&(r=n[na]=Aj++);let o=r&F1,i=1<<o;e.data[t+(o>>L1)]|=i}function vh(t,e){let n=$1(t,e);if(n!==-1)return n;let r=e[de];r.firstCreatePass&&(t.injectorIndex=e.length,Tb(r.data,t),Tb(e,null),Tb(r.blueprint,null));let o=cw(t,e),i=t.injectorIndex;if(P1(o)){let s=gh(o),a=yh(o,e),l=a[de].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function Tb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $1(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function cw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=U1(o),r===null)return Gl;if(n++,o=o[ia],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Gl}function Pb(t,e,n){Mj(t,e,n)}function V1(t,e,n){if(n&8||t!==void 0)return t;Kp(e,"NodeInjector")}function j1(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=t[Wi],i=_r(void 0);try{return o?o.get(e,r,n&8):Hv(e,r,n&8)}finally{_r(i)}}return V1(r,e,n)}function B1(t,e,n,r=0,o){if(t!==null){if(e[ye]&2048&&!(r&2)){let s=Pj(t,e,n,r,$o);if(s!==$o)return s}let i=H1(t,e,n,r,$o);if(i!==$o)return i}return j1(e,n,r,o)}function H1(t,e,n,r,o){let i=Oj(n);if(typeof i=="function"){if(!yb(e,t,r))return r&1?V1(o,n,r):j1(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Kp(n);else return s}finally{vb()}}else if(typeof i=="number"){let s=null,a=$1(t,e),l=Gl,c=r&1?e[Yn][Kn]:null;for((a===-1||r&4)&&(l=a===-1?cw(t,e):e[a+8],l===Gl||!n1(r,!1)?a=-1:(s=e[de],a=gh(l),e=yh(l,e)));a!==-1;){let u=e[de];if(t1(i,a,u.data)){let f=kj(a,e,n,s,r,c);if(f!==$o)return f}l=e[a+8],l!==Gl&&n1(r,e[de].data[a+8]===c)&&t1(i,a,e)?(s=u,a=gh(l),e=yh(l,e)):a=-1}}return o}function kj(t,e,n,r,o,i){let s=e[de],a=s.data[t+8],l=r==null?Yi(a)&&Rb:r!=s&&(a.type&3)!==0,c=o&1&&i===a,u=fh(a,s,n,l,c);return u!==null?ku(e,s,u,a,o):$o}function fh(t,e,n,r,o){let i=t.providerIndexes,s=e.data,a=i&1048575,l=t.directiveStart,c=t.directiveEnd,u=i>>20,f=r?a:a+u,p=o?a+u:c;for(let m=f;m<p;m++){let w=s[m];if(m<l&&n===w||m>=l&&w.type===n)return m}if(o){let m=s[l];if(m&&Lo(m)&&m.type===n)return l}return null}function ku(t,e,n,r,o){let i=t[n],s=e.data;if(i instanceof ma){let a=i;if(a.resolving){let m=uN(s[n]);throw Bv(m)}let l=e1(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],u,f=a.injectImpl?_r(a.injectImpl):null,p=yb(t,r,0);try{i=t[n]=a.factory(void 0,o,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&_j(n,s[n],e)}finally{f!==null&&_r(f),e1(l),a.resolving=!1,vb()}}return i}function Oj(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(na)?t[na]:void 0;return typeof e=="number"?e>=0?e&F1:Rj:e}function t1(t,e,n){let r=1<<t;return!!(n[e+(t>>L1)]&r)}function n1(t,e){return!(t&2)&&!(t&1&&e)}var ha=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return B1(this._tNode,this._lView,e,Qs(r),n)}};function Rj(){return new ha(an(),we())}function jr(t){return Vu(()=>{let e=t.prototype.constructor,n=e[pu]||Fb(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[pu]||Fb(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Fb(t){return Rv(t)?()=>{let e=Fb(wn(t));return e&&e()}:Js(t)}function Pj(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[ye]&2048&&!Bl(s);){let a=H1(i,s,n,r|2,$o);if(a!==$o)return a;let l=i.parent;if(!l){let c=s[Qv];if(c){let u=c.get(n,$o,r);if(u!==$o)return u}l=U1(s),s=s[ia]}i=l}return o}function U1(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Kn]:null}function Fj(){return Xl(an(),we())}function Xl(t,e){return new lt(ao(t,e))}var lt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Fj}return t})();function z1(t){return t instanceof lt?t.nativeElement:t}function Lj(){return this._results[Symbol.iterator]()}var bh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=mN(e);(this._changesDetected=!hN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Lj};function G1(t){return(t.flags&128)===128}var uw=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(uw||{}),W1=new Map,$j=0;function Vj(){return $j++}function jj(t){W1.set(t[_u],t)}function Lb(t){W1.delete(t[_u])}var r1="__ngContext__";function ql(t,e){Fo(e)?(t[r1]=e[_u],jj(e)):t[r1]=e}function q1(t){return Y1(t[jl])}function K1(t){return Y1(t[Pr])}function Y1(t){for(;t!==null&&!so(t);)t=t[Pr];return t}var $b;function dw(t){$b=t}function X1(){if($b!==void 0)return $b;if(typeof document<"u")return document;throw new oe(210,!1)}var Zl=new ee("",{providedIn:"root",factory:()=>Bj}),Bj="ng",Ph=new ee(""),ts=new ee("",{providedIn:"platform",factory:()=>"unknown"});var fw=new ee(""),Fh=new ee("",{providedIn:"root",factory:()=>X1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Hj="h",Uj="b";var Z1="r";var Q1="di";var J1=!1,eA=new ee("",{providedIn:"root",factory:()=>J1});var zj=(t,e,n,r)=>{};function Gj(t,e,n,r){zj(t,e,n,r)}function Lh(t){return(t.flags&32)===32}var Wj=()=>null;function tA(t,e,n=!1){return Wj(t,e,n)}function nA(t,e){let n=t.contentQueries;if(n!==null){let r=pe(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=t.data[s];Iu(i),a.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function Vb(t,e,n){Iu(0);let r=pe(null);try{e(t,n)}finally{pe(r)}}function rA(t,e,n){if(eb(e)){let r=pe(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{pe(r)}}}var mi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(mi||{});var wh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Wp})`}};function pw(t){return t instanceof wh?t.changingThisBreaksApplicationSecurity:t}function oA(t,e){let n=iA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Wp})`)}return n===e}function iA(t){return t instanceof wh&&t.getTypeName()||null}var qj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function sA(t){return t=String(t),t.match(qj)?t:"unsafe:"+t}var hw=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(hw||{});function mw(t){let e=Kj();return e?e.sanitize(hw.URL,t)||"":oA(t,"URL")?pw(t):sA(vu(t))}function Kj(){let t=we();return t&&t[Ro].sanitizer}function aA(t){return t instanceof Function?t():t}function Yj(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}var lA="ng-template";function Xj(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&Yj(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(gw(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function gw(t){return t.type===4&&t.value!==lA}function Zj(t,e,n){let r=t.type===4&&!n?lA:t.value;return e===r}function Qj(t,e,n){let r=4,o=t.attrs,i=o!==null?tB(o):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!lo(r)&&!lo(l))return!1;if(s&&lo(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Zj(t,l,n)||l===""&&e.length===1){if(lo(r))return!1;s=!0}}else if(r&8){if(o===null||!Xj(t,o,l,n)){if(lo(r))return!1;s=!0}}else{let c=e[++a],u=Jj(l,o,gw(t),n);if(u===-1){if(lo(r))return!1;s=!0;continue}if(c!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&c!==f){if(lo(r))return!1;s=!0}}}}return lo(r)||s}function lo(t){return(t&1)===0}function Jj(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return nB(e,t)}function cA(t,e,n=!1){for(let r=0;r<e.length;r++)if(Qj(t,e[r],n))return!0;return!1}function eB(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function tB(t){for(let e=0;e<t.length;e++){let n=t[e];if(Ij(n))return e}return t.length}function nB(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rB(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function o1(t,e){return t?":not("+e.trim()+")":e}function oB(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!lo(s)&&(e+=o1(i,o),o=""),r=s,i=i||!lo(r);n++}return o!==""&&(e+=o1(i,o)),e}function iB(t){return t.map(oB).join(",")}function sB(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!lo(o))break;o=i}r++}return n.length&&e.push(1,...n),e}var vi={};function aB(t,e){return t.createText(e)}function lB(t,e,n){t.setValue(e,n)}function uA(t,e,n){return t.createElement(e,n)}function _h(t,e,n,r,o){t.insertBefore(e,n,r,o)}function dA(t,e,n){t.appendChild(e,n)}function i1(t,e,n,r,o){r!==null?_h(t,e,n,r,o):dA(t,e,n)}function fA(t,e,n,r){t.removeChild(null,e,n,r)}function cB(t,e,n){t.setAttribute(e,"style",n)}function uB(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pA(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&Tj(t,e,r),o!==null&&uB(t,e,o),i!==null&&cB(t,e,i)}function yw(t,e,n,r,o,i,s,a,l,c,u){let f=Lt+r,p=f+o,m=dB(f,p),w=typeof c=="function"?c():c;return m[de]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:u}}function dB(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:vi);return n}function fB(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=yw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vw(t,e,n,r,o,i,s,a,l,c,u){let f=e.blueprint.slice();return f[io]=o,f[ye]=r|4|128|8|64|1024,(c!==null||t&&t[ye]&2048)&&(f[ye]|=2048),rb(f),f[Zt]=f[ia]=t,f[Bt]=n,f[Ro]=s||t&&t[Ro],f[ht]=a||t&&t[ht],f[Wi]=l||t&&t[Wi]||null,f[Kn]=i,f[_u]=Vj(),f[oa]=u,f[Qv]=c,f[Yn]=e.type==2?t[Yn]:f,f}function pB(t,e,n){let r=ao(e,t),o=fB(n),i=t[Ro].rendererFactory,s=bw(t,vw(t,o,null,hA(n),r,e,null,i.createRenderer(r,n),null,null,null));return t[e.index]=s}function hA(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function mA(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function bw(t,e){return t[jl]?t[Zv][Pr]=e:t[jl]=e,t[Zv]=e,e}function fe(t=1){gA(xt(),we(),pi()+t,!1)}function gA(t,e,n,r){if(!r)if((e[ye]&3)===3){let i=t.preOrderCheckHooks;i!==null&&uh(e,i,n)}else{let i=t.preOrderHooks;i!==null&&dh(e,i,0,n)}Qi(n)}var $h=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})($h||{});function jb(t,e,n,r){let o=pe(null);try{let[i,s,a]=t.inputs[n],l=null;(s&$h.SignalBased)!==0&&(l=e[i][Xt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,i):N1(e,l,i,r)}finally{pe(o)}}var gi=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(gi||{}),hB;function ww(t,e){return hB(t,e)}var ju=new Set;var yA=new ee("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1})});function s1(t,e,n,r){let o=t?.[la]?.enter;if(e!==null&&o&&o.has(n.index)){let i=r.get(yA);for(let s of o.get(n.index).animateFns)i.queue.add(s)}}function zl(t,e,n,r,o,i,s,a){if(o!=null){let l,c=!1;so(o)?l=o:Fo(o)&&(c=!0,o=o[io]);let u=Fr(o);t===0&&r!==null?(s1(a,r,i,n),s==null?dA(e,r,u):_h(e,r,u,s||null,!0)):t===1&&r!==null?(s1(a,r,i,n),_h(e,r,u,s||null,!0)):t===2?a1(a,i,n,f=>{fA(e,u,c,f)}):t===3&&a1(a,i,n,()=>{e.destroyNode(u)}),l!=null&&IB(e,t,n,l,i,r,s)}}function mB(t,e){let n=t.get(yA);if(Array.isArray(e))for(let r of e)n.queue.add(r);else n.queue.add(e)}function gB(t,e){vA(t,e),e[io]=null,e[Kn]=null}function yB(t,e,n,r,o,i){r[io]=o,r[Kn]=e,jh(t,r,n,1,o,i)}function vA(t,e){e[Ro].changeDetectionScheduler?.notify(9),jh(t,e,e[ht],2,null,null)}function vB(t){let e=t[jl];if(!e)return Ib(t[de],t);for(;e;){let n=null;if(Fo(e))n=e[jl];else{let r=e[zt];r&&(n=r)}if(!n){for(;e&&!e[Pr]&&e!==t;)Fo(e)&&Ib(e[de],e),e=e[Zt];e===null&&(e=t),Fo(e)&&Ib(e[de],e),n=e&&e[Pr]}e=n}}function _w(t,e){let n=t[ca],r=n.indexOf(e);n.splice(r,1)}function Vh(t,e){if(ua(e))return;let n=e[ht];n.destroyNode&&jh(t,e,n,3,null,null),vB(e)}function Ib(t,e){if(ua(e))return;let n=pe(null);try{e[ye]&=-129,e[ye]|=256,e[Sr]&&Us(e[Sr]),_B(t,e),wB(t,e),e[de].type===1&&e[ht].destroy();let r=e[qi];if(r!==null&&so(e[Zt])){r!==e[Zt]&&_w(r,e);let o=e[Po];o!==null&&o.detachView(t)}Lb(e)}finally{pe(n)}}function a1(t,e,n,r){let o=t?.[la];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);if(o.skipLeaveAnimations)return o.skipLeaveAnimations=!1,r(!1);mB(n,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}o.running=Promise.allSettled(a),bB(t,r)}else t&&ju.delete(t),r(!1)})}function bB(t,e){let n=t[la]?.running;if(n){n.then(()=>{t[la].running=void 0,ju.delete(t),e(!0)});return}e(!1)}function wB(t,e){let n=t.cleanup,r=e[Vl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Vl]=null);let o=e[li];if(o!==null){e[li]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[fi];if(i!==null){e[fi]=null;for(let s of i)s.destroy()}}function _B(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof ma)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];nt(4,a,l);try{l.call(a)}finally{nt(5,a,l)}}else{nt(4,o,i);try{i.call(o)}finally{nt(5,o,i)}}}}}function bA(t,e,n){return EB(t,e.parent,n)}function EB(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[io];if(Yi(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===mi.None||o===mi.Emulated)return null}return ao(r,n)}function wA(t,e,n){return xB(t,e,n)}function SB(t,e,n){return t.type&40?ao(t,n):null}var xB=SB,l1;function Ew(t,e,n,r){let o=bA(t,r,e),i=e[ht],s=r.parent||e[Kn],a=wA(s,r,e);if(o!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)i1(i,o,n[l],a,!1);else i1(i,o,n,a,!1);l1!==void 0&&l1(i,r,e,n,o)}function Au(t,e){if(e!==null){let n=e.type;if(n&3)return ao(e,t);if(n&4)return Bb(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Au(t,r);{let o=t[e.index];return so(o)?Bb(-1,o):Fr(o)}}else{if(n&128)return Au(t,e.next);if(n&32)return ww(e,t)()||Fr(t[e.index]);{let r=_A(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=zi(t[Yn]);return Au(o,r)}else return Au(t,e.next)}}}return null}function _A(t,e){if(e!==null){let r=t[Yn][Kn],o=e.projection;return r.projection[o]}return null}function Bb(t,e){let n=zt+t+1;if(n<e.length){let r=e[n],o=r[de].firstChild;if(o!==null)return Au(r,o)}return e[Ki]}function Sw(t,e,n,r,o,i,s){for(;n!=null;){let a=r[Wi];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(s&&e===0&&(l&&ql(Fr(l),r),n.flags|=2),!Lh(n))if(c&8)Sw(t,e,n.child,r,o,i,!1),zl(e,t,a,o,l,n,i,r);else if(c&32){let u=ww(n,r),f;for(;f=u();)zl(e,t,a,o,f,n,i,r);zl(e,t,a,o,l,n,i,r)}else c&16?EA(t,e,r,n,o,i):zl(e,t,a,o,l,n,i,r);n=s?n.projectionNext:n.next}}function jh(t,e,n,r,o,i){Sw(n,r,t.firstChild,e,o,i,!1)}function TB(t,e,n){let r=e[ht],o=bA(t,n,e),i=n.parent||e[Kn],s=wA(i,n,e);EA(r,0,e,n,o,s)}function EA(t,e,n,r,o,i){let s=n[Yn],l=s[Kn].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];zl(e,t,n[Wi],o,u,r,i,n)}else{let c=l,u=s[Zt];G1(r)&&(c.flags|=128),Sw(t,e,c,u,o,i,!0)}}function IB(t,e,n,r,o,i,s){let a=r[Ki],l=Fr(r);a!==l&&zl(e,t,n,i,a,o,s);for(let c=zt;c<r.length;c++){let u=r[c];jh(u[de],u,t,e,i,a)}}function CB(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:gi.DashCase;o==null?t.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=gi.Important),t.setStyle(n,r,o,i))}}function SA(t,e,n,r,o){let i=pi(),s=r&2;try{Qi(-1),s&&e.length>Lt&&gA(t,e,Lt,!1),nt(s?2:0,o,n),n(r,o)}finally{Qi(i),nt(s?3:1,o,n)}}function xw(t,e,n){OB(t,e,n),(n.flags&64)===64&&RB(t,e,n)}function Bh(t,e,n=ao){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(e,t):t[s];t[o++]=a}}}function DB(t,e,n,r){let i=r.get(eA,J1)||n===mi.ShadowDom,s=t.selectRootElement(e,i);return NB(s),s}function NB(t){AB(t)}var AB=()=>null;function MB(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function xA(t,e,n,r,o,i){let s=e[de];if(Tw(t,s,e,n,r)){Yi(t)&&kB(e,t.index);return}t.type&3&&(n=MB(n)),TA(t,e,n,r,o,i)}function TA(t,e,n,r,o,i){if(t.type&3){let s=ao(t,e);r=i!=null?i(r,t.value||"",n):r,o.setProperty(s,n,r)}else t.type&12}function kB(t,e){let n=Lr(e,t);n[ye]&16||(n[ye]|=64)}function OB(t,e,n){let r=n.directiveStart,o=n.directiveEnd;Yi(n)&&pB(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||vh(n,e);let i=n.initialInputs;for(let s=r;s<o;s++){let a=t.data[s],l=ku(e,t,s,n);if(ql(l,e),i!==null&&$B(e,s-r,l,a,n,i),Lo(a)){let c=Lr(n.index,e);c[Bt]=ku(e,t,s,n)}}}function RB(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=HN();try{Qi(i);for(let a=r;a<o;a++){let l=t.data[a],c=e[a];th(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&PB(l,c)}}finally{Qi(-1),th(s)}}function PB(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function IA(t,e){let n=t.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];cA(e,i.selectors,!1)&&(r??=[],Lo(i)?r.unshift(i):r.push(i))}return r}function FB(t,e,n,r,o,i){let s=ao(t,e);LB(e[ht],s,i,t.value,n,r,o)}function LB(t,e,n,r,o,i,s){if(i==null)t.removeAttribute(e,o,n);else{let a=s==null?vu(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}function $B(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];jb(r,n,l,c)}}function CA(t,e,n,r,o){let i=Lt+n,s=e[de],a=o(s,e,t,r,n);e[i]=a,da(t,!0);let l=t.type===2;return l?(pA(e[ht],a,t),(RN()===0||Su(t))&&ql(a,e),PN()):ql(a,e),ih()&&(!l||!Lh(t))&&Ew(s,e,a,t),t}function DA(t){let e=t;return hb()?mb():(e=e.parent,da(e,!1)),e}function VB(t,e){let n=t[Wi];if(!n)return;let r;try{r=n.get(Vr,null)}catch{r=null}r?.(e)}function Tw(t,e,n,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],f=e.data[c];jb(f,n[c],u,o),a=!0}if(i)for(let l of i){let c=n[l],u=e.data[l];jb(u,c,r,o),a=!0}return a}function jB(t,e){let n=Lr(e,t),r=n[de];BB(r,n);let o=n[io];o!==null&&n[oa]===null&&(n[oa]=tA(o,n[Wi])),nt(18),Iw(r,n,n[Bt]),nt(19,n[Bt])}function BB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Iw(t,e,n){rh(e);try{let r=t.viewQuery;r!==null&&Vb(1,r,n);let o=t.template;o!==null&&SA(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Po]?.finishViewCreation(t),t.staticContentQueries&&nA(t,e),t.staticViewQueries&&Vb(2,t.viewQuery,n);let i=t.components;i!==null&&HB(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ye]&=-5,oh()}}function HB(t,e){for(let n=0;n<e.length;n++)jB(t,e[n])}function Bu(t,e,n,r){let o=pe(null);try{let i=e.tView,a=t[ye]&4096?4096:16,l=vw(t,i,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[qi]=c;let u=t[Po];return u!==null&&(l[Po]=u.createEmbeddedView(i)),Iw(i,l,n),l}finally{pe(o)}}function Kl(t,e){return!e||e.firstChild===null||G1(t)}function Ou(t,e,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=e[n.index];i!==null&&r.push(Fr(i)),so(i)&&NA(i,r);let s=n.type;if(s&8)Ou(t,e,n.child,r);else if(s&32){let a=ww(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=_A(e,n);if(Array.isArray(a))r.push(...a);else{let l=zi(e[Yn]);Ou(l[de],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function NA(t,e){for(let n=zt;n<t.length;n++){let r=t[n],o=r[de].firstChild;o!==null&&Ou(r[de],r,o,e)}t[Ki]!==t[io]&&e.push(t[Ki])}function AA(t){if(t[aa]!==null){for(let e of t[aa])e.impl.addSequence(e);t[aa].length=0}}var MA=[];function UB(t){return t[Sr]??zB(t)}function zB(t){let e=MA.pop()??Object.create(WB);return e.lView=t,e}function GB(t){t.lView[Sr]!==t&&(t.lView=null,MA.push(t))}var WB=ce(B({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Xi(t.lView)},consumerOnSignalRead(){this.lView[Sr]=this}});function qB(t){let e=t[Sr]??Object.create(KB);return e.lView=t,e}var KB=ce(B({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=zi(t.lView);for(;e&&!kA(e[de]);)e=zi(e);e&&ob(e)},consumerOnSignalRead(){this.lView[Sr]=this}});function kA(t){return t.type!==2}function OA(t){if(t[fi]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[fi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ye]&8192)}}var YB=100;function RA(t,e=0){let r=t[Ro].rendererFactory,o=!1;o||r.begin?.();try{XB(t,e)}finally{o||r.end?.()}}function XB(t,e){let n=gb();try{Hl(!0),Hb(t,e);let r=0;for(;Tu(t);){if(r===YB)throw new oe(103,!1);r++,Hb(t,1)}}finally{Hl(n)}}function ZB(t,e,n,r){if(ua(e))return;let o=e[ye],i=!1,s=!1;rh(e);let a=!0,l=null,c=null;i||(kA(t)?(c=UB(e),l=Hs(c)):up()===null?(a=!1,c=qB(e),l=Hs(c)):e[Sr]&&(Us(e[Sr]),e[Sr]=null));try{rb(e),$N(t.bindingStartIndex),n!==null&&SA(t,e,n,2,r);let u=(o&3)===3;if(!i)if(u){let m=t.preOrderCheckHooks;m!==null&&uh(e,m,null)}else{let m=t.preOrderHooks;m!==null&&dh(e,m,0,null),xb(e,0)}if(s||QB(e),OA(e),PA(e,0),t.contentQueries!==null&&nA(t,e),!i)if(u){let m=t.contentCheckHooks;m!==null&&uh(e,m)}else{let m=t.contentHooks;m!==null&&dh(e,m,1),xb(e,1)}e3(t,e);let f=t.components;f!==null&&LA(e,f,0);let p=t.viewQuery;if(p!==null&&Vb(2,p,r),!i)if(u){let m=t.viewCheckHooks;m!==null&&uh(e,m)}else{let m=t.viewHooks;m!==null&&dh(e,m,2),xb(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Zp]){for(let m of e[Zp])m();e[Zp]=null}i||(AA(e),e[ye]&=-73)}catch(u){throw i||Xi(e),u}finally{c!==null&&(wl(c,l),a&&GB(c)),oh()}}function PA(t,e){for(let n=q1(t);n!==null;n=K1(n))for(let r=zt;r<n.length;r++){let o=n[r];FA(o,e)}}function QB(t){for(let e=q1(t);e!==null;e=K1(e)){if(!(e[ye]&2))continue;let n=e[ca];for(let r=0;r<n.length;r++){let o=n[r];ob(o)}}}function JB(t,e,n){nt(18);let r=Lr(e,t);FA(r,n),nt(19,r[Bt])}function FA(t,e){Jp(t)&&Hb(t,e)}function Hb(t,e){let r=t[de],o=t[ye],i=t[Sr],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&_l(i)),s||=!1,i&&(i.dirty=!1),t[ye]&=-9217,s)ZB(r,t,r.template,t[Bt]);else if(o&8192){let a=pe(null);try{OA(t),PA(t,1);let l=r.components;l!==null&&LA(t,l,1),AA(t)}finally{pe(a)}}}function LA(t,e,n){for(let r=0;r<e.length;r++)JB(t,e[r],n)}function e3(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)Qi(~o);else{let i=o,s=n[++r],a=n[++r];BN(s,i);let l=e[i];nt(24,l),a(2,l),nt(25,l)}}}finally{Qi(-1)}}function Cw(t,e){let n=gb()?64:1088;for(t[Ro].changeDetectionScheduler?.notify(e);t;){t[ye]|=n;let r=zi(t);if(Bl(t)&&!r)return t;t=r}return null}function $A(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function VA(t,e){let n=zt+e;if(n<t.length)return t[n]}function Hu(t,e,n,r=!0){let o=e[de];if(t3(o,e,t,n),r){let s=Bb(n,t),a=e[ht],l=a.parentNode(t[Ki]);l!==null&&yB(o,t[Kn],a,e,l,s)}let i=e[oa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function jA(t,e){let n=Ru(t,e);return n!==void 0&&Vh(n[de],n),n}function Ru(t,e){if(t.length<=zt)return;let n=zt+e,r=t[n];if(r){let o=r[qi];o!==null&&o!==t&&_w(o,r),e>0&&(t[n-1][Pr]=r[Pr]);let i=bu(t,zt+e);gB(r[de],r);let s=i[Po];s!==null&&s.detachView(i[de]),r[Zt]=null,r[Pr]=null,r[ye]&=-129}return r}function t3(t,e,n,r){let o=zt+r,i=n.length;r>0&&(n[o-1][Pr]=e),r<i-zt?(e[Pr]=n[o],Uv(n,zt+r,e)):(n.push(e),e[Pr]=null),e[Zt]=n;let s=e[qi];s!==null&&n!==s&&BA(s,e);let a=e[Po];a!==null&&a.insertView(t),eh(e),e[ye]|=128}function BA(t,e){let n=t[ca],r=e[Zt];if(Fo(r))t[ye]|=2;else{let o=r[Zt][Yn];e[Yn]!==o&&(t[ye]|=2)}n===null?t[ca]=[e]:n.push(e)}var Ji=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[de];return Ou(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return ua(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(so(e)){let n=e[Eu],r=n?n.indexOf(this):-1;r>-1&&(Ru(e,r),bu(n,r))}this._attachedToViewContainer=!1}Vh(this._lView[de],this._lView)}onDestroy(e){ib(this._lView,e)}markForCheck(){Cw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){eh(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,RA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Bl(this._lView),n=this._lView[qi];n!==null&&!e&&_w(n,this._lView),vA(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let n=Bl(this._lView),r=this._lView[qi];r!==null&&!n&&BA(r,this._lView),eh(this._lView)}};var co=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=n3;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let i=Bu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Ji(i)}}return t})();function n3(){return Dw(an(),we())}function Dw(t,e){return t.type&4?new co(e,t,Xl(t,e)):null}function va(t,e,n,r,o){let i=t.data[e];if(i===null)i=r3(t,e,n,r,o),jN()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=FN();i.injectorIndex=s===null?-1:s.injectorIndex}return da(i,!0),i}function r3(t,e,n,r,o){let i=pb(),s=hb(),a=s?i:i&&i.parent,l=t.data[e]=i3(t,a,n,e,r,o);return o3(t,l,i,s),l}function o3(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function i3(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return ub()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var use=new RegExp(`^(\\d+)*(${Uj}|${Hj})*(.*)`);function s3(t){let e=t[Jv]??[],r=t[Zt][ht],o=[];for(let i of e)i.data[Q1]!==void 0?o.push(i):a3(i,r);t[Jv]=o}function a3(t,e){let n=0,r=t.firstChild;if(r){let o=t.data[Z1];for(;n<o;){let i=r.nextSibling;fA(e,r,!1),r=i,n++}}}var l3=()=>null,c3=()=>null;function Eh(t,e){return l3(t,e)}function HA(t,e,n){return c3(t,e,n)}var UA=class{},Hh=class{},Ub=class{resolveComponentFactory(e){throw new oe(917,!1)}},Uu=class{static NULL=new Ub},Mn=class{},bi=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>u3()}return t})();function u3(){let t=we(),e=an(),n=Lr(e.index,t);return(Fo(n)?n:t)[ht]}var zA=(()=>{class t{static \u0275prov=q({token:t,providedIn:"root",factory:()=>null})}return t})();var ph={},zb=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let o=this.injector.get(e,ph,r);return o!==ph||n===ph?o:this.parentInjector.get(e,n,r)}};function Sh(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=Ov(o,a);else if(i==2){let l=a,c=e[++s];r=Ov(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function _n(t,e=0){let n=we();if(n===null)return Pe(t,e);let r=an();return B1(r,n,wn(t),e)}function GA(t,e,n,r,o){let i=r===null?null:{"":-1},s=o(t,n);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}p3(t,e,n,a,i,l,c)}i!==null&&r!==null&&d3(n,r,i)}function d3(t,e,n){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new oe(-301,!1);r.push(e[o],i)}}function f3(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function p3(t,e,n,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let m=r[p];!l&&Lo(m)&&(l=!0,f3(t,n,p)),Pb(vh(n,e),t,m.type)}b3(n,t.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,f=mA(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(n.mergedAttrs=Wl(n.mergedAttrs,m.hostAttrs),m3(t,n,e,f,m),v3(f,m,o),s!==null&&s.has(m)){let[x,T]=s.get(m);n.directiveToIndex.set(m.type,[f,x+n.directiveStart,T+n.directiveStart])}else(i===null||!i.has(m))&&n.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let w=m.type.prototype;!c&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!u&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),f++}h3(t,n,i)}function h3(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=t.data[r];if(n===null||!n.has(o))c1(0,e,o,r),c1(1,e,o,r),d1(e,r,!1);else{let i=n.get(o);u1(0,e,i,r),u1(1,e,i,r),d1(e,r,!0)}}}function c1(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),WA(e,i)}}function u1(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),WA(e,s)}}function WA(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function d1(t,e,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!n&&o===null||n&&i===null||gw(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===e){s??=[],s.push(l,r[a+1]);break}}else if(n&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function m3(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=Js(o.type,!0)),s=new ma(i,Lo(o),_n,null);t.blueprint[r]=s,n[r]=s,g3(t,e,r,mA(t,n,o.hostVars,vi),o)}function g3(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;y3(s)!=a&&s.push(a),s.push(n,r,i)}}function y3(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function v3(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Lo(e)&&(n[""]=t)}}function b3(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qA(t,e,n,r,o,i,s,a){let l=e[de],c=l.consts,u=$r(c,s),f=va(l,t,n,r,u);return i&&GA(l,e,f,$r(c,a),o),f.mergedAttrs=Wl(f.mergedAttrs,f.attrs),f.attrs!==null&&Sh(f,f.attrs,!1),f.mergedAttrs!==null&&Sh(f,f.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,f),f}function KA(t,e){O1(t,e),eb(e)&&t.queries.elementEnd(e)}function w3(t,e,n,r,o,i){let s=e.consts,a=$r(s,o),l=va(e,t,n,r,a);if(l.mergedAttrs=Wl(l.mergedAttrs,l.attrs),i!=null){let c=$r(s,i);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Sh(l,l.attrs,!1),l.mergedAttrs!==null&&Sh(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ns(t,e,n){if(n===vi)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function hh(t,e,n){return function r(o){let i=Yi(t)?Lr(t.index,e):e;Cw(i,5);let s=e[Bt],a=f1(e,s,n,o),l=r.__ngNextListenerFn__;for(;l;)a=f1(e,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function f1(t,e,n,r){let o=pe(null);try{return nt(6,e,n),n(r)!==!1}catch(i){return VB(t,i),!1}finally{nt(7,e,n),pe(o)}}function YA(t,e,n,r,o,i,s,a){let l=Su(t),c=!1,u=null;if(!r&&l&&(u=E3(e,n,i,t.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let f=ao(t,n),p=r?r(f):f;Gj(n,p,i,a);let m=o.listen(p,i,a);if(!_3(i)){let w=r?x=>r(Fr(x[t.index])):t.index;XA(w,e,n,i,a,m,!1)}}return c}function _3(t){return t.startsWith("animation")||t.startsWith("transition")}function E3(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=e[Vl],l=o[i+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function XA(t,e,n,r,o,i,s){let a=e.firstCreatePass?ab(e):null,l=sb(n),c=l.length;l.push(o,i),a&&a.push(r,t,c,(c+1)*(s?-1:1))}function p1(t,e,n,r,o,i){let s=e[n],a=e[de],c=a.data[n].outputs[r],f=s[c].subscribe(i);XA(t.index,a,e,o,i,f,!0)}var Gb=Symbol("BINDING");var xh=class extends Uu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=di(e);return new ga(n,this.ngModule)}};function S3(t){return Object.keys(t).map(e=>{let[n,r,o]=t[e],i={propName:n,templateName:e,isSignal:(r&$h.SignalBased)!==0};return o&&(i.transform=o),i})}function x3(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function T3(t,e,n){let r=e instanceof kt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new zb(n,r):n}function I3(t){let e=t.get(Mn,null);if(e===null)throw new oe(407,!1);let n=t.get(zA,null),r=t.get(oo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function C3(t,e){let n=ZA(t);return uA(e,n,n==="svg"?tb:n==="math"?CN:null)}function ZA(t){return(t.selectors[0][0]||"div").toLowerCase()}var ga=class extends Hh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=S3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=x3(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=iB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o,i,s){nt(22);let a=pe(null);try{let l=this.componentDef,c=D3(r,l,s,i),u=T3(l,o||this.ngModule,e),f=I3(u),p=f.rendererFactory.createRenderer(null,l),m=r?DB(p,r,l.encapsulation,u):C3(l,p),w=s?.some(h1)||i?.some(D=>typeof D!="function"&&D.bindings.some(h1)),x=vw(null,c,null,512|hA(l),null,null,f,p,u,null,tA(m,u,!0));x[Lt]=m,rh(x);let T=null;try{let D=qA(Lt,x,2,"#host",()=>c.directiveRegistry,!0,0);pA(p,m,D),ql(m,x),xw(c,x,D),rA(c,D,x),KA(c,D),n!==void 0&&A3(D,this.ngContentSelectors,n),T=Lr(D.index,x),x[Bt]=T[Bt],Iw(c,x,null)}catch(D){throw T!==null&&Lb(T),Lb(x),D}finally{nt(23),oh()}return new Th(this.componentType,x,!!w)}finally{pe(a)}}};function D3(t,e,n,r){let o=t?["ng-version","20.3.4"]:sB(e.selectors[0]),i=null,s=null,a=0;if(n)for(let u of n)a+=u[Gb].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[Gb].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(i??=[]).push(p)),p.update&&(p.targetIdx=m,(s??=[]).push(p))}}let l=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=qv(f);l.push(p)}return yw(0,null,N3(i,s),1,a,l,null,null,null,[o],null)}function N3(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function h1(t){let e=t[Gb].kind;return e==="input"||e==="twoWay"}var Th=class extends UA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=xu(n[de],Lt),this.location=Xl(this._tNode,n),this.instance=Lr(this._tNode.index,n)[Bt],this.hostView=this.changeDetectorRef=new Ji(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView,i=Tw(r,o[de],o,e,n);this.previousInputValues.set(e,n);let s=Lr(r.index,o);Cw(s,1)}get injector(){return new ha(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function A3(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Br=(()=>{class t{static __NG_ELEMENT_ID__=M3}return t})();function M3(){let t=an();return JA(t,we())}var k3=Br,QA=class extends k3{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new ha(this._hostTNode,this._hostLView)}get parentInjector(){let e=cw(this._hostTNode,this._hostLView);if(P1(e)){let n=yh(e,this._hostLView),r=gh(e),o=n[de].data[r+8];return new ha(o,n)}else return new ha(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=m1(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-zt}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Eh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Kl(this._hostTNode,s)),a}createComponent(e,n,r,o,i,s,a){let l=e&&!yj(e),c;if(l)c=n;else{let T=n||{};c=T.index,r=T.injector,o=T.projectableNodes,i=T.environmentInjector||T.ngModuleRef,s=T.directives,a=T.bindings}let u=l?e:new ga(di(e)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let D=(l?f:this.parentInjector).get(kt,null);D&&(i=D)}let p=di(u.componentType??{}),m=Eh(this._lContainer,p?.id??null),w=m?.firstChild??null,x=u.create(f,o,w,i,s,a);return this.insertImpl(x.hostView,c,Kl(this._hostTNode,m)),x}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if(AN(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=o[Zt],c=new QA(l,l[Kn],l[Zt]);c.detach(c.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return Hu(s,o,i,r),e.attachToViewContainerRef(),Uv(Cb(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=m1(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ru(this._lContainer,n);r&&(bu(Cb(this._lContainer),n),Vh(r[de],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ru(this._lContainer,n);return r&&bu(Cb(this._lContainer),n)!=null?new Ji(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function m1(t){return t[Eu]}function Cb(t){return t[Eu]||(t[Eu]=[])}function JA(t,e){let n,r=e[t.index];return so(r)?n=r:(n=$A(r,e,null,t),e[t.index]=n,bw(e,n)),R3(n,e,t,r),new QA(n,t,e)}function O3(t,e){let n=t[ht],r=n.createComment(""),o=ao(e,t),i=n.parentNode(o);return _h(n,i,r,n.nextSibling(o),!1),r}var R3=L3,P3=()=>!1;function F3(t,e,n){return P3(t,e,n)}function L3(t,e,n,r){if(t[Ki])return;let o;n.type&8?o=Fr(r):o=O3(e,n),t[Ki]=o}var Wb=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},qb=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Aw(e,n).matches!==null&&this.queries[n].setDirty()}},Ih=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=U3(e):this.predicate=e}},Kb=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yb=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,n,$3(n,i)),this.matchTNodeWithReadOption(e,n,fh(n,e,i,!1,!1))}else r===co?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,fh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===lt||o===Br||o===co&&n.type&4)this.addMatch(n.index,-2);else{let i=fh(n,e,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function $3(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function V3(t,e){return t.type&11?Xl(t,e):t.type&4?Dw(t,e):null}function j3(t,e,n,r){return n===-1?V3(e,t):n===-2?B3(t,e,r):ku(t,t[de],n,e)}function B3(t,e,n){if(n===lt)return Xl(e,t);if(n===co)return Dw(e,t);if(n===Br)return JA(e,t)}function eM(t,e,n,r){let o=e[Po].queries[r];if(o.matches===null){let i=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(j3(e,u,s[l+1],n.metadata.read))}}o.matches=a}return o.matches}function Xb(t,e,n,r){let o=t.queries.getByIndex(n),i=o.matches;if(i!==null){let s=eM(t,e,o,n);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=e[-l];for(let f=zt;f<u.length;f++){let p=u[f];p[qi]===p[Zt]&&Xb(p[de],p,c,r)}if(u[ca]!==null){let f=u[ca];for(let p=0;p<f.length;p++){let m=f[p];Xb(m[de],m,c,r)}}}}}return r}function Nw(t,e){return t[Po].queries[e].queryList}function tM(t,e,n){let r=new bh((n&4)===4);return ON(t,e,r,r.destroy),(e[Po]??=new qb).queries.push(new Wb(r))-1}function nM(t,e,n){let r=xt();return r.firstCreatePass&&(rM(r,new Ih(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),tM(r,we(),e)}function H3(t,e,n,r){let o=xt();if(o.firstCreatePass){let i=an();rM(o,new Ih(e,n,r),i.index),z3(o,t),(n&2)===2&&(o.staticContentQueries=!0)}return tM(o,we(),n)}function U3(t){return t.split(",").map(e=>e.trim())}function rM(t,e,n){t.queries===null&&(t.queries=new Kb),t.queries.track(new Yb(e,n))}function z3(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Aw(t,e){return t.queries.getByIndex(e)}function oM(t,e){let n=t[de],r=Aw(n,e);return r.crossesNgTemplate?Xb(n,t,e,[]):eM(n,t,r,e)}function Mw(t,e,n){let r,o=cu(()=>{r._dirtyCounter();let i=G3(r,t);if(e&&i===void 0)throw new oe(-951,!1);return i});return r=o[Xt],r._dirtyCounter=Ee(0),r._flatValue=void 0,o}function iM(t){return Mw(!0,!1,t)}function sM(t){return Mw(!0,!0,t)}function aM(t){return Mw(!1,!1,t)}function lM(t,e){let n=t[Xt];n._lView=we(),n._queryIndex=e,n._queryList=Nw(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function G3(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[ye]&4)return e?void 0:ir;let o=Nw(n,r),i=oM(n,r);return o.reset(i,z1),e?o.first:o._changesDetected||t._flatValue===void 0?t._flatValue=o.toArray():t._flatValue}var g1=new Set;function Vo(t){g1.has(t)||(g1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yi=class{},Uh=class{};var Ch=class extends yi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new xh(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;let i=Wv(e);this._bootstrapComponents=aA(i.bootstrap),this._r3Injector=bb(e,n,[{provide:yi,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver},...r],ci(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dh=class extends Uh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ch(this.moduleType,e,[])}};var Pu=class extends yi{injector;componentFactoryResolver=new xh(this);instance=null;constructor(e){super();let n=new ta([...e.providers,{provide:yi,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],e.parent||$l(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zu(t,e,n=null){return new Pu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var W3=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Kv(!1,n.type),o=r.length>0?zu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:t,providedIn:"environment",factory:()=>new t(Pe(kt))})}return t})();function Xe(t){return Vu(()=>{let e=cM(t),n=ce(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===uw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(W3).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mi.Emulated,styles:t.styles||ir,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Vo("NgStandalone"),uM(n);let r=t.dependencies;return n.directiveDefs=y1(r,q3),n.pipeDefs=y1(r,bN),n.id=X3(n),n})}function q3(t){return di(t)||qv(t)}function uo(t){return Vu(()=>({type:t.type,bootstrap:t.bootstrap||ir,declarations:t.declarations||ir,imports:t.imports||ir,exports:t.exports||ir,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function K3(t,e){if(t==null)return Gi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=$h.None,l=null),n[i]=[r,a,l],e[i]=s}return n}function Y3(t){if(t==null)return Gi;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Qt(t){return Vu(()=>{let e=cM(t);return uM(e),e})}function cM(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Gi,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||ir,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:K3(t.inputs,e),outputs:Y3(t.outputs),debugInfo:null}}function uM(t){t.features?.forEach(e=>e(t))}function y1(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let o of n){let i=e(o);i!==null&&r.push(i)}return r}:null}function X3(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Z3(t){return Object.getPrototypeOf(t.prototype).constructor}function Xn(t){let e=Z3(t.type),n=!0,r=[t];for(;e;){let o;if(Lo(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);let s=t;s.inputs=Db(t.inputs),s.declaredInputs=Db(t.declaredInputs),s.outputs=Db(t.outputs);let a=o.hostBindings;a&&nH(t,a);let l=o.viewQuery,c=o.contentQueries;if(l&&eH(t,l),c&&tH(t,c),Q3(t,o),cN(t.outputs,o.outputs),Lo(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===Xn&&(n=!1)}}e=Object.getPrototypeOf(e)}J3(r)}function Q3(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function J3(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Wl(o.hostAttrs,n=Wl(n,o.hostAttrs))}}function Db(t){return t===Gi?{}:t===ir?[]:t}function eH(t,e){let n=t.viewQuery;n?t.viewQuery=(r,o)=>{e(r,o),n(r,o)}:t.viewQuery=e}function tH(t,e){let n=t.contentQueries;n?t.contentQueries=(r,o,i)=>{e(r,o,i),n(r,o,i)}:t.contentQueries=e}function nH(t,e){let n=t.hostBindings;n?t.hostBindings=(r,o)=>{e(r,o),n(r,o)}:t.hostBindings=e}function dM(t,e,n,r,o,i,s,a){if(n.firstCreatePass){t.mergedAttrs=Wl(t.mergedAttrs,t.attrs);let u=t.tView=yw(2,t,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),da(t,!1);let l=oH(n,e,t,r);ih()&&Ew(n,e,l,t),ql(l,e);let c=$A(l,e,l,t);e[r+Lt]=c,bw(e,c),F3(c,t,e)}function rH(t,e,n,r,o,i,s,a,l,c,u){let f=n+Lt,p;return e.firstCreatePass?(p=va(e,f,4,s||null,a||null),cb()&&GA(e,t,p,$r(e.consts,c),IA),O1(e,p)):p=e.data[f],dM(p,t,e,n,r,o,i,l),Su(p)&&xw(e,t,p),c!=null&&Bh(t,p,u),p}function Fu(t,e,n,r,o,i,s,a,l,c,u){let f=n+Lt,p;if(e.firstCreatePass){if(p=va(e,f,4,s||null,a||null),c!=null){let m=$r(e.consts,c);p.localNames=[];for(let w=0;w<m.length;w+=2)p.localNames.push(m[w],-1)}}else p=e.data[f];return dM(p,t,e,n,r,o,i,l),c!=null&&Bh(t,p,u),p}function Ql(t,e,n,r,o,i,s,a){let l=we(),c=xt(),u=$r(c.consts,i);return rH(l,c,t,e,n,r,o,u,void 0,s,a),Ql}var oH=iH;function iH(t,e,n,r){return sh(!0),e[ht].createComment("")}var zh=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(zh||{}),ba=new ee(""),fM=!1,Zb=class extends Me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TN()&&(this.destroyRef=O(xr,{optional:!0})??void 0,this.pendingTasks=O(hi,{optional:!0})??void 0)}emit(e){let n=pe(null);try{super.next(e)}finally{pe(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof pt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},at=Zb;function pM(t){let e,n;function r(){t=pa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function v1(t){return queueMicrotask(()=>t()),()=>{t=pa}}var kw="isAngularZone",Nh=kw+"_ID",sH=0,We=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=fM}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,cH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kw)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new oe(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,aH,pa,pa);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},aH={};function Ow(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function lH(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){pM(()=>{t.callbackScheduled=!1,Qb(t),t.isCheckStableRunning=!0,Ow(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Qb(t)}function cH(t){let e=()=>{lH(t)},n=sH++;t._inner=t._inner.fork({name:"angular",properties:{[kw]:!0,[Nh]:n,[Nh+n]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(uH(l))return r.invokeTask(i,s,a,l);try{return b1(t),r.invokeTask(i,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),w1(t)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return b1(t),r.invoke(i,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!dH(l)&&e(),w1(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Qb(t),Ow(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Qb(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function b1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function w1(t){t._nesting--,Ow(t)}var Lu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function uH(t){return hM(t,"__ignore_ng_zone__")}function dH(t){return hM(t,"__scheduler_tick__")}function hM(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rw=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})(),mM=[0,1,2,3],gM=(()=>{class t{ngZone=O(We);scheduler=O(oo);errorHandler=O(Er,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){O(ba,{optional:!0})}execute(){let n=this.sequences.size>0;n&&nt(16),this.executing=!0;for(let r of mM)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&nt(17)}register(n){let{view:r}=n;r!==void 0?((r[aa]??=[]).push(n),Xi(r),r[ye]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(zh.AFTER_NEXT_RENDER,n):n()}static \u0275prov=q({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ah=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,i,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[aa];e&&(this.view[aa]=e.filter(n=>n!==this))}};function bt(t,e){let n=e?.injector??O(Ye);return Vo("NgAfterNextRender"),pH(t,n,e,!0)}function fH(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function pH(t,e,n,r){let o=e.get(Rw);o.impl??=e.get(gM);let i=e.get(ba,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(xr):null,a=e.get(Ul,null,{optional:!0}),l=new Ah(o.impl,fH(t),a?.view,r,s,i?.snapshot(null));return o.impl.register(l),l}var Pw=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Fw=new ee("");function wa(t){return!!t&&typeof t.then=="function"}function yM(t){return!!t&&typeof t.subscribe=="function"}var vM=new ee("");var Lw=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=O(vM,{optional:!0})??[];injector=O(Ye);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=qn(this.injector,o);if(wa(i))n.push(i);else if(yM(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Gh=new ee("");function bM(){iv(()=>{let t="";throw new oe(600,t)})}function wM(t){return t.isBoundToModule}var hH=10;var Tr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=O(Vr);afterRenderManager=O(Rw);zonelessEnabled=O(Du);rootEffectScheduler=O(Nu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=O(hi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ve(n=>!n))}constructor(){O(ba,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=O(kt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Ye.NULL){return this._injector.get(We).run(()=>{nt(10);let s=n instanceof Hh;if(!this._injector.get(Lw).done){let w="";throw new oe(405,w)}let l;s?l=n:l=this._injector.get(Uu).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=wM(l)?void 0:this._injector.get(yi),u=r||l.selector,f=l.create(o,[],u,c),p=f.location.nativeElement,m=f.injector.get(Fw,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Mu(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),nt(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){nt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(zh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new oe(101,!1);let n=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(n),this.afterTick.next(),nt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<hH;)nt(14),this.synchronizeOnce(),nt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Tu(o))continue;let i=r&&!this.zonelessEnabled?0:1;RA(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Tu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Mu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Gh,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Mu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new oe(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cn(t,e,n,r){let o=we(),i=Zi();if(ns(o,i,e)){let s=xt(),a=Cu();FB(a,o,t,e,n,r)}return cn}var yse=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Jb=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),o=Math.max(e,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(e,n){this.attach(n,this.detach(e,!0))}};function Nb(t,e,n,r,o){return t===n&&Object.is(e,r)?1:Object.is(o(t,e),o(n,r))?-1:0}function mH(t,e,n){let r,o,i=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;i<=s&&i<=l;){let c=t.at(i),u=e[i],f=Nb(i,c,i,u,n);if(f!==0){f<0&&t.updateValue(i,u),i++;continue}let p=t.at(s),m=e[l],w=Nb(s,p,l,m,n);if(w!==0){w<0&&t.updateValue(s,m),s--,l--;continue}let x=n(i,c),T=n(s,p),D=n(i,u);if(Object.is(D,T)){let P=n(l,m);Object.is(P,x)?(t.swap(i,s),t.updateValue(s,m),l--,s--):t.move(s,i),t.updateValue(i,u),i++;continue}if(r??=new Mh,o??=E1(t,i,s,n),ew(t,r,i,D))t.updateValue(i,u),i++,s++;else if(o.has(D))r.set(x,t.detach(i)),s--;else{let P=t.create(i,e[i]);t.attach(i,P),i++,s++}}for(;i<=l;)_1(t,r,n,i,e[i]),i++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=t.at(i),f=c.value,p=Nb(i,u,i,f,n);if(p!==0)p<0&&t.updateValue(i,f),i++,c=l.next();else{r??=new Mh,o??=E1(t,i,s,n);let m=n(i,f);if(ew(t,r,i,m))t.updateValue(i,f),i++,s++,c=l.next();else if(!o.has(m))t.attach(i,t.create(i,f)),i++,s++,c=l.next();else{let w=n(i,u);r.set(w,t.detach(i)),s--}}}for(;!c.done;)_1(t,r,n,t.length,c.value),c=l.next()}for(;i<=s;)t.destroy(t.detach(s--));r?.forEach(l=>{t.destroy(l)})}function ew(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function _1(t,e,n,r,o){if(ew(t,e,r,n(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function E1(t,e,n,r){let o=new Set;for(let i=e;i<=n;i++)o.add(r(i,t.at(i)));return o}var Mh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),e(r,n)}}};function kn(t,e,n,r,o,i,s,a){Vo("NgControlFlow");let l=we(),c=xt(),u=$r(c.consts,i);return Fu(l,c,t,e,n,r,o,u,256,s,a),$w}function $w(t,e,n,r,o,i,s,a){Vo("NgControlFlow");let l=we(),c=xt(),u=$r(c.consts,i);return Fu(l,c,t,e,n,r,o,u,512,s,a),$w}function On(t,e){Vo("NgControlFlow");let n=we(),r=Zi(),o=n[r]!==vi?n[r]:-1,i=o!==-1?kh(n,Lt+o):void 0,s=0;if(ns(n,r,t)){let a=pe(null);try{if(i!==void 0&&jA(i,s),t!==-1){let l=Lt+t,c=kh(n,l),u=ow(n[de],l),f=HA(c,u,n),p=Bu(n,u,e,{dehydratedView:f});Hu(c,p,s,Kl(u,f))}}finally{pe(a)}}else if(i!==void 0){let a=VA(i,s);a!==void 0&&(a[Bt]=e)}}var tw=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-zt}};function Gu(t){return t}var nw=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function _a(t,e,n,r,o,i,s,a,l,c,u,f,p){Vo("NgControlFlow");let m=we(),w=xt(),x=l!==void 0,T=we(),D=a?s.bind(T[Yn][Bt]):s,P=new nw(x,D);T[Lt+t]=P,Fu(m,w,t+1,e,n,r,o,$r(w.consts,i),256),x&&Fu(m,w,t+2,l,c,u,f,$r(w.consts,p),512)}var rw=class extends Jb{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-zt}at(e){return this.getLView(e)[Bt].$implicit}attach(e,n){let r=n[oa];this.needsIndexUpdate||=e!==this.length,Hu(this.lContainer,n,e,Kl(this.templateTNode,r))}detach(e,n){return this.needsIndexUpdate||=e!==this.length-1,n&&gH(this.lContainer,e),yH(this.lContainer,e)}create(e,n){let r=Eh(this.lContainer,this.templateTNode.tView.ssrId),o=Bu(this.hostLView,this.templateTNode,new tw(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(e){Vh(e[de],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Bt].$index=e}getLView(e){return vH(this.lContainer,e)}};function Ea(t){let e=pe(null),n=pi();try{let r=we(),o=r[de],i=r[n],s=n+1,a=kh(r,s);if(i.liveCollection===void 0){let c=ow(o,s);i.liveCollection=new rw(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(mH(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=Zi(),u=l.length===0;if(ns(r,c,u)){let f=n+2,p=kh(r,f);if(u){let m=ow(o,f),w=HA(p,m,r),x=Bu(r,m,void 0,{dehydratedView:w});Hu(p,x,0,Kl(m,w))}else o.firstUpdatePass&&s3(p),jA(p,0)}}}finally{pe(e)}}function kh(t,e){return t[e]}function gH(t,e){if(t.length<=zt)return;let n=zt+e,r=t[n];r&&r[la]&&(r[la].skipLeaveAnimations=!0)}function yH(t,e){return Ru(t,e)}function vH(t,e){return VA(t,e)}function ow(t,e){return xu(t,e)}function Rn(t,e,n){let r=we(),o=Zi();if(ns(r,o,e)){let i=xt(),s=Cu();xA(s,r,t,e,r[ht],n)}return Rn}function S1(t,e,n,r,o){Tw(e,t,n,o?"class":"style",r)}function _e(t,e,n,r){let o=we(),i=o[de],s=t+Lt,a=i.firstCreatePass?qA(s,o,2,e,IA,cb(),n,r):i.data[s];if(CA(a,o,t,e,_M),Su(a)){let l=o[de];xw(l,o,a),rA(l,a,o)}return r!=null&&Bh(o,a),_e}function Se(){let t=xt(),e=an(),n=DA(e);return t.firstCreatePass&&KA(t,n),db(n)&&fb(),lb(),n.classesWithoutHost!=null&&Sj(n)&&S1(t,n,we(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&xj(n)&&S1(t,n,we(),n.stylesWithoutHost,!1),Se}function Zn(t,e,n,r){return _e(t,e,n,r),Se(),Zn}function Qe(t,e,n,r){let o=we(),i=o[de],s=t+Lt,a=i.firstCreatePass?w3(s,i,2,e,n,r):i.data[s];return CA(a,o,t,e,_M),r!=null&&Bh(o,a),Qe}function ct(){let t=an(),e=DA(t);return db(e)&&fb(),lb(),ct}function Je(t,e,n,r){return Qe(t,e,n,r),ct(),Je}var _M=(t,e,n,r,o)=>(sh(!0),uA(e[ht],r,KN()));function fo(){return we()}function Wu(t,e,n){let r=we(),o=Zi();if(ns(r,o,e)){let i=xt(),s=Cu();TA(s,r,t,e,r[ht],n)}return Wu}var qu="en-US";var bH=qu;function EM(t){typeof t=="string"&&(bH=t.toLowerCase().replace(/_/g,"-"))}function Jt(t,e,n){let r=we(),o=xt(),i=an();return SM(o,r,r[ht],i,t,e,n),Jt}function wi(t,e,n){let r=we(),o=xt(),i=an();return(i.type&3||n)&&YA(i,o,r,n,r[ht],t,e,hh(i,r,e)),wi}function SM(t,e,n,r,o,i,s){let a=!0,l=null;if((r.type&3||s)&&(l??=hh(r,e,i),YA(r,t,e,s,n,o,i,l)&&(a=!1)),a){let c=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],m=u[f+1];l??=hh(r,e,i),p1(r,e,p,m,o,l)}if(c&&c.length)for(let f of c)l??=hh(r,e,i),p1(r,e,f,o,o,l)}}function wt(t=1){return qN(t)}function wH(t,e){let n=null,r=eB(t);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){n=o;continue}if(r===null?cA(t,i,!0):rB(r,i))return o}return n}function Sa(t){let e=we()[Yn][Kn];if(!e.projection){let n=t?t.length:1,r=e.projection=gN(n,null),o=r.slice(),i=e.child;for(;i!==null;){if(i.type!==128){let s=t?wH(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function xa(t,e=0,n,r,o,i){let s=we(),a=xt(),l=r?t+1:null;l!==null&&Fu(s,a,l,r,o,i,null,n);let c=va(a,Lt+t,16,null,n||null);c.projection===null&&(c.projection=e),mb();let f=!s[oa]||ub();s[Yn][Kn].projection[c.projection]===null&&l!==null?_H(s,a,l):f&&!Lh(c)&&TB(a,s,c)}function _H(t,e,n){let r=Lt+n,o=e.data[r],i=t[r],s=Eh(i,o.tView.ssrId),a=Bu(t,o,void 0,{dehydratedView:s});Hu(i,a,0,Kl(o,s))}function Ku(t,e,n){nM(t,e,n)}function Yu(t){let e=we(),n=xt(),r=nh();Iu(r+1);let o=Aw(n,r);if(t.dirty&&NN(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=oM(e,r);t.reset(i,z1),t.notifyOnChanges()}return!0}return!1}function Xu(){return Nw(we(),nh())}function Vw(t,e,n,r,o){lM(e,H3(t,n,r,o))}function un(t,e,n,r){lM(t,nM(e,n,r))}function ar(t=1){Iu(nh()+t)}function ch(t,e){return t<<17|e<<2}function ya(t){return t>>17&32767}function EH(t){return(t&2)==2}function SH(t,e){return t&131071|e<<17}function iw(t){return t|2}function Yl(t){return(t&131068)>>2}function Ab(t,e){return t&-131069|e<<2}function xH(t){return(t&1)===1}function sw(t){return t|1}function TH(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=ya(s),l=Yl(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||Ll(f,u)>0)&&(c=!0)}else u=n;if(o)if(l!==0){let p=ya(t[a+1]);t[r+1]=ch(p,a),p!==0&&(t[p+1]=Ab(t[p+1],r)),t[a+1]=SH(t[a+1],r)}else t[r+1]=ch(a,0),a!==0&&(t[a+1]=Ab(t[a+1],r)),a=r;else t[r+1]=ch(l,0),a===0?a=r:t[l+1]=Ab(t[l+1],r),l=r;c&&(t[r+1]=iw(t[r+1])),x1(t,u,r,!0),x1(t,u,r,!1),IH(e,u,t,r,i),s=ch(a,l),i?e.classBindings=s:e.styleBindings=s}function IH(t,e,n,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&Ll(i,e)>=0&&(n[r+1]=sw(n[r+1]))}function x1(t,e,n,r){let o=t[n+1],i=e===null,s=r?ya(o):Yl(o),a=!1;for(;s!==0&&(a===!1||i);){let l=t[s],c=t[s+1];CH(l,e)&&(a=!0,t[s+1]=r?sw(c):iw(c)),s=r?ya(c):Yl(c)}a&&(t[n+1]=r?iw(o):sw(o))}function CH(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ll(t,e)>=0:!1}function lr(t,e,n){return xM(t,e,n,!1),lr}function Ta(t,e){return xM(t,e,null,!0),Ta}function xM(t,e,n,r){let o=we(),i=xt(),s=VN(2);if(i.firstUpdatePass&&NH(i,t,s,r),e!==vi&&ns(o,s,e)){let a=i.data[pi()];RH(i,a,o,o[ht],t,o[s+1]=PH(e,n),r,s)}}function DH(t,e){return e>=t.expandoStartIndex}function NH(t,e,n,r){let o=t.data;if(o[n+1]===null){let i=o[pi()],s=DH(t,n);FH(i,r)&&e===null&&!s&&(e=!1),e=AH(o,i,e,r),TH(o,i,e,n,s,r)}}function AH(t,e,n,r){let o=UN(t),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=Mb(null,t,e,n,r),n=$u(n,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==o)if(n=Mb(o,t,e,n,r),i===null){let l=MH(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Mb(null,t,e,l[1],r),l=$u(l,e.attrs,r),kH(t,e,r,l))}else i=OH(t,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),n}function MH(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Yl(r)!==0)return t[ya(r)]}function kH(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[ya(o)]=r}function OH(t,e,n){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=$u(r,s,n)}return $u(r,e.attrs,n)}function Mb(t,e,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=e[a],r=$u(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function $u(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),vN(t,s,n?!0:e[++i]))}return t===void 0?null:t}function RH(t,e,n,r,o,i,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=xH(c)?T1(l,e,n,o,Yl(c),s):void 0;if(!Oh(u)){Oh(i)||EH(c)&&(i=T1(l,null,n,o,a,s));let f=nb(pi(),n);CB(r,s,f,o,i)}}function T1(t,e,n,r,o,i){let s=e===null,a;for(;o>0;){let l=t[o],c=Array.isArray(l),u=c?l[1]:l,f=u===null,p=n[o+1];p===vi&&(p=f?ir:void 0);let m=f?Xp(p,r):u===r?p:void 0;if(c&&!Oh(m)&&(m=Xp(l,r)),Oh(m)&&(a=m,s))return a;let w=t[o+1];o=s?ya(w):Yl(w)}if(e!==null){let l=i?e.residualClasses:e.residualStyles;l!=null&&(a=Xp(l,r))}return a}function Oh(t){return t!==void 0}function PH(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ci(pw(t)))),t}function FH(t,e){return(t.flags&(e?8:16))!==0}function Ct(t,e=""){let n=we(),r=xt(),o=t+Lt,i=r.firstCreatePass?va(r,o,1,e,null):r.data[o],s=LH(r,n,i,e,t);n[o]=s,ih()&&Ew(r,n,s,i),da(i,!1)}var LH=(t,e,n,r,o)=>(sh(!0),aB(e[ht],r));function $H(t,e,n,r=""){return ns(t,Zi(),n)?e+vu(n)+r:vi}function Jl(t){return Ia("",t),Jl}function Ia(t,e,n){let r=we(),o=$H(r,t,e,n);return o!==vi&&VH(r,pi(),o),Ia}function VH(t,e,n){let r=nb(e,t);lB(t[ht],r,n)}function dn(t,e,n){Eb(e)&&(e=e());let r=we(),o=Zi();if(ns(r,o,e)){let i=xt(),s=Cu();xA(s,r,t,e,r[ht],n)}return dn}function En(t,e){let n=Eb(t);return n&&t.set(e),n}function fn(t,e){let n=we(),r=xt(),o=an();return SM(r,n,n[ht],o,t,e),fn}var TM={};function Wh(t){let e=xt(),n=we(),r=t+Lt,o=va(e,r,128,null,null);return da(o,!1),Qp(e,n,r,TM),Wh}function jw(t){Vo("NgLet");let e=xt(),n=we(),r=pi();return Qp(e,n,r,t),t}function Hr(t){let e=LN(),n=DN(e,Lt+t);if(n===TM)throw new oe(314,!1);return n}function jH(t,e,n){let r=xt();if(r.firstCreatePass){let o=Lo(t);aw(n,r.data,r.blueprint,o,!0),aw(e,r.data,r.blueprint,o,!1)}}function aw(t,e,n,r,o){if(t=wn(t),Array.isArray(t))for(let i=0;i<t.length;i++)aw(t[i],e,n,r,o);else{let i=xt(),s=we(),a=an(),l=ea(t)?t:wn(t.provide),c=Xv(t),u=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ea(t)||!t.multi){let m=new ma(c,o,_n,null),w=Ob(l,e,o?u:u+p,f);w===-1?(Pb(vh(a,s),i,l),kb(i,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[w]=m,s[w]=m)}else{let m=Ob(l,e,u+p,f),w=Ob(l,e,u,u+p),x=m>=0&&n[m],T=w>=0&&n[w];if(o&&!T||!o&&!x){Pb(vh(a,s),i,l);let D=UH(o?HH:BH,n.length,o,r,c,t);!o&&T&&(n[w].providerFactory=D),kb(i,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(D),s.push(D)}else{let D=IM(n[o?w:m],c,!o&&r);kb(i,t,m>-1?m:w,D)}!o&&r&&T&&n[w].componentProviders++}}}function kb(t,e,n,r){let o=ea(e),i=xN(e);if(o||i){let l=(i?wn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function IM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ob(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function BH(t,e,n,r,o){return lw(this.multi,[])}function HH(t,e,n,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ku(r,r[de],this.providerFactory.index,o);s=l.slice(0,a),lw(i,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],lw(i,s);return s}function lw(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function UH(t,e,n,r,o,i){let s=new ma(t,n,_n,null);return s.multi=[],s.index=e,s.componentProviders=0,IM(s,o,r&&!n),s}function Ur(t,e=[]){return n=>{n.providersResolver=(r,o)=>jH(r,o?o(t):t,e)}}var Rh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Bw=(()=>{class t{compileModuleSync(n){return new Dh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=Wv(n),i=aA(o.declarations).reduce((s,a)=>{let l=di(a);return l&&s.push(new ga(l)),s},[]);return new Rh(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zH=(()=>{class t{zone=O(We);changeDetectionScheduler=O(oo);applicationRef=O(Tr);applicationErrorHandler=O(Vr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function CM({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new We(ce(B({},DM()),{scheduleInRootZone:n})),[{provide:We,useFactory:t},{provide:ui,multi:!0,useFactory:()=>{let r=O(zH,{optional:!0});return()=>r.initialize()}},{provide:ui,multi:!0,useFactory:()=>{let r=O(GH);return()=>{r.initialize()}}},e===!0?{provide:Sb,useValue:!0}:[],{provide:lh,useValue:n??fM},{provide:Vr,useFactory:()=>{let r=O(We),o=O(kt),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(Er),i.handleError(s))})}}}]}function DM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var GH=(()=>{class t{subscription=new pt;initialized=!1;zone=O(We);pendingTasks=O(hi);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{We.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{We.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Hw=(()=>{class t{applicationErrorHandler=O(Vr);appRef=O(Tr);taskService=O(hi);ngZone=O(We);zonelessEnabled=O(Du);tracing=O(ba,{optional:!0});disableScheduling=O(Sb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new pt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(lh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?v1:pM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,v1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Uw(){return Vo("NgZoneless"),ra([{provide:oo,useExisting:Hw},{provide:We,useClass:Lu},{provide:Du,useValue:!0},{provide:lh,useValue:!1},[]])}function WH(){return typeof $localize<"u"&&$localize.locale||qu}var zw=new ee("",{providedIn:"root",factory:()=>O(zw,{optional:!0,skipSelf:!0})||WH()});var Zu=class{destroyed=!1;listeners=null;errorHandler=O(Er,{optional:!0});destroyRef=O(xr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new oe(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(gu(953,!1));return}if(this.listeners===null)return;let n=pe(null);try{for(let r of this.listeners)try{r(e)}catch(o){this.errorHandler?.handleError(o)}}finally{pe(n)}}};function Pn(t){return oN(t)}function jo(t,e){return cu(t,e?.equal)}var Gw=class{[Xt];constructor(e){this[Xt]=e}destroy(){this[Xt].destroy()}};function po(t,e){let n=e?.injector??O(Ye),r=e?.manualCleanup!==!0?n.get(xr):null,o,i=n.get(Ul,null,{optional:!0}),s=n.get(oo);return i!==null?(o=YH(i.view,s,t),r instanceof mu&&r._lView===i.view&&(r=null)):o=XH(t,n.get(Nu),s),o.injector=n,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new Gw(o)}var NM=ce(B({},iN),{cleanupFns:void 0,zone:null,onDestroyFn:pa,run(){let t=Hl(!1);try{sN(this)}finally{Hl(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=pe(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],pe(t)}}}),qH=ce(B({},NM),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Us(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),KH=ce(B({},NM),{consumerMarkedDirty(){this.view[ye]|=8192,Xi(this.view),this.notifier.notify(13)},destroy(){Us(this),this.onDestroyFn(),this.cleanup(),this.view[fi]?.delete(this)}});function YH(t,e,n){let r=Object.create(KH);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=AM(r,n),t[fi]??=new Set,t[fi].add(r),r.consumerMarkedDirty(r),r}function XH(t,e,n){let r=Object.create(qH);return r.fn=AM(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function AM(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var Kh=Symbol("InputSignalNode#UNSET"),PM=ce(B({},hp),{transformFn:void 0,applyValueToInputSignal(t,e){zs(t,e)}});function FM(t,e){let n=Object.create(PM);n.value=t,n.transformFn=e?.transform;function r(){if(Bs(n),n.value===Kh){let o=null;throw new oe(-950,o)}return n.value}return r[Xt]=n,r}var dU=new ee("");dU.__NG_ELEMENT_ID__=t=>{let e=an();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new oe(204,!1)};function ec(t){return new Zu}function MM(t,e){return FM(t,e)}function fU(t){return FM(Kh,t)}var Ot=(MM.required=fU,MM);function kM(t,e){return iM(e)}function pU(t,e){return sM(e)}var Sn=(kM.required=pU,kM);function LM(t,e){return aM(e)}function $M(t,e){let n=Object.create(PM),r=new Zu;n.value=t;function o(){return Bs(n),OM(n.value),n.value}return o[Xt]=n,o.asReadonly=ah.bind(o),o.set=i=>{n.equal(n.value,i)||(zs(n,i),r.emit(i))},o.update=i=>{OM(n.value),o.set(i(n.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function OM(t){if(t===Kh)throw new oe(952,!1)}function RM(t,e){return $M(t,e)}function hU(t){return $M(Kh,t)}var pn=(RM.required=hU,RM);var Ww=new ee(""),mU=new ee("");function Qu(t){return!t.moduleRef}function gU(t){let e=Qu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(We);return n.run(()=>{Qu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Vr),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Qu(t)){let i=()=>e.destroy(),s=t.platformInjector.get(Ww);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ww);s.add(i),t.moduleRef.onDestroy(()=>{Mu(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return vU(r,n,()=>{let i=e.get(hi),s=i.add(),a=e.get(Lw);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(zw,qu);if(EM(l||qu),!e.get(mU,!0))return Qu(t)?e.get(Tr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Qu(t)){let u=e.get(Tr);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return yU?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void i.remove(s))})})}var yU;function vU(t,e,n){try{let r=n();return wa(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var qh=null;function bU(t=[],e){return Ye.create({name:e,providers:[{provide:wu,useValue:"platform"},{provide:Ww,useValue:new Set([()=>qh=null])},...t]})}function wU(t=[]){if(qh)return qh;let e=bU(t);return qh=e,bM(),_U(e),e}function _U(t){let e=t.get(Ph,null);qn(t,()=>{e?.forEach(n=>n())})}var Ca=(()=>{class t{static __NG_ELEMENT_ID__=EU}return t})();function EU(t){return SU(an(),we(),(t&16)===16)}function SU(t,e,n){if(Yi(t)&&!n){let r=Lr(t.index,e);return new Ji(r,r)}else if(t.type&175){let r=e[Yn];return new Ji(r,e)}return null}function VM(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:o}=t;nt(8);try{let i=o?.injector??wU(r),s=[CM({}),{provide:oo,useExisting:Hw},XN,...n||[]],a=new Pu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return gU({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{nt(9)}}function tc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Yh(t,e){let n=di(t),r=e.elementInjector||$l();return new ga(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var HM=null;function zr(){return HM}function qw(t){HM??=t}var Ju=class{},Kw=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(UM),providedIn:"platform"})}return t})();var UM=(()=>{class t extends Kw{_location;_history;_doc=O(Ue);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zr().getBaseHref(this._doc)}onPopState(n){let r=zr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=zr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function zM(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function jM(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function os(t){return t&&t[0]!=="?"?`?${t}`:t}var Xh=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(WM),providedIn:"root"})}return t})(),GM=new ee(""),WM=(()=>{class t extends Xh{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zM(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+os(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+os(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+os(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Pe(Kw),Pe(GM,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),is=(()=>{class t{_subject=new Me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=IU(jM(BM(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+os(r))}normalize(n){return t.stripTrailingSlash(TU(this._basePath,BM(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+os(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+os(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=os;static joinWithSlash=zM;static stripTrailingSlash=jM;static \u0275fac=function(r){return new(r||t)(Pe(Xh))};static \u0275prov=q({token:t,factory:()=>xU(),providedIn:"root"})}return t})();function xU(){return new is(Pe(Xh))}function TU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function BM(t){return t.replace(/\/index.html$/,"")}function IU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Yw(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var ed=class{};var Xw="browser";function qM(t){return t===Xw}var Qh=new ee(""),t_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Pe(Qh),Pe(We))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),td=class{_doc;constructor(e){this._doc=e}manager},Zw="ng-app-id";function KM(t){for(let e of t)e.remove()}function YM(t,e){let n=e.createElement("style");return n.textContent=t,n}function CU(t,e,n,r){let o=t.head?.querySelectorAll(`style[${Zw}="${e}"],link[${Zw}="${e}"]`);if(o)for(let i of o)i.removeAttribute(Zw),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function Jw(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var n_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,CU(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,YM);r?.forEach(o=>this.addUsage(o,this.external,Jw))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(KM(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])KM(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,YM(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,Jw(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Pe(Ue),Pe(Zl),Pe(Fh,8),Pe(ts))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),Qw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},r_=/%COMP%/g;var ZM="%COMP%",DU=`_nghost-${ZM}`,NU=`_ngcontent-${ZM}`,AU=!0,MU=new ee("",{providedIn:"root",factory:()=>AU});function kU(t){return NU.replace(r_,t)}function OU(t){return DU.replace(r_,t)}function QM(t,e){return e.map(n=>n.replace(r_,t))}var o_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,l,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new nd(n,s,l,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof Zh?o.applyToHost(n):o instanceof rd&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case mi.Emulated:i=new Zh(l,c,r,this.appId,u,s,a,f,p);break;case mi.ShadowDom:return new e_(l,c,n,r,s,a,this.nonce,f,p);default:i=new rd(l,c,r,u,s,a,f,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Pe(t_),Pe(n_),Pe(Zl),Pe(MU),Pe(Ue),Pe(ts),Pe(We),Pe(Fh),Pe(ba,8))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),nd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,o,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Qw[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(XM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(XM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=Qw[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=Qw[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(gi.DashCase|gi.Important)?e.style.setProperty(n,r,o&gi.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&gi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,o){if(typeof e=="string"&&(e=zr().getGlobalEventTarget(this.doc,e),!e))throw new oe(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,o)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function XM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var e_=class extends nd{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,o,i,s,a,l,c){super(e,i,s,l,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=QM(o.id,u);for(let p of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let f=o.getExternalStyles?.();if(f)for(let p of f){let m=Jw(p,i);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rd=class extends nd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,o,i,s,a,l,c){super(e,i,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?QM(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ju.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zh=class extends rd{contentAttr;hostAttr;constructor(e,n,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(e,n,r,i,s,a,l,c,u),this.contentAttr=kU(u),this.hostAttr=OU(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Jh=class t extends Ju{supportsDOMEvents=!0;static makeCurrent(){qw(new t)}onAndCancel(e,n,r,o){return e.addEventListener(n,r,o),()=>{e.removeEventListener(n,r,o)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=RU();return n==null?null:PU(n)}resetBaseElement(){od=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yw(document.cookie,e)}},od=null;function RU(){return od=od||document.head.querySelector("base"),od?od.getAttribute("href"):null}function PU(t){return new URL(t,document.baseURI).pathname}var FU=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),ek=(()=>{class t extends td{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(Pe(Ue))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),JM=["alt","control","meta","shift"],LU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$U={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},tk=(()=>{class t extends td{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zr().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JM.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=LU[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),JM.forEach(s=>{if(s!==o){let a=$U[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Pe(Ue))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})();function i_(t,e,n){let r=B({rootComponent:t,platformRef:n?.platformRef},VU(e));return VM(r)}function VU(t){return{appProviders:[...zU,...t?.providers??[]],platformProviders:UU}}function jU(){Jh.makeCurrent()}function BU(){return new Er}function HU(){return dw(document),document}var UU=[{provide:ts,useValue:Xw},{provide:Ph,useValue:jU,multi:!0},{provide:Ue,useFactory:HU}];var zU=[{provide:wu,useValue:"root"},{provide:Er,useFactory:BU},{provide:Qh,useClass:ek,multi:!0,deps:[Ue]},{provide:Qh,useClass:tk,multi:!0,deps:[Ue]},o_,n_,t_,{provide:Mn,useExisting:o_},{provide:ed,useClass:FU},[]];var nk=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Pe(Ue))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ke="primary",yd=Symbol("RouteTitle"),u_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ac(t){return new u_(t)}function WU(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function qU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Bo(t[n],e[n]))return!1;return!0}function Bo(t,e){let n=t?d_(t):void 0,r=e?d_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!uk(t[o],e[o]))return!1;return!0}function d_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function uk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function dk(t){return t.length>0?t[t.length-1]:null}function Si(t){return Fp(t)?t:wa(t)?Ft(Promise.resolve(t)):he(t)}var KU={exact:pk,subset:hk},fk={exact:YU,subset:XU,ignored:()=>!0};function rk(t,e,n){return KU[n.paths](t.root,e.root,n.matrixParams)&&fk[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function YU(t,e){return Bo(t,e)}function pk(t,e,n){if(!Na(t.segments,e.segments)||!nm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!pk(t.children[r],e.children[r],n))return!1;return!0}function XU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uk(t[n],e[n]))}function hk(t,e,n){return mk(t,e,e.segments,n)}function mk(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Na(o,n)||e.hasChildren()||!nm(o,n,r))}else if(t.segments.length===n.length){if(!Na(t.segments,n)||!nm(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!hk(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Na(t.segments,o)||!nm(t.segments,o,r)||!t.children[ke]?!1:mk(t.children[ke],e,i,r)}}function nm(t,e,n){return e.every((r,o)=>fk[n](t[o].parameters,r.parameters))}var Ei=class{root;queryParams;fragment;_queryParamMap;constructor(e=new tt([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ac(this.queryParams),this._queryParamMap}toString(){return JU.serialize(this)}},tt=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rm(this)}},Da=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ac(this.parameters),this._parameterMap}toString(){return yk(this)}};function ZU(t,e){return Na(t,e)&&t.every((n,r)=>Bo(n.parameters,e[r].parameters))}function Na(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function QU(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===ke&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==ke&&(n=n.concat(e(o,r)))}),n}var mm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>new lc,providedIn:"root"})}return t})(),lc=class{parse(e){let n=new p_(e);return new Ei(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${id(e.root,!0)}`,r=nz(e.queryParams),o=typeof e.fragment=="string"?`#${ez(e.fragment)}`:"";return`${n}${r}${o}`}},JU=new lc;function rm(t){return t.segments.map(e=>yk(e)).join("/")}function id(t,e){if(!t.hasChildren())return rm(t);if(e){let n=t.children[ke]?id(t.children[ke],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ke&&r.push(`${o}:${id(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QU(t,(r,o)=>o===ke?[id(t.children[ke],!1)]:[`${o}:${id(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ke]!=null?`${rm(t)}/${n[0]}`:`${rm(t)}/(${n.join("//")})`}}function gk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function em(t){return gk(t).replace(/%3B/gi,";")}function ez(t){return encodeURI(t)}function f_(t){return gk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function om(t){return decodeURIComponent(t)}function ok(t){return om(t.replace(/\+/g,"%20"))}function yk(t){return`${f_(t.path)}${tz(t.parameters)}`}function tz(t){return Object.entries(t).map(([e,n])=>`;${f_(e)}=${f_(n)}`).join("")}function nz(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${em(n)}=${em(o)}`).join("&"):`${em(n)}=${em(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var rz=/^[^\/()?;#]+/;function s_(t){let e=t.match(rz);return e?e[0]:""}var oz=/^[^\/()?;=#]+/;function iz(t){let e=t.match(oz);return e?e[0]:""}var sz=/^[^=?&#]+/;function az(t){let e=t.match(sz);return e?e[0]:""}var lz=/^[^&#]+/;function cz(t){let e=t.match(lz);return e?e[0]:""}var p_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ke]=new tt(e,n)),r}parseSegment(){let e=s_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Da(om(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=iz(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=s_(this.remaining);o&&(r=o,this.capture(r))}e[om(n)]=om(r)}parseQueryParam(e){let n=az(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=cz(this.remaining);s&&(r=s,this.capture(r))}let o=ok(n),i=ok(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=s_(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new oe(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ke);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[ke]:new tt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function vk(t){return t.segments.length>0?new tt([],{[ke]:t}):t}function bk(t){let e={};for(let[r,o]of Object.entries(t.children)){let i=bk(o);if(r===ke&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new tt(t.segments,e);return uz(n)}function uz(t){if(t.numberOfChildren===1&&t.children[ke]){let e=t.children[ke];return new tt(t.segments.concat(e.segments),e.children)}return t}function cc(t){return t instanceof Ei}function dz(t,e,n=null,r=null){let o=wk(t);return _k(o,e,n,r)}function wk(t){let e;function n(i){let s={};for(let l of i.children){let c=n(l);s[l.outlet]=c}let a=new tt(i.url,s);return i===t&&(e=a),a}let r=n(t.root),o=vk(r);return e??o}function _k(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return a_(o,o,o,n,r);let i=fz(e);if(i.toRoot())return a_(o,o,new tt([],{}),n,r);let s=pz(i,o,t),a=s.processChildren?ad(s.segmentGroup,s.index,i.commands):Sk(s.segmentGroup,s.index,i.commands);return a_(o,s.segmentGroup,a,n,r)}function im(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ud(t){return typeof t=="object"&&t!=null&&t.outlets}function a_(t,e,n,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=Ek(t,e,n);let a=vk(bk(s));return new Ei(a,i,o)}function Ek(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=Ek(i,e,n)}),new tt(t.segments,r)}var sm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&im(r[0]))throw new oe(4003,!1);let o=r.find(ud);if(o&&o!==dk(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new sm(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new sm(n,e,r)}var oc=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function pz(t,e,n){if(t.isAbsolute)return new oc(e,!0,0);if(!n)return new oc(e,!1,NaN);if(n.parent===null)return new oc(n,!0,0);let r=im(t.commands[0])?0:1,o=n.segments.length-1+r;return hz(n,o,t.numberOfDoubleDots)}function hz(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new oe(4005,!1);o=r.segments.length}return new oc(r,!1,o-i)}function mz(t){return ud(t[0])?t[0].outlets:{[ke]:t}}function Sk(t,e,n){if(t??=new tt([],{}),t.segments.length===0&&t.hasChildren())return ad(t,e,n);let r=gz(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new tt(t.segments.slice(0,r.pathIndex),{});return i.children[ke]=new tt(t.segments.slice(r.pathIndex),t.children),ad(i,0,o)}else return r.match&&o.length===0?new tt(t.segments,{}):r.match&&!t.hasChildren()?h_(t,e,n):r.match?ad(t,0,o):h_(t,e,n)}function ad(t,e,n){if(n.length===0)return new tt(t.segments,{});{let r=mz(n),o={};if(Object.keys(r).some(i=>i!==ke)&&t.children[ke]&&t.numberOfChildren===1&&t.children[ke].segments.length===0){let i=ad(t.children[ke],e,n);return new tt(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Sk(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new tt(t.segments,o)}}function gz(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],a=n[r];if(ud(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!sk(l,c,s))return i;r+=2}else{if(!sk(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function h_(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(ud(i)){let l=yz(i.outlets);return new tt(r,l)}if(o===0&&im(n[0])){let l=t.segments[e];r.push(new Da(l.path,ik(n[0]))),o++;continue}let s=ud(i)?i.outlets[ke]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&im(a)?(r.push(new Da(s,ik(a))),o+=2):(r.push(new Da(s,{})),o++)}return new tt(r,{})}function yz(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=h_(new tt([],{}),0,r))}),e}function ik(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sk(t,e,n){return t==n.path&&Bo(e,n.parameters)}var ld="imperative",xn=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(xn||{}),Gr=class{id;url;constructor(e,n){this.id=e,this.url=n}},uc=class extends Gr{type=xn.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ss=class extends Gr{urlAfterRedirects;type=xn.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cr=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(cr||{}),am=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(am||{}),_i=class extends Gr{reason;code;type=xn.NavigationCancel;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},as=class extends Gr{reason;code;type=xn.NavigationSkipped;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}},dd=class extends Gr{error;target;type=xn.NavigationError;constructor(e,n,r,o){super(e,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lm=class extends Gr{urlAfterRedirects;state;type=xn.RoutesRecognized;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends Gr{urlAfterRedirects;state;type=xn.GuardsCheckStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends Gr{urlAfterRedirects;state;shouldActivate;type=xn.GuardsCheckEnd;constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},y_=class extends Gr{urlAfterRedirects;state;type=xn.ResolveStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class extends Gr{urlAfterRedirects;state;type=xn.ResolveEnd;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b_=class{route;type=xn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},w_=class{route;type=xn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},__=class{snapshot;type=xn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{snapshot;type=xn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S_=class{snapshot;type=xn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x_=class{snapshot;type=xn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fd=class{},dc=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function vz(t){return!(t instanceof fd)&&!(t instanceof dc)}function bz(t,e){return t.providers&&!t._injector&&(t._injector=zu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ho(t){return t.outlet||ke}function wz(t,e){let n=t.filter(r=>ho(r)===e);return n.push(...t.filter(r=>ho(r)!==e)),n}function pc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var T_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return pc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new vd(this.rootInjector)}},vd=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new T_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Pe(kt))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=I_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=I_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=C_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return C_(e,this._root).map(n=>n.value)}};function I_(t,e){if(t===e.value)return e;for(let n of e.children){let r=I_(t,n);if(r)return r}return null}function C_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=C_(t,n);if(r.length)return r.unshift(e),r}return[]}var Ir=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function rc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var um=class extends cm{snapshot;constructor(e,n){super(e),this.snapshot=n,F_(this,e)}toString(){return this.snapshot.toString()}};function xk(t){let e=_z(t),n=new Nt([new Da("",{})]),r=new Nt({}),o=new Nt({}),i=new Nt({}),s=new Nt(""),a=new Aa(n,r,i,s,o,ke,t,e.root);return a.snapshot=e.root,new um(new Ir(a,[]),e)}function _z(t){let e={},n={},r={},i=new ic([],e,r,"",n,ke,t,null,{});return new fm("",new Ir(i,[]))}var Aa=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,o,i,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ve(c=>c[yd]))??he(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ve(e=>ac(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ve(e=>ac(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dm(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),t.params),data:B(B({},e.data),t.data),resolve:B(B(B(B({},t.data),e.data),o?.data),t._resolvedData)}:r={params:B({},t.params),data:B({},t.data),resolve:B(B({},t.data),t._resolvedData??{})},o&&Ik(o)&&(r.resolve[yd]=o.title),r}var ic=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[yd]}constructor(e,n,r,o,i,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ac(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ac(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},fm=class extends cm{url;constructor(e,n){super(n),this.url=e,F_(this,n)}toString(){return Tk(this._root)}};function F_(t,e){e.value._routerState=t,e.children.forEach(n=>F_(t,n))}function Tk(t){let e=t.children.length>0?` { ${t.children.map(Tk).join(", ")} } `:"";return`${t.value}${e}`}function l_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Bo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Bo(e.params,n.params)||t.paramsSubject.next(n.params),qU(e.url,n.url)||t.urlSubject.next(n.url),Bo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function D_(t,e){let n=Bo(t.params,e.params)&&ZU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||D_(t.parent,e.parent))}function Ik(t){return typeof t.title=="string"||t.title===null}var Ez=new ee(""),Ck=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ke;activateEvents=new at;deactivateEvents=new at;attachEvents=new at;detachEvents=new at;routerOutletData=Ot(void 0);parentContexts=O(vd);location=O(Br);changeDetector=O(Ca);inputBinder=O(gm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new N_(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Qt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[es]})}return t})(),N_=class{route;childContexts;parent;outletData;constructor(e,n,r,o){this.route=e,this.childContexts=n,this.parent=r,this.outletData=o}get(e,n){return e===Aa?this.route:e===vd?this.childContexts:e===Ez?this.outletData:this.parent.get(e,n)}},gm=new ee("");var Dk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Zn(0,"router-outlet")},dependencies:[Ck],encapsulation:2})}return t})();function L_(t){let e=t.children&&t.children.map(L_),n=e?ce(B({},t),{children:e}):B({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ke&&(n.component=Dk),n}function Sz(t,e,n){let r=pd(t,e._root,n?n._root:void 0);return new um(r,e)}function pd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=xz(t,e,n);return new Ir(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pd(t,a)),s}}let r=Tz(e.value),o=e.children.map(i=>pd(t,i));return new Ir(r,o)}}function xz(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return pd(t,r,o);return pd(t,r)})}function Tz(t){return new Aa(new Nt(t.url),new Nt(t.params),new Nt(t.queryParams),new Nt(t.fragment),new Nt(t.data),t.outlet,t.component,t)}var hd=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Nk="ngNavigationCancelingError";function pm(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=cc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Ak(!1,cr.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function Ak(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Nk]=!0,n.cancellationCode=e,n}function Iz(t){return Mk(t)&&cc(t.url)}function Mk(t){return!!t&&t[Nk]}var Cz=(t,e,n,r)=>ve(o=>(new A_(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),A_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),l_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=rc(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=rc(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=rc(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=rc(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new x_(i.value.snapshot))}),e.children.length&&this.forwardEvent(new E_(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(l_(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),l_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},hm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},sc=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Dz(t,e,n){let r=t._root,o=e?e._root:null;return sd(r,o,n,[r.value])}function Nz(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function hc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Pv(t)?t:e.get(t):r}function sd(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=rc(e);return t.children.forEach(s=>{Az(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>cd(a,n.getContext(s),o)),o}function Az(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=Mz(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new hm(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?sd(t,e,a?a.children:null,r,o):sd(t,e,n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new sc(a.outlet.component,s))}else s&&cd(e,a,o),o.canActivateChecks.push(new hm(r)),i.component?sd(t,null,a?a.children:null,r,o):sd(t,null,n,r,o);return o}function Mz(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Na(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Na(t.url,e.url)||!Bo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!D_(t,e)||!Bo(t.queryParams,e.queryParams);case"paramsChange":default:return!D_(t,e)}}function cd(t,e,n){let r=rc(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?cd(s,e.children.getContext(i),n):cd(s,null,n):cd(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new sc(e.outlet.component,o)):n.canDeactivateChecks.push(new sc(null,o)):n.canDeactivateChecks.push(new sc(null,o))}function bd(t){return typeof t=="function"}function kz(t){return typeof t=="boolean"}function Oz(t){return t&&bd(t.canLoad)}function Rz(t){return t&&bd(t.canActivate)}function Pz(t){return t&&bd(t.canActivateChild)}function Fz(t){return t&&bd(t.canDeactivate)}function Lz(t){return t&&bd(t.canMatch)}function kk(t){return t instanceof si||t?.name==="EmptyError"}var tm=Symbol("INITIAL_VALUE");function fc(){return qe(t=>Vp(t.map(e=>e.pipe(An(1),ro(tm)))).pipe(ve(e=>{for(let n of e)if(n!==!0){if(n===tm)return tm;if(n===!1||$z(n))return n}return!0}),At(e=>e!==tm),An(1)))}function $z(t){return cc(t)||t instanceof hd}function Vz(t,e){return jt(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?he(ce(B({},n),{guardsResult:!0})):jz(s,r,o,t).pipe(jt(a=>a&&kz(a)?Bz(r,i,t,e):he(a)),ve(a=>ce(B({},n),{guardsResult:a})))})}function jz(t,e,n,r){return Ft(t).pipe(jt(o=>Wz(o.component,o.route,n,e,r)),ai(o=>o!==!0,!0))}function Bz(t,e,n,r){return Ft(e).pipe(Rl(o=>Ol(Uz(o.route.parent,r),Hz(o.route,r),Gz(t,o.path,n),zz(t,o.route,n))),ai(o=>o!==!0,!0))}function Hz(t,e){return t!==null&&e&&e(new S_(t)),he(!0)}function Uz(t,e){return t!==null&&e&&e(new __(t)),he(!0)}function zz(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let o=r.map(i=>Xs(()=>{let s=pc(e)??n,a=hc(i,s),l=Rz(a)?a.canActivate(e,t):qn(s,()=>a(e,t));return Si(l).pipe(ai())}));return he(o).pipe(fc())}function Gz(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>Nz(s)).filter(s=>s!==null).map(s=>Xs(()=>{let a=s.guards.map(l=>{let c=pc(s.node)??n,u=hc(l,c),f=Pz(u)?u.canActivateChild(r,t):qn(c,()=>u(r,t));return Si(f).pipe(ai())});return he(a).pipe(fc())}));return he(i).pipe(fc())}function Wz(t,e,n,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return he(!0);let s=i.map(a=>{let l=pc(e)??o,c=hc(a,l),u=Fz(c)?c.canDeactivate(t,e,n,r):qn(l,()=>c(t,e,n,r));return Si(u).pipe(ai())});return he(s).pipe(fc())}function qz(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return he(!0);let i=o.map(s=>{let a=hc(s,t),l=Oz(a)?a.canLoad(e,n):qn(t,()=>a(e,n));return Si(l)});return he(i).pipe(fc(),Ok(r))}function Ok(t){return pv(Mt(e=>{if(typeof e!="boolean")throw pm(t,e)}),ve(e=>e===!0))}function Kz(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return he(!0);let i=o.map(s=>{let a=hc(s,t),l=Lz(a)?a.canMatch(e,n):qn(t,()=>a(e,n));return Si(l)});return he(i).pipe(fc(),Ok(r))}var md=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},gd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function nc(t){return Ml(new md(t))}function Yz(t){return Ml(new oe(4e3,!1))}function Xz(t){return Ml(Ak(!1,cr.GuardRejected))}var M_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return he(r);if(o.numberOfChildren>1||!o.children[ke])return Yz(`${e.redirectTo}`);o=o.children[ke]}}applyRedirectCommands(e,n,r,o,i){return Zz(n,o,i).pipe(ve(s=>{if(s instanceof Ei)throw new gd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new gd(a);return a}))}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new Ei(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,o)}),new tt(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new oe(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}};function Zz(t,e,n){if(typeof t=="string")return he(t);let r=t,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,params:c,data:u,title:f}=e;return Si(qn(n,()=>r({params:c,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,title:f})))}var k_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Qz(t,e,n,r,o){let i=Rk(t,e,n);return i.matched?(r=bz(e,r),Kz(r,e,n,o).pipe(ve(s=>s===!0?i:B({},k_)))):he(i)}function Rk(t,e,n){if(e.path==="**")return Jz(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?B({},k_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||WU)(n,t,e);if(!o)return B({},k_);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?B(B({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Jz(t){return{matched:!0,parameters:t.length>0?dk(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ak(t,e,n,r){return n.length>0&&n4(t,n,r)?{segmentGroup:new tt(e,t4(r,new tt(n,t.children))),slicedSegments:[]}:n.length===0&&r4(t,n,r)?{segmentGroup:new tt(t.segments,e4(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new tt(t.segments,t.children),slicedSegments:n}}function e4(t,e,n,r){let o={};for(let i of n)if(ym(t,e,i)&&!r[ho(i)]){let s=new tt([],{});o[ho(i)]=s}return B(B({},r),o)}function t4(t,e){let n={};n[ke]=e;for(let r of t)if(r.path===""&&ho(r)!==ke){let o=new tt([],{});n[ho(r)]=o}return n}function n4(t,e,n){return n.some(r=>ym(t,e,r)&&ho(r)!==ke)}function r4(t,e,n){return n.some(r=>ym(t,e,r))}function ym(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function o4(t,e,n){return e.length===0&&!t.children[n]}var O_=class{};function i4(t,e,n,r,o,i,s="emptyOnly"){return new R_(t,e,n,r,o,s,i).recognize()}var s4=31,R_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new M_(this.urlSerializer,this.urlTree)}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=ak(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ve(({children:n,rootSnapshot:r})=>{let o=new Ir(r,n),i=new fm("",o),s=dz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let n=new ic([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ke,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ke,n).pipe(ve(r=>({children:r,rootSnapshot:n})),Bi(r=>{if(r instanceof gd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof md?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,i):this.processSegment(e,n,r,r.segments,o,!0,i).pipe(ve(s=>s instanceof Ir?[s]:[]))}processChildren(e,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ft(i).pipe(Rl(s=>{let a=r.children[s],l=wz(n,s);return this.processSegmentGroup(e,l,a,s,o)}),wv((s,a)=>(s.push(...a),s)),Hi(null),Ui(),jt(s=>{if(s===null)return nc(r);let a=Pk(s);return a4(a),he(a)}))}processSegment(e,n,r,o,i,s,a){return Ft(n).pipe(Rl(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,o,i,s,a).pipe(Bi(c=>{if(c instanceof md)return he(null);throw c}))),ai(l=>!!l),Bi(l=>{if(kk(l))return o4(r,o,i)?he(new O_):nc(r);throw l}))}processSegmentAgainstRoute(e,n,r,o,i,s,a,l){return ho(r)!==s&&(s===ke||!ym(o,i,r))?nc(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,l):nc(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=Rk(n,o,i);if(!l)return nc(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s4&&(this.allowRedirects=!1));let m=new ic(i,c,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,lk(o),ho(o),o.component??o._loadedComponent??null,o,ck(o)),w=dm(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(w.params),m.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,f,m,e).pipe(qe(T=>this.applyRedirects.lineralizeSegments(o,T)),jt(T=>this.processSegment(e,r,n,T.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,o,i,s){let a=Qz(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(qe(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(qe(({routes:c})=>{let u=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=l,w=new ic(p,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,lk(r),ho(r),r.component??r._loadedComponent??null,r,ck(r)),x=dm(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(x.params),w.data=Object.freeze(x.data);let{segmentGroup:T,slicedSegments:D}=ak(n,p,m,c);if(D.length===0&&T.hasChildren())return this.processChildren(u,c,T,w).pipe(ve(A=>new Ir(w,A)));if(c.length===0&&D.length===0)return he(new Ir(w,[]));let P=ho(r)===i;return this.processSegment(u,c,T,D,P?ke:i,!0,w).pipe(ve(A=>new Ir(w,A instanceof Ir?[A]:[])))}))):nc(n)))}getChildConfig(e,n,r){return n.children?he({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?he({routes:n._loadedRoutes,injector:n._loadedInjector}):qz(e,n,r,this.urlSerializer).pipe(jt(o=>o?this.configLoader.loadChildren(e,n).pipe(Mt(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):Xz(n))):he({routes:[],injector:e})}};function a4(t){t.sort((e,n)=>e.value.outlet===ke?-1:n.value.outlet===ke?1:e.value.outlet.localeCompare(n.value.outlet))}function l4(t){let e=t.value.routeConfig;return e&&e.path===""}function Pk(t){let e=[],n=new Set;for(let r of t){if(!l4(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=Pk(r.children);e.push(new Ir(r.value,o))}return e.filter(r=>!n.has(r))}function lk(t){return t.data||{}}function ck(t){return t.resolve||{}}function c4(t,e,n,r,o,i){return jt(s=>i4(t,e,n,r,s.extractedUrl,o,i).pipe(ve(({state:a,tree:l})=>ce(B({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function u4(t,e){return jt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return he(n);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of Fk(l))s.add(c);let a=0;return Ft(s).pipe(Rl(l=>i.has(l)?d4(l,r,t,e):(l.data=dm(l,l.parent,t).resolve,he(void 0))),Mt(()=>a++),Pl(1),jt(l=>a===s.size?he(n):rr))})}function Fk(t){let e=t.children.map(n=>Fk(n)).flat();return[t,...e]}function d4(t,e,n,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!Ik(o)&&(i[yd]=o.title),Xs(()=>(t.data=dm(t,t.parent,n).resolve,f4(i,t,e,r).pipe(ve(s=>(t._resolvedData=s,t.data=B(B({},t.data),s),null)))))}function f4(t,e,n,r){let o=d_(t);if(o.length===0)return he({});let i={};return Ft(o).pipe(jt(s=>p4(t[s],e,n,r).pipe(ai(),Mt(a=>{if(a instanceof hd)throw pm(new lc,a);i[s]=a}))),Pl(1),ve(()=>i),Bi(s=>kk(s)?rr:Ml(s)))}function p4(t,e,n,r){let o=pc(e)??r,i=hc(t,o),s=i.resolve?i.resolve(e,n):qn(o,()=>i(e,n));return Si(s)}function c_(t){return qe(e=>{let n=t(e);return n?Ft(n).pipe(ve(()=>e)):he(e)})}var Lk=(()=>{class t{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===ke);return r}getResolvedTitleForRoute(n){return n.data[yd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(h4),providedIn:"root"})}return t})(),h4=(()=>{class t extends Lk{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Pe(nk))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vm=new ee("",{providedIn:"root",factory:()=>({})}),bm=new ee(""),$k=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=O(Bw);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return he(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=Si(qn(n,()=>r.loadComponent())).pipe(ve(Vk),qe(jk),Mt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),du(()=>{this.componentLoaders.delete(r)})),i=new Dl(o,()=>new Me).pipe(Cl());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=m4(r,this.compiler,n,this.onLoadEndListener).pipe(du(()=>{this.childrenLoaders.delete(r)})),s=new Dl(i,()=>new Me).pipe(Cl());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function m4(t,e,n,r){return Si(qn(n,()=>t.loadChildren())).pipe(ve(Vk),qe(jk),jt(o=>o instanceof Uh||Array.isArray(o)?he(o):Ft(e.compileModuleAsync(o))),ve(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(bm,[],{optional:!0,self:!0}).flat()),{routes:s.map(L_),injector:i}}))}function g4(t){return t&&typeof t=="object"&&"default"in t}function Vk(t){return g4(t)?t.default:t}function jk(t){return he(t)}var $_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(y4),providedIn:"root"})}return t})(),y4=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bk=new ee("");var Hk=new ee(""),Uk=(()=>{class t{currentNavigation=Ee(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Me;transitionAbortWithErrorSubject=new Me;configLoader=O($k);environmentInjector=O(kt);destroyRef=O(xr);urlSerializer=O(mm);rootContexts=O(vd);location=O(is);inputBindingEnabled=O(gm,{optional:!0})!==null;titleStrategy=O(Lk);options=O(vm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=O($_);createViewTransition=O(Bk,{optional:!0});navigationErrorHandler=O(Hk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>he(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new b_(o)),r=o=>this.events.next(new w_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Pn(()=>{this.transitions?.next(ce(B({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Nt(null),this.transitions.pipe(At(r=>r!==null),qe(r=>{let o=!1;return he(r).pipe(qe(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",cr.SupersededByNewNavigation),rr;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?ce(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new as(i.id,this.urlSerializer.serialize(i.rawUrl),"",am.IgnoredSameUrlNavigation)),i.resolve(!1),rr;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return he(i).pipe(qe(l=>(this.events.next(new uc(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?rr:Promise.resolve(l))),c4(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Mt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=l.urlAfterRedirects,u));let c=new lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:f,extras:p}=i,m=new uc(l,this.urlSerializer.serialize(c),u,f);this.events.next(m);let w=xk(this.rootComponentType).snapshot;return this.currentTransition=r=ce(B({},i),{targetSnapshot:w,urlAfterRedirects:c,extras:ce(B({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=c,x)),he(r)}else return this.events.next(new as(i.id,this.urlSerializer.serialize(i.extractedUrl),"",am.IgnoredByUrlHandlingStrategy)),i.resolve(!1),rr}),Mt(i=>{let s=new m_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),ve(i=>(this.currentTransition=r=ce(B({},i),{guards:Dz(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),Vz(this.environmentInjector,i=>this.events.next(i)),Mt(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw pm(this.urlSerializer,i.guardsResult);let s=new g_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),At(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",cr.GuardRejected),!1)),c_(i=>{if(i.guards.canActivateChecks.length!==0)return he(i).pipe(Mt(s=>{let a=new y_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),qe(s=>{let a=!1;return he(s).pipe(u4(this.paramsInheritanceStrategy,this.environmentInjector),Mt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",cr.NoDataFromResolver)}}))}),Mt(s=>{let a=new v_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),c_(i=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=pc(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(Mt(u=>{a.component=u}),ve(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return Vp(s(i.targetSnapshot.root)).pipe(Hi(null),An(1))}),c_(()=>this.afterPreactivation()),qe(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?Ft(a).pipe(ve(()=>r)):he(r)}),ve(i=>{let s=Sz(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=ce(B({},i),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Mt(()=>{this.events.next(new fd)}),Cz(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),An(1),sn(new Te(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(At(()=>!o&&!r.targetRouterState),Mt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",cr.Aborted)}))),Mt({next:i=>{o=!0,this.lastSuccessfulNavigation=Pn(this.currentNavigation),this.events.next(new ss(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),sn(this.transitionAbortWithErrorSubject.pipe(Mt(i=>{throw i}))),du(()=>{o||this.cancelNavigationTransition(r,"",cr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Bi(i=>{if(this.destroyed)return r.resolve(!1),rr;if(o=!0,Mk(i))this.events.next(new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),Iz(i)?this.events.next(new dc(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new dd(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=qn(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof hd){let{message:l,cancellationCode:c}=pm(this.urlSerializer,a);this.events.next(new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new dc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return rr}))}))}cancelNavigationTransition(n,r,o){let i=new _i(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Pn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function v4(t){return t!==ld}var b4=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(w4),providedIn:"root"})}return t})(),P_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},w4=(()=>{class t extends P_{static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),zk=(()=>{class t{urlSerializer=O(mm);options=O(vm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=O(is);urlHandlingStrategy=O($_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ei;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Ei?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=xk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:()=>O(_4),providedIn:"root"})}return t})(),_4=(()=>{class t extends zk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof uc?this.updateStateMemento():n instanceof as?this.commitTransition(r):n instanceof lm?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof fd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _i&&n.code!==cr.SupersededByNewNavigation&&n.code!==cr.Redirect?this.restoreHistory(r):n instanceof dd?this.restoreHistory(r,!0):n instanceof ss&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,l=B(B({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",l)}else{let a=B(B({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gk(t,e){t.events.pipe(At(n=>n instanceof ss||n instanceof _i||n instanceof dd||n instanceof as),ve(n=>n instanceof ss||n instanceof as?0:(n instanceof _i?n.code===cr.Redirect||n.code===cr.SupersededByNewNavigation:!1)?2:1),At(n=>n!==2),An(1)).subscribe(()=>{e()})}var E4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},V_=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=O(Pw);stateManager=O(zk);options=O(vm,{optional:!0})||{};pendingTasks=O(hi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=O(Uk);urlSerializer=O(mm);location=O(is);urlHandlingStrategy=O($_);injector=O(kt);_events=new Me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=O(b4);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=O(bm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!O(gm,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new pt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=Pn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof _i&&r.code!==cr.Redirect&&r.code!==cr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ss)this.navigated=!0;else if(r instanceof dc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=B({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||v4(o.source)},s);this.scheduleNavigation(a,ld,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}vz(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ld,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=B({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(l=>{this.disposed||this.injector.get(Vr)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Pn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(L_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=B(B({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=o?o.snapshot:this.routerState.snapshot.root;f=wk(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return _k(f,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=cc(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ld,null,r)}navigate(n,r={skipLocationChange:!1}){return x4(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=B({},E4):r===!1?o=B({},S4):o=r,cc(n))return rk(this.currentUrlTree,n,o);let i=this.parseUrl(n);return rk(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,p)=>{a=f,l=p});let u=this.pendingTasks.add();return Gk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function x4(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new oe(4008,!1)}var T4=new ee("");function j_(t,...e){return ra([{provide:bm,multi:!0,useValue:t},[],{provide:Aa,useFactory:I4,deps:[V_]},{provide:Gh,multi:!0,useFactory:C4},e.map(n=>n.\u0275providers)])}function I4(t){return t.routerState.root}function C4(){let t=O(Ye);return e=>{let n=t.get(Tr);if(e!==n.components[0])return;let r=t.get(V_),o=t.get(D4);t.get(N4)===1&&r.initialNavigation(),t.get(A4,null,{optional:!0})?.setUpPreloading(),t.get(T4,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var D4=new ee("",{factory:()=>new Me}),N4=new ee("",{providedIn:"root",factory:()=>1});var A4=new ee("");var Wk=[];var qk={providers:[wb(),Uw(),j_(Wk)]};var tO=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(_n(bi),_n(lt))};static \u0275dir=Qt({type:t})}return t})(),W_=(()=>{class t extends tO{static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275dir=Qt({type:t,features:[Xn]})}return t})(),ls=new ee(""),k4={provide:ls,useExisting:sr(()=>q_),multi:!0},q_=(()=>{class t extends W_{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275dir=Qt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Jt("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ur([k4]),Xn]})}return t})(),O4={provide:ls,useExisting:sr(()=>ka),multi:!0};function R4(){let t=zr()?zr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var P4=new ee(""),ka=(()=>{class t extends tO{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!R4())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(_n(bi),_n(lt),_n(P4,8))};static \u0275dir=Qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Jt("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[Ur([O4]),Xn]})}return t})();var F4=new ee(""),L4=new ee("");function nO(t){return t!=null}function rO(t){return wa(t)?Ft(t):t}function oO(t){let e={};return t.forEach(n=>{e=n!=null?B(B({},e),n):e}),Object.keys(e).length===0?null:e}function iO(t,e){return e.map(n=>n(t))}function $4(t){return!t.validate}function sO(t){return t.map(e=>$4(e)?e:n=>e.validate(n))}function V4(t){if(!t)return null;let e=t.filter(nO);return e.length==0?null:function(n){return oO(iO(n,e))}}function aO(t){return t!=null?V4(sO(t)):null}function j4(t){if(!t)return null;let e=t.filter(nO);return e.length==0?null:function(n){let r=iO(n,e).map(rO);return bv(r).pipe(ve(oO))}}function lO(t){return t!=null?j4(sO(t)):null}function Kk(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function B4(t){return t._rawValidators}function H4(t){return t._rawAsyncValidators}function B_(t){return t?Array.isArray(t)?t:[t]:[]}function _m(t,e){return Array.isArray(t)?t.includes(e):t===e}function Yk(t,e){let n=B_(e);return B_(t).forEach(o=>{_m(n,o)||n.push(o)}),n}function Xk(t,e){return B_(e).filter(n=>!_m(t,n))}var Em=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},H_=class extends Em{name;get formDirective(){return null}get path(){return null}},xd=class extends Em{_parent=null;name=null;valueAccessor=null},U_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},U4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Khe=ce(B({},U4),{"[class.ng-submitted]":"isSubmitted"}),Td=(()=>{class t extends U_{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(_n(xd,2))};static \u0275dir=Qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Ta("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Xn]})}return t})();var wd="VALID",wm="INVALID",mc="PENDING",_d="DISABLED",Ma=class{},Sm=class extends Ma{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Ed=class extends Ma{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Sd=class extends Ma{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},gc=class extends Ma{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var z_=class extends Ma{source;constructor(e){super(),this.source=e}};function z4(t){return(xm(t)?t.validators:t)||null}function G4(t){return Array.isArray(t)?aO(t):t||null}function W4(t,e){return(xm(e)?e.asyncValidators:t)||null}function q4(t){return Array.isArray(t)?lO(t):t||null}function xm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var G_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pn(this.statusReactive)}set status(e){Pn(()=>this.statusReactive.set(e))}_status=jo(()=>this.statusReactive());statusReactive=Ee(void 0);get valid(){return this.status===wd}get invalid(){return this.status===wm}get pending(){return this.status==mc}get disabled(){return this.status===_d}get enabled(){return this.status!==_d}errors;get pristine(){return Pn(this.pristineReactive)}set pristine(e){Pn(()=>this.pristineReactive.set(e))}_pristine=jo(()=>this.pristineReactive());pristineReactive=Ee(!0);get dirty(){return!this.pristine}get touched(){return Pn(this.touchedReactive)}set touched(e){Pn(()=>this.touchedReactive.set(e))}_touched=jo(()=>this.touchedReactive());touchedReactive=Ee(!1);get untouched(){return!this.touched}_events=new Me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Yk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Yk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xk(e,this._rawAsyncValidators))}hasValidator(e){return _m(this._rawValidators,e)}hasAsyncValidator(e){return _m(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(B({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Sd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Sd(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(B({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ed(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ed(!0,r))}markAsPending(e={}){this.status=mc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(B({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=_d,this.errors=null,this._forEachChild(o=>{o.disable(ce(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sm(this.value,r)),this._events.next(new gc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=wd,this._forEachChild(r=>{r.enable(ce(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===wd||this.status===mc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sm(this.value,n)),this._events.next(new gc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(B({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_d:wd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=mc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=rO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?_d:this.errors?wm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mc)?mc:this._anyControlsHaveStatus(wm)?wm:wd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),o&&this._events.next(new Ed(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Sd(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=G4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=q4(this._rawAsyncValidators)}};var cO=new ee("",{providedIn:"root",factory:()=>K_}),K_="always";function K4(t,e){return[...e.path,t]}function Y4(t,e,n=K_){Z4(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Q4(t,e),eG(t,e),J4(t,e),X4(t,e)}function Zk(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function X4(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Z4(t,e){let n=B4(t);e.validator!==null?t.setValidators(Kk(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=H4(t);e.asyncValidator!==null?t.setAsyncValidators(Kk(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();Zk(e._rawValidators,o),Zk(e._rawAsyncValidators,o)}function Q4(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&uO(t,e)})}function J4(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&uO(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function uO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function eG(t,e){let n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function tG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function nG(t){return Object.getPrototypeOf(t.constructor)===W_}function rG(t,e){if(!e)return null;Array.isArray(e);let n,r,o;return e.forEach(i=>{i.constructor===ka?n=i:nG(i)?r=i:o=i}),o||r||n||null}function Qk(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Jk(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var oG=class extends G_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(z4(n),W4(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Jk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new z_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Jk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iG={provide:xd,useExisting:sr(()=>yc)},eO=Promise.resolve(),yc=(()=>{class t extends xd{_changeDetectorRef;callSetDisabledState;control=new oG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=rG(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),tG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Y4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){eO.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&tc(r);eO.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?K4(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(_n(H_,9),_n(F4,10),_n(L4,10),_n(ls,10),_n(Ca,8),_n(cO,8))};static \u0275dir=Qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ur([iG]),Xn,es]})}return t})();var sG={provide:ls,useExisting:sr(()=>Y_),multi:!0},Y_=(()=>{class t extends W_{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275dir=Qt({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&Jt("change",function(s){return o.onChange(s.target.value)})("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Ur([sG]),Xn]})}return t})();var aG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=uo({type:t});static \u0275inj=Rr({})}return t})();var Oa=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:cO,useValue:n.callSetDisabledState??K_}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=uo({type:t});static \u0275inj=Rr({imports:[aG]})}return t})();var Tm=to(document,"pointermove").pipe(wr()),Im=to(document,"pointerup").pipe(wr());function Id(t,e=new Nt(!1)){let n=to(t,"pointerdown").pipe(At(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Mt(a=>{!(a.target instanceof HTMLInputElement)&&e.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),ve(a=>{let l=t.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:t}}),wr()),r=n.pipe(qe(a=>Tm.pipe(ve(l=>ce(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),An(1)).pipe(sn(Im))),wr()),o=r.pipe(qe(a=>Tm.pipe(ve(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Im))),wr()),i=r.pipe(qe(a=>Tm.pipe(ro(a),ve(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Im),Ui()))),s=n.pipe(qe(a=>Im.pipe(sn(Tm))));return{dragStart$:e.pipe(qe(a=>a?no:r)),dragMove$:e.pipe(qe(a=>a?no:o)),dragEnd$:e.pipe(qe(a=>a?no:i)),click$:e.pipe(qe(a=>a?no:s))}}var Df={};He(Df,{Abs:()=>o0,Acos:()=>i0,Acosh:()=>s0,AdadeltaOptimizer:()=>Ss,AdagradOptimizer:()=>xs,AdamOptimizer:()=>Ts,AdamaxOptimizer:()=>Is,Add:()=>Mm,AddN:()=>a0,All:()=>vO,Any:()=>bO,ArgMax:()=>l0,ArgMin:()=>c0,Asin:()=>u0,Asinh:()=>d0,Atan:()=>f0,Atan2:()=>h0,Atanh:()=>p0,AvgPool:()=>m0,AvgPool3D:()=>g0,AvgPool3DGrad:()=>AG,AvgPoolGrad:()=>NG,BatchMatMul:()=>y0,BatchToSpaceND:()=>v0,Bincount:()=>b0,BitwiseAnd:()=>w0,BroadcastArgs:()=>_0,BroadcastTo:()=>MG,Cast:()=>Nd,Ceil:()=>E0,ClipByValue:()=>S0,Complex:()=>x0,ComplexAbs:()=>T0,Concat:()=>I0,Conv2D:()=>C0,Conv2DBackpropFilter:()=>D0,Conv2DBackpropInput:()=>N0,Conv3D:()=>A0,Conv3DBackpropFilterV2:()=>kG,Conv3DBackpropInputV2:()=>M0,Cos:()=>wO,Cosh:()=>k0,CropAndResize:()=>P0,Cumprod:()=>O0,Cumsum:()=>R0,DataStorage:()=>Cm,DenseBincount:()=>F0,DepthToSpace:()=>L0,DepthwiseConv2dNative:()=>$0,DepthwiseConv2dNativeBackpropFilter:()=>V0,DepthwiseConv2dNativeBackpropInput:()=>j0,Diag:()=>B0,Dilation2D:()=>H0,Dilation2DBackpropFilter:()=>RG,Dilation2DBackpropInput:()=>OG,Draw:()=>km,ENV:()=>Am,Einsum:()=>z0,Elu:()=>_O,EluGrad:()=>PG,Environment:()=>Sc,Equal:()=>G0,Erf:()=>EO,Exp:()=>SO,ExpandDims:()=>W0,Expm1:()=>q0,FFT:()=>xO,Fill:()=>K0,FlipLeftRight:()=>Y0,Floor:()=>X0,FloorDiv:()=>Z0,FromPixels:()=>Om,FusedBatchNorm:()=>Q0,FusedConv2D:()=>Pm,FusedDepthwiseConv2D:()=>Fm,GatherNd:()=>eE,GatherV2:()=>J0,Greater:()=>tE,GreaterEqual:()=>nE,IFFT:()=>rE,Identity:()=>Ad,Imag:()=>oE,IsFinite:()=>iE,IsInf:()=>sE,IsNan:()=>aE,KernelBackend:()=>vc,LRN:()=>IO,LRNGrad:()=>VG,LeakyRelu:()=>lE,Less:()=>cE,LessEqual:()=>uE,LinSpace:()=>dE,Log:()=>TO,Log1p:()=>fE,LogSoftmax:()=>LG,LogicalAnd:()=>pE,LogicalNot:()=>hE,LogicalOr:()=>mE,LogicalXor:()=>FG,LowerBound:()=>$G,MatrixBandPart:()=>jG,Max:()=>CO,MaxPool:()=>yE,MaxPool3D:()=>vE,MaxPool3DGrad:()=>HG,MaxPoolGrad:()=>BG,MaxPoolWithArgmax:()=>bE,Maximum:()=>gE,Mean:()=>wE,Min:()=>DO,Minimum:()=>_E,MirrorPad:()=>EE,Mod:()=>NO,MomentumOptimizer:()=>Cs,Multinomial:()=>SE,Multiply:()=>xE,Neg:()=>AO,NonMaxSuppressionV3:()=>IE,NonMaxSuppressionV4:()=>CE,NonMaxSuppressionV5:()=>DE,NotEqual:()=>TE,OP_SCOPE_SUFFIX:()=>qm,OneHot:()=>AE,OnesLike:()=>NE,Optimizer:()=>Dn,OptimizerConstructors:()=>Hc,Pack:()=>ME,PadV2:()=>kE,Pool:()=>UG,Pow:()=>MO,Prelu:()=>OE,Prod:()=>RE,RMSPropOptimizer:()=>Ds,RaggedGather:()=>PE,RaggedRange:()=>FE,RaggedTensorToTensor:()=>LE,Range:()=>$E,Rank:()=>LS,Real:()=>VE,RealDiv:()=>U0,Reciprocal:()=>jE,Reduction:()=>Et,Relu:()=>BE,Relu6:()=>GE,Reshape:()=>HE,ResizeBilinear:()=>zE,ResizeBilinearGrad:()=>GG,ResizeNearestNeighbor:()=>UE,ResizeNearestNeighborGrad:()=>zG,Reverse:()=>WE,RotateWithOffset:()=>DS,Round:()=>qE,Rsqrt:()=>KE,SGDOptimizer:()=>ei,ScatterNd:()=>YE,SearchSorted:()=>ZE,Select:()=>QE,Selu:()=>JE,Sigmoid:()=>rS,Sign:()=>nS,Sin:()=>kO,Sinh:()=>tS,Slice:()=>eS,Softmax:()=>lS,Softplus:()=>oS,SpaceToBatchND:()=>sS,SparseFillEmptyRows:()=>cS,SparseReshape:()=>uS,SparseSegmentMean:()=>dS,SparseSegmentSum:()=>fS,SparseToDense:()=>pS,SplitV:()=>aS,Sqrt:()=>iS,Square:()=>WG,SquaredDifference:()=>hS,StaticRegexReplace:()=>mS,Step:()=>CS,StridedSlice:()=>gS,StringNGrams:()=>yS,StringSplit:()=>vS,StringToHashBucketFast:()=>bS,Sub:()=>RO,Sum:()=>OO,Tan:()=>PO,Tanh:()=>wS,Tensor:()=>Ie,TensorBuffer:()=>Ti,TensorScatterUpdate:()=>XE,Tile:()=>Md,TopK:()=>_S,Transform:()=>ES,Transpose:()=>kd,Unique:()=>SS,Unpack:()=>xS,UnsortedSegmentSum:()=>TS,UpperBound:()=>qG,Variable:()=>Go,ZerosLike:()=>IS,_FusedMatMul:()=>Rm,abs:()=>Wt,acos:()=>JS,acosh:()=>ex,add:()=>Z,addN:()=>tx,all:()=>nx,any:()=>rx,argMax:()=>Gd,argMin:()=>ox,asin:()=>ix,asinh:()=>sx,atan:()=>ax,atan2:()=>lx,atanh:()=>cx,avgPool:()=>Kd,avgPool3d:()=>px,backend:()=>Bd,backend_util:()=>SI,basicLSTMCell:()=>hx,batchNorm:()=>Ni,batchNorm2d:()=>mx,batchNorm3d:()=>gx,batchNorm4d:()=>yx,batchToSpaceND:()=>Yd,bincount:()=>Xd,bitwiseAnd:()=>vx,booleanMaskAsync:()=>yP,broadcastArgs:()=>bx,broadcastTo:()=>Xa,broadcast_util:()=>Qa,browser:()=>To,buffer:()=>gn,cast:()=>le,ceil:()=>wx,clipByValue:()=>_x,clone:()=>Jn,complex:()=>$n,concat:()=>rt,concat1d:()=>Ex,concat2d:()=>Sx,concat3d:()=>xx,concat4d:()=>Tx,conv1d:()=>Ix,conv2d:()=>Ai,conv2dTranspose:()=>Cx,conv3d:()=>Dx,conv3dTranspose:()=>Nx,copyRegisteredKernels:()=>QG,cos:()=>Ax,cosh:()=>Mx,cosineWindow:()=>jc,cumprod:()=>kx,cumsum:()=>Ox,customGrad:()=>In,denseBincount:()=>Rx,deprecationWarn:()=>hR,depthToSpace:()=>Px,depthwiseConv2d:()=>Za,device_util:()=>Wm,diag:()=>Fx,dilation2d:()=>Lx,disableDeprecationWarnings:()=>xW,dispose:()=>_t,disposeVariables:()=>TW,div:()=>Ce,divNoNan:()=>$x,dot:()=>Vx,dropout:()=>xP,einsum:()=>Mi,elu:()=>Zd,enableDebugMode:()=>SW,enableProdMode:()=>EW,enclosingPowerOfTwo:()=>dg,engine:()=>Km,ensureShape:()=>jx,env:()=>J,equal:()=>ms,erf:()=>Bx,euclideanNorm:()=>Ux,exp:()=>Dr,expandDims:()=>nn,expm1:()=>zx,eye:()=>Qd,fft:()=>rl,fill:()=>wo,findBackend:()=>kW,findBackendFactory:()=>OW,floor:()=>Jd,floorDiv:()=>zd,fused:()=>fg,gather:()=>ef,gatherND:()=>EP,gather_util:()=>bI,getBackend:()=>jd,getGradient:()=>Lm,getKernel:()=>La,getKernelsForBackend:()=>Rd,grad:()=>qR,grads:()=>KR,greater:()=>Xo,greaterEqual:()=>tf,ifft:()=>_s,imag:()=>Ri,image:()=>Es,inTopKAsync:()=>TP,io:()=>Bc,irfft:()=>bf,isFinite:()=>Gx,isInf:()=>Wx,isNaN:()=>qx,keep:()=>jn,kernel_impls:()=>xI,leakyRelu:()=>nf,less:()=>Lc,lessEqual:()=>Ja,linalg:()=>b2,linspace:()=>Kx,localResponseNormalization:()=>Yx,log:()=>Zo,log1p:()=>rf,logSigmoid:()=>Xx,logSoftmax:()=>Zx,logSumExp:()=>sf,logicalAnd:()=>ys,logicalNot:()=>af,logicalOr:()=>lf,logicalXor:()=>Qx,losses:()=>w2,lowerBound:()=>Jx,matMul:()=>Ne,math:()=>vI,max:()=>_o,maxPool:()=>cf,maxPool3d:()=>eT,maxPoolWithArgmax:()=>tT,maximum:()=>uf,mean:()=>vs,memory:()=>IW,meshgrid:()=>nT,min:()=>Fc,minimum:()=>bs,mirrorPad:()=>df,mod:()=>rT,moments:()=>oT,movingAverage:()=>vP,mul:()=>V,multiRNNCell:()=>iT,multinomial:()=>sT,neg:()=>rn,nextFrame:()=>Y2,norm:()=>gs,notEqual:()=>ff,oneHot:()=>ws,ones:()=>So,onesLike:()=>aT,op:()=>b,outerProduct:()=>lT,pad:()=>Nr,pad1d:()=>cT,pad2d:()=>uT,pad3d:()=>pf,pad4d:()=>dT,pool:()=>fT,pow:()=>Yo,prelu:()=>mf,print:()=>Ud,prod:()=>pT,profile:()=>CW,raggedGather:()=>hT,raggedRange:()=>mT,raggedTensorToTensor:()=>gT,rand:()=>yT,randomGamma:()=>DT,randomNormal:()=>gf,randomStandardNormal:()=>NT,randomUniform:()=>nl,randomUniformInt:()=>AT,range:()=>Yr,ready:()=>AW,real:()=>Qo,reciprocal:()=>MT,registerBackend:()=>RW,registerGradient:()=>YG,registerKernel:()=>LO,relu:()=>Pi,relu6:()=>yf,removeBackend:()=>MW,reshape:()=>R,reverse:()=>hr,reverse1d:()=>kT,reverse2d:()=>OT,reverse3d:()=>RT,reverse4d:()=>PT,rfft:()=>ol,round:()=>vf,rsqrt:()=>FT,scalar:()=>ne,scatterND:()=>bP,scatter_util:()=>Sf,searchSorted:()=>$c,selu:()=>LT,separableConv2d:()=>$T,serialization:()=>uI,setBackend:()=>NW,setPlatform:()=>PW,setdiff1dAsync:()=>VT,sigmoid:()=>er,sign:()=>jT,signal:()=>v2,sin:()=>BT,sinh:()=>HT,slice:()=>De,slice1d:()=>UT,slice2d:()=>zT,slice3d:()=>GT,slice4d:()=>WT,slice_util:()=>Cf,softmax:()=>qT,softplus:()=>of,spaceToBatchND:()=>hf,sparse:()=>_2,sparseToDense:()=>_P,spectral:()=>y2,split:()=>Jo,sqrt:()=>Bn,square:()=>qt,squaredDifference:()=>wf,squeeze:()=>Hn,stack:()=>Cn,step:()=>_f,stridedSlice:()=>KT,string:()=>E2,sub:()=>re,sum:()=>Ge,sumOutType:()=>uR,tan:()=>YT,tanh:()=>Pc,tensor:()=>tn,tensor1d:()=>Kt,tensor2d:()=>xo,tensor3d:()=>Ef,tensor4d:()=>XT,tensor5d:()=>ZT,tensor6d:()=>QT,tensorScatterUpdate:()=>eI,tensor_util:()=>VS,test_util:()=>CT,tidy:()=>te,tile:()=>Oi,time:()=>DW,topk:()=>tI,train:()=>k9,transpose:()=>il,truncatedNormal:()=>nI,unique:()=>rI,unregisterGradient:()=>ZG,unregisterKernel:()=>XG,unsortedSegmentSum:()=>oI,unstack:()=>mr,upcastType:()=>Ua,upperBound:()=>iI,util:()=>j,valueAndGrad:()=>YR,valueAndGrads:()=>XR,variable:()=>sI,variableGrads:()=>rg,version_core:()=>K2,where:()=>pr,whereAsync:()=>xf,zeros:()=>Eo,zerosLike:()=>$t});var Cm=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},vc=class{refCount(e){return ur("refCount")}incRef(e){return ur("incRef")}timerAvailable(){return!0}time(e){return ur("time")}read(e){return ur("read")}readSync(e){return ur("readSync")}readToGPU(e,n){return ur("readToGPU")}numDataIds(){return ur("numDataIds")}disposeData(e,n){return ur("disposeData")}write(e,n,r){return ur("write")}move(e,n,r,o,i){return ur("move")}createTensorFromGPUData(e,n,r){return ur("createTensorFromGPUData")}memory(){return ur("memory")}floatPrecision(){return ur("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return ur("dispose")}};function ur(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function fO(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Dm(t,e,n)}function lG(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Dm(t,n,r),Dm(e,n,r)}function bc(t,e,n){return Math.max(t,Math.min(e,n))}function cG(t){return t%2===0?t:t+1}function Dm(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function uG(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function dG(t,e){let n=Math.random();return e*n+(1-n)*t}function fG(t,e){let n=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(e[r]);n+=o*o}return n}function S(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function it(t,e,n=""){S(Fn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Cr(t){S(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function xe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function pG(t){return t.length===0}function X_(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Fn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xi(t){return t%1===0}function hG(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let e=Math.exp(2*t);return(e-1)/(e+1)}}function mG(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function gG(t){let e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return fO(e),e}function Pa(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function yG(t,e=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let l=e(s);if(n!=null&&s>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function vG(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);let o=t.slice();return o[r]=e/n,o}function cs(t,e){let n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),S(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),S(t.every(r=>xi(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Z_(t,e){let n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:cs(e,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Q_(t,e){return Nm(t,e)}function Nm(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function J_(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function e0(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function bG(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function wc(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function t0(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function mo(t){return typeof t=="string"||t instanceof String}function pO(t){return typeof t=="boolean"}function hO(t){return typeof t=="number"}function us(t){return Array.isArray(t)?us(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":hO(t)?"float32":mo(t)?"string":pO(t)?"bool":"float32"}function Ho(t){return!!(t&&t.constructor&&t.call&&t.apply)}function _c(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Uo(t){let e=t.length;if(e<2)return[];let n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function mO(t,e,n,r=!1){let o=new Array;if(e.length===1){let i=e[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[t+s]}else{let i=e[0],s=e.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=mO(t+l*a,s,n,r)}return o}function Ra(t,e,n=!1){if(t.length===0)return e[0];let r=t.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return mO(0,t,e,n)}function wG(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Cd(t,e){let n=Ec(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Ec(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function _G(t,e){let n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return Ra(t,new Float32Array(n));if(e==="int32")return Ra(t,new Int32Array(n));if(e==="bool")return Ra(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ut(t){t.forEach(e=>{S(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function EG(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function SG(t,e,n){if(e===0)return[];if(e===1)return[t];let r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function Fa(t){return t&&t.then&&typeof t.then=="function"}var gO="tfjsflags",Sc=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=TG,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){let o=this.urlFlags[e];J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let n=this.evaluateFlag(e);if(Fa(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);gO in e&&e[gO].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=CG(o,i)})}};function TG(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(IG(e,r[0],r[1]),r.join("="))),e}function IG(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function CG(t,e){let n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function J(){return Am}var Am=null;function yO(t){Am=t}var n0;function r0(){if(n0==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");n0=t}return n0}function DG(){let t=r0();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Dd(t,e){let n=DG();if(n.has(t))return n.get(t);{let r=e();return n.set(t,r),n.get(t)}}var o0="Abs",i0="Acos",s0="Acosh",Mm="Add",a0="AddN",vO="All",bO="Any",l0="ArgMax",c0="ArgMin",u0="Asin",d0="Asinh",f0="Atan",p0="Atanh",h0="Atan2",m0="AvgPool",NG="AvgPoolGrad",g0="AvgPool3D",AG="AvgPool3DGrad",y0="BatchMatMul",v0="BatchToSpaceND",b0="Bincount",w0="BitwiseAnd",MG="BroadcastTo",_0="BroadcastArgs",Nd="Cast",E0="Ceil",S0="ClipByValue",x0="Complex",T0="ComplexAbs",I0="Concat",C0="Conv2D",D0="Conv2DBackpropFilter",N0="Conv2DBackpropInput",A0="Conv3D",kG="Conv3DBackpropFilterV2",M0="Conv3DBackpropInputV2",wO="Cos",k0="Cosh",O0="Cumprod",R0="Cumsum",P0="CropAndResize",F0="DenseBincount",L0="DepthToSpace",$0="DepthwiseConv2dNative",V0="DepthwiseConv2dNativeBackpropFilter",j0="DepthwiseConv2dNativeBackpropInput",B0="Diag",H0="Dilation2D",OG="Dilation2DBackpropInput",RG="Dilation2DBackpropFilter",km="Draw",U0="RealDiv",z0="Einsum",_O="Elu",PG="EluGrad",EO="Erf",G0="Equal",SO="Exp",W0="ExpandDims",q0="Expm1",xO="FFT",K0="Fill",Y0="FlipLeftRight",X0="Floor",Z0="FloorDiv",Q0="FusedBatchNorm",J0="GatherV2",eE="GatherNd",tE="Greater",nE="GreaterEqual",Ad="Identity",rE="IFFT",oE="Imag",iE="IsFinite",sE="IsInf",aE="IsNan",lE="LeakyRelu",cE="Less",uE="LessEqual",dE="LinSpace",TO="Log",fE="Log1p",pE="LogicalAnd",hE="LogicalNot",mE="LogicalOr",FG="LogicalXor",LG="LogSoftmax",$G="LowerBound",IO="LRN",VG="LRNGrad",jG="MatrixBandPart",CO="Max",gE="Maximum",yE="MaxPool",BG="MaxPoolGrad",vE="MaxPool3D",HG="MaxPool3DGrad",bE="MaxPoolWithArgmax",wE="Mean",DO="Min",_E="Minimum",EE="MirrorPad",NO="Mod",SE="Multinomial",xE="Multiply",AO="Neg",TE="NotEqual",IE="NonMaxSuppressionV3",CE="NonMaxSuppressionV4",DE="NonMaxSuppressionV5",NE="OnesLike",AE="OneHot",ME="Pack",kE="PadV2",UG="Pool",MO="Pow",OE="Prelu",RE="Prod",PE="RaggedGather",FE="RaggedRange",LE="RaggedTensorToTensor",$E="Range",VE="Real",jE="Reciprocal",BE="Relu",HE="Reshape",UE="ResizeNearestNeighbor",zG="ResizeNearestNeighborGrad",zE="ResizeBilinear",GG="ResizeBilinearGrad",GE="Relu6",WE="Reverse",qE="Round",KE="Rsqrt",YE="ScatterNd",XE="TensorScatterUpdate",ZE="SearchSorted",QE="Select",JE="Selu",eS="Slice",kO="Sin",tS="Sinh",nS="Sign",rS="Sigmoid",oS="Softplus",iS="Sqrt",OO="Sum",sS="SpaceToBatchND",aS="SplitV",lS="Softmax",cS="SparseFillEmptyRows",uS="SparseReshape",dS="SparseSegmentMean",fS="SparseSegmentSum",pS="SparseToDense",hS="SquaredDifference",WG="Square",mS="StaticRegexReplace",gS="StridedSlice",yS="StringNGrams",vS="StringSplit",bS="StringToHashBucketFast",RO="Sub",PO="Tan",wS="Tanh",Md="Tile",_S="TopK",ES="Transform",kd="Transpose",SS="Unique",xS="Unpack",TS="UnsortedSegmentSum",qG="UpperBound",IS="ZerosLike",CS="Step",Om="FromPixels",DS="RotateWithOffset",Rm="_FusedMatMul",Pm="FusedConv2D",Fm="FusedDepthwiseConv2D";function zo(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.warn(...t)}function KG(...t){J().getBool("IS_TEST")||J().getBool("PROD")||console.log(...t)}var xc=Dd("kernelRegistry",()=>new Map),Od=Dd("gradRegistry",()=>new Map);function La(t,e){let n=NS(t,e);return xc.get(n)}function Lm(t){return Od.get(t)}function Rd(t){let e=xc.entries(),n=[];for(;;){let{done:r,value:o}=e.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&n.push(s)}return n}function LO(t){let{kernelName:e,backendName:n}=t,r=NS(e,n);xc.has(r)&&zo(`The kernel '${e}' for backend '${n}' is already registered`),xc.set(r,t)}function YG(t){let{kernelName:e}=t;Od.has(e)&&J().getBool("DEBUG")&&zo(`Overriding the gradient for '${e}'`),Od.set(e,t)}function XG(t,e){let n=NS(t,e);if(!xc.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);xc.delete(n)}function ZG(t){if(!Od.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Od.delete(t)}function QG(t,e){Rd(t).forEach(r=>{let o=Object.assign({},r,{backendName:e});LO(o)})}function NS(t,e){return`${e}_${t}`}var j={};He(j,{arraysEqual:()=>Fn,arraysEqualWithNull:()=>X_,assert:()=>S,assertNonNegativeIntegerDimensions:()=>ut,assertNonNull:()=>Cr,assertShapesMatch:()=>it,bytesFromStringArray:()=>t0,bytesPerElement:()=>wc,checkConversionForErrors:()=>J_,clamp:()=>bc,computeStrides:()=>Uo,convertBackendValuesAndArrayBuffer:()=>wG,createScalarValue:()=>iW,createShuffledIndices:()=>gG,decodeString:()=>Dc,distSquared:()=>fG,encodeString:()=>fs,fetch:()=>aW,fingerPrint64:()=>oW,flatten:()=>yo,getArrayFromDType:()=>Nm,getTypedArrayFromDType:()=>Q_,hasEncodingLoss:()=>bG,hexToLong:()=>Pd,indexToLoc:()=>SG,inferDtype:()=>us,inferFromImplicitShape:()=>vG,isBoolean:()=>pO,isFunction:()=>Ho,isInt:()=>xi,isNumber:()=>hO,isPromise:()=>Fa,isScalarShape:()=>pG,isString:()=>mo,isTypedArray:()=>Dt,isValidDtype:()=>e0,locToIndex:()=>EG,makeOnesTypedArray:()=>Cd,makeZerosNestedTypedArray:()=>_G,makeZerosTypedArray:()=>Ec,nearestDivisor:()=>_c,nearestLargerEven:()=>cG,now:()=>Ha,parseAxisParam:()=>cs,randUniform:()=>dG,repeatedTry:()=>yG,rightPad:()=>Pa,shuffle:()=>fO,shuffleCombo:()=>lG,sizeFromShape:()=>xe,sizeToSquarishShape:()=>mG,squeezeShape:()=>Z_,sum:()=>uG,swap:()=>Dm,tanh:()=>hG,toNestedArray:()=>Ra,toTypedArray:()=>Cc});function $m(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var OS=Jy(KO());var Ba=OS.default||OS;function Pd(t){return Ba.fromString(t,!0,16)}var XO=Pd("c3a5c85c97cb3127"),ja=Pd("b492b66fbe98f273"),Ln=Pd("9ae16a3b2f90404f");function kS(t){return t.xor(t.shru(47))}function ZO(t,e,n){let r=t.slice(e,e+n);return Ba.fromBytes(Array.from(r),!0,!0)}function dt(t,e){return ZO(t,e,8)}function YO(t,e){return ZO(t,e,4)}function en(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function ds(t,e,n=Pd("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function eW(t,e,n,r,o,i){o=o.add(t),i=en(i.add(o).add(r),21);let s=o;return o=o.add(e),o=o.add(n),i=i.add(en(o,44)),[o.add(r),i.add(s)]}function jm(t,e,n,r){return eW(dt(t,e),dt(t,e+8),dt(t,e+16),dt(t,e+24),n,r)}function tW(t,e=t.length){if(e>=8){let n=Ln.add(e*2),r=dt(t,0).add(Ln),o=dt(t,e-8),i=en(o,37).mul(n).add(r),s=en(r,25).add(o).mul(n);return ds(i,s,n)}if(e>=4){let n=Ln.add(e*2),r=YO(t,0);return ds(r.shl(3).add(e),YO(t,e-4),n)}if(e>0){let n=t[0],r=t[e>>1],o=t[e-1],i=n+(r<<8),s=e+(o<<2);return kS(Ln.mul(i).xor(XO.mul(s))).mul(Ln)}return Ln}function nW(t,e=t.length){let n=Ln.add(e*2),r=dt(t,0).mul(ja),o=dt(t,8),i=dt(t,e-8).mul(n),s=dt(t,e-16).mul(Ln);return ds(en(r.add(o),43).add(en(i,30)).add(s),r.add(en(o.add(Ln),18)).add(i),n)}function rW(t,e=t.length){let n=Ln.add(e*2),r=dt(t,0).mul(Ln),o=dt(t,8),i=dt(t,e-8).mul(n),s=dt(t,e-16).mul(Ln),a=en(r.add(o),43).add(en(i,30)).add(s),l=ds(a,r.add(en(o.add(Ln),18)).add(i),n),c=dt(t,16).mul(n),u=dt(t,24),f=a.add(dt(t,e-32)).mul(n),p=l.add(dt(t,e-24)).mul(n);return ds(en(c.add(u),43).add(en(f,30)).add(p),c.add(en(u.add(r),18)).add(f),n)}function oW(t,e=t.length){let n=Ba.fromNumber(81,!0);if(e<=32)return e<=16?tW(t,e):nW(t,e);if(e<=64)return rW(t,e);let r=n,o=n.mul(ja).add(113),i=kS(o.mul(Ln).add(113)).mul(Ln),s=[Ba.UZERO,Ba.UZERO],a=[Ba.UZERO,Ba.UZERO];r=r.mul(Ln).add(dt(t,0));let l=0,c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=en(r.add(o).add(s[0]).add(dt(t,l+8)),37).mul(ja),o=en(o.add(s[1]).add(dt(t,l+48)),42).mul(ja),r=r.xor(a[1]),o=o.add(s[0]).add(dt(t,l+40)),i=en(i.add(a[0]),33).mul(ja),s=jm(t,l,s[1].mul(ja),r.add(a[0])),a=jm(t,l+32,i.add(a[1]),o.add(dt(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let f=ja.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=en(r.add(o).add(s[0]).add(dt(t,l+8)),37).mul(f),o=en(o.add(s[1]).add(dt(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(dt(t,l+40))),i=en(i.add(a[0]),33).mul(f),s=jm(t,l,s[1].mul(f),r.add(a[0])),a=jm(t,l+32,i.add(a[1]),o.add(dt(t,l+16))),[i,r]=[r,i],ds(ds(s[0],a[0],f).add(kS(o).mul(XO)).add(i),ds(s[1],a[1],f).add(r),f)}function iW(t,e){return e==="string"?fs(t):Cc([t],e)}function sW(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Cc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=yo(t)),J().getBool("DEBUG")&&J_(t,e),sW(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){let n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ha(){return J().platform.now()}function aW(t,e){return J().platform.fetch(t,e)}function fs(t,e="utf-8"){return e=e||"utf-8",J().platform.encode(t,e)}function Dc(t,e="utf-8"){return e=e||"utf-8",J().platform.decode(t,e)}function Dt(t){return J().platform.isTypedArray!=null?J().platform.isTypedArray(t):$m(t)}function yo(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Fa(t)||t==null||Dt(t)&&n)e.push(t);else if(Array.isArray(t)||Dt(t))for(let r=0;r<t.length;++r)yo(t[r],e,n);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)yo(t[o],e,n)}return e}var Bm=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new RS)}profileKernel(e,n,r){let o,i=()=>{o=r()},s,a=Ha();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:Ha()-a})}if(J().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(f=>{lW(f,u.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=e;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}};function lW(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var RS=class{logKernelProfile(e,n,r,o,i,s){let a=typeof o=="number"?Pa(`${o}ms`,9):o.error,l=Pa(e,25),c=n.rank,u=n.size,f=Pa(n.shape.toString(),14),p="";for(let m in i){let w=i[m];if(w!=null){let x=w.shape||n.shape,T=x.length;p+=`${m}: ${T}D ${T>0?x:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${f}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function QO(t,e,n){let r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let f in u){let p=u[f],m=!1;for(let w=0;w<e.length;w++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let f=0;f<c.outputs.length;f++)if(i[c.outputs[f].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let m=c.inputs[p];r[m.id]&&(u[p]=m)}let f=Object.assign({},c);f.inputs=u,f.outputs=c.outputs,a.push(f)}}return a}function JO(t,e,n,r){for(let o=e.length-1;o>=0;o--){let i=e[o],s=[];if(i.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!Fn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let f=t[u.id];t[u.id]=r(f,c),f.dispose()}}}}var eR=20,Fd=3,PS=7;function tR(t,e,n,r){let o=Uo(e),i=cW(t,e,n,o),s=e.length,a=Hm(t,e,n,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function cW(t,e,n,r){let o=xe(e),i=r[r.length-1],s=new Array(i).fill(0),a=e.length,l=n==="complex64"?$d(t):t;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],Ld(l[u+f],0,n).length)}return s}function Ld(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(PS))} + ${parseFloat(t[1].toFixed(PS))}j`:mo(t)?r=`'${t}'`:n==="bool"?r=nR(t):r=parseFloat(t.toFixed(PS)).toString(),Pa(r,e)}function nR(t){return t===0?"false":"true"}function Hm(t,e,n,r,o,i=!0){let s=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){let x=$d(t);return[Ld(x[0],0,n)]}return n==="bool"?[nR(t[0])]:[t[0].toString()]}if(l===1){if(a>eR){let T=Fd*s,D=Array.from(t.slice(0,T)),P=Array.from(t.slice((a-Fd)*s,a*s));return n==="complex64"&&(D=$d(D),P=$d(P)),["["+D.map((A,M)=>Ld(A,o[M],n)).join(", ")+", ..., "+P.map((A,M)=>Ld(A,o[a-Fd+M],n)).join(", ")+"]"]}return["["+(n==="complex64"?$d(t):Array.from(t)).map((T,D)=>Ld(T,o[D],n)).join(", ")+"]"]}let c=e.slice(1),u=r.slice(1),f=r[0]*s,p=[];if(a>eR){for(let x=0;x<Fd;x++){let T=x*f,D=T+f;p.push(...Hm(t.slice(T,D),c,n,u,o,!1))}p.push("...");for(let x=a-Fd;x<a;x++){let T=x*f,D=T+f;p.push(...Hm(t.slice(T,D),c,n,u,o,x===a-1))}}else for(let x=0;x<a;x++){let T=x*f,D=T+f;p.push(...Hm(t.slice(T,D),c,n,u,o,x===a-1))}let m=l===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+m;let w=`,
`;for(let x=2;x<l;x++)w+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":w),p}function $d(t){let e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Ti=class{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=xe(e),r!=null){let o=r.length;S(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Nm(n,this.size),this.strides=Uo(e)}set(e,...n){n.length===0&&(n=[0]),S(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(let o of e){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return vo().makeTensor(this.values,this.shape,this.dtype)}},vo=null,Nc=null,uW=null;function rR(t){vo=t}function oR(t){Nc=t}function iR(t){uW=t}var Ie=class{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=xe(e),this.strides=Uo(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Nc.buffer(this.shape,this.dtype,e)}bufferSync(){return Nc.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Ra(this.shape,e,this.dtype==="complex64")}arraySync(){return Ra(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=vo().read(this.dataId);if(this.dtype==="string"){let n=await e;try{return n.map(r=>Dc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),vo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=vo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Dc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await vo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),vo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Nc.print(this,e)}clone(){return this.throwIfDisposed(),Nc.clone(this)}toString(e=!1){let n=this.dataSync();return tR(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Nc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),vo().makeVariable(this,e,n,r)}};Object.defineProperty(Ie,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function FS(){return Dd("Tensor",()=>Ie)}FS();var Go=class extends Ie{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Fn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);vo().disposeTensor(this),this.dataId=e.dataId,vo().incRef(this,null)}dispose(){vo().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Go,Symbol.hasInstance,{value:t=>t instanceof Ie&&t.assign!=null&&t.assign instanceof Function});var VS={};He(VS,{assertTypesMatch:()=>$S,getTensorsInContainer:()=>Vd,isTensorInList:()=>fW,makeTypesMatch:()=>be});var LS=(function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t})(LS||{}),sR=(function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t})(sR||{}),aR=(function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t})(aR||{}),lR=(function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t})(lR||{}),cR=(function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t})(cR||{}),dW={float32:lR,int32:sR,bool:aR,complex64:cR};function Ua(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return dW[t][e]}function uR(t){return Ua(t,"int32")}function Um(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function zm(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function be(t,e){if(t.dtype===e.dtype)return[t,e];let n=Ua(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function $S(t,e){S(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function fW(t,e){return e.some(n=>n.id===t.id)}function Vd(t){let e=[];return dR(t,e,new Set),e}function dR(t,e,n){if(t==null)return;if(t instanceof Ie){e.push(t);return}if(!pW(t))return;let r=t;for(let o in r){let i=r[o];n.has(i)||(n.add(i),dR(i,e,n))}}function pW(t){return Array.isArray(t)||typeof t=="object"}function jS(t){return t.kernelName!=null}var Gm=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},hW=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Gm}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(await this.initializeBackend(o).success){await this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(zo(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}async setBackend(n){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?await r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new Bm(this.backendInstance),!0}setupRegisteredKernels(){Rd(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){Rd(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof vc)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,zo(`Initialization of backend ${n} failed`),zo(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return zo(`Initialization of backend ${n} failed`),zo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let r=_.runKernel(Ad,{x:n}),o={x:n},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return _.runKernel(Nd,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(La(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=jS(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(jS(n)){let{kernelName:x,inputs:T,attrs:D}=n;this.backendName==null&&this.backend;let P=La(x,this.backendName);S(P!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),l=()=>{let A=this.backend.numDataIds();c=P.kernelFunc({inputs:T,attrs:D,backend:this.backend});let M=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,A,M);let $=M.map(L=>L.rank!=null?L:this.makeTensorFromTensorInfo(L));if(i){let L=this.getTensorsForGradient(x,T,$);o=this.saveTensorsForBackwardMode(L)}return $}}else{let{forwardFunc:x}=n,T=D=>{i&&(o=D.map(P=>this.keep(this.clone(P))))};l=()=>{let D=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,T));let P=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,D,P),P}}let{inputs:f,attrs:p}=n,m=jS(n)?null:n.backwardsFunc,w;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(w=this.profiler.profileKernel(u,f,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(w),r=w.outputs)}),i&&this.addTapeNode(u,f,r,m,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(x=>f[x]!=null?f[x].shape:null),outputShapes:r.map(x=>x.shape),kernelTimeMs:w.timeMs,extraInfo:w.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=Lm(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(S(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,f)=>a[f]);return l.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&mo(n[0])&&(s=n.map(c=>fs(c)));let a=i.write(s,r,o),l=new Ie(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=t0(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new Ie(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new Go(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*wc(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof Go||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*wc(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}async profile(n){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=Lm(n);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((f,p)=>{if(f==null){let m=o[p],w=Ec(m.size,m.dtype);return this.makeTensor(w,m.shape,m.dtype)}return f}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=Vd(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(S(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));S(s instanceof Ie,()=>"The result y returned by f() must be a tensor.");let a=QO(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??mW(s.shape),JO(l,a,u=>this.tidy(u),gW);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let f of u.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return S(Ho(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{S(r.every(l=>l instanceof Ie),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=n(...r,c),S(o.value instanceof Ie,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),S(Ho(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),f=Array.isArray(u)?u:[u];S(f.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),S(f.every(m=>m instanceof Ie),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return f.forEach((m,w)=>{p[w]=()=>m}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}async time(n){let r=Ha(),o=await this.backend.time(n);return o.wallMs=Ha()-r,o}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Gm;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function mW(t){let e=Cd(xe(t),"float32");return _.makeTensor(e,t,"float32")}function BS(){let t=r0();if(t._tfengine==null){let e=new Sc(t);t._tfengine=new hW(e)}return yO(t._tfengine.ENV),rR(()=>t._tfengine),t._tfengine}var _=BS();function gW(t,e){let n={a:t,b:e};return _.runKernel("Add",n)}var Wm={};He(Wm,{isBrowser:()=>US,isMobile:()=>bW,mockIsMobile:()=>vW});function yW(){return typeof navigator<"u"&&navigator!=null}var HS;function vW(t){HS=t}function bW(t){if(HS!==void 0)return HS;if(t||yW()){if(t||(t=navigator),t.product==="ReactNative")return!0;let e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function US(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Qn=J();Qn.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Qn.registerFlag("IS_BROWSER",()=>US());Qn.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Qn.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Qn.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Qn.registerFlag("PROD",()=>!1);Qn.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Qn.getBool("DEBUG"));Qn.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Qn.registerFlag("IS_TEST",()=>!1);Qn.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Qn.getBool("DEBUG"));Qn.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Qn.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Qn.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function hn(t,e){let n=t;if(Dt(t))return e==="string"?[]:[t.length];if(Um(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(zm(t))return[t.buffer.size/(e==null?4:wc(e))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(n)||Dt(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&J().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&pR(t,r,[]),r}function pR(t,e,n){if(n=n||[],!Array.isArray(t)&&!Dt(t)){S(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}S(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),S(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);let r=e.slice(1);for(let o=0;o<t.length;++o)pR(t[o],r,n.concat(o))}function fR(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function y(t,e,n,r="numeric"){if(t instanceof FS())return fR(r,t.dtype,e,n),t;let o=us(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),fR(r,o,e,n),t==null||!Dt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}let i=hn(t,o);!Dt(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?Cc(t,o):yo(t,[],!0);return _.makeTensor(a,i,o)}function Ii(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>y(i,`${e}[${s}]`,n,r))}var qm="__op";function b(t){let e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+qm;let o=(...i)=>{_.startScope(n);try{let s=r(...i);return Fa(s)&&console.error("Cannot return a Promise inside of tidy."),_.endScope(s),s}catch(s){throw _.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function wW(t,e){let n=y(t,"real","complex"),r=y(e,"imag","complex");it(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return _.runKernel(x0,o)}var $n=b({complex_:wW});function Vn(t,e,n,r){if(r==null)r=us(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(zm(t)||Um(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return _.backend.createTensorFromGPUData(t,e||n,r)}if(!Dt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ut(e);let o=xe(e),i=xe(n);S(o===i,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1?a!==xe(e.slice(s)):!0;S(n[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Dt(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Cc(t,r):yo(t,[],!0),_.makeTensor(t,e,r)}function tn(t,e,n){let r=hn(t,n);return Vn(t,e,r,n)}var Ci={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var mn=class t{static join(e){return new t(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Dt(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){let o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);let r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);let o=n-e,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],f=e+a-c.start,p=a,w=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,f,w-f);if(s.set(x,p),a+=x.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=_W(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function _W(t,e){let n=0,r=t.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=e(t[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}function EW(){J().set("PROD",!0)}function SW(){J().set("DEBUG",!0)}function xW(){J().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function hR(t){J().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}iR(hR);function TW(){_.disposeVariables()}function Km(){return _}function IW(){return _.memory()}function CW(t){return _.profile(t)}function te(t,e){return _.tidy(t,e)}function _t(t){Vd(t).forEach(n=>n.dispose())}function jn(t){return _.keep(t)}function DW(t){return _.time(t)}function NW(t){return _.setBackend(t)}function AW(){return _.ready()}function jd(){return _.backendName}function MW(t){_.removeBackend(t)}function kW(t){return _.findBackend(t)}function OW(t){return _.findBackendFactory(t)}function RW(t,e,n=1){return _.registerBackend(t,e,n)}function Bd(){return _.backend}function PW(t,e){J().setPlatform(t,e)}var ps=4;async function yR(t,e){let n=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(async f=>{let p=await l.bytes(),m=p.reduce((T,D)=>T+D.length,0)+ps*p.length,w=new Uint8Array(m),x=0;for(let T=0;T<p.length;T++){let D=p[T],P=new Uint8Array(new Uint32Array([D.length]).buffer);w.set(P,x),x+=ps,w.set(D,x),x+=D.length}f(w)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}let i=await Promise.all(r);return{data:$W(i),specs:n}}function Ym(t,e){let n=new mn(t),r={},o=0;for(let i of e){let s=FW(i,(a,l)=>n.slice(o+a,o+l));r[i.name]=vR(i,n.slice(o,o+s)),o+=s}return r}function FW(t,e){let n=xe(t.shape),r;if("quantization"in t){let o=t.quantization;r=Ci[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=ps+new Uint32Array(e(o,o+ps))[0];return o}else r=Ci[t.dtype];return n*r}async function LW(t,e){let n=xe(t.shape),r;if("quantization"in t){let o=t.quantization;r=Ci[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=ps+new Uint32Array(await e(o,o+ps))[0];return o}else r=Ci[t.dtype];return n*r}function vR(t,e){let n=t.name,r=t.dtype,o=t.shape,i=xe(o),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Ci[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=p*l.scale+l.min}}else if(l.dtype==="float16")s=HW()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let l=xe(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(e.slice(a,a+ps))[0];a+=ps;let f=new Uint8Array(e.slice(a,a+u));s.push(f),a+=u}}else{let l=Ci[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let w=0;w<c.length;w++)c[w]=s[w*2],u[w]=s[w*2+1];let f=tn(c,o,"float32"),p=tn(u,o,"float32"),m=$n(f,p);return f.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return tn(s,o,r)}async function mR(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){let{done:o,value:i}=await t.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer}async function Xm(t,e){let n={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of e){let s=await LW(i,async(c,u)=>(o=await mR(r,o,u),o.slice(c,u)));o=await mR(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=vR(i,a);if(n[i.name]=l,jd()==="webgpu"){let c=Bd();"uploadToGPU"in c&&xe(l.shape)>=J().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function $W(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0,n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(e),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var zS=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function gR(t){return zS?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function bR(t){if(zS)return Buffer.from(t).toString("base64");let e=new Uint8Array(t),n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function wR(t){if(zS){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function _R(t){return mn.join(t)}function GS(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);let n=t.split("/");return n[n.length-1]}function Zm(t,e){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function WS(t,e,n){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Ac(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),WS(t,n,r)}function Wo(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:gR(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:gR(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new mn(t.weightData).byteLength}}function Hd(t){let e=[];for(let n of t)e.push(...n.weights);return e}function VW(){let t=n=>{let r=n<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function jW(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function BW(){let t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function HW(){let t=VW(),e=jW(),n=BW();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[s]=l}return new Float32Array(o)}}var Gt=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(e){t.getInstance().saveRouters.push(e)}static registerLoadRouter(e){t.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return t.getHandlers(e,"save")}static getLoadHandlers(e,n){return t.getHandlers(e,"load",n)}static getHandlers(e,n,r){let o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(e,r);a!==null&&o.push(a)}),o}},ER=t=>Gt.registerSaveRouter(t),SR=t=>Gt.registerLoadRouter(t),xR=t=>Gt.getSaveHandlers(t),TR=(t,e)=>Gt.getLoadHandlers(t,e);var qS="tensorflowjs",KS=1,za="models_store",hs="model_info_store";function IR(){if(!J().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function YS(t){let e=t.result;e.createObjectStore(za,{keyPath:"modelPath"}),e.createObjectStore(hs,{keyPath:"modelPath"})}var Ga=(()=>{class t{constructor(n){if(this.indexedDB=IR(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)}async load(){return this.databaseAction(this.modelPath)}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(qS,KS);s.onupgradeneeded=()=>YS(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(za,"readonly"),u=l.objectStore(za).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=f=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=mn.join(r.weightData);let l=Wo(r),c=a.transaction(hs,"readwrite"),u=c.objectStore(hs),f;try{f=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(m){return i(m)}let p;f.onsuccess=()=>{p=a.transaction(za,"readwrite");let m=p.objectStore(za),w;try{w=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(x){return i(x)}w.onsuccess=()=>o({modelArtifactsInfo:l}),w.onerror=x=>{u=c.objectStore(hs);let T=u.delete(this.modelPath);T.onsuccess=()=>(a.close(),i(w.error)),T.onerror=D=>(a.close(),i(w.error))}},f.onerror=m=>(a.close(),i(f.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var CR=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ga.URL_SCHEME)?UW(t.slice(Ga.URL_SCHEME.length)):null;Gt.registerSaveRouter(CR);Gt.registerLoadRouter(CR);function UW(t){return new Ga(t)}function zW(t){return t.startsWith(Ga.URL_SCHEME)?t.slice(Ga.URL_SCHEME.length):t}var Qm=class{constructor(){this.indexedDB=IR()}async listModels(){return new Promise((e,n)=>{let r=this.indexedDB.open(qS,KS);r.onupgradeneeded=()=>YS(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(hs,"readonly"),a=i.objectStore(hs).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=zW(e),new Promise((n,r)=>{let o=this.indexedDB.open(qS,KS);o.onupgradeneeded=()=>YS(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(hs,"readwrite"),a=s.objectStore(hs),l=a.get(e),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let u=a.delete(e),f=()=>{c=i.transaction(za,"readwrite");let m=c.objectStore(za).delete(e);m.onsuccess=()=>n(l.result.modelArtifactsInfo),m.onerror=w=>r(l.error)};u.onsuccess=f,u.onerror=p=>(f(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})}};var Di="/",Mc="tensorflowjs_models",DR="info",GW="model_topology",WW="weight_specs",qW="weight_data",KW="model_metadata";function NR(t){return{info:[Mc,t,DR].join(Di),topology:[Mc,t,GW].join(Di),weightSpecs:[Mc,t,WW].join(Di),weightData:[Mc,t,qW].join(Di),modelMetadata:[Mc,t,KW].join(Di)}}function AR(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}function YW(t){let e=t.split(Di);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Di)}function XW(t){return t.startsWith(Wa.URL_SCHEME)?t.slice(Wa.URL_SCHEME.length):t}var Wa=(()=>{class t{constructor(n){if(!J().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=NR(this.modelPath)}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=Wo(n),s=mn.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,bR(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw AR(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=wR(a),r}}return t.URL_SCHEME="localstorage://",t})();var MR=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wa.URL_SCHEME)?ZW(t.slice(Wa.URL_SCHEME.length)):null;Gt.registerSaveRouter(MR);Gt.registerLoadRouter(MR);function ZW(t){return new Wa(t)}var Jm=class{constructor(){S(J().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),S(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},n=Mc+Di,r=Di+DR;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=YW(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=XW(e);let n=NR(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return AR(n),r}};var kc="://",bo=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(e,n){S(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(kc)&&(e=e.slice(0,e.indexOf(kc))),S(e.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();S(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){let n=t.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}};function eg(t){if(t.indexOf(kc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${bo.getSchemes().join(",")}`);return{scheme:t.split(kc)[0],path:t.split(kc)[1]}}async function kR(t,e,n=!1){S(t!==e,()=>`Old path and new path are the same: '${t}'`);let r=Gt.getLoadHandlers(t);S(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),S(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=Gt.getSaveHandlers(e);S(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),S(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);let s=i[0],a=eg(t).scheme,l=eg(t).path,c=a===eg(t).scheme,u=await o.load();n&&c&&await bo.getManager(a).removeModel(l);let f=await s.save(u);return n&&!c&&await bo.getManager(a).removeModel(l),f.modelArtifactsInfo}async function OR(){let t=bo.getSchemes(),e={};for(let n of t){let r=await bo.getManager(n).listModels();for(let o in r){let i=n+kc+o;e[i]=r[o]}}return e}async function RR(t){let e=eg(t);return bo.getManager(e.scheme).removeModel(e.path)}async function PR(t,e){return kR(t,e,!1)}async function FR(t,e){return kR(t,e,!0)}var XS=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!J().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return $m(e)}};if(J().get("IS_BROWSER")){J().setPlatform("browser",new XS);try{bo.registerManager(Wa.URL_SCHEME,new Jm)}catch{}try{bo.registerManager(Ga.URL_SCHEME,new Qm)}catch{}}var JW={importFetch:()=>$R()},ZS;var QS=class{constructor(){this.util=VR(),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return J().global.fetch!=null?J().global.fetch(e,n):(ZS==null&&(ZS=JW.importFetch()),ZS(e,n))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};J().get("IS_NODE")&&!J().get("IS_BROWSER")&&J().setPlatform("node",new QS);function gn(t,e="float32",n){return e=e||"float32",ut(t),new Ti(t,e,n)}function e5(t,e){let n=y(t,"x","cast");if(!e0(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:e};return _.runKernel(Nd,r,o)}var le=b({cast_:e5});function t5(t){let n={x:y(t,"x","clone","string_or_numeric")};return _.runKernel(Ad,n)}var Jn=b({clone_:t5});function Ud(t,e=!1){console.log(t.toString(e))}BS();var n5={buffer:gn,cast:le,clone:Jn,print:Ud};oR(n5);function r5(t,e){let n=y(t,"a","add"),r=y(e,"b","add");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel("Add",o)}var Z=b({add_:r5});function o5(t,e){let n=y(t,"a","floorDiv"),r=y(e,"b","floorDiv");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel(Z0,o)}var zd=b({floorDiv_:o5});function i5(t,e){let n=y(t,"a","div"),r=y(e,"b","div");if([n,r]=be(n,r),n.dtype==="int32"&&r.dtype==="int32")return zd(n,r);let o={a:n,b:r},i={};return _.runKernel(U0,o,i)}var Ce=b({div_:i5});function s5(t,e){let n=y(t,"a","mul"),r=y(e,"b","mul");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel(xE,o)}var V=b({mul_:s5});function a5(t){let e=y(t,"x","abs");if(e.dtype==="complex64"){let n={x:e};return _.runKernel(T0,n)}else{let n={x:e};return _.runKernel("Abs",n)}}var Wt=b({abs_:a5});function l5(t){let n={x:y(t,"x","acos")};return _.runKernel(i0,n)}var JS=b({acos_:l5});function c5(t){let n={x:y(t,"x","acosh")};return _.runKernel(s0,n)}var ex=b({acosh_:c5});function u5(t){S(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),S(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let e=t.map((o,i)=>y(o,`tensors${i}`,"addN")),n=e[0];e.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!Fn(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=e;return _.runKernel(a0,r)}var tx=b({addN_:u5});function d5(t,e=null,n=!1){let o={x:y(t,"x","all","bool")},i={axis:e,keepDims:n};return _.runKernel("All",o,i)}var nx=b({all_:d5});function f5(t,e=null,n=!1){let o={x:y(t,"x","any","bool")},i={axis:e,keepDims:n};return _.runKernel("Any",o,i)}var rx=b({any_:f5});function p5(t,e=0){let r={x:y(t,"x","argMax")},o={axis:e};return _.runKernel(l0,r,o)}var Gd=b({argMax_:p5});function h5(t,e=0){let r={x:y(t,"x","argMin")},o={axis:e};return _.runKernel(c0,r,o)}var ox=b({argMin_:h5});function m5(t){let n={x:y(t,"x","asin")};return _.runKernel(u0,n)}var ix=b({asin_:m5});function g5(t){let n={x:y(t,"x","asinh")};return _.runKernel(d0,n)}var sx=b({asinh_:g5});function y5(t){let n={x:y(t,"x","atan")};return _.runKernel(f0,n)}var ax=b({atan_:y5});function v5(t,e){let n=y(t,"a","atan2"),r=y(e,"b","atan2");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel(h0,o)}var lx=b({atan2_:v5});function b5(t){let n={x:y(t,"x","atanh")};return _.runKernel(p0,n)}var cx=b({atanh_:b5});function w5(t,e,n,r,o="NHWC",i){let s=t[3],a=[...e,s],l=BR(o);return Ya(t,a,n,i,r,null,null,l)}function dx(t,e,n,r,o,i,s="channelsLast"){let[a,l]=Wd(e),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Ya(t,c,n,r,o,i,!1,s)}function _5(t,e,n,r,o,i,s="NDHWC"){let[a,l,c]=ux(e),u,f;if(s==="NDHWC")f="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")f="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return jR(t,u,n,r,o,!1,f,i)}function Ya(t,e,n,r,o,i,s=!1,a="channelsLast"){let[l,c,u,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,f]=t;else if(a==="channelsFirst")[l,f,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,m,,w]=e,[x,T]=Wd(n),[D,P]=Wd(r),A=Rc(p,D),M=Rc(m,P),{padInfo:$,outHeight:L,outWidth:H}=x5(o,c,u,x,T,A,M,i,a),G=s?w*f:w,W;return a==="channelsFirst"?W=[l,G,L,H]:a==="channelsLast"&&(W=[l,L,H,G]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:f,outHeight:L,outWidth:H,outChannels:G,padInfo:$,strideHeight:x,strideWidth:T,filterHeight:p,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:M,dilationHeight:D,dilationWidth:P,inShape:t,outShape:W,filterShape:e}}function jR(t,e,n,r,o,i=!1,s="channelsLast",a){let[l,c,u,f,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,f,p]=t;else if(s==="channelsFirst")[l,p,c,u,f]=t;else throw new Error(`Unknown dataFormat ${s}`);let[m,w,x,,T]=e,[D,P,A]=ux(n),[M,$,L]=ux(r),H=Rc(m,M),G=Rc(w,$),W=Rc(x,L),{padInfo:K,outDepth:U,outHeight:ae,outWidth:se}=T5(o,c,u,f,D,P,A,H,G,W,a),Oe=i?T*p:T,Le;return s==="channelsFirst"?Le=[l,Oe,U,ae,se]:s==="channelsLast"&&(Le=[l,U,ae,se,Oe]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:f,inChannels:p,outDepth:U,outHeight:ae,outWidth:se,outChannels:Oe,padInfo:K,strideDepth:D,strideHeight:P,strideWidth:A,filterDepth:m,filterHeight:w,filterWidth:x,effectiveFilterDepth:H,effectiveFilterHeight:G,effectiveFilterWidth:W,dilationDepth:M,dilationHeight:$,dilationWidth:L,inShape:t,outShape:Le,filterShape:e}}function E5(t,e,n,r,o){r==null&&(r=fx(t,e,n));let i=t[0],s=t[1],a=qd((i-e+2*r)/n+1,o),l=qd((s-e+2*r)/n+1,o);return[a,l]}function S5(t,e,n,r,o,i){o==null&&(o=fx(t,e[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(s[a]=qd((t[a]-e[a]+2*o)/r[a]+1,i));return s}function fx(t,e,n,r=1){let o=Rc(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function Wd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function ux(t){return typeof t=="number"?[t,t,t]:t}function Rc(t,e){return e<=1?t:t+(t-1)*(e-1)}function x5(t,e,n,r,o,i,s,a,l){let c,u,f;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let m=E5([e,n],i,r,t,a);u=m[0],f=m[1]}else if(t==="same"){u=Math.ceil(e/r),f=Math.ceil(n/o);let p=Math.max(0,(u-1)*r+i-e),m=Math.max(0,(f-1)*o+s-n),w=Math.floor(p/2),x=p-w,T=Math.floor(m/2),D=m-T;c={top:w,bottom:x,left:T,right:D,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),f=Math.ceil((n-s+1)/o);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],m=l==="channelsLast"?t[1][1]:t[2][1],w=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:w,right:x,type:p===0&&m===0&&w===0&&x===0?"VALID":"EXPLICIT"},u=qd((e-i+p+m)/r+1,a),f=qd((n-s+w+x)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:f}}function T5(t,e,n,r,o,i,s,a,l,c,u){let f,p,m,w;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let T=S5([e,n,r,1],[a,l,c],1,[o,i,s],t,u);p=T[0],m=T[1],w=T[2]}else if(t==="same"){p=Math.ceil(e/o),m=Math.ceil(n/i),w=Math.ceil(r/s);let x=(p-1)*o+a-e,T=(m-1)*i+l-n,D=(w-1)*s+c-r,P=Math.floor(x/2),A=x-P,M=Math.floor(T/2),$=T-M,L=Math.floor(D/2),H=D-L;f={top:M,bottom:$,left:L,right:H,front:P,back:A,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:p,outHeight:m,outWidth:w}}function qd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ka(t){let[e,n,r]=Wd(t);return e===1&&n===1&&r===1}function Tn(t,e){return Ka(t)||Ka(e)}function qo(t){return Wd(t).every(e=>e>0)}function BR(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Rt(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")S(xi(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{S(xi(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function I5(t,e){let r={x:y(t,"x","reshape","string_or_numeric")},o={shape:e};return _.runKernel(HE,r,o)}var R=b({reshape_:I5});function C5(t,e,n,r,o){let i=y(t,"x","avgPool","float32"),s=1;S(Tn(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Rt("avgPool",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(m0,c,u);return f=le(f,i.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Kd=b({avgPool_:C5});function D5(t,e,n,r,o,i="NDHWC"){let s=y(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),S(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Rt("avgPool3d",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(g0,c,u);return f=le(f,a.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var px=b({avgPool3d_:D5});function N5(t,e=0){S(t.length>=1,()=>"Pass at least one tensor to concat");let n=Ii(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Jn(n[0]);let r=n,o={axis:e};return _.runKernel(I0,r,o)}var rt=b({concat_:N5});function A5(t,e,n=!1,r=!1){let o=y(t,"a","matMul"),i=y(e,"b","matMul");[o,i]=be(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return _.runKernel(y0,s,a)}var Ne=b({matMul_:A5});function M5(t){let n={x:y(t,"x","sigmoid","float32")};return _.runKernel(rS,n)}var er=b({sigmoid_:M5});function k5(t,e,n){let r=y(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:e,size:n};return _.runKernel(eS,o,i)}var De=b({slice_:k5});function O5(t){let n={x:y(t,"x","tanh","float32")};return _.runKernel(wS,n)}var Pc=b({tanh_:O5});function R5(t,e,n,r,o,i){let s=y(t,"forgetBias","basicLSTMCell"),a=y(e,"lstmKernel","basicLSTMCell"),l=y(n,"lstmBias","basicLSTMCell"),c=y(r,"data","basicLSTMCell"),u=y(o,"c","basicLSTMCell"),f=y(i,"h","basicLSTMCell"),p=rt([c,f],1),m=Ne(p,a),w=Z(m,l),x=w.shape[0],T=w.shape[1]/4,D=[x,T],P=De(w,[0,0],D),A=De(w,[0,T],D),M=De(w,[0,T*2],D),$=De(w,[0,T*3],D),L=Z(V(er(P),Pc(A)),V(u,er(Z(s,M)))),H=V(Pc(L),er($));return[L,H]}var hx=b({basicLSTMCell_:R5});function P5(t,e,n){let r=y(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);S(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),S(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),S(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);let i={x:r},s={blockShape:e,crops:n};return _.runKernel(v0,i,s)}var Yd=b({batchToSpaceND_:P5});function HR(t){let e;return t.rank===0||t.rank===1?e=R(t,[1,1,1,t.size]):t.rank===2?e=R(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function F5(t,e,n,r,o,i){i==null&&(i=.001);let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;r!=null&&(u=y(r,"offset","batchNorm")),S(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),S(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),S(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:HR(s),scale:c,offset:u,mean:a,variance:l},m={varianceEpsilon:i},w=_.runKernel(Q0,p,m);return R(w,s.shape)}var Ni=b({batchNorm_:F5});function L5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),S(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),S(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var mx=b({batchNorm2d_:L5});function $5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),S(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),S(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var gx=b({batchNorm3d_:$5});function V5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),S(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),S(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Ni(s,a,l,u,c,i)}var yx=b({batchNorm4d_:V5});function j5(t,e,n){let r=y(t,"x","bincount"),o=y(e,"weights","bincount");S(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return _.runKernel(b0,i,s)}var Xd=b({bincount_:j5});function B5(t,e){let n=y(t,"x","bitwiseAnd"),r=y(e,"y","bitwiseAnd");if(!Fn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return _.runKernel(w0,o)}var vx=b({bitwiseAnd_:B5});function H5(t,e){let n=y(t,"s0","broadcastArgs","int32"),r=y(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return _.runKernel(_0,o)}var bx=b({broadcastArgs_:H5});function U5(t,e){let n=y(t,"broadcastTo","x"),r=n.shape;if(ut(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){let c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=R(n,c)}let o=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Jn(n);let a={x:n},l={reps:i};return _.runKernel(Md,a,l)}var Xa=b({broadcastTo_:U5});function z5(t){let n={x:y(t,"x","ceil","float32")};return _.runKernel(E0,n)}var wx=b({ceil_:z5});function wo(t,e,n){ut(t),n=n||us(e);let r={shape:t,value:e,dtype:n};return _.runKernel(K0,{},r)}function G5(t,e,n){let r=y(t,"x","clipByValue");if(S(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return wo(r.shape,e,r.dtype);let o={x:r},i={clipValueMin:e,clipValueMax:n};return _.runKernel(S0,o,i)}var _x=b({clipByValue_:G5});function W5(t){return rt(t,0)}var Ex=b({concat1d_:W5});function q5(t,e){return rt(t,e)}var Sx=b({concat2d_:q5});function K5(t,e){return rt(t,e)}var xx=b({concat3d_:K5});function Y5(t,e){return rt(t,e)}var Tx=b({concat4d_:Y5});function X5(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","conv2d","float32"),l=y(e,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Rt("conv2d",r,s);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),S(Tn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(qo(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),S(qo(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel(C0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var Ai=b({conv2d_:X5});function Z5(t,e,n,r,o="NWC",i=1,s){let a=y(t,"x","conv1d"),l=y(e,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1]])),S(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),S(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Rt("conv1d",r,s),S(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),S(Tn(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),S(qo(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),S(qo(n),()=>"Error in conv1D: Stride should be larger than 0."),S(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let f=R(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=R(c,[c.shape[0],1,c.shape[1],c.shape[2]]),T=Ai(p,f,[1,n],r,"NHWC",[1,i],s);return u?R(T,[T.shape[2],T.shape[3]]):R(T,[T.shape[0],T.shape[2],T.shape[3]])}var Ix=b({conv1d_:Z5});function Q5(t,e,n,r,o,i="NHWC",s){S(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),S(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),S(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),S(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let u=i==="NHWC"?a[3]:a[1],f=i==="NHWC"?l.shape[3]:l.shape[1];S(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),S(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Rt("conv2dDerInput",o,s);let p={dy:l,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},w=_.runKernel(N0,p,m);return c?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var tg=b({conv2DBackpropInput_:Q5});function J5(t,e,n,r,o,i){let s=y(t,"x","conv2dTranspose"),a=y(e,"filter","conv2dTranspose");return tg(n,s,a,r,o,"NHWC",i)}var Cx=b({conv2dTranspose_:J5});function e6(t,e,n,r,o="NDHWC",i=[1,1,1]){let s=y(t,"x","conv3d"),a=y(e,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),S(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),S(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),S(Tn(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),S(qo(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),S(qo(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},f={strides:n,pad:r,dataFormat:o,dilations:i},p=_.runKernel(A0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Dx=b({conv3d_:e6});function t6(t,e,n,r,o){S(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,a=!1;e.rank===4&&(a=!0,s=R(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let l=i[4],c=s.shape[4];S(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),S(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),S(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),S(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),S(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let u={dy:s,filter:n},f={pad:o,strides:r,inputShape:i},p=_.runKernel(M0,u,f);return a?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var UR=b({conv3DBackpropInput_:t6});function n6(t,e,n,r,o){let i=y(t,"x","conv3dTranspose"),s=y(e,"filter","conv3dTranspose");return UR(n,i,s,r,o)}var Nx=b({conv3dTranspose_:n6});function r6(t){let n={x:y(t,"x","cos","float32")};return _.runKernel("Cos",n)}var Ax=b({cos_:r6});function o6(t){let n={x:y(t,"x","cosh","float32")};return _.runKernel(k0,n)}var Mx=b({cosh_:o6});function i6(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return _.runKernel(O0,i,s)}var kx=b({cumprod_:i6});function s6(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return _.runKernel(R0,i,s)}var Ox=b({cumsum_:s6});function a6(t,e,n,r=!1){let o=y(t,"x","denseBincount"),i=y(e,"weights","denseBincount");S(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),S(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return _.runKernel(F0,s,a)}var Rx=b({denseBincount_:a6});function l6(t,e,n="NHWC"){let r=y(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];S(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),S(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),S(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),S(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:e,dataFormat:n};return _.runKernel(L0,a,l)}var Px=b({depthToSpace_:l6});function c6(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","depthwiseConv2d","float32"),l=y(e,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Rt("depthwiseConv2d",r,s);let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel($0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var Za=b({depthwiseConv2d_:c6});function u6(t){let n={x:y(t,"x","diag")};return _.runKernel(B0,n)}var Fx=b({diag_:u6});function d6(t,e,n,r,o=[1,1],i="NHWC"){let s=y(t,"x","dilation2d"),a=y(e,"filter","dilation2d");S(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),S(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),S(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=R(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),S(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},f={strides:n,pad:r,dilations:o},p=_.runKernel(H0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var Lx=b({dilation2d_:d6});var Qa={};He(Qa,{assertAndGetBroadcastShape:()=>ze,getBroadcastDims:()=>zR,getReductionAxes:()=>ng});function zR(t,e){let n=t.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=t[i]||1;(e[e.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function ng(t,e){let n=[];for(let r=0;r<e.length;r++){let o=t[t.length-r-1],i=e.length-r-1,s=e[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function ze(t,e){let n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=e[e.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=i}return r}function f6(t,e){let n=y(t,"a","equal","string_or_numeric"),r=y(e,"b","equal","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(G0,o)}var ms=b({equal_:f6});function p6(t,e,n){let r=y(e,"a","where"),o=y(n,"b","where"),i=y(t,"condition","where","bool"),s=ze(ze(i.shape,r.shape),o.shape),a=Xa(i,s),l=Xa(r,s),c=Xa(o,s),u={condition:a,t:l,e:c};return _.runKernel(QE,u)}var pr=b({where_:p6});function h6(t){let n={x:y(t,"x","zerosLike")};return _.runKernel(IS,n)}var $t=b({zerosLike_:h6});function m6(t,e){let n=y(t,"a","div"),r=y(e,"b","div");[n,r]=be(n,r);let o=Ce(n,r),i=$t(o),s=ms(r,i);return pr(s,i,o)}var $x=b({divNoNan_:m6});function g6(t,e){let n=y(t,"t1","dot"),r=y(e,"t2","dot");S((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(S(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=R(n,[1,-1]),a=R(r,[-1,1]),l=Ne(s,a);return R(l,[])}else if(n.rank===1&&r.rank===2){let s=R(n,[1,-1]),a=R(r,[r.shape[0],r.shape[1]]),l=Ne(s,a);return R(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=R(r,[-1,1]),a=Ne(n,s);return R(a,[a.size])}else{let s=R(r,[r.shape[0],r.shape[1]]);return Ne(n,s)}}var Vx=b({dot_:g6});function y6(t,...e){let n=e.map((o,i)=>y(o,`tensors${i}`,"einsum")),r={equation:t};return _.runKernel(z0,n,r)}var Mi=b({einsum_:y6});function v6(t){let n={x:y(t,"x","elu","float32")};return _.runKernel("Elu",n)}var Zd=b({elu_:v6});function b6(t,e){let n=y(t,"x","ensureShape","string_or_numeric");if(!X_(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}var jx=b({ensureShape_:b6});function w6(t){let e=y(t,"x","erf");S(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=le(e,"float32"));let n={x:e};return _.runKernel("Erf",n)}var Bx=b({erf_:w6});function Hx(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function GR(t,e,n){let r=t.length+e.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[i++]):o.push(e[s++]);return o}function _6(t,e){let n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);let o=e.map(i=>t[i]);return[n,o]}function ki(t,e){let n=e.map(r=>1);return GR(t,n,e)}function E6(t,e,n){S(Hx(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function S6(t,e){if(Hx(t,e))return null;let n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function x6(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function T6(t,e){let n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function C6(t,e=null,n=!1){let o={x:y(t,"x","max")},i={reductionIndices:e,keepDims:n};return _.runKernel("Max",o,i)}var _o=b({max_:C6});function D6(t,e=null,n=!1){let o={x:y(t,"x","min")},i={axis:e,keepDims:n};return _.runKernel("Min",o,i)}var Fc=b({min_:D6});function N6(t,e){let n=y(t,"base","pow"),r=y(e,"exp","pow");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel("Pow",o)}var Yo=b({pow_:N6});function ne(t,e){if((Dt(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Dt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Vn(t,[],[],e)}function A6(t){let n={x:y(t,"x","sqrt","float32")};return _.runKernel(iS,n)}var Bn=b({sqrt_:A6});function M6(t){let e=y(t,"x","square"),n={};return _.runKernel("Square",{x:e},n)}var qt=b({square_:M6});function k6(t,e=null,n=!1){let r=y(t,"x","sum");r.dtype==="bool"&&(r=le(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return _.runKernel("Sum",o,i)}var Ge=b({sum_:k6});function O6(t,e="euclidean",n=null,r=!1){t=y(t,"x","norm");let o=WR(t,e,n),i=o.shape;if(r){let s=cs(n,t.shape);i=ki(o.shape,s)}return R(o,i)}function WR(t,e,n=null){if(t.rank===0)return Wt(t);if(t.rank!==1&&n===null)return WR(R(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ge(Wt(t),n);if(e===1/0)return _o(Wt(t),n);if(e===-1/0)return Fc(Wt(t),n);if(e==="euclidean"||e===2)return Bn(Ge(Yo(Wt(t),ne(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return _o(Ge(Wt(t),n[0]),n[1]-1);if(e===1/0)return _o(Ge(Wt(t),n[1]),n[0]);if(e===-1/0)return Fc(Ge(Wt(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Bn(Ge(qt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var gs=b({norm_:O6});function R6(t,e=null,n=!1){return gs(t,"euclidean",e,n)}var Ux=b({euclideanNorm_:R6});function P6(t){let n={x:y(t,"x","exp")};return _.runKernel("Exp",n)}var Dr=b({exp_:P6});function F6(t,e=0){let n=y(t,"x","expandDims","string_or_numeric");S(e<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:e};return _.runKernel(W0,r,o)}var nn=b({expandDims_:F6});function L6(t){let n={x:y(t,"x","expm1")};return _.runKernel(q0,n)}var zx=b({expm1_:L6});function $6(t,e){let n=y(t,"x","tile","string_or_numeric");S(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);let r={x:n},o={reps:e};return _.runKernel(Md,r,o)}var Oi=b({tile_:$6});function V6(t,e,n,r="float32"){e==null&&(e=t);let o=gn([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)o.set(1,a,a);let s=R(o.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return Oi(nn(s,0),[n[0],1,1]);if(n.length===2)return Oi(nn(nn(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Oi(nn(nn(nn(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var Qd=b({eye_:V6});function j6(t){let n={x:y(t,"x","floor","float32")};return _.runKernel(X0,n)}var Jd=b({floor_:j6});function B6(t,e,n=0,r=0){let o=y(t,"x","gather"),i=y(e,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return _.runKernel(J0,s,a)}var ef=b({gather_:B6});function H6(t,e){let n=y(t,"a","greater","string_or_numeric"),r=y(e,"b","greater","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(tE,o)}var Xo=b({greater_:H6});function U6(t,e){let n=y(t,"a","greaterEqual","string_or_numeric"),r=y(e,"b","greaterEqual","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(nE,o)}var tf=b({greaterEqual_:U6});function z6(t){let n={input:y(t,"input","imag")};return _.runKernel(oE,n)}var Ri=b({imag_:z6});function G6(t){let n={x:y(t,"x","isFinite")};return _.runKernel(iE,n)}var Gx=b({isFinite_:G6});function W6(t){let n={x:y(t,"x","isInf")};return _.runKernel(sE,n)}var Wx=b({isInf_:W6});function q6(t){let n={x:y(t,"x","isNaN")};return _.runKernel(aE,n)}var qx=b({isNaN_:q6});function K6(t,e=.2){let r={x:y(t,"x","leakyRelu")},o={alpha:e};return _.runKernel(lE,r,o)}var nf=b({leakyRelu_:K6});function Y6(t,e){let n=y(t,"a","less","string_or_numeric"),r=y(e,"b","less","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(cE,o)}var Lc=b({less_:Y6});function X6(t,e){let n=y(t,"a","lessEqual","string_or_numeric"),r=y(e,"b","lessEqual","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(uE,o)}var Ja=b({lessEqual_:X6});function Kx(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:e,num:n};return _.runKernel(dE,{},r)}function Z6(t,e=5,n=1,r=1,o=.5){let i=y(t,"x","localResponseNormalization");S(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),S(xi(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=R(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:e,bias:n,alpha:r,beta:o},u=_.runKernel("LRN",l,c);return a?R(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var Yx=b({localResponseNormalization_:Z6});function Q6(t){let n={x:y(t,"x","log","float32")};return _.runKernel("Log",n)}var Zo=b({log_:Q6});function J6(t){let n={x:y(t,"x","log1p")};return _.runKernel(fE,n)}var rf=b({log1p_:J6});function qR(t){return S(Ho(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{let r=y(e,"x","tf.grad","string_or_numeric"),o=n!=null?y(n,"dy","tf.grad"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>t(r),[r],o);return o!=null&&it(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),og(s),s[0]})}}function KR(t){return S(Ho(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{S(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Ii(e,"args","tf.grads","string_or_numeric"),o=n!=null?y(n,"dy","tf.grads"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>t(...r),r,o);return o!=null&&it(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),og(s),s})}}function YR(t){return S(Ho(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{S(e instanceof Ie,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=_.gradients(()=>t(e),[e],n);return og(r),{grad:r[0],value:o}}}function XR(t){return S(Ho(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{S(Array.isArray(e)&&e.every(o=>o instanceof Ie),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=_.gradients(()=>t(...e),e,n);return n!=null&&it(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),og(r.grads),r}}function rg(t,e){S(Ho(t),()=>"The f passed in variableGrads(f) must be a function"),S(e==null||Array.isArray(e)&&e.every(c=>c instanceof Go),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=e!=null;if(!n){e=[];for(let c in _.registeredVariables)e.push(_.registeredVariables[c])}let r=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),S(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=_.gradients(t,e,null,i);S(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),S(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function In(t){return _.customGrad(t)}function og(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function eq(t){let n={x:y(t,"x","neg")};return _.runKernel("Neg",n)}var rn=b({neg_:eq});function tq(t){let n={x:y(t,"x","softplus")};return _.runKernel(oS,n)}var of=b({softplus_:tq});function nq(t){let e=y(t,"x","logSigmoid");return In(r=>({value:rn(of(rn(r))),gradFunc:s=>V(s,er(rn(r)))}))(e)}var Xx=b({logSigmoid_:nq});function rq(t,e){let n=y(t,"a","sub"),r=y(e,"b","sub");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel("Sub",o)}var re=b({sub_:rq});function oq(t,e=-1){let n=y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return In((o,i)=>{let a=_o(o,e,!0),l=re(o,a),c=re(le(l,"float32"),Zo(Ge(Dr(l),e,!0)));return i([c]),{value:c,gradFunc:(f,p)=>{let[m]=p,w=!0,x=Dr(m);return re(f,V(Ge(f,e,w),x))}}})(n)}var Zx=b({logSoftmax_:oq});function iq(t,e=null,n=!1){let r=y(t,"x","logSumExp"),o=cs(e,r.shape),i=_o(r,o,!0),s=re(r,i),a=Dr(s),l=Ge(a,o),c=Zo(l),u=Z(R(i,c.shape),c);if(n){let f=ki(u.shape,o);return R(u,f)}return u}var sf=b({logSumExp_:iq});function sq(t,e){let n=y(t,"a","logicalAnd","bool"),r=y(e,"b","logicalAnd","bool");ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(pE,o)}var ys=b({logicalAnd_:sq});function aq(t){let n={x:y(t,"x","logicalNot","bool")};return _.runKernel(hE,n)}var af=b({logicalNot_:aq});function lq(t,e){let n=y(t,"a","logicalOr","bool"),r=y(e,"b","logicalOr","bool");ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(mE,o)}var lf=b({logicalOr_:lq});function cq(t,e){let n=y(t,"a","logicalXor","bool"),r=y(e,"b","logicalXor","bool");return ze(n.shape,r.shape),ys(lf(t,e),af(ys(t,e)))}var Qx=b({logicalXor_:cq});var ig=2147483648;function uq(t,e,n="left"){let r=y(t,"sortedSequence","searchSorted"),o=y(e,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=R(r,[-1,i]),l=R(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(xe(l.shape)>=ig)throw new Error(`values tensor size must less than ${ig}`);if(a.shape[1]>=ig)throw new Error(`trailing dim_size must less than ${ig} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:n};return _.runKernel(ZE,c,u)}var $c=b({searchSorted_:uq});function Jx(t,e){return $c(t,e,"left")}function dq(t,e,n,r,o){let i=y(t,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),S(Tn(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Rt("maxPool",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(yE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var cf=b({maxPool_:dq});function fq(t,e=[1,1,1],n,r,o,i="NDHWC"){let s=y(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Rt("maxPool3d",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(vE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var eT=b({maxPool3d_:fq});function pq(t,e,n,r,o=!1){let s={x:y(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},l=_.runKernel(bE,s,a);return{result:l[0],indexes:l[1]}}var tT=b({maxPoolWithArgmax_:pq});function hq(t,e){let n=y(t,"a","maximum"),r=y(e,"b","maximum");[n,r]=be(n,r),n.dtype==="bool"&&(n=le(n,"int32"),r=le(r,"int32")),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(gE,o)}var uf=b({maximum_:hq});function mq(t,e=null,n=!1){let o={x:y(t,"x","mean")},i={axis:e,keepDims:n};return _.runKernel(wE,o,i)}var vs=b({mean_:mq});function Eo(t,e="float32"){if(ut(t),e==="complex64"){let r=Eo(t,"float32"),o=Eo(t,"float32");return $n(r,o)}let n=Ec(xe(t),e);return _.makeTensor(n,t,e)}function So(t,e="float32"){if(ut(t),e==="complex64"){let r=So(t,"float32"),o=Eo(t,"float32");return $n(r,o)}let n=Cd(xe(t),e);return _.makeTensor(n,t,e)}function nT(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=y(t,"x","meshgrid",t instanceof Ie?t.dtype:"float32");if(e===void 0)return[r];let o=y(e,"y","meshgrid",e instanceof Ie?e.dtype:"float32"),i=xe(r.shape),s=xe(o.shape);return n==="xy"?(r=R(r,[1,-1]),o=R(o,[-1,1]),[Ne(So([s,1],r.dtype),r),Ne(o,So([1,i],o.dtype))]):(r=R(r,[-1,1]),o=R(o,[1,-1]),[Ne(r,So([1,s],r.dtype)),Ne(So([i,1],o.dtype),o)])}function gq(t,e){let n=y(t,"a","minimum"),r=y(e,"b","minimum");[n,r]=be(n,r),n.dtype==="bool"&&(n=le(n,"int32"),r=le(r,"int32")),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(_E,o)}var bs=b({minimum_:gq});function yq(t,e,n){S(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=y(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");S(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)S(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),S(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:e,mode:n},s={x:r};return _.runKernel(EE,s,i)}var df=b({mirrorPad_:yq});function vq(t,e){let n=y(t,"a","mod"),r=y(e,"b","mod");[n,r]=be(n,r);let o={a:n,b:r};return _.runKernel("Mod",o)}var rT=b({mod_:vq});function bq(t,e=null,n=!1){t=y(t,"x","moments");let r=cs(e,t.shape),o=vs(t,r,n),i=o.shape;n||(i=ki(o.shape,r));let s=qt(re(le(t,"float32"),R(o,i))),a=vs(s,r,n);return{mean:o,variance:a}}var oT=b({moments_:bq});function wq(t,e,n,r){let o=y(e,"data","multiRNNCell"),i=Ii(n,"c","multiRNNCell"),s=Ii(r,"h","multiRNNCell"),a=o,l=[];for(let f=0;f<t.length;f++){let p=t[f](a,i[f],s[f]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let f=0;f<l.length;f+=2)c.push(l[f]),u.push(l[f+1]);return[c,u]}var iT=b({multiRNNCell_:wq});function _q(t,e,n,r=!1){let o=y(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let l={logits:s===1?R(o,[1,-1]):o},c={numSamples:e,seed:n,normalized:r},u=_.runKernel(SE,l,c);return s===1?R(u,[u.size]):u}var sT=b({multinomial_:_q});function Eq(t,e){let n=y(t,"a","notEqual","string_or_numeric"),r=y(e,"b","notEqual","string_or_numeric");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(TE,o)}var ff=b({notEqual_:Eq});function Sq(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let s={indices:y(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return _.runKernel(AE,s,a)}var ws=b({oneHot_:Sq});function xq(t){let n={x:y(t,"x","onesLike")};return _.runKernel(NE,n)}var aT=b({onesLike_:xq});function Tq(t,e){let n=y(t,"v1","outerProduct"),r=y(e,"v2","outerProduct");S(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=R(n,[-1,1]),i=R(r,[1,-1]);return Ne(o,i)}var lT=b({outerProduct_:Tq});function Iq(t,e,n=0){let r=y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:e,constantValue:n},i={x:r};return _.runKernel(kE,i,o)}var Nr=b({pad_:Iq});function Cq(t,e,n=0){return S(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Nr(t,[e],n)}var cT=b({pad1d_:Cq});function Dq(t,e,n=0){return S(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nr(t,e,n)}var uT=b({pad2d_:Dq});function Nq(t,e,n=0){return S(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nr(t,e,n)}var pf=b({pad3d_:Nq});function Aq(t,e,n=0){return S(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Nr(t,e,n)}var dT=b({pad4d_:Aq});function Mq(t,e,n){let r=y(t,"x","spaceToBatchND");S(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),S(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),S(r.shape.reduce((s,a,l)=>l>0&&l<=e.length?s&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);let o={x:r},i={blockShape:e,paddings:n};return _.runKernel(sS,o,i)}var hf=b({spaceToBatchND_:Mq});function kq(t,e,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=y(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(Tn(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=dx(l.shape,e,i,o,r),f=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=Rq([u.filterHeight,u.filterWidth],f):p=[[0,0],[0,0]];let m=f[0]===1&&f[1]===1,[w,x]=Oq([u.inHeight,u.inWidth],f,p),T=m?r:"valid",D=m?l:hf(l,f,w),A=(n==="avg"?()=>Kd(D,e,i,T,s):()=>cf(D,e,i,T,s))(),M=m?A:Yd(A,f,x);return c?R(M,[M.shape[1],M.shape[2],M.shape[3]]):M}function Oq(t,e,n){let r=n.map(u=>u[0]),o=n.map(u=>u[1]),i=t.concat(r,o),s=e.map((u,f)=>(u-i[f]%u)%u),a=o.map((u,f)=>u+s[f]),l=e.map((u,f)=>[r[f],a[f]]),c=e.map((u,f)=>[0,s[f]]);return[l,c]}function Rq(t,e){let r=t.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var fT=b({pool_:kq});function Pq(t,e){let n=y(t,"x","prelu"),r=y(e,"alpha","prelu"),o={x:n,alpha:r};return _.runKernel(OE,o)}var mf=b({prelu_:Pq});function Fq(t,e=null,n=!1){let r=y(t,"x","prod");r.dtype==="bool"&&(r=le(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return _.runKernel(RE,o,i)}var pT=b({prod_:Fq});function Lq(t,e,n,r){let o=t.map((u,f)=>y(u,`tensors${f}`,"raggedGather","int32")),i=y(e,"paramsDenseValues","raggedGather"),s=y(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=_.runKernel(PE,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var hT=b({raggedGather_:Lq});function $q(t,e,n){let r=y(t,"starts","raggedRange"),o=y(e,"limits","raggedRange",r.dtype),i=y(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=_.runKernel(FE,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var mT=b({raggedRange_:$q});function Vq(t,e,n,r,o){let i=y(t,"shape","raggedTensorToTensor","int32"),s=y(e,"values","raggedTensorToTensor"),a=y(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((f,p)=>y(f,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return _.runKernel(LE,c,u)}var gT=b({raggedTensorToTensor_:Vq});function jq(t,e,n){ut(t);let r=xe(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=e();return _.makeTensor(o,t,n)}var yT=b({rand_:jq});var cg=Jy(pP());var CT={};He(CT,{TEST_EPSILON_FLOAT16:()=>hP,createVideoElement:()=>e8,encodeStrings:()=>mP,expectArrayBuffersEqual:()=>Jq,expectArraysClose:()=>Kq,expectArraysEqual:()=>Xq,expectNumbersClose:()=>Zq,expectPromiseToFail:()=>Yq,expectValuesInRange:()=>Qq,play:()=>t8,testEpsilon:()=>TT});var qq=.001,hP=.1;function Kq(t,e,n){return n==null&&(n=TT()),xT(t,e,(r,o)=>IT(r,o,n))}function TT(){return _.backend.floatPrecision()===32?qq:hP}function xT(t,e,n){let r=!0;if((Dt(t)||Dt(e))&&(r=!1),Dt(t)&&Dt(e)&&(r=!0),r){let s=t.constructor.name,a=e.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){let s=hn(t),a=hn(e);if(!Fn(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=Dt(t)?t:yo(t),i=Dt(e)?e:yo(e);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!n(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function Yq(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function Xq(t,e){let n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return mo(t)||mo(t[0])||mo(e)||mo(e[0])?xT(t,n,(r,o)=>r==o):xT(t,e,(r,o)=>IT(r,o,0))}function Zq(t,e,n){if(n==null&&(n=TT()),!IT(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function IT(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Qq(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Jq(t,e){let n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let o=0;o<r.length;o++)if(n[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${n[o]} instead`)}function mP(t){for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?mP(n):t[e]=fs(n)}return t}function e8(t){let e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function t8(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}var tl=class{constructor(e,n,r,o,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=cg.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},ag=class{constructor(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=cg.alea(i.toString()),this.randn=new tl(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,e=o*o,n=1-.331*e*e,r=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},lg=class{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=cg.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function n8(t,e,n=1,r="float32",o){if(ut(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new ag(e,n,r,o),s=gn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var DT=b({randomGamma_:n8});function r8(t,e=0,n=1,r,o){if(ut(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new tl(e,n,r,!1,o),s=gn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var gf=b({randomNormal_:r8});function o8(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return gf(t,0,1,e,n)}var NT=b({randomStandardNormal_:o8});function i8(t,e=0,n=1,r="float32",o){ut(t);let i=gn(t,r),s=new lg(e,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var nl=b({randomUniform_:i8});function s8(t,e,n,r){return nl(t,e,n,"int32",r)}var AT=b({randomUniformInt_:s8});function Yr(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:e,step:n,dtype:r};return _.runKernel($E,{},o)}function a8(t){let n={input:y(t,"input","real")};return _.runKernel(VE,n)}var Qo=b({real_:a8});function l8(t){let n={x:y(t,"x","reciprocal")};return _.runKernel(jE,n)}var MT=b({reciprocal_:l8});function c8(t){let n={x:y(t,"x","relu")};return _.runKernel(BE,n)}var Pi=b({relu_:c8});function u8(t){let n={x:y(t,"x","relu6")};return _.runKernel(GE,n)}var yf=b({relu6_:u8});function d8(t,e){let r={x:y(t,"x","reverse")},o={dims:e};return _.runKernel(WE,r,o)}var hr=b({reverse_:d8});function f8(t){let e=y(t,"x","reverse");return S(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),hr(e,0)}var kT=b({reverse1d_:f8});function p8(t,e){let n=y(t,"x","reverse");return S(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),hr(n,e)}var OT=b({reverse2d_:p8});function h8(t,e){let n=y(t,"x","reverse");return S(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),hr(n,e)}var RT=b({reverse3d_:h8});function m8(t,e){let n=y(t,"x","reverse");return S(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),hr(n,e)}var PT=b({reverse4d_:m8});function g8(t){let n={x:y(t,"x","round")};return _.runKernel(qE,n)}var vf=b({round_:g8});function y8(t){let n={x:y(t,"x","rsqrt","float32")};return _.runKernel(KE,n)}var FT=b({rsqrt_:y8});function v8(t){let n={x:y(t,"x","selu")};return _.runKernel(JE,n)}var LT=b({selu_:v8});function b8(t,e,n,r,o,i=[1,1],s="NHWC"){let a=y(t,"x","separableConv2d"),l=y(e,"depthwiseFilter","separableConv2d"),c=y(n,"pointwiseFilter","separableConv2d"),u=a,f=!1;if(a.rank===3&&(f=!0,u=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");S(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),S(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),S(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),S(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),S(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],m=l.shape[3];S(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let w=Za(u,l,r,o,s,i),T=Ai(w,c,1,"valid",s);return f?R(T,[T.shape[1],T.shape[2],T.shape[3]]):T}var $T=b({separableConv2d_:b8});async function w8(t,e){let n=y(t,"x","setdiff1d"),r=y(e,"y","setdiff1d");S(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),S(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),S(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=await n.data(),i=await r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new Ti([a],n.dtype),c=new Ti([a],"int32");for(let u=0,f=0;u<o.length;u++)s.has(o[u])||(l.values[f]=o[u],c.values[f]=u,f++);return[l.toTensor(),c.toTensor()]}var VT=w8;function _8(t){let n={x:y(t,"x","sign")};return _.runKernel(nS,n)}var jT=b({sign_:_8});function E8(t){let n={x:y(t,"x","sin","float32")};return _.runKernel("Sin",n)}var BT=b({sin_:E8});function S8(t){let n={x:y(t,"x","sinh")};return _.runKernel(tS,n)}var HT=b({sinh_:S8});function x8(t,e,n){let r=y(t,"x","slice1d");return S(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),De(r,[e],[n])}var UT=b({slice1d_:x8});function T8(t,e,n){let r=y(t,"x","slice2d");return S(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),De(r,e,n)}var zT=b({slice2d_:T8});function I8(t,e,n){let r=y(t,"x","slice3d");return S(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),De(r,e,n)}var GT=b({slice3d_:I8});function C8(t,e,n){let r=y(t,"x","slice4d");return S(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),De(r,e,n)}var WT=b({slice4d_:C8});function D8(t,e=-1){let n=y(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);let r={logits:n},o={dim:e};return _.runKernel(lS,r,o)}var qT=b({softmax_:D8});function N8(t){S(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let e={input:t};return _.runKernel("FFT",e)}var rl=b({fft_:N8});function A8(t){S(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let e={input:t};return _.runKernel(rE,e)}var _s=b({ifft_:A8});function M8(t){let e=t.shape[t.shape.length-1],n=t.size/e,r;if(e<=2){let o=R(t,[n,e]);r=_s(o)}else{let o=[n,2*(e-1)],i=R(Qo(t),[n,e]),s=R(Ri(t),[n,e]),a=hr(De(i,[0,1],[n,e-2]),1),l=V(hr(De(s,[0,1],[n,e-2]),1),ne(-1)),c=rt([i,a],1),u=rt([s,l],1),f=R($n(c,u),[o[0],o[1]]);r=_s(f)}if(r=Qo(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=R(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var bf=b({irfft_:M8});function k8(t,e,n=0){let o={x:y(t,"x","split")},i={numOrSizeSplits:e,axis:n};return _.runKernel(aS,o,i)}var Jo=b({split_:k8});function O8(t,e){S(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],r=t.size/n,o;if(e!=null&&e<n){let w=t.shape.map(T=>0),x=t.shape.map(T=>T);x[t.shape.length-1]=e,o=De(t,w,x),n=e}else if(e!=null&&e>n){let w=t.shape.map(x=>x);w[t.shape.length-1]=e-n,o=rt([t,Eo(w)],t.shape.length-1),n=e}else o=t;let i=$t(o),s=R($n(o,i),[r,n]),a=rl(s),l=Math.floor(n/2)+1,c=Qo(a),u=Ri(a),f=Jo(c,[l,n-l],c.shape.length-1),p=Jo(u,[l,n-l],u.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=l,R($n(f[0],p[0]),m)}var ol=b({rfft_:O8});function R8(t,e){let n=y(t,"a","squaredDifference"),r=y(e,"b","squaredDifference");[n,r]=be(n,r),ze(n.shape,r.shape);let o={a:n,b:r},i={};return _.runKernel(hS,o,i)}var wf=b({squaredDifference_:R8});function P8(t,e){let n=y(t,"x","squeeze","string_or_numeric");return R(n,Z_(n.shape,e).newShape)}var Hn=b({squeeze_:P8});function F8(t,e=0){let n=Ii(t,"tensors","stack","string_or_numeric");S(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&S(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:e};return _.runKernel(ME,r,o)}var Cn=b({stack_:F8});function L8(t,e=0){let r={x:y(t,"x","step")},o={alpha:e};return _.runKernel(CS,r,o)}var _f=b({step_:L8});function $8(t,e,n,r,o=0,i=0,s=0,a=0,l=0){let u={x:y(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return _.runKernel(gS,u,f)}var KT=b({stridedSlice_:$8});function V8(t){let n={x:y(t,"x","tan","float32")};return _.runKernel("Tan",n)}var YT=b({tan_:V8});function Kt(t,e){Cr(t);let n=hn(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Vn(t,null,n,e)}function xo(t,e,n){if(Cr(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=hn(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Vn(t,e,r,n)}function Ef(t,e,n){if(Cr(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=hn(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Vn(t,e,r,n)}function XT(t,e,n){if(Cr(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=hn(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Vn(t,e,r,n)}function ZT(t,e,n){if(Cr(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=hn(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Vn(t,e,r,n)}function QT(t,e,n){if(Cr(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=hn(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Vn(t,e,r,n)}var Sf={};He(Sf,{calculateShapes:()=>gP,validateInput:()=>Vc,validateUpdateShape:()=>JT});function JT(t,e,n){let r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function Vc(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}JT(n,e,t)}function gP(t,e,n){let r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length,s=1;for(let f=o;f<i;++f)s*=n[f];let a=o<1?1:o,l=xe(e.shape)/a,c=[...Uo(n.slice(0,o)),1],u=xe(n);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function j8(t,e,n){let r=y(t,"tensor","tensorScatterupdate"),o=y(e,"indices","tensorScatterupdate","int32"),i=y(n,"updates","tensorScatterupdate");if(Vc(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return _.runKernel(XE,s,a)}var eI=b({tensorScatterUpdate_:j8});function B8(t,e=1,n=!0){let r=y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);let i={x:r},s={k:e,sorted:n},[a,l]=_.runKernel(_S,i,s);return{values:a,indices:l}}var tI=b({topk_:B8});function H8(t,e=0,n=1,r,o){if(ut(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new tl(e,n,r,!0,o),s=gn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var nI=b({truncatedNormal_:H8});function U8(t,e=0){let n=y(t,"x","unique","string_or_numeric");S(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:e},[i,s]=_.runKernel(SS,r,o);return{values:i,indices:s}}var rI=b({unique_:U8});function z8(t,e,n){let r=y(t,"x","unsortedSegmentSum"),o=y(e,"segmentIds","unsortedSegmentSum","int32");S(xi(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return _.runKernel(TS,i,s)}var oI=b({unsortedSegmentSum_:z8});function G8(t,e=0){let n=y(t,"x","unstack","string_or_numeric");S(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:e};return _.runKernel(xS,r,o)}var mr=b({unstack_:G8});function iI(t,e){return $c(t,e,"right")}function sI(t,e=!0,n,r){return _.makeVariable(t,e,n,r)}function ug(t,e){let n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);let r=gn(t,"int32"),o=gn([n.length,t.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}async function W8(t){let e=y(t,"condition","whereAsync","bool"),n=await e.data(),r=ug(e.shape,n);return t!==e&&e.dispose(),r}var xf=W8;async function q8(t,e,n){let r=y(t,"tensor","boolMask"),o=y(e,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;S(s>0,()=>"mask cannot be scalar"),it(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let x=i;x<i+s;x++)l*=a[x];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=R(r,c),f=R(o,[-1]),p=await xf(f),m=Hn(p,[1]),w=ef(u,m,i);return t!==r&&r.dispose(),e!==o&&o.dispose(),m.dispose(),u.dispose(),f.dispose(),p.dispose(),w}var yP=q8;function K8(t,e,n){let r=y(t,"x","transpose");if(e==null&&(e=r.shape.map((s,a)=>a).reverse()),S(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{S(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:e};return r.dtype==="complex64"?te(()=>{let s=Qo(r),a=Ri(r);return s=_.runKernel(kd,{x:s},i),a=_.runKernel(kd,{x:a},i),n&&(a=rn(a)),$n(s,a)}):_.runKernel(kd,o,i)}var il=b({transpose_:K8});function Y8(t,e,n,r,o=!0){let i=y(t,"v","movingAverage"),s=y(e,"x","movingAverage"),a=y(n,"decay","movingAverage");$S(i,s),S(Fn(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=ne(1),c=re(l,a),u=V(re(s,i),c);if(o){S(r!=null,()=>"When using zeroDebias: true, step is required.");let f=y(r,"step","movingAverage");u=Ce(u,re(l,Yo(a,f)))}return Z(i,u)}var vP=b({movingAverage_:Y8});function X8(t,e,n){ut(n);let r=y(t,"indices","scatterND","int32"),o=y(e,"updates","scatterND");Vc(o,r,n);let i={indices:r,updates:o},s={shape:n};return _.runKernel(YE,i,s)}var bP=b({scatterND_:X8});function wP(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=e.size;if(!(e.rank===0||e.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function Q8(t,e,n,r=0){ut(n);let o=y(t,"sparseIndices","sparseToDense","int32"),i=y(e,"sparseValues","sparseToDense","string_or_numeric"),s=y(r,"defaultValue","sparseToDense",i.dtype);wP(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:n};return _.runKernel(pS,a,l)}var _P=b({sparseToDense_:Q8});function J8(t,e){let n=y(e,"indices","gatherND","int32"),o={params:y(t,"x","gatherND","string_or_numeric"),indices:n};return _.runKernel(eE,o)}var EP=b({gatherND_:J8});function SP(t,e){if(e==null)return t.shape.slice();if(Fn(t.shape,e))return e;if(t.shape.length===e.length){let n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}function e7(t,e,n,r){let o=y(t,"x","dropout");if(S(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),S(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Ie?o.clone():o;let i=SP(o,n),s=1-e,a=Ce(Jd(Z(nl(i,0,1,"float32",r),s)),s);return V(o,a)}var xP=b({dropout_:e7});function dg(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function jc(t,e,n){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=e-n*Math.cos(s)}return Kt(o,"float32")}async function t7(t,e,n=1){let r=y(t,"predictions","inTopK"),o=y(e,"targets","inTopK");S(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),S(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),it(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];S(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=await r.data(),a=await o.data(),[l,c]=[s.length/i,i],u=Q_("bool",l);for(let f=0;f<l;f++){let p=f*c,m=s.subarray(p,p+c),w=[];for(let x=0;x<m.length;x++)w.push({value:m[x],index:x});w.sort((x,T)=>T.value-x.value),u[f]=0;for(let x=0;x<n;x++)if(w[x].index===a[f]){u[f]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),tn(u,o.shape,"bool")}var TP=t7;var fg={};He(fg,{conv2d:()=>CP,depthwiseConv2d:()=>AP,matMul:()=>MP});function n7(t,e,n,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]])),S(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),S(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),S(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];S(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),S(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Rt("conv2dDerFilter",o,s);let f={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return _.runKernel(D0,f,p)}var IP=b({conv2DBackpropFilter_:n7});function sl(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return V(t,_f(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function al(t,e){let n=e,r=ng(t.shape,e.shape);return r.length>0&&(n=Ge(n,r)),R(n,t.shape)}function ll(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Pi(t);if(e==="elu")return Zd(t);if(e==="relu6")return yf(t);if(e==="prelu")return mf(t,n);if(e==="leakyrelu")return nf(t,r);if(e==="sigmoid")return er(t);throw new Error(`Unknown fused activation ${e}.`)}var cl=(t,e)=>!(t>0)||e==="linear";function r7({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",cl(_.state.gradientDepth,l)===!1){S(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let L=Ai(t,e,n,r,o,i,s);return a!=null&&(L=Z(L,a)),ll(L,l,c,u)}let f=y(t,"x","conv2d","float32"),p=y(e,"filter","conv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Rt("fused conv2d",r,s);let x=o==="NHWC"?m.shape[3]:m.shape[1];S(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),S(Tn(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let T=Ya(m.shape,p.shape,n,i,r,s),D;a!=null&&(D=y(a,"bias","fused conv2d"),[D]=be(D,f),o==="NHWC"?ze(T.outShape,D.shape):(S(D.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${D.shape.length}.`),S(D.shape.length===0||D.shape[0]===T.outChannels||D.shape[0]===1,()=>`Error in fused conv2d: bias shape (${D.shape}) is not compatible with the number of output channels (${T.outChannels})`)));let P;if(c!=null){let L=c.shape;if(S(L.length<=1||L.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${L.length}.`),L.length===1)S(L[0]===1||L[0]===T.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the number of output channels (${T.outChannels}).`);else if(L.length===3)try{ze(L,T.outShape)}catch{let G=`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the output shape of the conv2d (${T.outShape}).`;throw Error(G)}P=y(c,"prelu weights","fused conv2d")}let A=(L,H)=>{S(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[G,W,K,U]=H,ae=sl(L,K,l);S(Ka(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let se=tg(W.shape,ae,G,n,r),Oe=IP(W,ae,G.shape,n,r),Le=[se,Oe];if(U!=null){let yt=al(U,ae);Le.push(yt)}return Le},M={x:m,filter:p,bias:D,preluActivationWeights:P},$={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?In((H,G,W)=>{let K=_.runKernel(Pm,M,$);return W([G,H,K]),w&&(K=R(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:A}})(m,p):In((H,G,W,K)=>{let U=_.runKernel(Pm,M,$);return K([G,H,U,W]),w&&(U=R(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:A}})(m,p,D)}var CP=b({fusedConv2d_:r7});function o7(t,e,n,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return _.runKernel(V0,c,u)}var DP=b({depthwiseConv2dNativeBackpropFilter_:o7});function i7(t,e,n,r,o,i=[1,1],s){let a=e,l=!1;e.rank===3&&(l=!0,a=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={dy:a,filter:n},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},f=_.runKernel(j0,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var NP=b({depthwiseConv2dNativeBackpropInput_:i7});function s7({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(cl(_.state.gradientDepth,l)===!1){let $=Za(t,e,n,r,o,i,s);return a!=null&&($=Z($,a)),ll($,l,c,u)}let f=y(t,"x","depthwiseConv2d","float32"),p=y(e,"filter","depthwiseConv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),S(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),S(Tn(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Rt("fused depthwiseConv2d",r,s);let x=Ya(m.shape,p.shape,n,i,r,s,!0),T;a!=null&&(T=y(a,"bias","fused conv2d"),[T]=be(T,f),ze(x.outShape,T.shape));let D;c!=null&&(D=y(c,"prelu weights","fused depthwiseConv2d"));let P=($,L)=>{S(Ka(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[H,G,W,K]=L,U=sl($,W,l),ae=NP(G.shape,U,H,n,r,i,s),se=DP(G,U,H.shape,n,r,i,s);if(K!=null){let Oe=al(T,U);return[ae,se,Oe]}return[ae,se]},A={x:m,filter:p,bias:T,preluActivationWeights:D},M={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?In((L,H,G)=>{let W=_.runKernel(Fm,A,M);return G([H,L,W]),w&&(W=R(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:P}})(m,p):In((L,H,G,W)=>{let K=_.runKernel(Fm,A,M);return W([H,L,K,G]),w&&(K=R(K,[K.shape[1],K.shape[2],K.shape[3]])),{value:K,gradFunc:P}})(m,p,T)}var AP=b({fusedDepthwiseConv2d_:s7});function a7({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(cl(_.state.gradientDepth,i)===!1){let U=Ne(t,e,n,r);return o!=null&&(U=Z(U,o)),ll(U,i,s,a)}let l=y(t,"a","fused matMul"),c=y(e,"b","fused matMul");[l,c]=be(l,c);let u=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],w=l.shape.slice(0,-2),x=c.shape.slice(0,-2),T=xe(w),D=xe(x);S(u===f,()=>`Error in fused matMul: inner shapes (${u}) and (${f}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let A=ze(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),M=n?R(l,[T,u,p]):R(l,[T,p,u]),$=r?R(c,[D,m,f]):R(c,[D,f,m]),L;o!=null&&(L=y(o,"bias","fused matMul"),[L]=be(L,l),ze(A,L.shape));let H;s!=null&&(H=y(s,"prelu weights","fused matMul"));let G=(U,ae)=>{let[se,Oe,Le,yt]=ae,St=sl(R(U,Le.shape),Le,i),on,Ut;if(!n&&!r?(on=Ne(St,Oe,!1,!0),Ut=Ne(se,St,!0,!1)):!n&&r?(on=Ne(St,Oe,!1,!1),Ut=Ne(St,se,!0,!1)):n&&!r?(on=Ne(Oe,St,!1,!0),Ut=Ne(se,St,!1,!1)):(on=Ne(Oe,St,!0,!0),Ut=Ne(St,se,!0,!0)),o!=null){let ti=al(yt,St);return[on,Ut,ti]}else return[on,Ut]},W={a:M,b:$,bias:L,preluActivationWeights:H},K={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?In((ae,se,Oe)=>{let Le=_.runKernel(Rm,W,K);return Oe([ae,se,Le]),{value:R(Le,A),gradFunc:G}})(M,$):In((ae,se,Oe,Le)=>{let yt=_.runKernel(Rm,W,K);return Le([ae,se,yt,Oe]),{value:R(yt,A),gradFunc:G}})(M,$,L)}var MP=b({fusedMatMul_:a7});function l7(t){return jc(t,.54,.46)}var kP=b({hammingWindow_:l7});function c7(t){return jc(t,.5,.5)}var pg=b({hannWindow_:c7});function u7(t,e,n,r=!1,o=0){let i=0,s=[];for(;i+e<=t.size;)s.push(De(t,i,e)),i+=n;if(r)for(;i<t.size;){let a=i+e-t.size,l=rt([De(t,i,e-a),wo([a],o)]);s.push(l),i+=n}return s.length===0?xo([],[0,e]):R(rt(s),[s.length,e])}var hg=b({frame_:u7});function d7(t,e,n,r,o=pg){r==null&&(r=dg(e));let i=hg(t,e,n),s=V(i,o(e));return ol(s,r)}var OP=b({stft_:d7});function f7(t,e,n,r,o="bilinear",i=0){let s=y(t,"image","cropAndResize"),a=y(e,"boxes","cropAndResize","float32"),l=y(n,"boxInd","cropAndResize","int32"),c=a.shape[0];S(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),S(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),S(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),S(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),S(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},f={method:o,extrapolationValue:i,cropSize:r};return _.runKernel(P0,u,f)}var RP=b({cropAndResize_:f7});function p7(t){let e=y(t,"image","flipLeftRight","float32");S(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let n={image:e};return _.runKernel(Y0,n,{})}var PP=b({flipLeftRight_:p7});function h7(t){let e=y(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];S(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),S(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Oi(e,o)}var FP=b({grayscaleToRGB_:h7});function m7(t){let e=y(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];S(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),S(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=e.dtype,i=le(e,"float32"),s=Kt([.2989,.587,.114]),a;switch(e.rank){case 2:a=Mi("ij,j->i",i,s);break;case 3:a=Mi("ijk,k->ij",i,s);break;case 4:a=Mi("ijkl,l->ijk",i,s);break;case 5:a=Mi("ijklm,m->ijkl",i,s);break;case 6:a=Mi("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=nn(a,-1),le(a,o)}var LP=b({rgbToGrayscale_:m7});function g7(t,e,n=0,r=.5){let o=y(t,"image","rotateWithOffset","float32");S(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:e,fillValue:n,center:r};return _.runKernel(DS,i,s)}var $P=b({rotateWithOffset_:g7});function Xr(t,e,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return n=Math.min(n,s),S(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),S(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),S(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),S(e.rank===1,()=>"scores must be a 1D tensor"),S(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),S(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function y7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(t,"boxes","nonMaxSuppression","float32"),s=y(e,"scores","nonMaxSuppression","float32"),a=Xr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return _.runKernel(IE,{boxes:i,scores:s},l)}var VP=b({nonMaxSuppression_:y7});function jP(t,e,n){let r=v7(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function v7(t,e,n){return w7(t,e,n||b7)}function b7(t,e){return t>e?1:t<e?-1:0}function w7(t,e,n){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(e,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function mg(t,e,n,r,o){return aI(t,e,n,r,o,0)}function gg(t,e,n,r,o,i){return aI(t,e,n,r,o,0,!1,i,!0)}function yg(t,e,n,r,o,i){return aI(t,e,n,r,o,i,!0)}function aI(t,e,n,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let T=0;T<e.length;T++)e[T]>o&&c.push({score:e[T],boxIndex:T,suppressBeginIndex:0});c.sort(BP);let u=i>0?-.5/i:0,f=[],p=[];for(;f.length<n&&c.length>0;){let T=c.pop(),{score:D,boxIndex:P,suppressBeginIndex:A}=T;if(D<o)break;let M=!1;for(let $=f.length-1;$>=A;--$){let L=_7(t,P,f[$]);if(L>=r){M=!0;break}if(T.score=T.score*E7(r,u,L),T.score<=o)break}T.suppressBeginIndex=f.length,M||(T.score===D?(f.push(P),p.push(T.score)):T.score>o&&jP(c,T,BP))}let m=f.length,w=n-m;a&&w>0&&(f.push(...new Array(w).fill(0)),p.push(...new Array(w).fill(0)));let x={selectedIndices:f};return s&&(x.selectedScores=p),l&&(x.validOutputs=m),x}function _7(t,e,n){let r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(a-i)*(l-s),w=(f-c)*(p-u);if(m<=0||w<=0)return 0;let x=Math.max(i,c),T=Math.max(s,u),D=Math.min(a,f),P=Math.min(l,p),A=Math.max(D-x,0)*Math.max(P-T,0);return A/(m+w-A)}function E7(t,e,n){let r=Math.exp(e*n*n);return n<=t?r:0}function BP(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}async function S7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(t,"boxes","nonMaxSuppressionAsync"),s=y(e,"scores","nonMaxSuppressionAsync"),a=Xr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:f}=mg(c,u,n,r,o);return i!==t&&i.dispose(),s!==e&&s.dispose(),Kt(f,"int32")}var HP=S7;function x7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),l=Xr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},f=_.runKernel(DE,c,u);return{selectedIndices:f[0],selectedScores:f[1]}}var UP=b({nonMaxSuppressionWithScore_:x7});async function T7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(t,"boxes","nonMaxSuppressionAsync"),a=y(e,"scores","nonMaxSuppressionAsync"),l=Xr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c=await Promise.all([s.data(),a.data()]),u=c[0],f=c[1],{selectedIndices:p,selectedScores:m}=yg(u,f,n,r,o,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Kt(p,"int32"),selectedScores:Kt(m)}}var zP=T7;function I7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),l=Xr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,p={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:u,scoreThreshold:f,padToMaxOutputSize:i},w=_.runKernel(CE,p,m);return{selectedIndices:w[0],validOutputs:w[1]}}var GP=b({nonMaxSuppressionPadded_:I7});async function C7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(t,"boxes","nonMaxSuppressionAsync"),a=y(e,"scores","nonMaxSuppressionAsync"),l=Xr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,[p,m]=await Promise.all([s.data(),a.data()]),{selectedIndices:w,validOutputs:x}=gg(p,m,c,u,f,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:Kt(w,"int32"),validOutputs:ne(x,"int32")}}var WP=C7;function D7(t,e,n=!1,r=!1){let o=y(t,"images","resizeBilinear");S(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),S(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),S(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=_.runKernel(zE,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var qP=b({resizeBilinear_:D7});function N7(t,e,n=!1,r=!1){let o=y(t,"images","resizeNearestNeighbor");S(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),S(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),S(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),S(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=_.runKernel(UE,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var KP=b({resizeNearestNeighbor_:N7});function A7(t,e="binary",n=!1,r=.5){let o=y(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=V(Kt([r]),255),u,f,p,m;if(S(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),S(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),S(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),S(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[u,f,p]=Jo(o,[1,1,1],-1);let T=V(u,i),D=V(f,s),P=V(p,a);m=Z(Z(T,D),P)}else m=t;if(e==="otsu"){let T=Xd(le(vf(m),"int32"),tn([]),256);c=M7(T,l)}let w=n?Ja(m,c):Xo(m,c);return le(V(w,255),"int32")}function M7(t,e){let n=Kt([-1]),r=Kt([0]),o=Kt([0]),i,s,a,l,c,u;for(let f=0;f<t.size-1;f++){i=De(t,0,f+1),s=De(t,f+1),c=Ce(Ge(i),e),u=Ce(Ge(s),e);let p=Ge(V(i,Yr(0,i.size)));a=Ce(p,Ge(i));let m=wo(s.shape,i.size),w=Z(Yr(0,s.size),m),x=V(s,w);l=Ce(Ge(x),Ge(s));let T=re(a,l),D=re(a,l),P=V(c,u);o=V(V(P,T),D);let A=Xo(o,r);r=pr(A,o,r),n=pr(A,Kt([f]),n)}return n}var YP=b({threshold_:A7});function k7(t,e,n="nearest",r="constant",o=0,i){let s=y(t,"image","transform","float32"),a=y(e,"transforms","transform","float32");S(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),S(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return _.runKernel(ES,l,c)}var XP=b({transform_:k7});function O7(t,e,n){let r=y(t,"a","bandPart");S(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof e=="number"?(S(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),S(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=y(e<0?i:e,"numLower","bandPart")):(S(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=pr(Lc(e,0),i,bs(e,i))),typeof n=="number"?(S(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),S(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=y(n<0?s:n,"numUpper","bandPart")):(S(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=pr(Lc(n,0),s,bs(n,s)));let c=R(Yr(0,i,1,"int32"),[-1,1]),u=Yr(0,s,1,"int32"),f=re(c,u),p=ys(Ja(f,a),tf(f,rn(l))),m=Eo([i,s],r.dtype);return R(Cn(mr(R(r,[-1,i,s])).map(w=>pr(p,w,m))),o)}var ZP=b({bandPart_:O7});function R7(t){let e;if(Array.isArray(t)){e=!1,S(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)S(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else e=!0,t=Jo(t,t.shape[0],0).map(o=>Hn(o,[0]));S(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],r=t;for(let o=0;o<t.length;++o)n.push(_.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=V(Ge(V(n[s],i)),n[s]);i=re(i,a)}return Ce(i,gs(i,"euclidean"))}));return e?Cn(n,0):n}var QP=b({gramSchmidt_:R7});function P7(t,e=!1){if(S(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return JP(t,e);{let n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=mr(R(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=JP(l,e);o.push(c),i.push(u)});let s=R(Cn(o,0),t.shape),a=R(Cn(i,0),t.shape);return[s,a]}}function JP(t,e=!1){return _.tidy(()=>{S(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],r=t.shape[1],o=Qd(n),i=Jn(t),s=xo([[1]],[1,1]),a=Jn(s),l=n>=r?r:n;for(let c=0;c<l;++c){let u=i,f=a,p=o;[a,i,o]=_.tidy(()=>{let m=De(i,[c,c],[n-c,1]),w=gs(m),x=De(i,[c,c],[1,1]),T=pr(Xo(x,0),xo([[-1]]),xo([[1]])),D=re(x,V(T,w)),P=Ce(m,D);P.shape[0]===1?a=Jn(s):a=rt([s,De(P,[1,0],[P.shape[0]-1,P.shape[1]])],0);let A=rn(Ce(Ne(T,D),w)),M=De(i,[c,0],[n-c,r]),$=V(A,a),L=il(a);if(c===0)i=re(M,Ne($,Ne(L,M)));else{let W=re(M,Ne($,Ne(L,M)));i=rt([De(i,[0,0],[c,r]),W],0)}let H=il($),G=De(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=re(G,Ne(Ne(G,a),H));else{let W=re(G,Ne(Ne(G,a),H));o=rt([De(o,[0,0],[n,c]),W],1)}return[a,i,o]}),_t([u,f,p])}return!e&&n>r&&(o=De(o,[0,0],[n,r]),i=De(i,[0,0],[r,r])),[o,i]})}var e2=b({qr_:P7});var Et=(function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t})(Et||{});function F7(t,e,n=Et.SUM_BY_NONZERO_WEIGHTS){let r=y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=y(e,"weights","computeWeightedLoss"));let i=o==null?r:V(r,o);if(n===Et.NONE)return i;if(n===Et.SUM)return Ge(i);if(n===Et.MEAN){if(o==null)return vs(i);{let s=r.size/o.size,a=Ce(Ge(i),Ge(o));return s>1?Ce(a,ne(s)):a}}if(n===Et.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Ce(Ge(i),ne(r.size));{let s=V(o,So(r.shape)),a=le(Ge(ff(s,ne(0))),"float32");return Ce(Ge(i),a)}}throw Error(`Unknown reduction: ${n}`)}var yn=b({computeWeightedLoss_:F7});function L7(t,e,n,r=Et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","absoluteDifference"),i=y(e,"predictions","absoluteDifference"),s=null;n!=null&&(s=y(n,"weights","absoluteDifference")),it(o.shape,i.shape,"Error in absoluteDifference: ");let a=Wt(re(o,i));return yn(a,s,r)}var t2=b({absoluteDifference_:L7});function $7(t,e,n,r,o=Et.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","cosineDistance"),s=y(e,"predictions","cosineDistance"),a=null;r!=null&&(a=y(r,"weights","cosineDistance")),it(i.shape,s.shape,"Error in cosineDistance: ");let l=ne(1),c=re(l,Ge(V(i,s),n,!0));return yn(c,a,o)}var n2=b({cosineDistance_:$7});function V7(t,e,n,r=Et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","hingeLoss"),i=y(e,"predictions","hingeLoss"),s=null;n!=null&&(s=y(n,"weights","hingeLoss")),it(o.shape,i.shape,"Error in hingeLoss: ");let a=ne(1);o=re(V(ne(2),o),a);let l=Pi(re(a,V(o,i)));return yn(l,s,r)}var r2=b({hingeLoss_:V7});function j7(t,e,n,r=1,o=Et.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","huberLoss"),s=y(e,"predictions","huberLoss"),a=null;n!=null&&(a=y(n,"weights","huberLoss")),it(i.shape,s.shape,"Error in huberLoss: ");let l=ne(r),c=Wt(re(s,i)),u=bs(c,l),f=re(c,u),p=Z(V(ne(.5),qt(u)),V(l,f));return yn(p,a,o)}var o2=b({huberLoss_:j7});function B7(t,e,n,r=1e-7,o=Et.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","logLoss"),s=y(e,"predictions","logLoss"),a=null;n!=null&&(a=y(n,"weights","logLoss")),it(i.shape,s.shape,"Error in logLoss: ");let l=ne(1),c=ne(r),u=rn(V(i,Zo(Z(s,c)))),f=V(re(l,i),Zo(Z(re(l,s),c))),p=re(u,f);return yn(p,a,o)}var i2=b({logLoss_:B7});function H7(t,e,n,r=Et.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","meanSquaredError"),i=y(e,"predictions","meanSquaredError"),s=null;n!=null&&(s=y(n,"weights","meanSquaredError")),it(o.shape,i.shape,"Error in meanSquaredError: ");let a=wf(o,i);return yn(a,s,r)}var s2=b({meanSquaredError_:H7});function U7(t,e){let n=y(t,"labels","sigmoidCrossEntropyWithLogits"),r=y(e,"logits","sigmoidCrossEntropyWithLogits");it(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Pi(r),i=V(r,n),s=rf(Dr(rn(Wt(r))));return Z(re(o,i),s)}function z7(t,e,n,r=0,o=Et.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"multiClassLabels","sigmoidCrossEntropy"),s=y(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","sigmoidCrossEntropy")),it(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ne(r),u=ne(1),f=ne(.5);i=Z(V(i,re(u,c)),V(f,c))}let l=U7(i,s);return yn(l,a,o)}var a2=b({sigmoidCrossEntropy_:z7});function G7(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return In((o,i,s)=>{let l=sf(i,[n],!0),c=re(le(i,"float32"),l);s([o,c]);let u=rn(V(c,o));return{value:Ge(u,[n]),gradFunc:(m,w)=>{let[x,T]=w,D=ki(m.shape,[n]);return[V(R(m,D),re(le(x,"float32"),Dr(T))),V(R(m,D),re(Dr(T),le(x,"float32")))]}}})(t,e)}function W7(t,e,n,r=0,o=Et.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"onehotLabels","softmaxCrossEntropy"),s=y(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","softmaxCrossEntropy")),it(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ne(r),u=ne(1),f=ne(i.shape[1]);i=Z(V(i,re(u,c)),Ce(c,f))}let l=G7(i,s);return yn(l,a,o)}var l2=b({softmaxCrossEntropy_:W7});function q7(t,e,n,r){let o=y(t,"indices","sparseFillEmptyRows","int32"),i=y(e,"values","sparseFillEmptyRows"),s=y(n,"denseShape","sparseFillEmptyRows","int32"),a=y(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=_.runKernel(cS,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var c2=b({sparseFillEmptyRows_:q7});function K7(t,e,n){let r=y(t,"inputIndices","sparseReshape","int32"),o=y(e,"inputShape","sparseReshape","int32"),i=y(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=_.runKernel(uS,s);return{outputIndices:a[0],outputShape:a[1]}}var u2=b({sparseReshape_:K7});function Y7(t,e,n){let r=y(t,"data","sparseSegmentMean"),o=y(e,"indices","sparseSegmentMean","int32"),i=y(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(dS,s)}var d2=b({sparseSegmentMean_:Y7});function X7(t,e,n){let r=y(t,"data","sparseSegmentSum"),o=y(e,"indices","sparseSegmentSum","int32"),i=y(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(fS,s)}var f2=b({sparseSegmentSum_:X7});function Z7(t,e,n,r,o,i,s,a){let l=y(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=y(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},f={data:l,dataSplits:c},p=_.runKernel(yS,f,u);return{nGrams:p[0],nGramsSplits:p[1]}}var p2=b({stringNGrams_:Z7});function Q7(t,e,n=!0){let r=y(t,"input","stringSplit","string"),o=y(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=_.runKernel(vS,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var h2=b({stringSplit_:Q7});function J7(t,e){let n=y(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return _.runKernel(bS,o,r)}var m2=b({stringToHashBucketFast_:J7});function e9(t,e,n,r=!0){let o=y(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return _.runKernel(mS,{x:o},i)}var g2=b({staticRegexReplace_:e9});var y2={fft:rl,ifft:_s,rfft:ol,irfft:bf},v2={hammingWindow:kP,hannWindow:pg,frame:hg,stft:OP},Es={flipLeftRight:PP,grayscaleToRGB:FP,resizeNearestNeighbor:KP,resizeBilinear:qP,rgbToGrayscale:LP,rotateWithOffset:$P,cropAndResize:RP,nonMaxSuppression:VP,nonMaxSuppressionAsync:HP,nonMaxSuppressionWithScore:UP,nonMaxSuppressionWithScoreAsync:zP,nonMaxSuppressionPadded:GP,nonMaxSuppressionPaddedAsync:WP,threshold:YP,transform:XP},b2={bandPart:ZP,gramSchmidt:QP,qr:e2},w2={absoluteDifference:t2,computeWeightedLoss:yn,cosineDistance:n2,hingeLoss:r2,huberLoss:o2,logLoss:i2,meanSquaredError:s2,sigmoidCrossEntropy:a2,softmaxCrossEntropy:l2},_2={sparseFillEmptyRows:c2,sparseReshape:u2,sparseSegmentMean:d2,sparseSegmentSum:f2},E2={stringNGrams:p2,stringSplit:h2,stringToHashBucketFast:m2,staticRegexReplace:g2};var uI={};He(uI,{Serializable:()=>Tf,SerializationMap:()=>vg,getRegisteredName:()=>n9,registerClass:()=>cI});var t9=new Map,lI=new Map,Tf=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},vg=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function cI(t,e,n){S(t.className!=null,()=>"Class being registered does not have the static className property defined."),S(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),S(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);let r=n,o=e+">"+r;return vg.register(t),t9.set(o,t),lI.set(t,o),t}function n9(t){return lI.has(t)?lI.get(t):t.className}var Dn=class extends Tf{minimize(e,n=!1,r){let{value:o,grads:i}=this.computeGradients(e,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return _t(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return rg(e,n)}dispose(){this.iterations_!=null&&_t(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ne(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(Dn,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var Ss=class extends Dn{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:te(()=>$t(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:te(()=>$t(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;te(()=>{let u=Z(V(l,this.rho),V(qt(a),1-this.rho)),f=V(Ce(Bn(Z(c,this.epsilon)),Bn(Z(l,this.epsilon))),a),p=Z(V(c,this.rho),V(qt(f),1-this.rho));l.assign(u),c.assign(p);let m=Z(V(f,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(_t(this.accumulatedGrads.map(e=>e.variable)),_t(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}};var xs=class extends Dn{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:te(()=>wo(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;te(()=>{let l=Z(a,qt(s));a.assign(l);let c=Z(V(Ce(s,Bn(Z(l,_.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&_t(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}};var Ts=class extends Dn{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],te(()=>{this.accBeta1=ne(n).variable(),this.accBeta2=ne(r).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);te(()=>{let r=re(1,this.accBeta1),o=re(1,this.accBeta2);n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:te(()=>$t(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:te(()=>$t(a).variable(l))});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,p=Z(V(u,this.beta1),V(c,1-this.beta1)),m=Z(V(f,this.beta2),V(qt(c),1-this.beta2)),w=Ce(p,r),x=Ce(m,o);u.assign(p),f.assign(m);let T=Z(V(Ce(w,Z(Bn(x),this.epsilon)),-this.learningRate),a);a.assign(T)}),this.accBeta1.assign(V(this.accBeta1,this.beta1)),this.accBeta2.assign(V(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&_t(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),te(()=>{this.accBeta1.assign(Yo(this.beta1,this.iterations_+1)),this.accBeta2.assign(Yo(this.beta2,this.iterations_+1))});let n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var Is=class extends Dn{static get className(){return"Adamax"}constructor(e,n,r,o=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],te(()=>{this.iteration=ne(0).variable(),this.accBeta1=ne(n).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);te(()=>{let r=re(1,this.accBeta1),o=Ce(-this.learningRate,Z(V(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:$t(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:$t(a).variable(l)});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,p=Z(V(u,this.beta1),V(c,1-this.beta1)),m=V(f,this.beta2),w=Wt(c),x=uf(m,w);u.assign(p),f.assign(x);let T=Z(V(Ce(o,r),Ce(p,Z(x,this.epsilon))),a);a.assign(T)}),this.iteration.assign(Z(this.iteration,1)),this.accBeta1.assign(V(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&_t(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var ei=class extends Dn{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;let s=_.registeredVariables[r];te(()=>{let a=Z(V(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=jn(ne(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}};var Cs=class extends ei{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ne(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:te(()=>$t(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&te(()=>{let l,c=Z(V(this.m,s),a);this.useNesterov?l=Z(V(this.c,Z(a,V(c,this.m))),i):l=Z(V(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&_t(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}};var Ds=class extends Dn{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=_.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:te(()=>$t(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:te(()=>$t(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:te(()=>$t(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;te(()=>{let u=Z(V(l,this.decay),V(qt(a),1-this.decay));if(this.centered){let f=this.accumulatedMeanGrads[o].variable,p=Z(V(f,this.decay),V(a,1-this.decay)),m=Ce(V(a,this.learningRate),Bn(re(u,Z(qt(p),this.epsilon)))),w=Z(V(c,this.momentum),m);l.assign(u),f.assign(p),c.assign(w);let x=re(i,w);i.assign(x)}else{let f=Z(V(l,this.decay),V(qt(a),1-this.decay)),p=Z(V(c,this.momentum),Ce(V(a,this.learningRate),Bn(Z(f,this.epsilon))));l.assign(f),c.assign(p);let m=re(i,p);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&_t(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&_t(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&_t(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var r9=[Ss,xs,Ts,Is,Cs,Ds,ei];function S2(){for(let t of r9)cI(t)}var Bc={};He(Bc,{CompositeArrayBuffer:()=>mn,browserFiles:()=>T2,browserHTTPRequest:()=>A2,concatenateArrayBuffers:()=>_R,copyModel:()=>PR,decodeWeights:()=>Ym,decodeWeightsStream:()=>Xm,encodeWeights:()=>yR,fromMemory:()=>M2,fromMemorySync:()=>yI,getLoadHandlers:()=>TR,getModelArtifactsForJSON:()=>Ac,getModelArtifactsForJSONSync:()=>WS,getModelArtifactsInfoForJSON:()=>Wo,getSaveHandlers:()=>xR,getWeightSpecs:()=>Hd,http:()=>wg,isHTTPScheme:()=>bg,listModels:()=>OR,loadWeights:()=>C2,moveModel:()=>FR,registerLoadRouter:()=>SR,registerSaveRouter:()=>ER,removeModel:()=>RR,weightsLoaderFactory:()=>mI,withSaveHandler:()=>k2,withSaveHandlerSync:()=>O2});var o9="model",i9=".json",s9=".weights.bin";function x2(t){return new Promise(e=>setTimeout(e)).then(t)}var dI=(()=>{class t{constructor(n){if(!J().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=o9),this.modelJsonFileName=n+i9,this.weightDataFileName=n+s9}async save(n){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=mn.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=Zm(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,await x2(()=>l.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,await x2(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Wo(n)}}}}return t.URL_SCHEME="downloads://",t})();var fI=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}let l=Ac(i,c=>this.loadWeights(c));e(l)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){let n=[],r=[];for(let s of e)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(e),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(e,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){let n=[],r=this.weightsFiles.map(i=>GS(i.name)),o={};for(let i of e)i.paths.forEach(s=>{let a=GS(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},a9=t=>J().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(dI.URL_SCHEME)?l9(t.slice(dI.URL_SCHEME.length)):null;Gt.registerSaveRouter(a9);function l9(t="model"){return new dI(t)}function T2(t){return new fI(t)}function pI(t,e,n,r){s(t),n=n??0,r=r??1,a(n,r);let o=0,i=l=>(l.then(c=>{let u=n+ ++o/t.length*(r-n);return e(u),c}),l);function s(l){S(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){S(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),S(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),S(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}async function hI(t,e){e==null&&(e={});let n=e.fetchFunc==null?J().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await pI(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(a):await pI(a,e.onProgress,.5,1)}function I2(t,e){var n;let r=e.fetchFunc==null?J().platform.fetch:e.fetchFunc,o=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async s=>{for(var a;o<t.length;){i||(i=(await r(t[o],e.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=await i.read();if(l){o++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}s.enqueue(c);return}s.close()}})}async function C2(t,e="",n,r){return mI(s=>hI(s,{requestInit:r}))(t,e,n)}function mI(t){return async(e,n="",r)=>{let o=e.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((m,w)=>{let x=0;m.weights.forEach(T=>{let D="quantization"in T?T.quantization.dtype:T.dtype,P=Ci[D]*xe(T.shape),A=()=>{o[w]=!0,i[w]==null&&(i[w]=[]),i[w].push({manifestEntry:T,groupOffset:x,sizeBytes:P})};r!=null?r.forEach((M,$)=>{M===T.name&&(A(),s[$]=!0)}):A(),a.push(T.name),x+=P})}),!s.every(m=>m)){let m=r.filter((w,x)=>!s[x]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((m,w,x)=>(w&&m.push(x),m),[]),c=[];l.forEach(m=>{e[m].paths.forEach(w=>{let x=n+(n.endsWith("/")?"":"/")+w;c.push(x)})});let u=await t(c),f={},p=0;return l.forEach(m=>{let w=e[m].paths.length,x=new mn(u.slice(p,p+w));i[m].forEach(D=>{let P=x.slice(D.groupOffset,D.groupOffset+D.sizeBytes),A=Ym(P,[D.manifestEntry]);for(let M in A)f[M]=A[M]}),p+=w}),f}}var c9="application/octet-stream",u9="application/json",D2=(()=>{class t{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(S(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=J().platform.fetch,S(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&S(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=Zm(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:u9}),"model.json"),n.weightData!=null){let a=mn.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:c9}),"model.weights.bin")}let s=await this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:Wo(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){let n=await this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=await n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let n=await this.loadModelJSON();return Ac(n,r=>this.loadWeights(r))}async loadStream(){let n=await this.loadModelJSON(),r=await this.getWeightUrls(n.weightsManifest),o=Hd(n.weightsManifest),i=()=>I2(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})}async getWeightUrls(n){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=d9(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of n)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...await Promise.all(l)),a}async loadWeights(n){let r=await this.getWeightUrls(n),o=Hd(n),i=await hI(r,this.loadOptions);return[o,i]}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function d9(t){let e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}function bg(t){return t.match(D2.URL_SCHEME_REGEX)!=null}var N2=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>bg(r)):n=bg(t),n)return wg(t,e)}return null};Gt.registerSaveRouter(N2);Gt.registerLoadRouter(N2);function wg(t,e){return new D2(t,e)}function A2(t,e){return wg(t,e)}var If=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},_g=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},gI=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}};function M2(t,e,n,r){let o=arguments;return new gI(yI(...o))}function yI(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new If(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new If({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function k2(t){return new _g(t)}function O2(t){return new _g(t)}var vI={};He(vI,{confusionMatrix:()=>R2});function f9(t,e,n){let r=y(t,"labels","confusionMatrix"),o=y(e,"predictions","confusionMatrix");S(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),S(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),S(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),S(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),S(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let i=ws(le(r,"int32"),n),s=ws(le(o,"int32"),n),a=il(i),l=Ne(a,s);return le(l,"int32")}var R2=b({confusionMatrix_:f9});var To={};He(To,{draw:()=>w9,fromPixels:()=>_9,fromPixelsAsync:()=>y9,toPixels:()=>b9});var ul,P2=!1;function F2(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(La(Om,_.backendName)!=null){let w={pixels:t},x={numChannels:e};return _.runKernel(Om,w,x)}let[c,u]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],f;if(s)f=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)f=t.data;else if(i||o||a){if(ul==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")ul=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ul=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ul.canvas.width=c,ul.canvas.height=u,ul.drawImage(t,0,0,c,u),f=ul.getImageData(0,0,c,u).data}let p;if(e===4)p=new Int32Array(f);else{let w=c*u;p=new Int32Array(w*e);for(let x=0;x<w;x++)for(let T=0;T<e;++T)p[x*e+T]=f[x*4+T]}return Ef(p,[u,c,e],"int32")}function p9(t){return t!=null&&t.data instanceof Uint8Array}function h9(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function m9(t){return t!=null&&t.width!==0&&t.height!==0}function g9(t){return h9()&&!(t instanceof ImageBitmap)&&m9(t)&&!p9(t)}async function y9(t,e=3){let n=null;if(J().getBool("WRAP_TO_IMAGEBITMAP")&&g9(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return F2(n,e)}function L2(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function v9(t){let e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function b9(t,e){let n=y(t,"img","toPixels");if(!(t instanceof Ie)){let c=n;n=le(c,"int32"),c.dispose()}L2(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let m=s[c*i+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(u[0]=m*a,u[1]=m*a,u[2]=m*a):u[p]=m*a}let f=c*4;l[f+0]=Math.round(u[0]),l[f+1]=Math.round(u[1]),l[f+2]=Math.round(u[2]),l[f+3]=Math.round(u[3])}if(e!=null){P2||La(km,_.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),P2=!0),e.width=o,e.height=r;let c=e.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return n!==t&&n.dispose(),l}function w9(t,e,n){let r=y(t,"img","draw");if(!(t instanceof Ie)){let s=r;r=le(s,"int32"),s.dispose()}L2(r),v9(n?.imageOptions);let o={image:r},i={canvas:e,options:n};_.runKernel(km,o,i)}var _9=b({fromPixels_:F2});var bI={};He(bI,{prepareAndValidate:()=>$2});function $2(t,e){let n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(xe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=e.shape,i=o[o.length-1],s=1;for(let f=0;f<o.length-1;++f)s*=o[f];let a=t.shape,l=o.slice();l.pop();let c=1;for(let f=i;f<n;++f)c*=a[f],l.push(a[f]);let u=[...Uo(t.shape).map(f=>f/c),1].slice(0,i);return[l,s,c,u]}var Cf={};He(Cf,{assertParamsValid:()=>S9,computeFlatOffset:()=>D9,computeOutShape:()=>T9,getNormalizedAxes:()=>I9,isSliceContinous:()=>C9,maskToAxes:()=>x9,parseSliceParams:()=>N9,sliceInfo:()=>A9,startForAxis:()=>W2,startIndicesWithElidedDims:()=>U2,stopForAxis:()=>q2,stopIndicesWithElidedDims:()=>z2,stridesForAxis:()=>G2,stridesWithElidedDims:()=>j2});var wI=-2,E9=-1;function S9(t,e,n){let r=t.shape.length;S(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),S(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)S(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function x9(t){let e=[],n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function T9(t,e,n){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function j2(t,e,n,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function B2(t,e,n){return n<=t?n:n-(e-1)}function H2(t,e){let n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function I9(t,e,n,r,o,i,s,a,l){let c=t.length,u=new Array(c),f=new Array(c),p=new Array(c);if(e.length&&n>0){let m=e[0],w=n+1;u=U2(s,m,w,r,t),f=z2(a,m,w,o,t),p=j2(i,m,w,t)}else for(let m=0;m<c;m++)u[m]=W2(s,r,i,t,m,l),f[m]=q2(a,o,i,t,m,l),p[m]=G2(i,m,l);return{begin:u,end:f,strides:p}}function U2(t,e,n,r,o){let i=[...o],s=H2(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=B2(e,n,a),c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function z2(t,e,n,r,o){let i=[...o],s=H2(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=B2(e,n,a),c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=bc(0,i[a],o[a])}return i}function G2(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function W2(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=bc(0,s,l-1),s}function q2(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=bc(0,s,l):s=bc(-1,s,l-1),s}function C9(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function D9(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function N9(t,e,n){let r,o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(s=>{S(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(S(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function A9(t,e,n,r,o,i,s,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let A=0;A<f.dims;A++)u&&(1<<A&a)!==0&&f.numAddAxisAfterEllipsis++,1<<A&s&&(u=!0);u||(f.ellipsisMask|=1<<f.dims,f.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};M9(f,p);let m=!0,w=!0,x=!0,T=[],D=[];for(let A=0;A<t.length;++A){if(p.strides[A]===0)throw Error(`strides[${A}] must be non-zero`);let M=!!(p.shrinkAxisMask&1<<A),$=t[A];if($===-1){T.push(M?1:-1);continue}let L=[p.beginMask&1<<A,p.endMask&1<<A],H=[p.strides[A]>0?0:-1,p.strides[A]>0?$:$-1];if(M&&p.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[A]===1;let G=!!(p.beginMask&1<<A&&p.endMask&1<<A);if(p.beginValid&&p.endValid){if(M){let ae=p.begin[A]<0?$+p.begin[A]:p.begin[A];if(p.begin[A]=ae,p.end[A]=p.begin[A]+1,ae<0||ae>=$)throw Error(`slice index ${p.begin[A]} of dimension ${A} out of bounds.`)}else p.begin[A]=V2(p.begin[A],0,p.strides[A],$,L,H),p.end[A]=V2(p.end[A],1,p.strides[A],$,L,H);let U=p.strides[A]===1&&p.begin[A]===0&&p.end[A]===$;m=m&&U,w=w&&(A===0&&p.strides[A]===1||U)}else m=m&&p.strides[A]===1&&G,w=w&&(A===0&&p.strides[A]===1||G);let W,K=!1;if(p.beginValid&&p.endValid?(W=p.end[A]-p.begin[A],K=!0):M?(W=1,K=!0):G&&$>=0&&(p.strides[A]<0?W=-$:W=$,K=!0),K){let U;W===0||W<0!=p.strides[A]<0?U=0:U=Math.trunc(W/p.strides[A])+(W%p.strides[A]!==0?1:0),T.push(U)}else T.push(-1)}for(let A=0;A<p.finalShapeGatherIndices.length;++A){let M=p.finalShapeGatherIndices[A];M>=0?D.push(T[M]):M===wI&&D.push(1)}return{finalShapeSparse:D.filter((A,M)=>p.finalShapeGatherIndices[M]!==wI),finalShape:D,isIdentity:m,sliceDim0:w,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function M9(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(wI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(E9),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function V2(t,e,n,r,o,i){if(o[e])return n>0?i[e]:i[e+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var K2="4.22.0";var Hc=class{static sgd(e){return new ei(e)}static momentum(e,n,r=!1){return new Cs(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,i=!1){return new Ds(e,n,r,o,i)}static adam(e=.001,n=.9,r=.999,o=null){return new Ts(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new Ss(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,i=0){return new Is(e,n,r,o,i)}static adagrad(e,n=.1){return new xs(e,n)}};var k9=Hc;var O9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function Y2(){return new Promise(t=>O9(()=>t()))}var SI={};He(SI,{ERF_A1:()=>X9,ERF_A2:()=>Z9,ERF_A3:()=>Q9,ERF_A4:()=>J9,ERF_A5:()=>eK,ERF_P:()=>Y9,PARALLELIZE_THRESHOLD:()=>Eg,RowPartitionType:()=>Fi,SELU_SCALE:()=>K9,SELU_SCALEALPHA:()=>q9,applyActivation:()=>ll,assertAndGetBroadcastShape:()=>ze,assertAxesAreInnerMostDims:()=>E6,assertParamsConsistent:()=>R9,assignToTypedArray:()=>sK,axesAreInnerMostDims:()=>Hx,calculateShapes:()=>gP,checkEinsumDimSizes:()=>fK,checkPadOnDimRoundingMode:()=>Rt,combineLocations:()=>GR,combineRaggedTensorToTensorShapes:()=>F9,complexWithEvenIndex:()=>rK,complexWithOddIndex:()=>oK,computeConv2DInfo:()=>Ya,computeConv3DInfo:()=>jR,computeDefaultPad:()=>fx,computeDilation2DInfo:()=>w5,computeOptimalWindowSize:()=>j9,computeOutAndReduceShapes:()=>_6,computeOutShape:()=>P9,computePool2DInfo:()=>dx,computePool3DInfo:()=>_5,convertConv2DDataFormat:()=>BR,decodeEinsumEquation:()=>uK,eitherStridesOrDilationsAreOne:()=>Tn,expandShapeToKeepDim:()=>ki,exponent:()=>lK,exponents:()=>aK,fromStringArrayToUint8:()=>OK,fromUint8ToStringArray:()=>kK,getAxesPermutation:()=>S6,getBroadcastDims:()=>zR,getComplexWithIndex:()=>iK,getEinsumComputePath:()=>pK,getEinsumPermutation:()=>dK,getFusedBiasGradient:()=>al,getFusedDyActivation:()=>sl,getImageCenter:()=>B9,getInnerMostAxes:()=>T6,getPermuted:()=>U9,getRaggedRank:()=>$9,getReductionAxes:()=>ng,getReshaped:()=>H9,getReshapedPermuted:()=>z9,getRowPartitionTypesHelper:()=>L9,getSliceBeginCoords:()=>G9,getSliceSize:()=>W9,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>yK,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>vK,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>bK,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>EK,getSparseReshapeInputOutputMismatchErrorMessage:()=>xK,getSparseReshapeInputOutputMultipleErrorMessage:()=>SK,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>wK,getSparseReshapeNegativeOutputDimErrorMessage:()=>_K,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>DK,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>TK,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>IK,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>CK,getUndoAxesPermutation:()=>x6,isIdentityPermutation:()=>hK,log:()=>KG,mergeRealAndImagArrays:()=>tK,prepareAndValidate:()=>$2,prepareSplitSize:()=>gK,segment_util:()=>EI,shouldFuse:()=>cl,slice_util:()=>Cf,splitRealAndImagArrays:()=>nK,stridesOrDilationsArePositive:()=>qo,tupleValuesAreOne:()=>Ka,upcastType:()=>Ua,validateDefaultValueShape:()=>V9,validateInput:()=>Vc,validateUpdateShape:()=>JT,warn:()=>zo});function R9(t,e){let n=t[0].length;t.forEach((o,i)=>{S(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),S(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<n;s++)S(s===e||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function P9(t,e){let n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var Fi=(function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t})(Fi||{});function F9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function L9(t){let e={FIRST_DIM_SIZE:Fi.FIRST_DIM_SIZE,VALUE_ROWIDS:Fi.VALUE_ROWIDS,ROW_LENGTHS:Fi.ROW_LENGTHS,ROW_SPLITS:Fi.ROW_SPLITS,ROW_LIMITS:Fi.ROW_LIMITS,ROW_STARTS:Fi.ROW_STARTS},n=[];for(let r of t)if(r in e)n.push(e[r]);else break;return n}function $9(t){return t.length===0?0:t[0]===Fi.FIRST_DIM_SIZE?t.length-1:t.length}function V9(t,e){if(t==null||e==null)return;let n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=t[o],s=e[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var Eg=30;function j9(t){return t<=Eg?t:_c(t,Math.floor(Math.sqrt(t)))}function B9(t,e,n){let r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}function H9(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=e.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/e[s],e[s]]);o=o.concat(t.slice(i+1))}return o}function U9(t,e,n=!0){let r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function z9(t,e,n,r=!0){let o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function G9(t,e){let n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function W9(t,e,n){let r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var q9=1.7580993408473768,K9=1.0507009873554805;var Y9=.3275911,X9=.254829592,Z9=-.284496736,Q9=1.421413741,J9=-1.453152027,eK=1.061405429;function tK(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function nK(t){let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function rK(t){let e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function oK(t){let e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function iK(t,e){let n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function sK(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function aK(t,e){let n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function lK(t,e,n){let r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var _I="->",cK=/->/g,X2=",",Z2="...";function uK(t,e){t=t.replace(/\s/g,"");let n=(t.length-t.replace(cK,"").length)/_I.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${_I}").`);let[r,o]=t.split(_I);S(r.indexOf(Z2)===-1,()=>`The ellipsis notation ("${Z2}") is not supported yet.`);let i=r.split(X2),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let m=o[p];if(!i.some(w=>w.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){let m=r[p];a.indexOf(m)===-1&&m!==X2&&a.push(m)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let m=0;m<i[p].length;++m)l[p].push(a.indexOf(i[p][m]))}let c=a.length,u=o.length,f=[];for(let p=u;p<c;++p)f.push(p);return{allDims:a,summedDims:f,idDims:l}}function dK(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;let r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function fK(t,e,n){let r=new Array(t);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<e[o].length;++s)r[e[o][s]]===void 0?r[e[o][s]]=i[s]:S(r[e[o][s]]===i[s],()=>`Expected dimension ${r[e[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function pK(t,e){let n=t,r=[],o=0;t.length===0&&n.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],l=mK(e,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function hK(t){return t.every((e,n)=>e===n)}function mK(t,e){let n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function gK(t,e,n=0){let r=[];if(typeof e=="number")S(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{let o=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);S(o<=1,()=>"There should be only one negative value in split array.");let i=e.indexOf(-1);if(i!==-1){let s=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-s}S(t.shape[n]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function yK(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function vK(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function bK(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function wK(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function _K(t,e){return`size ${t} must be non-negative, not ${e}`}function EK(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function SK(t,e){let n=xe(t),r=xe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function xK(t,e){let n=xe(t),r=xe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function TK(){return"segment ids must be >= 0"}function IK(){return"segment ids are not increasing"}function CK(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function DK(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}var EI={};He(EI,{collectGatherOpShapeInfo:()=>MK,computeOutShape:()=>AK,segOpComputeOptimalWindowSize:()=>NK});function NK(t,e){let n=!1,r;for(t<=Eg?(r=t,n=!0):r=_c(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=_c(t,r+1);return r}function AK(t,e,n){let r=[],o=t.length;for(let i=0;i<o;i++)i!==e?r.push(t[i]):r.push(n);return r}function MK(t,e,n,r){let o=e.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);let s=t.shape[n],a=[],l=1,c=1,u=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),c*=t.shape[f];for(let f=r;f<o;f++)a.push(e.shape[f]);for(let f=n+1;f<i;f++)a.push(t.shape[f]),u*=t.shape[f];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function kK(t){try{return t.map(e=>Dc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function OK(t){return t.map(e=>fs(e))}var xI={};He(xI,{nonMaxSuppressionV3Impl:()=>mg,nonMaxSuppressionV4Impl:()=>gg,nonMaxSuppressionV5Impl:()=>yg,whereImpl:()=>ug});S2();var RK=J();RK.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var gr=(function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t})(gr||{}),Q2;(function(t){let e;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Q2||(Q2={}));var FK={};function Sg(t){return FK[t]}function g(t,e,n,r,o){let i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return Pt(e.inputNames[c],n,r,o);if(i.type==="tensors"){let p=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((w,x)=>{var T;return((T=p[x])===null||T===void 0?void 0:T.op)!=="NoOp"}).map(w=>Pt(w,n,r,o))}let u=Pt(e.inputNames[c],n,r,o),f=u.dataSync();return i.type==="number"?f[0]:j.toNestedArray(u.shape,f)}let s=e.attrParams[t];return s&&s.value}function Pt(t,e,n,r){let[o,i]=Un(t,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!e[xg(o,a)]);return s!==void 0?e[xg(o,s)][i]:void 0}function TI(t,e,n){return e[xg(t,n.currentContextId)]}function Io(t,e){let[n,r,o]=Un(t,e);return[xg(n,e&&e.currentContextId),r,o]}function xg(t,e){return e?`${t}-${e}`:t}function Un(t,e){if(t==="")return["",0,void 0];let n=e!=null&&e.parseNodeNameCache!=null;if(n){let i=e.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&e.parseNodeNameCache.set(t,o),o}function Nf(t,e,n){let r=g("pad",t,e,n);if(r==="explicit"){r=g("explicitPaddings",t,e,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Co(t){return t.kept?t:Jn(t)}var II={};He(II,{json:()=>LK});var LK=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var CI={};He(CI,{json:()=>$K});var $K=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var DI={};He(DI,{json:()=>VK});var VK=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var NI={};He(NI,{json:()=>jK});var jK=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var AI={};He(AI,{json:()=>BK});var BK=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var MI={};He(MI,{json:()=>HK});var HK=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var kI={};He(kI,{json:()=>UK});var UK=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var OI={};He(OI,{json:()=>zK});var zK=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var RI={};He(RI,{json:()=>GK});var GK=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var PI={};He(PI,{json:()=>WK});var WK=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var FI={};He(FI,{json:()=>qK});var qK=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var LI={};He(LI,{json:()=>KK});var KK=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var $I={};He($I,{json:()=>YK});var YK=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var VI={};He(VI,{json:()=>XK});var XK=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var jI={};He(jI,{json:()=>ZK});var ZK=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var BI={};He(BI,{json:()=>QK});var QK=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var HI={};He(HI,{json:()=>JK});var JK=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var UI={};He(UI,{json:()=>eY});var eY=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var zI={};He(zI,{json:()=>tY});var tY=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var Af=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[II,CI,DI,NI,AI,MI,kI,OI,RI,PI,FI,LI,$I,VI,jI,BI,HI,UI,zI],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(e,n={}){let r=e.node,o=[],i=[],s=[],a=r.reduce((x,T)=>(x[T.name]=this.mapNode(T),T.op.startsWith("Placeholder")?o.push(x[T.name]):T.op==="Const"?i.push(x[T.name]):(T.input==null||T.input.length===0)&&s.push(x[T.name]),x),{}),l=[],c=[],u={},f={};n!=null&&(u=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));let p=Object.keys(a);p.forEach(x=>{let T=a[x];T.inputNames.forEach((D,P)=>{let[A,,M]=Io(D),$=a[A];if($.outputs!=null){let L=$.outputs.indexOf(M);if(L!==-1){let H=`${A}:${L}`;T.inputNames[P]=H}}T.inputs.push($),$.children.push(T)})}),Object.keys(f).length===0?p.forEach(x=>{let T=a[x];T.children.length===0&&c.push(T)}):Object.keys(f).forEach(x=>{let[T]=Io(x),D=a[T];D!=null&&(D.signatureKey=f[x],c.push(D))}),Object.keys(u).length>0?Object.keys(u).forEach(x=>{let[T]=Io(x),D=a[T];D&&(D.signatureKey=u[x],l.push(D))}):l=o;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((x,T)=>(x[T.signature.name]=this.mapFunction(T),x),{}));let w={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(w.initNodes=s),w}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){let n=Sg(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=Tg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Tg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=kg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=Cg(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=Cg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Mg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Mg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Ig(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ig(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Rg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Rg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Ag(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ag(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Og(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Og(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Dg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Dg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Ng(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ng(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=J2(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=J2(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(e){let n=e.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((f,p)=>(f[p.name]=this.mapNode(p),p.op==="Const"&&o.push(f[p.name]),f),{}));let s=[],a=[];e.signature.inputArg.forEach(f=>{let[p]=Io(f.name),m={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:GI(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,s.push(m),i[p]=m}),Object.keys(i).forEach(f=>{let p=i[f];p.inputNames.forEach((m,w)=>{let[x,,T]=Io(m),D=i[x];if(D.outputs!=null){let P=D.outputs.indexOf(T);if(P!==-1){let A=`${x}:${P}`;p.inputNames[w]=A}}p.inputs.push(D),D.children.push(p)})});let c=e.ret;e.signature.outputArg.forEach(f=>{let[p,m]=Io(c[f.name]),w=i[p];w!=null&&(w.defaultOutput=m,a.push(w))});let u=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}};function nY(t){let e=J().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function eF(t,e){let n=Array.isArray(t)?String.fromCharCode.apply(null,t):nY(t);return e?n:n.toLowerCase()}function Tg(t,e,n,r=!1){let o=t[e];return o!=null?eF(o.s,r):n}function Ig(t,e,n){let r=t[e];return r?r.b:n}function Cg(t,e,n){let r=t[e]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function GI(t){switch(typeof t=="string"&&(t=gr[t]),t){case gr.DT_FLOAT:case gr.DT_HALF:return"float32";case gr.DT_INT32:case gr.DT_INT64:case gr.DT_INT8:case gr.DT_UINT8:return"int32";case gr.DT_BOOL:return"bool";case gr.DT_DOUBLE:return"float32";case gr.DT_STRING:return"string";case gr.DT_COMPLEX64:case gr.DT_COMPLEX128:return"complex64";default:return null}}function J2(t,e,n){let r=t[e];return r&&r.func?r.func.name:n}function Dg(t,e,n){let r=t[e];return r&&r.type?GI(r.type):n}function Ng(t,e,n){let r=t[e];return r&&r.list&&r.list.type?r.list.type.map(o=>GI(o)):n}function tF(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Ag(t,e,n){let r=t[e];return r&&r.shape?tF(r.shape):n}function Mg(t,e,n){let r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function kg(t,e,n,r=!1){let o=t[e];return o&&o.list&&o.list.s?o.list.s.map(i=>eF(i,r)):n}function Og(t,e,n){let r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(o=>tF(o)):n}function Rg(t,e,n){let r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var Pg=class{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(e){return Pt(e,this.tensorMap,this.context)}getAttr(e,n){let r=this.node.rawAttrs[e];if(r.tensor!=null)return Pt(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Cg(this.node.rawAttrs,e,n);if(r.s!=null)return Tg(this.node.rawAttrs,e,n);if(r.b!=null)return Ig(this.node.rawAttrs,e,n);if(r.shape!=null)return Ag(this.node.rawAttrs,e,n);if(r.type!=null)return Dg(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Mg(this.node.rawAttrs,e,n);if(r.list.s!=null)return kg(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Og(this.node.rawAttrs,e,n);if(r.list.b!=null)return Rg(this.node.rawAttrs,e,n);if(r.list.type!=null)return Ng(this.node.rawAttrs,e,n)}return n}};var Ve={};He(Ve,{OP_SCOPE_SUFFIX:()=>qm,abs:()=>Wt,acos:()=>JS,acosh:()=>ex,add:()=>Z,addN:()=>tx,all:()=>nx,any:()=>rx,argMax:()=>Gd,argMin:()=>ox,asin:()=>ix,asinh:()=>sx,atan:()=>ax,atan2:()=>lx,atanh:()=>cx,avgPool:()=>Kd,avgPool3d:()=>px,basicLSTMCell:()=>hx,batchNorm:()=>Ni,batchNorm2d:()=>mx,batchNorm3d:()=>gx,batchNorm4d:()=>yx,batchToSpaceND:()=>Yd,bincount:()=>Xd,bitwiseAnd:()=>vx,booleanMaskAsync:()=>yP,broadcastArgs:()=>bx,broadcastTo:()=>Xa,buffer:()=>gn,cast:()=>le,ceil:()=>wx,clipByValue:()=>_x,clone:()=>Jn,complex:()=>$n,concat:()=>rt,concat1d:()=>Ex,concat2d:()=>Sx,concat3d:()=>xx,concat4d:()=>Tx,conv1d:()=>Ix,conv2d:()=>Ai,conv2dTranspose:()=>Cx,conv3d:()=>Dx,conv3dTranspose:()=>Nx,cos:()=>Ax,cosh:()=>Mx,cosineWindow:()=>jc,cumprod:()=>kx,cumsum:()=>Ox,denseBincount:()=>Rx,depthToSpace:()=>Px,depthwiseConv2d:()=>Za,diag:()=>Fx,dilation2d:()=>Lx,div:()=>Ce,divNoNan:()=>$x,dot:()=>Vx,dropout:()=>xP,einsum:()=>Mi,elu:()=>Zd,enclosingPowerOfTwo:()=>dg,ensureShape:()=>jx,equal:()=>ms,erf:()=>Bx,euclideanNorm:()=>Ux,exp:()=>Dr,expandDims:()=>nn,expm1:()=>zx,eye:()=>Qd,fft:()=>rl,fill:()=>wo,floor:()=>Jd,floorDiv:()=>zd,fused:()=>fg,gather:()=>ef,gatherND:()=>EP,greater:()=>Xo,greaterEqual:()=>tf,ifft:()=>_s,imag:()=>Ri,image:()=>Es,inTopKAsync:()=>TP,irfft:()=>bf,isFinite:()=>Gx,isInf:()=>Wx,isNaN:()=>qx,leakyRelu:()=>nf,less:()=>Lc,lessEqual:()=>Ja,linalg:()=>b2,linspace:()=>Kx,localResponseNormalization:()=>Yx,log:()=>Zo,log1p:()=>rf,logSigmoid:()=>Xx,logSoftmax:()=>Zx,logSumExp:()=>sf,logicalAnd:()=>ys,logicalNot:()=>af,logicalOr:()=>lf,logicalXor:()=>Qx,losses:()=>w2,lowerBound:()=>Jx,matMul:()=>Ne,max:()=>_o,maxPool:()=>cf,maxPool3d:()=>eT,maxPoolWithArgmax:()=>tT,maximum:()=>uf,mean:()=>vs,meshgrid:()=>nT,min:()=>Fc,minimum:()=>bs,mirrorPad:()=>df,mod:()=>rT,moments:()=>oT,movingAverage:()=>vP,mul:()=>V,multiRNNCell:()=>iT,multinomial:()=>sT,neg:()=>rn,norm:()=>gs,notEqual:()=>ff,oneHot:()=>ws,ones:()=>So,onesLike:()=>aT,op:()=>b,outerProduct:()=>lT,pad:()=>Nr,pad1d:()=>cT,pad2d:()=>uT,pad3d:()=>pf,pad4d:()=>dT,pool:()=>fT,pow:()=>Yo,prelu:()=>mf,print:()=>Ud,prod:()=>pT,raggedGather:()=>hT,raggedRange:()=>mT,raggedTensorToTensor:()=>gT,rand:()=>yT,randomGamma:()=>DT,randomNormal:()=>gf,randomStandardNormal:()=>NT,randomUniform:()=>nl,randomUniformInt:()=>AT,range:()=>Yr,real:()=>Qo,reciprocal:()=>MT,relu:()=>Pi,relu6:()=>yf,reshape:()=>R,reverse:()=>hr,reverse1d:()=>kT,reverse2d:()=>OT,reverse3d:()=>RT,reverse4d:()=>PT,rfft:()=>ol,round:()=>vf,rsqrt:()=>FT,scalar:()=>ne,scatterND:()=>bP,searchSorted:()=>$c,selu:()=>LT,separableConv2d:()=>$T,setdiff1dAsync:()=>VT,sigmoid:()=>er,sign:()=>jT,signal:()=>v2,sin:()=>BT,sinh:()=>HT,slice:()=>De,slice1d:()=>UT,slice2d:()=>zT,slice3d:()=>GT,slice4d:()=>WT,softmax:()=>qT,softplus:()=>of,spaceToBatchND:()=>hf,sparse:()=>_2,sparseToDense:()=>_P,spectral:()=>y2,split:()=>Jo,sqrt:()=>Bn,square:()=>qt,squaredDifference:()=>wf,squeeze:()=>Hn,stack:()=>Cn,step:()=>_f,stridedSlice:()=>KT,string:()=>E2,sub:()=>re,sum:()=>Ge,tan:()=>YT,tanh:()=>Pc,tensor:()=>tn,tensor1d:()=>Kt,tensor2d:()=>xo,tensor3d:()=>Ef,tensor4d:()=>XT,tensor5d:()=>ZT,tensor6d:()=>QT,tensorScatterUpdate:()=>eI,tile:()=>Oi,topk:()=>tI,transpose:()=>il,truncatedNormal:()=>nI,unique:()=>rI,unsortedSegmentSum:()=>oI,unstack:()=>mr,upperBound:()=>iI,variable:()=>sI,where:()=>pr,whereAsync:()=>xf,zeros:()=>Eo,zerosLike:()=>$t});var nF=(t,e,n,r=Ve)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(g("a",t,e,n),g("b",t,e,n))];case"AddN":return[r.addN(g("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(g("a",t,e,n),g("b",t,e,n))];case"Mul":return[r.mul(g("a",t,e,n),g("b",t,e,n))];case"RealDiv":case"Div":return[r.div(g("a",t,e,n),g("b",t,e,n))];case"DivNoNan":return[r.divNoNan(g("a",t,e,n),g("b",t,e,n))];case"FloorDiv":return[r.floorDiv(g("a",t,e,n),g("b",t,e,n))];case"Sub":return[r.sub(g("a",t,e,n),g("b",t,e,n))];case"Minimum":return[r.minimum(g("a",t,e,n),g("b",t,e,n))];case"Maximum":return[r.maximum(g("a",t,e,n),g("b",t,e,n))];case"Pow":return[r.pow(g("a",t,e,n),g("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var rF=(t,e,n,r=Ve)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(g("x",t,e,n))];case"Acos":return[r.acos(g("x",t,e,n))];case"Acosh":return[r.acosh(g("x",t,e,n))];case"Asin":return[r.asin(g("x",t,e,n))];case"Asinh":return[r.asinh(g("x",t,e,n))];case"Atan":return[r.atan(g("x",t,e,n))];case"Atan2":return[r.atan2(g("x",t,e,n),g("y",t,e,n))];case"Atanh":return[r.atanh(g("x",t,e,n))];case"Ceil":return[r.ceil(g("x",t,e,n))];case"Complex":return[r.complex(g("real",t,e,n),g("imag",t,e,n))];case"Cos":return[r.cos(g("x",t,e,n))];case"Cosh":return[r.cosh(g("x",t,e,n))];case"Elu":return[r.elu(g("x",t,e,n))];case"Erf":return[r.erf(g("x",t,e,n))];case"Exp":return[r.exp(g("x",t,e,n))];case"Expm1":return[r.expm1(g("x",t,e,n))];case"Floor":return[r.floor(g("x",t,e,n))];case"Log":return[r.log(g("x",t,e,n))];case"Log1p":return[r.log1p(g("x",t,e,n))];case"Imag":return[r.imag(g("x",t,e,n))];case"Neg":return[r.neg(g("x",t,e,n))];case"Reciprocal":return[r.reciprocal(g("x",t,e,n))];case"Real":return[r.real(g("x",t,e,n))];case"Relu":return[r.relu(g("x",t,e,n))];case"Round":return[r.round(g("x",t,e,n))];case"Selu":return[r.selu(g("x",t,e,n))];case"Sigmoid":return[r.sigmoid(g("x",t,e,n))];case"Sin":return[r.sin(g("x",t,e,n))];case"Sign":return[r.sign(g("x",t,e,n))];case"Sinh":return[r.sinh(g("x",t,e,n))];case"Softplus":return[r.softplus(g("x",t,e,n))];case"Sqrt":return[r.sqrt(g("x",t,e,n))];case"Square":return[r.square(g("x",t,e,n))];case"Tanh":return[r.tanh(g("x",t,e,n))];case"Tan":return[r.tan(g("x",t,e,n))];case"ClipByValue":return[r.clipByValue(g("x",t,e,n),g("clipValueMin",t,e,n),g("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(g("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Pt(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(g("x",t,e,n),g("alpha",t,e,n))];case"Prelu":return[r.prelu(g("x",t,e,n),g("alpha",t,e,n))];case"IsNan":return[r.isNaN(Pt(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Pt(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Pt(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function yr(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){j.assert(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=e[r];j.assert(o<0||i<0||o===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function oF(t){return!(typeof t=="number"||t.some(e=>e<0))}function Uc(t,e,n){let r=Fg(t,n),o=!oF(r);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&e.forEach(i=>{r=Fg(i.shape,r)}),!oF(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Fg(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);let n=[];for(let r=0;r<t.length;++r){let o=t[r],i=e[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=o>=0?o:i}return n}var Lg=class{constructor(e,n,r,o,i,s,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ne(0),jn(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),yr(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,jn(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,o)=>this.write(r,n[o]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return tn([],[0].concat(this.elementShape));let r=this.readMany(e);return yr(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Cn(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return tn([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return yr(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),rt(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,mr(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];te(()=>{n=R(n,[1,r,i]);for(let l=0;l<e.length;++l){let u=[0,l===0?0:o[l-1],0],f=[1,e[l],i];s[l]=R(De(n,u,f),this.elementShape)}return s});let a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,s)}};var zc=class t{get id(){return this.idTensor.id}constructor(e,n,r,o=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);yr(n,i.shape,"TensorList shape mismatch: "),jn(i)}),this.idTensor=ne(0),this.maxNumElements=o,jn(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);yr(e,this.elementShape,"TensorList shape mismatch: ");let o=Uc(this.elementShape,this.tensors,e);return te(()=>{let i=this.tensors.map(s=>R(s,o));return Cn(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Uc(this.elementShape,this.tensors,e),o=this.tensors.pop();return o.kept=!1,yr(o.shape,e,"TensorList shape mismatch: "),R(o,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(yr(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");jn(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let n=new t([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);yr(this.tensors[e].shape,n,"TensorList shape mismatch: ");let o=Uc(this.elementShape,this.tensors,n);return R(this.tensors[e],o)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);yr(this.elementShape,n.shape,"TensorList shape mismatch: "),jn(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);yr(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let o=Uc(this.elementShape,this.tensors,r);return e.length===0?tn([],[0].concat(o)):te(()=>{let i=e.map(s=>R(this.tensors[s],o));return Cn(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);yr(this.elementShape,n,"TensorList shape mismatch: ");let r=Uc(this.elementShape,this.tensors,n);return this.size()===0?tn([],[0].concat(r)):te(()=>{let o=this.tensors.map(i=>R(i,r));return rt(o,0)})}};function iF(t,e,n){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);let o=t.shape.slice(1);yr(o,e,"TensorList shape mismatch: ");let i=mr(t);return new zc(i,e,r)}function sF(t,e,n,r){return new zc([],t,e,r)}function aF(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let o=Math.max(...e);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new zc([],n,t.dtype,r),s=mr(t,0);return e.forEach((a,l)=>{i.setItem(a,s[l])}),i}function lF(t,e,n){let r=0,o=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=Fg(i,n),a=r===0?0:t.size/r,l=te(()=>{let u=[];t=R(t,[1,r,a]);for(let f=0;f<e.length;++f){let m=[0,f===0?0:o[f-1],0],w=[1,e[f],a];u[f]=R(De(t,m,w),s)}return t.dispose(),u}),c=new zc([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var cF=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{let r=g("thenBranch",t,e,n),o=g("elseBranch",t,e,n),i=g("cond",t,e,n),s=g("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=g("body",t,e,n),o=g("cond",t,e,n),i=g("args",t,e,n),s=await n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id),l=await s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let f=c.map(m=>m.id);u.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});let p=await n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=g("pred",t,e,n);return[Co(r)]}case"Switch":{let r=g("pred",t,e,n),o=g("data",t,e,n);return o.kept||(o=Co(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>Pt(o,e,n)!==void 0);if(r){let o=Pt(r,e,n);return[Co(o)]}return}case"Enter":{let r=g("frameName",t,e,n),o=g("tensor",t,e,n);return n.enterFrame(r),[Co(o)]}case"Exit":{let r=g("tensor",t,e,n);return n.exitFrame(),[Co(r)]}case"NextIteration":{let r=g("tensor",t,e,n);return n.nextIteration(),[Co(r)]}case"TensorArrayV3":{let r=g("size",t,e,n),o=g("dtype",t,e,n),i=g("elementShape",t,e,n),s=g("dynamicSize",t,e,n),a=g("clearAfterRead",t,e,n),l=g("identicalElementShapes",t,e,n),c=g("name",t,e,n),u=new Lg(c,o,r,i,l,s,a);return n.addTensorArray(u),[u.idTensor,ne(1)]}case"TensorArrayWriteV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("dtype",t,e,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id),i=g("dtype",t,e,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=g("tensorArrayId",t,e,n),o=g("tensor",t,e,n),i=g("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return[ne(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=g("indices",t,e,n),o=g("tensor",t,e,n),i=g("elementShape",t,e,n),s=g("numElements",t,e,n),a=aF(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=g("elementShape",t,e,n),o=g("elementDType",t,e,n),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=g(i,t,e,n),a=t.op==="TensorListReserve"?-1:s,l=sF(r,o,s,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=g("tensorListId",t,e,n),o=g("indices",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=g("numElements",t,e,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=iF(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id),i=g("dtype",t,e,n),s=g("elementShape",t,e,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=g("tensorListId",t,e,n),o=g("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("lengths",t,e,n),s=lF(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id);return[ne(o.size(),"int32")]}case"TensorListResize":{let r=g("tensorListId",t,e,n),o=g("size",t,e,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};function uF(t,e,n){let[r,o]=g("fusedOps",t,e,n),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=g("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=g("strides",t,e,n),f=Nf(t,e,n),p=g("dataFormat",t,e,n).toUpperCase(),m=g("dilations",t,e,n),[w,x]=g("args",t,e,n);s&&(x=w,w=void 0);let T=g("leakyreluAlpha",t,e,n);return{stride:u,pad:f,dataFormat:p,dilations:m,biasArg:w,preluArg:x,activationFunc:o,leakyreluAlpha:T}}var dF=(t,e,n,r=Ve)=>{switch(t.op){case"Conv1D":{let o=g("stride",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilation",t,e,n);return[r.conv1d(g("x",t,e,n),g("filter",t,e,n),o,i,s,a)]}case"Conv2D":{let o=g("strides",t,e,n),i=Nf(t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv2d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=uF(t,e,n);return[r.fused.conv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=uF(t,e,n);return[r.fused.depthwiseConv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=g("outputShape",t,e,n),i=g("strides",t,e,n),s=Nf(t,e,n);return[r.conv2dTranspose(g("x",t,e,n),g("filter",t,e,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=g("strides",t,e,n),i=Nf(t,e,n),s=g("dilations",t,e,n),a=g("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(g("input",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv3d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n),a=g("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dilations",t,e,n),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(g("x",t,e,n),g("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var fF=(t,e,n,r=Ve)=>{switch(t.op){case"Fill":{let o=g("shape",t,e,n),i=g("dtype",t,e,n),s=g("value",t,e,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("num",t,e,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=g("logits",t,e,n),i=g("numSamples",t,e,n),s=g("seed",t,e,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=g("indices",t,e,n),i=g("depth",t,e,n),s=g("onValue",t,e,n),a=g("offValue",t,e,n),l=g("dtype",t,e,n);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(g("shape",t,e,n),g("dtype",t,e,n))];case"OnesLike":return[r.onesLike(g("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(g("shape",t,e,n),g("dtype",t,e,n),g("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("seed",t,e,n))];case"Range":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("step",t,e,n);return[r.range(o,i,s,g("dtype",t,e,n))]}case"TruncatedNormal":{let o=g("shape",t,e,n),i=g("mean",t,e,n),s=g("stdDev",t,e,n),a=g("seed",t,e,n);return[r.truncatedNormal(o,i,s,g("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(g("shape",t,e,n),g("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function WI(t,e,n){let r=g("boxes",t,e,n),o=g("scores",t,e,n),i=g("maxOutputSize",t,e,n),s=g("iouThreshold",t,e,n),a=g("scoreThreshold",t,e,n),l=g("softNmsSigma",t,e,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var pF=async(t,e,n,r,o=Ve)=>{switch(t.op){case"NonMaxSuppressionV5":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=WI(t,e,n),f=await o.image.nonMaxSuppressionWithScoreAsync(i,s,a,l,c,u);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(t,e,n),u=g("padToMaxOutputSize",t,e,n),f=await o.image.nonMaxSuppressionPaddedAsync(i,s,a,l,c,u);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(t,e,n);return[await o.image.nonMaxSuppressionAsync(i,s,a,l,c)]}case"Where":{let i=o.cast(g("condition",t,e,n),"bool"),s=[await o.whereAsync(i)];return i.dispose(),s}case"ListDiff":return o.setdiff1dAsync(g("x",t,e,n),g("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};var hF=(t,e,n,r=Ve)=>{switch(t.op){case"LowerBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=g("x",t,e,n),i=g("k",t,e,n),s=g("sorted",t,e,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.upperBound(o,i)]}case"Unique":{let o=g("x",t,e,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=g("x",t,e,n),i=g("axis",t,e,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var mF=(t,e,n,r=Ve)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":let o=g("default",t,e,n);return[Pt(t.name,e,n)||o];case"Placeholder":return[Pt(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=g("x",t,e,n);return[Co(u)]}case"IdentityN":return g("x",t,e,n).map(u=>Co(u));case"Snapshot":let i=g("x",t,e,n);return[Co(i)];case"Shape":return[r.tensor1d(g("x",t,e,n).shape,"int32")];case"ShapeN":return g("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(g("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(g("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=g("x",t,e,n),a=g("data",t,e,n),l=g("message",t,e,n),c=g("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var $g=class{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ne(0),this.tensorMap=new Map,jn(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ne(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);let r=await e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),te(()=>{let o=mr(n),i=r.length,s=o.length;j.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];jn(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);let r=await e.data();return te(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return Cn(o)})}findWithDefault(e,n){let r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var gF=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=g("keyDType",t,e,n),s=g("valueDType",t,e,n),a=new $g(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("values",t,e,n);return[await r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("defaultValue",t,e,n);return[await r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=g("tableHandle",t,e,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var yF=(t,e,n,r=Ve)=>{switch(t.op){case"ResizeBilinear":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=g("image",t,e,n),i=g("boxes",t,e,n),s=g("boxInd",t,e,n),a=g("cropSize",t,e,n),l=g("method",t,e,n),c=g("extrapolationValue",t,e,n);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=g("images",t,e,n),i=g("transforms",t,e,n),s=g("outputShape",t,e,n),a=g("fillValue",t,e,n),l=g("interpolation",t,e,n),c=g("fillMode",t,e,n);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var vF=(t,e,n,r=Ve)=>{switch(t.op){case"Equal":return[r.equal(g("a",t,e,n),g("b",t,e,n))];case"NotEqual":return[r.notEqual(g("a",t,e,n),g("b",t,e,n))];case"Greater":return[r.greater(g("a",t,e,n),g("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(g("a",t,e,n),g("b",t,e,n))];case"Less":return[r.less(g("a",t,e,n),g("b",t,e,n))];case"LessEqual":return[r.lessEqual(g("a",t,e,n),g("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(g("a",t,e,n),g("b",t,e,n))];case"LogicalNot":return[r.logicalNot(g("a",t,e,n))];case"LogicalOr":return[r.logicalOr(g("a",t,e,n),g("b",t,e,n))];case"Select":case"SelectV2":return[r.where(g("condition",t,e,n),g("a",t,e,n),g("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var bF=(t,e,n,r=Ve)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(g("a",t,e,n),g("b",t,e,n),g("transposeA",t,e,n),g("transposeB",t,e,n))];case"Einsum":return[r.einsum(g("equation",t,e,n),...g("tensors",t,e,n))];case"Transpose":return[r.transpose(g("x",t,e,n),g("perm",t,e,n))];case"_FusedMatMul":let[o,i]=g("fusedOps",t,e,n),s=o==="biasadd",a=i==="prelu",l=g("numArgs",t,e,n),c=g("leakyreluAlpha",t,e,n);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,f]=g("args",t,e,n);return[r.fused.matMul({a:g("a",t,e,n),b:g("b",t,e,n),transposeA:g("transposeA",t,e,n),transposeB:g("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(g("a",t,e,n),g("numLower",t,e,n),g("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var wF=(t,e,n,r=Ve)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(g("x",t,e,n),g("axis",t,e,n),g("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(g("x",t,e,n),g("radius",t,e,n),g("bias",t,e,n),g("alpha",t,e,n),g("beta",t,e,n))];case"Softmax":return[r.softmax(g("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var _F=(t,e,n,r=Ve)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(g("paramsNestedSplits",t,e,n),g("paramsDenseValues",t,e,n),g("indices",t,e,n),g("outputRaggedRank",t,e,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(g("starts",t,e,n),g("limits",t,e,n),g("splits",t,e,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(g("shape",t,e,n),g("values",t,e,n),g("defaultValue",t,e,n),g("rowPartitionTensors",t,e,n),g("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var EF=(t,e,n,r=Ve)=>{switch(t.op){case"Max":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.max(g("x",t,e,n),a,l)]}case"Mean":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.mean(g("x",t,e,n),a,l)]}case"Min":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.min(g("x",t,e,n),a,l)]}case"Sum":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.sum(g("x",t,e,n),a,l)]}case"All":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.all(g("x",t,e,n),a,l)]}case"Any":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.any(g("x",t,e,n),a,l)]}case"ArgMax":{let a=g("axis",t,e,n);return[r.argMax(g("x",t,e,n),a)]}case"ArgMin":{let a=g("axis",t,e,n);return[r.argMin(g("x",t,e,n),a)]}case"Prod":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.prod(g("x",t,e,n),a,l)]}case"Cumprod":{let a=g("axis",t,e,n),l=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumprod(g("x",t,e,n),a,l,c)]}case"Cumsum":{let a=g("axis",t,e,n),l=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumsum(g("x",t,e,n),a,l,c)]}case"Bincount":let o=g("x",t,e,n),i=g("weights",t,e,n),s=g("size",t,e,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=g("x",t,e,n),l=g("weights",t,e,n),c=g("size",t,e,n),u=g("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var SF=(t,e,n,r=Ve)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=g("n",t,e,n),i=g("axis",t,e,n),s=g("tensors",t,e,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=g("axis",t,e,n),i=g("batchDims",t,e,n),s=g("x",t,e,n),a=g("indices",t,e,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=g("dims",t,e,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=g("x",t,e,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=g("axis",t,e,n),i=g("x",t,e,n);return[r.reverse(i,o)]}case"Slice":{let o=g("begin",t,e,n),i=g("size",t,e,n);return[r.slice(g("x",t,e,n),o,i)]}case"StridedSlice":{let o=g("begin",t,e,n),i=g("end",t,e,n),s=g("strides",t,e,n),a=g("beginMask",t,e,n),l=g("endMask",t,e,n),c=g("ellipsisMask",t,e,n),u=g("newAxisMask",t,e,n),f=g("shrinkAxisMask",t,e,n),p=g("x",t,e,n);return[r.stridedSlice(p,o,i,s,a,l,c,u,f)]}case"Pack":return te(()=>{let o=g("axis",t,e,n),i=g("tensors",t,e,n),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=j.arraysEqual(c.shape,s);if(!u&&!j.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=g("axis",t,e,n),i=g("tensor",t,e,n);return r.unstack(i,o)}case"Tile":{let o=g("reps",t,e,n);return[r.tile(g("x",t,e,n),o)]}case"Split":case"SplitV":{let o=g("axis",t,e,n),i=g("numOrSizeSplits",t,e,n),s=g("x",t,e,n);return r.split(s,i,o)}case"ScatterNd":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("shape",t,e,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=g("sparseIndices",t,e,n),i=g("outputShape",t,e,n),s=g("sparseValues",t,e,n),a=g("defaultValue",t,e,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("tensor",t,e,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var xF=(t,e,n,r=Ve)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(g("indices",t,e,n),g("values",t,e,n),g("denseShape",t,e,n),g("defaultValue",t,e,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(g("inputIndices",t,e,n),g("inputShape",t,e,n),g("newShape",t,e,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var TF=(t,e,n,r=Ve)=>{switch(t.op){case"FFT":return[r.fft(g("x",t,e,n))];case"IFFT":return[r.ifft(g("x",t,e,n))];case"RFFT":return[r.rfft(g("x",t,e,n))];case"IRFFT":return[r.irfft(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var IF=(t,e,n,r=Ve)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(g("input",t,e,n),g("pattern",t,e,n),g("rewrite",t,e,n),g("replaceGlobal",t,e,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(g("data",t,e,n),g("dataSplits",t,e,n),g("separator",t,e,n),g("nGramWidths",t,e,n),g("leftPad",t,e,n),g("rightPad",t,e,n),g("padWidth",t,e,n),g("preserveShortSequences",t,e,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(g("input",t,e,n),g("delimiter",t,e,n),g("skipEmpty",t,e,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(g("input",t,e,n),g("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var CF=(t,e,n,r=Ve)=>{switch(t.op){case"Cast":return[r.cast(g("x",t,e,n),g("dtype",t,e,n))];case"ExpandDims":{let o=g("axis",t,e,n);return[r.expandDims(g("x",t,e,n),o)]}case"Squeeze":{let o=g("axis",t,e,n);return[r.squeeze(g("x",t,e,n),o)]}case"Reshape":return[r.reshape(g("x",t,e,n),g("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(g("x",t,e,n),g("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(g("x",t,e,n),g("padding",t,e,n),g("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(g("x",t,e,n),g("padding",t,e,n),g("constantValue",t,e,n))];case"SpaceToBatchND":{let o=g("blockShape",t,e,n),i=g("paddings",t,e,n);return[r.spaceToBatchND(g("x",t,e,n),o,i)]}case"BatchToSpaceND":{let o=g("blockShape",t,e,n),i=g("crops",t,e,n);return[r.batchToSpaceND(g("x",t,e,n),o,i)]}case"DepthToSpace":{let o=g("blockSize",t,e,n),i=g("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(g("x",t,e,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(g("x",t,e,n),g("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(g("s0",t,e,n),g("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function qI(t,e,n,r,o=te){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>nF(s,a,l));case"basic_math":return o(()=>rF(s,a,l));case"control":return cF(s,a,l);case"convolution":return o(()=>dF(s,a,l));case"creation":return o(()=>fF(s,a,l));case"dynamic":return pF(s,a,l);case"evaluation":return o(()=>hF(s,a,l));case"image":return o(()=>yF(s,a,l));case"graph":return o(()=>mF(s,a,l));case"logical":return o(()=>vF(s,a,l));case"matrices":return o(()=>bF(s,a,l));case"normalization":return o(()=>wF(s,a,l));case"ragged":return o(()=>_F(s,a,l));case"reduction":return o(()=>EF(s,a,l));case"slice_join":return o(()=>SF(s,a,l));case"sparse":return o(()=>xF(s,a,l));case"spectral":return o(()=>TF(s,a,l));case"string":return o(()=>IF(s,a,l));case"transformation":return o(()=>CF(s,a,l));case"hash_table":return gF(s,a,l,r);case"custom":let c=Sg(s.op);if(c&&c.customExecutor)return c.customExecutor(new Pg(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return j.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var Mf=class{constructor(e={},n={},r={},o={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}};function KI(t,e,n,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(t).map(p=>Un(p)[0]));r=r||[];let u=new Set(r.map(p=>Un(p.name)[0])),f=[...e];for(;f.length>0;){let p=f.pop();if((Ns(p)||DY(p)||NY(p))&&s==null&&(s=p,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(p.name),n[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(m=>{l.has(m.name)||(l.add(m.name),f.push(m))})}}return{inputs:t,outputs:e,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function DF(t,e){let{usedNodes:n,inputs:r}=e,o=Object.keys(r).map(T=>Un(T)[0]).map(T=>t.nodes[T]),i=t.initNodes||[],s=T=>n.has(typeof T=="string"?T:T.name);function a(T){return[...new Map(T.map(D=>[D.name,D])).values()]}let l=a([...o,...t.weights,...i]).filter(s),c=a([...l,...Object.values(t.nodes)]).filter(s),u=new Map(c.map(T=>[T.name,T])),f={};for(let T of c){f[T.name]=f[T.name]||0;for(let D of T.children)s(D)||(f[D.name]=Number.POSITIVE_INFINITY),f[D.name]=(f[D.name]||0)+1}let p=Object.entries(f).filter(([,T])=>T===0).map(([T])=>T),m=[...p];for(;p.length>0;){let T=p.pop(),D=u.get(T);for(let P of D.children.filter(s))--f[P.name]===0&&(m.push(P.name),p.push(P.name))}let w=m.map(T=>u.get(T)),x=SY(w,l);return xY(x,l),x}function SY(t,e){let n=new Map(t.map(s=>[s.name,s])),r=e.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let l of a.children)!n.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(s=>o.has(s.name))}var Gc=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}};function xY(t,e){let n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let l of a.children.filter(s)){if(!n.has(l.name))throw new Gc(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Gc(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!n.has(l.name))throw new Gc(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Gc(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function NF(t){let e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>Ns(a)?n:l),o=a=>{let l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<t.length;++a){let l=i[a];if(l===n)continue;let c=t[a],u=t[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var TY=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),IY=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),CY=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Ns(t){return TY.has(t.op)}function DY(t){return IY.has(t.op)}function NY(t){return CY.has(t.op)}var kf=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let n=Object.keys(e).map(r=>e[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new t(e.functions[r],this)})}getCompilationKey(e,n){let r=e.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(e,n){let r=KI(e,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(f=>f.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=DF(this.graph,r),l=NF(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;let n=e.clone();return jn(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);let r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(p=>this.graph.nodes[Un(p)[0]]),i=n.map(p=>Un(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},f={};return te(()=>{let p=new Mf(this.weightMap,u,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(D=>{let[P,A]=Un(D,p),M=[];M[A]=e[D],m[P]=M,this.keepIntermediateTensors&&(this.clonedTensorsMap[P]=this.cloneTensorList(M))});let w=this.getFrozenTensorIds(m),{orderedNodes:x,nodeLiveUntilMap:T}=c;for(let D of x){if(m[D.name])continue;let P=qI(D,m,p,this._resourceManager);if(j.isPromise(P))throw new Error(`The execution of the op '${D.op}' returned a promise. Please use model.executeAsync() instead.`);m[D.name]=P,this.keepIntermediateTensors&&(this.clonedTensorsMap[D.name]=this.cloneTensorList(P)),this.checkTensorForDisposalWithNodeLiveUntilInfo(D,m,p,w,s,T.get(D.name))}return this.parent==null&&p.dispose(w),n.map(D=>Pt(D,m,p))})}getFrozenTensorIds(e){let n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(e,n,r,o,i,s,a){if(!(Ns(n)||s.has(e))){for(let l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(let l of n.inputs){if(Ns(l))continue;let c=TI(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let f=a[u.id];f===1?(u.dispose(),delete a[u.id]):f!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,o,i,s){function a(l){return Ns(l)||i.has(l.name)}if(!(Ns(e)||s==null))for(let l of s){if(a(l))continue;let c=TI(l.name,n,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=J().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let s=new Mf(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let a=await this.executeWithControlFlow(e,s,n,r),l=n.map(p=>Pt(p,a,s)),c=l.map(p=>p.id),u=Object.keys(e).map(p=>e[p].id),f=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(p=>{p.forEach(m=>{m&&!m.isDisposed&&!f.has(m.id)&&m.dispose()})}),this.parent==null&&s.dispose(f),l}async executeFunctionAsync(e,n,r){let o=e.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,o){let i=Object.keys(e),s=i.map(M=>this.graph.nodes[Un(M)[0]]),a=r.map(M=>Un(M)[0]),l=new Set(a),c=a.map(M=>this.graph.nodes[M]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:f,dynamicNode:p,syncInputs:m}=KI(e,c,this.weightMap,this._initNodes),w=[...s,...this.graph.weights,...this._initNodes||[]].map(M=>({node:M,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(e).forEach(M=>{let[$,L]=Un(M),H=[];H[L]=e[M],x[$]=H});let T={},D=this.getFrozenTensorIds(x),P={};for(;w.length>0;){let M=this.processStack(s,w,n,x,P,D,l,T,u);await Promise.all(M)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let A=c.filter(M=>!Ns(M)&&!Pt(M.name,x,n)).map(M=>M.name);if(A.length>0){let M="";throw p!=null&&(M=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${A}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${M}`)}return x}processStack(e,n,r,o,i,s,a,l,c){let u=[];for(;n.length>0;){let f=n.pop();r.currentContext=f.contexts;let p="";if(f.node.op==="Enter"&&g("isConstant",f.node,o,r)&&([p]=Io(f.node.name,r)),o[f.node.name]==null){let m=qI(f.node,o,r,this._resourceManager);p||([p]=Io(f.node.name,r));let w=r.currentContext;j.isPromise(m)?u.push(m.then(x=>(o[p]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(x)),r.currentContext=w,this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c),x))):(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c))}else this.processChildNodes(f.node,n,r,o,i,c)}return u}processChildNodes(e,n,r,o,i,s){e.children.forEach(a=>{let[l]=Io(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!Pt(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!Pt(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{let r=e[n],[o]=Un(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);j.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&j.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;let o={};for(let i in e){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=e[i]:o[i]=e[i]}return o}checkInputs(e){let n=Object.keys(e).filter(r=>{let[o]=Un(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{let[r]=Un(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var Vg=class{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}};var AY="?tfjs-format=file",MY="model.json",jg=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=Bc){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Vg}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return j.isPromise(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){let n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=await Xm(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new kf(Af.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let i=Af.Instance.transformGraph(e.modelInitializer);this.initializer=new kf(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){let r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let n=e instanceof Ie?[e]:e,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return e}predict(e,n){let r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){let r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Ie)&&!Array.isArray(e)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];let r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=e[o++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=e[o]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&_t(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function Of(t,e={},n=Bc){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=kY(t));let r=new jg(t,e,n);return await r.load(),r}function kY(t){return t.endsWith("/")||(t=t+"/"),`${t}${MY}${AY}`}var ZF=Jy(MF());var eC=function(t,e){return eC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},eC(t,e)};function QF(t,e){function n(){this.constructor=t}eC(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zn=function(){return zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},zn.apply(this,arguments)};function je(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof n?u:new n(function(f){f(u)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}function Be(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(u[0]===6&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(f){u=[6,f],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([l,c])}}}function Yg(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function nC(t){return je(this,void 0,void 0,function(){var e,n;return Be(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof Ie?[4,To.toPixels(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=Yg(t.width),e.height=Yg(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function JF(t){return je(this,void 0,void 0,function(){var e,n,r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return t instanceof Ie?(e=t.shape.slice(0,2),n=e[0],r=e[1],o=ImageData.bind,[4,To.toPixels(t)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return i=document.createElement("canvas"),s=i.getContext("2d"),i.width=Yg(t.width),i.height=Yg(t.height),s.drawImage(t,0,0),[2,s.getImageData(0,0,i.width,i.height)]}})})}function eL(t){return je(this,void 0,void 0,function(){var e,n;return Be(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,nC(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,To.fromPixels(e,4)]}})})}function Zg(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}function tL(t){var e=t.shape[2],n=Gd(t,2),r=R(n,[-1]);return ws(r,e)}function Bg(t,e){return te(function(){return le(Xo(t,ne(e)),"int32")})}function OY(t,e){var n=e.shape,r=n[0],o=n[1],i=n[2];return te(function(){var s=tL(e),a=nn(Yr(0,i,1,"int32"),1),l=le(Ne(s,a),"int32"),c=R(l,[r,o]),u=Z(c,ne(1,"int32"));return re((function(f,p){return V(f,p)})(u,t),ne(1,"int32"))})}var nL=(function(){function t(e,n){this.model=e,this.outputStride=n;var r=this.model.inputs[0].shape;j.assert(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return t.prototype.predict=function(e){var n=this;return te(function(){var r=n.preprocessInput(le(e,"float32")),o=nn(r,0),i=n.model.predict(o).map(function(a){return Hn(a,[0])}),s=n.nameOutputResults(i);return{heatmapScores:er(s.heatmap),offsets:s.offsets,displacementFwd:s.displacementFwd,displacementBwd:s.displacementBwd,segmentation:s.segmentation,partHeatmaps:s.partHeatmaps,longOffsets:s.longOffsets,partOffsets:s.partOffsets}})},t.prototype.dispose=function(){this.model.dispose()},t})(),RY=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return QF(e,t),e.prototype.preprocessInput=function(n){return te(function(){return re(Ce(n,127.5),1)})},e.prototype.nameOutputResults=function(n){return{offsets:n[0],segmentation:n[1],partHeatmaps:n[2],longOffsets:n[3],heatmap:n[4],displacementFwd:n[5],displacementBwd:n[6],partOffsets:n[7]}},e})(nL),Qg=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Do=Qg.length,Xg=Qg.reduce(function(t,e,n){return t[e]=n,t},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(t){var e=t[0],n=t[1];return[Xg[e],Xg[n]]});function rC(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1],a=n.top,l=n.bottom;return[s/(n.left+n.right+o),i/(a+l+r)]}function rL(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+Do)}}function oL(t,e,n){var r=rL(t.heatmapY,t.heatmapX,t.id,n),o=r.y,i=r.x;return{x:t.heatmapX*e+i,y:t.heatmapY*e+o}}function kF(t,e,n){return t<e?e:t>n?n:t}function OF(t,e){return{x:t.x+e.x,y:t.y+e.y}}function PY(t,e,n){n===void 0&&(n=.3);for(var r=0,o=0,i=0;i<t.length;i++)e.keypoints[i].score>n&&(o+=1,r+=Math.pow(t[i].x-e.keypoints[i].position.x,2)+Math.pow(t[i].y-e.keypoints[i].position.y,2));return o===0?r=1/0:r/=o,r}function FY(t,e,n,r,o,i,s){for(var a=s[0],l=s[1],c=n(t),u=c.y*r+c.x,f=o[Do*(2*u)+e],p=o[Do*(2*u+1)+e],m=t.y+f,w=t.x+p,x=0;x<i;x++){m=Math.min(m,a-1);var T=n({x:w=Math.min(w,l-1),y:m}),D=T.y*r+T.x;m+=f=o[Do*(2*D)+e],w+=p=o[Do*(2*D+1)+e]}return{x:w,y:m}}function iL(t,e,n,r,o,i,s,a,l,c){for(var u=o[0],f=o[1],p=i[0],m=i[1],w=a[0],x=a[1],T=[],D=function(G){return(function(W,K,U,ae){var se=K[0],Oe=K[1],Le=U[0],yt=U[1],St=Math.round(((se+W.y+1)*yt-1)/ae);return{x:Math.round(((Oe+W.x+1)*Le-1)/ae),y:St}})(G,[u,f],[p,m],l)},P=0;P<r;P++){var A=FY(t,P,D,s,e,c,[w,x]);T.push(A)}for(var M=-1,$=1/0,L=0;L<n.length;L++){var H=PY(T,n[L]);H<$&&(M=L,$=H)}return M}function sL(t,e){var n=t[0],r=t[1];return[Math.round((r-1)/e+1),Math.round((n-1)/e+1)]}function aL(t,e,n,r,o,i,s,a,l,c,u){for(var f=s[0],p=s[1],m=t.shape,w=m[0],x=m[1],T=e.shape.slice(0,2),D=T[0],P=T[1],A=R(e,[D,P,2,Do]),M=new Float32Array(u*Do*3).fill(0),$=0;$<n.length;$++)for(var L=$*Do*3,H=n[$],G=0;G<Do;G++){var W=H.keypoints[G],K=L+3*G;M[K]=W.score,M[K+1]=W.position.y,M[K+2]=W.position.x}var U=rC([r,o],[f,p],a),ae=U[0],se=U[1],Oe=tn(M,[u,Do,3]),Le=a.top,yt=a.left,St={variableNames:["segmentation","longOffsets","poses"],outputShape:[w,x],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+Le+", "+se+", "+i+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+yt+", "+ae+", "+i+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+u+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+Do+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+l+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(o-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+Le+", "+se+", "+i+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+yt+", "+ae+", "+i+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+c+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return Bd().compileAndRun(St,[t,A,Oe])}function lL(){return jd()==="webgl"}function LY(t,e,n,r,o,i,s,a,l,c,u,f){var p=s[0],m=s[1];return l===void 0&&(l=.2),c===void 0&&(c=8),u===void 0&&(u=.3),f===void 0&&(f=10),je(this,void 0,void 0,function(){var w,x,T,D,P;return Be(this,function(A){switch(A.label){case 0:return w=n.filter(function(M){return M.score>=l}),lL()?(T=te(function(){var M=aL(t,e,w,r,o,i,[p,m],a,c,u,f),$=Km().makeTensorFromDataId(M.dataId,M.shape,M.dtype);return w.map(function(L,H){return(function(G,W){return te(function(){return le(ms(G,ne(W)),"int32")})})($,H)})}),[4,Promise.all(T.map(function(M){return M.data()}))]):[3,2];case 1:return x=A.sent(),T.forEach(function(M){return M.dispose()}),[3,5];case 2:return[4,t.data()];case 3:return D=A.sent(),[4,e.data()];case 4:P=A.sent(),x=(function(M,$,L,H,G,W,K,U,ae,se){var Oe=K[0],Le=K[1];se===void 0&&(se=5);for(var yt=L.map(function(ri){return new Uint8Array(H*G).fill(0)}),St=U.top,on=U.left,Ut=rC([H,G],[Oe,Le],U),ti=Ut[0],Os=Ut[1],ni=sL([Oe,Le],W)[0],Ar=0;Ar<H;Ar+=1)for(var Mr=0;Mr<G;Mr+=1){var Zr=Ar*G+Mr;if(M[Zr]===1){var kr=iL({x:Mr,y:Ar},$,L,se,[St,on],[ti,Os],ni,[H,G],W,ae);kr>=0&&(yt[kr][Zr]=1)}}return yt})(D,P,w,r,o,i,[p,m],a,c),A.label=5;case 5:return[2,x.map(function(M,$){return{data:M,pose:w[$],width:o,height:r}})]}})})}function $Y(t,e,n,r,o,i,s,a,l,c,u,f,p){var m=a[0],w=a[1];return c===void 0&&(c=.2),u===void 0&&(u=8),f===void 0&&(f=.3),p===void 0&&(p=10),je(this,void 0,void 0,function(){var x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return x=r.filter(function(L){return L.score>=c}),lL()?(D=te(function(){var L=aL(t,e,x,o,i,s,[m,w],l,u,f,p),H=Km().makeTensorFromDataId(L.dataId,L.shape,L.dtype);return x.map(function(G,W){return(function(K,U,ae){return te(function(){return re(V(le(ms(K,ne(ae)),"int32"),Z(U,1)),1)})})(H,n,W)})}),[4,Promise.all(D.map(function(L){return L.data()}))]):[3,2];case 1:return T=$.sent(),D.forEach(function(L){return L.dispose()}),[3,6];case 2:return[4,t.data()];case 3:return P=$.sent(),[4,e.data()];case 4:return A=$.sent(),[4,n.data()];case 5:M=$.sent(),T=(function(L,H,G,W,K,U,ae,se,Oe,Le,yt){var St=se[0],on=se[1];yt===void 0&&(yt=5);for(var Ut=W.map(function(gl){return new Int32Array(K*U).fill(-1)}),ti=Oe.top,Os=Oe.left,ni=rC([K,U],[St,on],Oe),Ar=ni[0],Mr=ni[1],Zr=sL([St,on],ae)[0],kr=0;kr<K;kr+=1)for(var ri=0;ri<U;ri+=1){var $i=kr*U+ri;if(L[$i]===1){var Rs=iL({x:ri,y:kr},H,W,yt,[ti,Os],[Ar,Mr],Zr,[K,U],ae,Le);Rs>=0&&(Ut[Rs][$i]=G[$i])}}return Ut})(P,A,M,x,o,i,s,[m,w],l,u),$.label=6;case 6:return[2,T.map(function(L,H){return{pose:x[H],data:L,height:o,width:i}})]}})})}function YI(t){return Math.floor(t/2)}var VY=(function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(YI(e),e);)this.exchange(e,YI(e)),e=YI(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t})();function jY(t,e,n,r,o,i){for(var s=i.shape,a=s[0],l=s[1],c=!0,u=Math.max(n-o,0),f=Math.min(n+o+1,a),p=u;p<f;++p){for(var m=Math.max(r-o,0),w=Math.min(r+o+1,l),x=m;x<w;++x)if(i.get(p,x,t)>e){c=!1;break}if(!c)break}return c}var cL=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(t){var e=t[0],n=t[1];return[Xg[e],Xg[n]]}),XI=cL.map(function(t){return t[1]}),RF=cL.map(function(t){return t[0]});function ZI(t,e,n,r){return{y:kF(Math.round(t.y/e),0,n-1),x:kF(Math.round(t.x/e),0,r-1)}}function PF(t,e,n,r,o,i,s,a){a===void 0&&(a=2);for(var l=r.shape,c=l[0],u=l[1],f=(function(P,A,M){var $=M.shape[2]/2;return{y:M.get(A.y,A.x,P),x:M.get(A.y,A.x,$+P)}})(t,ZI(e.position,i,c,u),s),p=OF(e.position,f),m=0;m<a;m++){var w=ZI(p,i,c,u),x=rL(w.y,w.x,n,o);p=OF({x:w.x*i,y:w.y*i},{x:x.x,y:x.y})}var T=ZI(p,i,c,u),D=r.get(T.y,T.x,n);return{position:p,part:Qg[n],score:D}}function BY(t,e,n,r,o,i){var s=e.shape[2],a=XI.length,l=new Array(s),c=t.part,u=t.score,f=oL(c,r,n);l[c.id]={score:u,part:Qg[c.id],position:f};for(var p=a-1;p>=0;--p){var m=XI[p],w=RF[p];l[m]&&!l[w]&&(l[w]=PF(p,l[m],w,e,n,r,i))}for(p=0;p<a;++p)m=RF[p],w=XI[p],l[m]&&!l[w]&&(l[w]=PF(p,l[m],w,e,n,r,o));return l}function uL(t,e,n,r){var o=n.x,i=n.y;return t.some(function(s){var a,l,c,u,f,p,m=s.keypoints[r].position;return a=i,l=o,c=m.y,u=m.x,(f=c-a)*f+(p=u-l)*p<=e})}function HY(t,e,n){var r=n.reduce(function(o,i,s){var a=i.position,l=i.score;return uL(t,e,a,s)||(o+=l),o},0);return r/n.length}function Hg(t,e,n,r,o,i,s,a){s===void 0&&(s=.5),a===void 0&&(a=20);for(var l=[],c=(function(w,x,T){for(var D=T.shape,P=D[0],A=D[1],M=D[2],$=new VY(P*A*M,function(K){return K.score}),L=0;L<P;++L)for(var H=0;H<A;++H)for(var G=0;G<M;++G){var W=T.get(L,H,G);W<w||jY(G,W,L,H,x,T)&&$.enqueue({score:W,part:{heatmapY:L,heatmapX:H,id:G}})}return $})(s,1,t),u=a*a;l.length<i&&!c.empty();){var f=c.dequeue();if(!uL(l,u,oL(f.part,o,e),f.part.id)){var p=BY(f,t,e,o,n,r),m=HY(l,u,p);l.push({keypoints:p,score:m})}}return l}var Rf,UY=[-123.15,-115.9,-103.06],zY=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return QF(e,t),e.prototype.preprocessInput=function(n){return Z(n,UY)},e.prototype.nameOutputResults=function(n){var r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5];return{offsets:a,segmentation:n[6],partHeatmaps:l,longOffsets:s,heatmap:i,displacementFwd:o,displacementBwd:r,partOffsets:n[7]}},e})(nL),FF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",LF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function Pf(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return(function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return(function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]})(t);if(t instanceof Ie)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function $F(t,e){return(function(n,r){return(n-1)%r==0})(t,e)?t:Math.floor(t/e)*e+1}var Ff={low:"low",medium:"medium",high:"high",full:"full"},GY=((Rf={})[Ff.low]=.25,Rf[Ff.medium]=.5,Rf[Ff.high]=.75,Rf[Ff.full]=1,Rf);function Ug(t,e,n){var r=n[0],o=n[1],i=(function(s){if(typeof s=="string"){var a=GY[s];return j.assert(typeof a=="number",function(){return"string value of inputResolution must be one of "+Object.values(Ff).join(",")+" but was "+s+"."}),a}return j.assert(typeof s=="number"&&s<=2&&s>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+s}),s})(t);return[$F(r*i,e),$F(o*i,e)]}function Wc(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],l=n[1],c=r[0],u=c[0],f=c[1],p=r[1],m=p[0],w=p[1];return o===void 0&&(o=!1),te(function(){var x=Es.resizeBilinear(t,[a,l],!0);return o&&(x=er(x)),(function(T,D,P){var A=D[0],M=D[1],$=P[0],L=$[0],H=$[1],G=P[1],W=G[0],K=G[1];return te(function(){var U=nn(T);return Hn(Es.cropAndResize(U,[[L/(A+L+H-1),W/(M+W+K-1),(L+A-1)/(A+L+H-1),(W+M-1)/(M+W+K-1)]],[0],[A,M]),[0])})})(x,[i,s],[[u,f],[m,w]])})}function zg(t,e){var n=e[0],r=e[1],o=Pf(t),i=o[0],s=o[1],a=r/n,l=[0,0,0,0],c=l[0],u=l[1],f=l[2],p=l[3];s/i<a?(c=0,u=0,f=Math.round(.5*(a*i-s)),p=Math.round(.5*(a*i-s))):(c=Math.round(.5*(1/a*s-i)),u=Math.round(.5*(1/a*s-i)),f=0,p=0);var m=te(function(){var w=(function(x){return x instanceof Ie?x:To.fromPixels(x)})(t);return w=pf(w,[[c,u],[f,p],[0,0]]),Es.resizeBilinear(w,[n,r])});return{resized:m,padding:{top:c,left:f,right:p,bottom:u}}}function Gg(t){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function Wg(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],l=n[1],c=(function(u,f,p,m,w){return m===void 0&&(m=0),w===void 0&&(w=0),p===1&&f===1&&m===0&&w===0?u:u.map(function(x){return(function(T,D,P,A,M){return A===void 0&&(A=0),M===void 0&&(M=0),{score:T.score,keypoints:T.keypoints.map(function($){var L=$.score,H=$.part,G=$.position;return{score:L,part:H,position:{x:G.x*P+M,y:G.y*D+A}}})}})(x,f,p,m,w)})})(t,(i+r.top+r.bottom)/a,(s+r.left+r.right)/l,-r.top,-r.left);return o?(function(u,f){return f<=0?u:u.map(function(p){return(function(m,w){return{score:m.score,keypoints:m.keypoints.map(function(x){var T=x.score,D=x.part,P=x.position;return{score:T,part:D,position:{x:w-1-P.x,y:P.y}}})}})(p,f)})})(c,s):c}var VF={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},jF=["MobileNetV1","ResNet50"],BF={MobileNetV1:[8,16,32],ResNet50:[32,16]},HF={MobileNetV1:[.5,.75,1],ResNet50:[1]},UF=[1,2,4],qg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Kg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function zF(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function GF(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius,i=t.minKeypointScore,s=t.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(i<0||i>1)throw new Error("Invalid minKeypointScore "+i+".Should be in range [0.0, 1.0]");if(s<=0||s>20)throw new Error("Invalid refineSteps "+s+".Should be in range [1, 20]")}var dL=(function(){function t(e){this.baseModel=e}return t.prototype.predictForPersonSegmentation=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForPersonSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,partHeatmapLogits:n.partHeatmaps,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,longOffsets:n.longOffsets,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd,partHeatmaps:n.partHeatmaps}},t.prototype.segmentPersonActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=Pf(e),s=i[0],a=i[1],l=Ug(n,this.baseModel.outputStride,[s,a]),c=zg(e,l),u=c.resized,f=c.padding,p=te(function(){var P=o.predictForPersonSegmentation(u),A=P.segmentLogits,M=P.heatmapScores,$=P.offsets,L=P.displacementFwd,H=P.displacementBwd,G=u.shape,W=G[0],K=G[1],U=Wc(A,[s,a],[W,K],[[f.top,f.bottom],[f.left,f.right]],!0);return{segmentation:Bg(Hn(U),r),heatmapScores:M,offsets:$,displacementFwd:L,displacementBwd:H}}),m=p.segmentation,w=p.heatmapScores,x=p.offsets,T=p.displacementFwd,D=p.displacementBwd;return u.dispose(),{segmentation:m,heatmapScores:w,offsets:x,displacementFwd:T,displacementBwd:D,padding:f,internalResolutionHeightAndWidth:l}},t.prototype.segmentPerson=function(e,n){return n===void 0&&(n=qg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return zF(n=zn(zn({},qg),n)),r=this.segmentPersonActivation(e,n.internalResolution,n.segmentationThreshold),o=r.segmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=$.sent(),o.dispose(),[4,Gg([i,s,a,l])];case 2:return x=$.sent(),T=x[0],D=x[1],P=x[2],A=x[3],M=Wg(M=Hg(T,D,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:M}]}})})},t.prototype.segmentMultiPerson=function(e,n){return n===void 0&&(n=Kg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M,$,L,H,G=this;return Be(this,function(W){switch(W.label){case 0:return GF(n=zn(zn({},Kg),n)),r=Pf(e),o=r[0],i=r[1],s=Ug(n.internalResolution,this.baseModel.outputStride,[o,i]),a=zg(e,s),l=a.resized,c=a.padding,u=te(function(){var K,U=G.predictForMultiPersonInstanceSegmentationAndPart(l),ae=U.segmentLogits,se=U.longOffsets,Oe=U.heatmapScores,Le=U.offsets,yt=U.displacementFwd,St=U.displacementBwd,on=Wc(ae,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0);return K=se,{segmentation:Bg(Hn(on),n.segmentationThreshold),longOffsets:K,heatmapScoresRaw:Oe,offsetsRaw:Le,displacementFwdRaw:yt,displacementBwdRaw:St}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,T=u.displacementBwdRaw,[4,Gg([m,w,x,T])];case 1:return D=W.sent(),P=D[0],A=D[1],M=D[2],$=D[3],L=Wg(L=Hg(P,A,M,$,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,LY(f,p,L,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return H=W.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),T.dispose(),[2,H]}})})},t.prototype.segmentPersonPartsActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=Pf(e),s=i[0],a=i[1],l=Ug(n,this.baseModel.outputStride,[s,a]),c=zg(e,l),u=c.resized,f=c.padding,p=te(function(){var P=o.predictForPersonSegmentationAndPart(u),A=P.segmentLogits,M=P.partHeatmapLogits,$=P.heatmapScores,L=P.offsets,H=P.displacementFwd,G=P.displacementBwd,W=u.shape,K=W[0],U=W[1],ae=Wc(A,[s,a],[K,U],[[f.top,f.bottom],[f.left,f.right]],!0),se=Wc(M,[s,a],[K,U],[[f.top,f.bottom],[f.left,f.right]],!0);return{partSegmentation:OY(Bg(Hn(ae),r),se),heatmapScores:$,offsets:L,displacementFwd:H,displacementBwd:G}}),m=p.partSegmentation,w=p.heatmapScores,x=p.offsets,T=p.displacementFwd,D=p.displacementBwd;return u.dispose(),{partSegmentation:m,heatmapScores:w,offsets:x,displacementFwd:T,displacementBwd:D,padding:f,internalResolutionHeightAndWidth:l}},t.prototype.segmentPersonParts=function(e,n){return n===void 0&&(n=qg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M;return Be(this,function($){switch($.label){case 0:return zF(n=zn(zn({},qg),n)),r=this.segmentPersonPartsActivation(e,n.internalResolution,n.segmentationThreshold),o=r.partSegmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=$.sent(),o.dispose(),[4,Gg([i,s,a,l])];case 2:return x=$.sent(),T=x[0],D=x[1],P=x[2],A=x[3],M=Wg(M=Hg(T,D,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:M}]}})})},t.prototype.segmentMultiPersonParts=function(e,n){return n===void 0&&(n=Kg),je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,T,D,P,A,M,$,L,H,G,W=this;return Be(this,function(K){switch(K.label){case 0:return GF(n=zn(zn({},Kg),n)),r=Pf(e),o=r[0],i=r[1],s=Ug(n.internalResolution,this.baseModel.outputStride,[o,i]),a=zg(e,s),l=a.resized,c=a.padding,u=te(function(){var U=W.predictForMultiPersonInstanceSegmentationAndPart(l),ae=U.segmentLogits,se=U.longOffsets,Oe=U.heatmapScores,Le=U.offsets,yt=U.displacementFwd,St=U.displacementBwd,on=U.partHeatmaps,Ut=Wc(ae,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),ti=Wc(on,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),Os=se,ni=Bg(Hn(Ut),n.segmentationThreshold),Ar=(function(Mr){var Zr=Mr.shape,kr=Zr[0],ri=Zr[1],$i=Zr[2];return te(function(){var Rs=tL(Mr),gl=nn(Yr(0,$i,1,"int32"),1),Ps=le(Ne(Rs,gl),"int32");return R(Ps,[kr,ri])})})(ti);return{segmentation:ni,longOffsets:Os,heatmapScoresRaw:Oe,offsetsRaw:Le,displacementFwdRaw:yt,displacementBwdRaw:St,partSegmentation:Ar}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,T=u.displacementBwdRaw,D=u.partSegmentation,[4,Gg([m,w,x,T])];case 1:return P=K.sent(),A=P[0],M=P[1],$=P[2],L=P[3],H=Wg(H=Hg(A,M,$,L,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,$Y(f,p,D,H,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return G=K.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),T.dispose(),D.dispose(),[2,G]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t})();function WY(t){return je(this,void 0,void 0,function(){var e,n,r,o,i,s;return Be(this,function(a){switch(a.label){case 0:if(e=t.outputStride,n=t.quantBytes,r=t.multiplier,Df==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return o=(function(l,c,u){var f={1:"100",.75:"075",.5:"050"},p="model-stride"+l+".json";return u===4?LF+"float/"+f[c]+"/"+p:LF+"quant"+u+"/"+f[c]+"/"+p})(e,r,n),[4,Of(t.modelUrl||o)];case 1:return i=a.sent(),s=new RY(i,e),[2,new dL(s)]}})})}function qY(t){return je(this,void 0,void 0,function(){var e,n,r,o,i;return Be(this,function(s){switch(s.label){case 0:if(e=t.outputStride,n=t.quantBytes,Df==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=(function(a,l){var c="model-stride"+a+".json";return l===4?FF+"float/"+c:FF+"quant"+l+"/"+c})(e,n),[4,Of(t.modelUrl||r)];case 1:return o=s.sent(),i=new zY(o,e),[2,new dL(i)]}})})}function KY(t){return t===void 0&&(t=VF),je(this,void 0,void 0,function(){return Be(this,function(e){return(t=(function(n){if((n=n||VF).architecture==null&&(n.architecture="MobileNetV1"),jF.indexOf(n.architecture)<0)throw new Error("Invalid architecture "+n.architecture+". Should be one of "+jF);if(n.outputStride==null&&(n.outputStride=16),BF[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride "+n.outputStride+". Should be one of "+BF[n.architecture]+" for architecture "+n.architecture+".");if(n.multiplier==null&&(n.multiplier=1),HF[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier "+n.multiplier+". Should be one of "+HF[n.architecture]+" for architecture "+n.architecture+".");if(n.quantBytes==null&&(n.quantBytes=4),UF.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes "+n.quantBytes+". Should be one of "+UF+" for architecture "+n.architecture+".");return n})(t)).architecture==="ResNet50"?[2,qY(t)]:t.architecture==="MobileNetV1"?[2,WY(t)]:[2,null]})})}var tC=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],WF=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,nC(this.mask)]})})},t.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,this.mask]})})},t.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,eL(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"imagedata"},t})();function YY(t){if(Zg(t),t!==255)throw new Error("Foreground id must be 255 but got "+t);return"person"}function XY(t){if(Zg(t),t>=tC.length)throw new Error("Invalid body part value "+t);return tC[t]}var ZY=(function(){function t(e){this.bodyPixModel=e}return t.prototype.segmentPeople=function(e,n){return je(this,void 0,void 0,function(){var r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return e instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(e,0,0),e=r),n.segmentBodyParts?n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(e,n)]:[3,2]:[3,5];case 1:return i=a.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(e,n)];case 3:i=[a.sent()],a.label=4;case 4:return o=i.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===-1?(p[4*w]=tC.length,p[4*w+3]=0):(p[4*w]=m,p[4*w+3]=255)}),{maskValueToLabel:XY,mask:new WF(new ImageData(p,u,f))}}),[3,10];case 5:return n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(e,n)]:[3,7];case 6:return s=a.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(e,n)];case 8:s=[a.sent()],a.label=9;case 9:o=s.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===0?(p[4*w]=0,p[4*w+3]=0):(p[4*w]=255,p[4*w+3]=255)}),{maskValueToLabel:YY,mask:new WF(new ImageData(p,u,f))}}),a.label=10;case 10:return[2,o]}})})},t.prototype.dispose=function(){this.bodyPixModel.dispose()},t.prototype.reset=function(){},t})();function QY(t){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,KY(t).then(function(n){return new ZY(n)})]})})}var qF={runtime:"mediapipe",modelType:"general"},JY=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,JF(this.mask)]})})},t.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,eL(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t})();function eX(t){return Zg(t),"person"}var tX=(function(){function t(e){var n,r=this;this.selfieMode=!1;var o;this.selfieSegmentationSolution=new ZF.SelfieSegmentation({locateFile:(n=e.locateFile)!==null&&n!==void 0?n:function(i,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),e.modelType==="landscape"?o=1:o=0,this.selfieSegmentationSolution.setOptions({modelSelection:o,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(i){r.segmentation=[{maskValueToLabel:eX,mask:new JY(i.segmentationMask)}]})}return t.prototype.segmentPeople=function(e,n){return je(this,void 0,void 0,function(){var r,o;return Be(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Ie?(o=ImageData.bind,[4,To.toPixels(e)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.selfieSegmentationSolution.send({image:e})];case 4:return i.sent(),[2,this.segmentation]}})})},t.prototype.dispose=function(){this.selfieSegmentationSolution.close()},t.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},t})();function nX(t){return je(this,void 0,void 0,function(){var e,n;return Be(this,function(r){switch(r.label){case 0:return e=(function(o){if(o==null)return zn({},qF);var i=zn({},o);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=qF.modelType),i})(t),[4,(n=new tX(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function rX(t,e,n,r){var o=t.width,i=t.height,s=r?-1:1,a=Math.cos(t.rotation),l=Math.sin(t.rotation),c=t.xCenter,u=t.yCenter,f=1/e,p=1/n,m=new Array(16);return m[0]=o*a*s*f,m[1]=-i*l*f,m[2]=0,m[3]=(-.5*o*a*s+.5*i*l+c)*f,m[4]=o*l*s*p,m[5]=i*a*p,m[6]=0,m[7]=(-.5*i*a-.5*o*l*s+u)*p,m[8]=0,m[9]=0,m[10]=o*f,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,(function(w){if(w.length!==16)throw new Error("Array length must be 16 but got "+w.length);return[[w[0],w[1],w[2],w[3]],[w[4],w[5],w[6],w[7]],[w[8],w[9],w[10],w[11]],[w[12],w[13],w[14],w[15]]]})(m)}function fL(t){return t instanceof Ie?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function QI(t,e){j.assert(t.width!==0,function(){return e+" width cannot be 0."}),j.assert(t.height!==0,function(){return e+" height cannot be 0."})}function oX(t,e){var n=(function(r,o,i,s){var a=o-r,l=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=l/a;return{scale:c,offset:i-r*c}})(0,255,e[0],e[1]);return te(function(){return Z(V(t,n.scale),n.offset)})}function iX(t,e,n){var r=e.outputTensorSize,o=e.keepAspectRatio,i=e.borderMode,s=e.outputTensorFloatRange,a=fL(t),l=(function(p,m){return m?{xCenter:m.xCenter*p.width,yCenter:m.yCenter*p.height,width:m.width*p.width,height:m.height*p.height,rotation:m.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}})(a,n),c=(function(p,m,w){if(w===void 0&&(w=!1),!w)return{top:0,left:0,right:0,bottom:0};var x=m.height,T=m.width;QI(m,"targetSize"),QI(p,"roi");var D,P,A=x/T,M=p.height/p.width,$=0,L=0;return A>M?(D=p.width,P=p.width*A,L=(1-M/A)/2):(D=p.height/A,P=p.height,$=(1-A/M)/2),p.width=D,p.height=P,{top:L,left:$,right:$,bottom:L}})(l,r,o),u=rX(l,a.width,a.height,!1),f=te(function(){var p,m=(p=t)instanceof Ie?p:To.fromPixels(p),w=xo((function(D,P,A){return QI(A,"inputResolution"),[1/A.width*D[0][0]*P.width,1/A.height*D[0][1]*P.width,D[0][3]*P.width,1/A.width*D[1][0]*P.height,1/A.height*D[1][1]*P.height,D[1][3]*P.height,0,0]})(u,a,r),[1,8]),x=i==="zero"?"constant":"nearest",T=Es.transform(nn(le(m,"float32")),w,"bilinear",x,0,[r.height,r.width]);return s!=null?oX(T,s):T});return{imageTensor:f,padding:c,transformationMatrix:u}}function sX(t,e,n){return te(function(){var r=Hn(t,[0]),o=r.shape[2];if(o===1){var i=r;switch(e.activation){case"none":break;case"sigmoid":i=er(i);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+e.activation+")")}var s=n?Es.resizeBilinear(i,[n.height,n.width]):i;return Hn(s,[2])}throw new Error("Unsupported number of tensor channels "+o)})}var KF={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},YF={flipHorizontal:!1},aX={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},lX={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},cX={activation:"none"},uX=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,nC(this.mask)]})})},t.prototype.toImageData=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,JF(this.mask)]})})},t.prototype.toTensor=function(){return je(this,void 0,void 0,function(){return Be(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t})();function dX(t){return Zg(t),"person"}var qc,fX=(function(){function t(e,n){this.modelType=e,this.model=n}return t.prototype.segmentPeople=function(e,n){return je(this,void 0,void 0,function(){var r,o=this;return Be(this,function(i){return n=(function(s){if(s==null)return zn({},YF);var a=zn({},s);return a.flipHorizontal==null&&(a.flipHorizontal=YF.flipHorizontal),a})(n),e==null?(this.reset(),[2,[]]):(r=te(function(){var s=iX(e,o.modelType==="general"?aX:lX).imageTensor,a=De(o.model.predict(s),[0,0,0,1],-1),l=fL(e),c=sX(a,cX,l),u=nn(c,2),f=Nr(u,[[0,0],[0,0],[0,1]]);return df(f,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:dX,mask:new uX(r)}]])})})},t.prototype.dispose=function(){this.model.dispose()},t.prototype.reset=function(){},t})();function pX(t){return je(this,void 0,void 0,function(){var e,n,r;return Be(this,function(o){switch(o.label){case 0:return e=(function(i){if(i==null)return zn({},KF);var s=zn({},i);if(s.runtime="tfjs",s.modelType==null&&(s.modelType=KF.modelType),s.modelType!=="general"&&s.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+s.modelType);return s.modelUrl==null&&(s.modelType==="general"?s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),s})(t),n=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Of(e.modelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[2,new fX(e.modelType,r)]}})})}function pL(t,e){return je(this,void 0,void 0,function(){var n,r;return Be(this,function(o){switch(t){case qc.MediaPipeSelfieSegmentation:if(n=void 0,(r=e)!=null){if(r.runtime==="tfjs")return[2,pX(r)];if(r.runtime==="mediapipe")return[2,nX(r)];n=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+n);case qc.BodyPix:return[2,QY(r=e)];default:throw new Error(t+" is not a supported model name.")}})})}(function(t){t.BodyPix="BodyPix",t.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(qc||(qc={}));var hX="blurred",mX="blurred-mask",gX="mask";var yX="draw-image",JI={};function Jg(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return(function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return(function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]})(t);if(t instanceof Ie)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function hL(t){return JI[t]||(JI[t]=(function(){if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(0,0);throw new Error("Cannot create a canvas in this context")})()),JI[t]}function mL(t,e){var n=hL(e);return(function(r,o){o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r,0,0)})(t,n),n}function Lf(t,e,n,r,o,i){return je(this,void 0,void 0,function(){var s,a,l,c;return Be(this,function(u){switch(u.label){case 0:return e instanceof Ie?[4,To.toPixels(e)]:[3,2];case 1:s=u.sent(),a=Jg(e),l=a[0],c=a[1],e=new ImageData(s,c,l),u.label=2;case 2:return e instanceof ImageData&&(e=mL(e,yX)),o==null||i==null?t.drawImage(e,n,r):t.drawImage(e,n,r,o,i),[2]}})})}function vX(t,e){return je(this,void 0,void 0,function(){var n,r,o;return Be(this,function(i){switch(i.label){case 0:return n=Jg(t),r=n[0],o=n[1],e.width=o,e.height=r,[4,Lf(e.getContext("2d"),t,0,0,o,r)];case 1:return i.sent(),[2]}})})}function bX(t){var e=t.getContext("2d");e.scale(-1,1),e.translate(-t.width,0)}function XF(t,e,n){return je(this,void 0,void 0,function(){return Be(this,function(r){switch(r.label){case 0:return t.globalCompositeOperation=n,[4,Lf(t,e,0,0)];case 1:return r.sent(),[2]}})})}function wX(t,e,n){return je(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u;return Be(this,function(f){switch(f.label){case 0:for(r=t.getContext("2d"),o=0,i=5,s=1/(2*Math.PI*i*i),a=n<3?1:2,c=-n;c<=n;c+=a)for(u=-n;u<=n;u+=a)l=s*Math.exp(-(u*u+c*c)/(2*i*i)),o+=l;c=-n,f.label=1;case 1:if(!(c<=n))return[3,6];u=-n,f.label=2;case 2:return u<=n?(r.globalAlpha=s*Math.exp(-(u*u+c*c)/(2*i*i))/o*n,[4,Lf(r,e,u,c)]):[3,5];case 3:f.sent(),f.label=4;case 4:return u+=a,[3,2];case 5:return c+=a,[3,1];case 6:return r.globalAlpha=1,[2]}})})}function _X(t,e,n){return je(this,void 0,void 0,function(){var r,o,i,s;return Be(this,function(a){switch(a.label){case 0:return r=Jg(t),o=r[0],i=r[1],s=n.getContext("2d"),n.width=i,n.height=o,s.clearRect(0,0,i,o),s.save(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?[4,wX(n,t,e)]:[3,2];case 1:return a.sent(),[3,4];case 2:return s.filter="blur("+e+"px)",[4,Lf(s,t,0,0,i,o)];case 3:a.sent(),a.label=4;case 4:return s.restore(),[2]}})})}function gL(t,e,n){return je(this,void 0,void 0,function(){var r;return Be(this,function(o){switch(o.label){case 0:return r=hL(n),e!==0?[3,2]:[4,vX(t,r)];case 1:return o.sent(),[3,4];case 2:return[4,_X(t,e,r)];case 3:o.sent(),o.label=4;case 4:return[2,r]}})})}function EX(t,e,n,r,o,i){i===void 0&&(i={r:0,g:255,b:255,a:255});for(var s=-o;s<=o;s++)for(var a=-o;a<=o;a++)if(s!==0&&a!==0){var l=(e+s)*r+(n+a);t[4*l+0]=i.r,t[4*l+1]=i.g,t[4*l+2]=i.b,t[4*l+3]=i.a}}function SX(t,e,n,r,o,i,s){s===void 0&&(s=1);for(var a=0,l=-s;l<=s;l++)for(var c=-s;c<=s;c++)if(l!==0&&c!==0){var u=(e+l)*r+(n+c);(!o[t[4*u]]||t[4*u+3]<i)&&(a+=1)}return a>0}function oC(t,e,n,r,o,i){return e===void 0&&(e={r:0,g:0,b:0,a:0}),n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),o===void 0&&(o=.5),i===void 0&&(i=Array.from(Array(256).keys())),je(this,void 0,void 0,function(){var s,a,l,c,u,f,p,m,w,x,T,D,P,A;return Be(this,function(M){switch(M.label){case 0:return(s=Array.isArray(t)?t:[t]).length===0?[2,null]:[4,Promise.all(s.map(function($){return $.mask.toImageData()}))];case 1:for(a=M.sent(),l=a[0],c=l.width,u=l.height,f=new Uint8ClampedArray(c*u*4),p=Math.round(255*o),m=new Array(256).fill(!1),i.forEach(function($){return m[$]=!0}),w=0;w<u;w++)for(x=0;x<c;x++)for(f[4*(T=w*c+x)+0]=n.r,f[4*T+1]=n.g,f[4*T+2]=n.b,f[4*T+3]=n.a,D=0,P=a;D<P.length;D++)A=P[D],m[A.data[4*T]]&&A.data[4*T+3]>=p&&(f[4*T]=e.r,f[4*T+1]=e.g,f[4*T+2]=e.b,f[4*T+3]=e.a,r&&w-1>=0&&w+1<u&&x-1>=0&&x+1<c&&SX(A.data,w,x,c,m,p)&&EX(f,w,x,c,1));return[2,new ImageData(f,c,u)]}})})}function xX(t,e,n){return je(this,void 0,void 0,function(){var r,o;return Be(this,function(i){switch(i.label){case 0:return[4,oC(t,{r:0,g:0,b:0,a:255},{r:0,g:0,b:0,a:0},!1,e)];case 1:return r=i.sent(),o=mL(r,gX),n===0?[2,o]:[2,gL(o,n,mX)]}})})}function yL(t,e,n,r,o,i,s){return r===void 0&&(r=.5),o===void 0&&(o=3),i===void 0&&(i=3),s===void 0&&(s=!1),je(this,void 0,void 0,function(){var a,l,c,u,f,p;return Be(this,function(m){switch(m.label){case 0:return[4,gL(e,o,hX)];case 1:return a=m.sent(),t.width=a.width,t.height=a.height,l=t.getContext("2d"),Array.isArray(n)&&n.length===0?(l.drawImage(a,0,0),[2]):[4,xX(n,r,i)];case 2:return c=m.sent(),l.save(),s&&bX(t),u=Jg(e),f=u[0],p=u[1],[4,Lf(l,e,0,0,p,f)];case 3:return m.sent(),[4,XF(l,c,"destination-in")];case 4:return m.sent(),[4,XF(l,a,"destination-over")];case 5:return m.sent(),l.restore(),[2]}})})}var bL=async()=>{let t=qc.MediaPipeSelfieSegmentation;return pL(t,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation",modelType:"general"})};var TX=["video"],IX=["canvas"],CX=["circle"],DX=["rectangle"],NX=["circleHandle"],AX=["mask"];function MX(t,e){if(t&1&&Je(0,"video",5),t&2){let n=wt();Wu("srcObject",n.srcObject()),cn("width",n.width())}}function kX(t,e){if(t&1&&Je(0,"img",13),t&2){let n=wt();lr("transform",`scale(${n.blurCanvasScale()})`)}}var ey=class t{resizeObserver=null;video=Sn("video");canvas=Sn("canvas");circle=Sn("circle");rectangle=Sn("rectangle");circleHandle=Sn("circleHandle");mask=Sn("mask");srcObject=Ot(void 0);width=pn(400);height=pn(300);blurCanvasScale=jo(()=>{let e=this.width(),n=this.videoDO().settings.width;return e/(n||1)});videoDO=Ot.required();el=O(lt);x=Ee(0);y=Ee(0);selected=ec();clipType=pn("none");showClippedHint=pn(!0);scale=Ot(1);border=pn(!0);borderColor=pn("#ffffff");borderWidth=pn(4);circleProps=pn({cx:160,cy:120,r:120});rectProps=pn({x:0,y:0,width:320,height:240});constructor(){po(()=>{let e=this.srcObject();console.log("src changed",e)}),po(()=>{let e=this.videoDO();e&&(e.component=this)}),po(()=>{let e=this.videoDO().backgroundType();console.log("backgroundType changed",e),e==="none"?this.stopBackgroundEffect():this.startBackgroundEffect()}),bt(()=>{console.log(this.video()?.nativeElement),this.addDragNDrop(),this.addDragNDropCircle(),this.addCircleHandleDnD(),this.addDragNDropRect(),this.watchResize()})}onClick(e){this.selected.emit(this)}addCircleHandleDnD(){console.log("add drag n drop circle");let e=this.circleHandle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Id(e),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx+this.circleProps().r,a=this.circleProps().cy}),n.subscribe(l=>{console.log(l);let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u;let f=o-this.circleProps().cx;this.circleProps.update(p=>ce(B({},p),{r:f})),console.log(o)})}addDragNDropRect(){console.log("add drag n drop rectangle");let e=this.rectangle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Id(e),o=0,i=0,s=0,a=0,l="none",c=this.rectProps();r.subscribe(u=>{s=this.rectProps().x,a=this.rectProps().y,c=this.rectProps()}),n.subscribe(u=>{console.log(u.startOffsetX,this.rectProps().width);let f=u.deltaX/this.scale(),p=u.deltaY/this.scale();if(o=s+f,i=a+p,console.log("start offset",u.startOffsetX,u.startOffsetY),u.startOffsetX<10)console.log("left resize");else if(u.startOffsetX/this.scale()>c.width-50){console.log("right resize");let w=u.originalEvent.x/this.scale()-c.x;console.log("new width",w),this.rectProps.update(x=>ce(B({},x),{width:Math.round(w)}))}else u.startOffsetY<10?console.log("top resize"):u.startOffsetY>this.rectProps().height-10?console.log("bottom resize"):(console.log("move"),this.rectProps.update(m=>ce(B({},m),{x:o,y:i})))})}addDragNDropCircle(){console.log("add drag n drop circle");let e=this.circle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Id(e),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx,a=this.circleProps().cy}),n.subscribe(l=>{console.log(l);let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u,this.circleProps.update(f=>ce(B({},f),{cx:o,cy:i})),this.mask()?.nativeElement.setAttribute("cx",`${o}`),this.mask()?.nativeElement.setAttribute("cy",`${i}`),this.mask()?.nativeElement.setAttribute("r",`${this.circleProps().r}`)})}addDragNDrop(){console.log("add drag n drop");let{dragMove$:e,dragStart$:n}=Id(this.el.nativeElement),r=0,o=0,i=this.el.nativeElement.getBoundingClientRect();n.subscribe(s=>{i=this.el.nativeElement.getBoundingClientRect(),r=this.x(),o=this.y()}),e.subscribe(s=>{if(console.log(s),s.startOffsetX<10)console.log("left resize");else if(s.startOffsetX>i.width-10){console.log("right resize");let l=s.originalEvent.x/this.scale()-i.left/this.scale();console.log("new width",l),this.width.set(Math.round(l))}else if(s.startOffsetY<10)console.log("top resize");else if(s.startOffsetY>i.height-10)console.log("bottom resize");else{console.log("move"),console.log("scale is",this.scale());let a=s.deltaX/this.scale(),l=s.deltaY/this.scale();this.x.set(r+a),this.y.set(o+l),this.el.nativeElement.style.transform=`translate(${r+a}px, ${o+l}px)`}})}watchResize(){this.resizeObserver=new ResizeObserver(e=>{for(let n of e)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;this.height.set(Math.round(i))}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}videoLoaded(e){let n=this.video()?.nativeElement;console.log("video loaded event",e),n&&(console.log("video loaded",n.videoWidth,n.videoHeight),setTimeout(()=>{let r=this.el.nativeElement.getBoundingClientRect();console.log("rect",r),console.log(Math.round(r.width/this.scale()),Math.round(r.height/this.scale())),this.height.set(Math.round(r.height/this.scale())),this.width.set(Math.round(r.width/this.scale()))},1e3))}segmenter=null;getSegmenter=async()=>(this.segmenter||(this.segmenter=await bL()),this.segmenter);animationId=null;async stopBackgroundEffect(){let e=this.canvas()?.nativeElement;e&&(e.style.display="none"),this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}async startBackgroundEffect(){let e=this.videoDO().backgroundType();e==="blur"?await this.blurBackground():e==="image"&&await this.changeBackground()}async blurBackground(){let e=await this.getSegmenter(),n=this.video()?.nativeElement,r=this.canvas()?.nativeElement;if(!n||!r)return;r.style.display="block",console.log("canvas size",r.width,r.height);let o=async()=>{let i=n.getBoundingClientRect(),s=this.videoDO().foregroundThreshold(),a=this.videoDO().edgeBlurAmount(),l=!1,c=this.videoDO().blurAmount();console.log("updated canvas size",r.width,r.height);let u=await e.segmentPeople(n);await yL(r,n,u,s,c,a,l),this.animationId=requestAnimationFrame(o)};this.animationId=requestAnimationFrame(o)}async changeBackground(){let e=this.video()?.nativeElement,n=this.canvas()?.nativeElement;if(!e||!n)return;n.style.display="block";let r=n.getContext("2d");if(!r)return;let o=await this.getSegmenter(),i=async()=>{console.log("process frame for remove"),r.drawImage(e,0,0);let s=await o.segmentPeople(e),c=await oC(s,{r:255,g:255,b:255,a:0},{r:0,g:0,b:0,a:255}),u=r.getImageData(0,0,e.videoWidth,e.videoHeight);for(let f=3;f<u.data.length;f+=4)c.data[f]===255&&(u.data[f]=0);r.putImageData(u,0,0),this.animationId=requestAnimationFrame(i)};this.animationId=requestAnimationFrame(i)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-video"]],viewQuery:function(n,r){n&1&&(un(r.video,TX,5),un(r.canvas,IX,5),un(r.circle,CX,5),un(r.rectangle,DX,5),un(r.circleHandle,NX,5),un(r.mask,AX,5)),n&2&&ar(6)},hostBindings:function(n,r){n&1&&Jt("click",function(i){return r.onClick(i)})},inputs:{srcObject:[1,"srcObject"],width:[1,"width"],height:[1,"height"],videoDO:[1,"videoDO"],clipType:[1,"clipType"],showClippedHint:[1,"showClippedHint"],scale:[1,"scale"],border:[1,"border"],borderColor:[1,"borderColor"],borderWidth:[1,"borderWidth"],circleProps:[1,"circleProps"],rectProps:[1,"rectProps"]},outputs:{width:"widthChange",height:"heightChange",selected:"selected",clipType:"clipTypeChange",showClippedHint:"showClippedHintChange",border:"borderChange",borderColor:"borderColorChange",borderWidth:"borderWidthChange",circleProps:"circlePropsChange",rectProps:"rectPropsChange"},decls:13,vars:30,consts:[["video",""],["rectangle",""],["circle",""],["circleHandle",""],["canvas",""],["autoplay","",2,"position","absolute","left","0","top","0","opacity","0.2",3,"srcObject"],["autoplay","",3,"loadedmetadata","srcObject"],[2,"position","absolute","top","0","left","0","width","100%","height","100%"],["fill","rgba(255, 0, 0, 0.1)"],["fill","rgba(255, 0, 0, 0.001)"],["stroke","black","stroke-width","5","fill","black",2,"cursor","pointer"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left",3,"transform"],[2,"position","absolute","top","0","left","0","transform-origin","top left"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left"]],template:function(n,r){if(n&1){let o=fo();kn(0,MX,1,2,"video",5),Qe(1,"video",6,0),wi("loadedmetadata",function(s){return Tt(o),It(r.videoLoaded(s))}),ct(),ln(),Qe(3,"svg",7),Je(4,"rect",8,1)(6,"circle",9,2)(8,"circle",10,3),ct(),kn(10,kX,1,2,"img",11),fa(),Je(11,"canvas",12,4)}if(n&2){On(r.showClippedHint()?0:-1),fe(),lr("clip-path",r.clipType()==="circle"?"circle("+r.circleProps().r+"px at "+r.circleProps().cx+"px "+r.circleProps().cy+"px)":r.clipType()==="rectangle"?`polygon(${r.rectProps().x}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y+r.rectProps().height}px, ${r.rectProps().x}px ${r.rectProps().y+r.rectProps().height}px)`:"none"),Wu("srcObject",r.srcObject()),cn("width",r.width());let o=r.circleProps();fe(3),lr("visibility",r.clipType()==="rectangle"?"visible":"hidden"),cn("x",r.rectProps().x)("y",r.rectProps().y)("width",r.rectProps().width)("height",r.rectProps().height)("stroke",r.borderColor())("stroke-width",r.borderWidth()),fe(2),lr("visibility",r.clipType()==="circle"?"visible":"hidden"),cn("cx",o.cx)("cy",o.cy)("r",o.r)("stroke",r.borderColor())("stroke-width",r.borderWidth()),fe(2),lr("visibility",r.clipType()==="circle"?"visible":"hidden"),cn("cx",o.cx+o.r)("cy",o.cy)("r",10),fe(2),On(r.videoDO().backgroundType()==="image"?10:-1),fe(),lr("transform",`scale(${r.blurCanvasScale()})`),cn("width",r.width())("height",r.height())}},styles:["[_nghost-%COMP%]{display:inline-block;position:absolute;top:0;left:0}"]})};var OX=["canvas"],Kc=class t{canvasElement=Sn("canvas");canvas;ctx;canvasWidth=Ot(800);canvasHeight=Ot(600);videos=Ot([]);background=Ot("#000000");constructor(){po(()=>{let e=this.canvasElement();console.log("canvas element changed",e)}),bt(()=>{console.log(this.canvasElement()?.nativeElement),console.log("canvas component initialized",this.canvasElement()),this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d")}),po(()=>{let e=this.background();this.draw()})}requestId=null;stopDrawing(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null)}startDrawing(){this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d"),console.log("ctx  on stopDrawing",this.ctx);let e=()=>{this.draw(),this.requestId=requestAnimationFrame(e)};this.requestId=requestAnimationFrame(e)}draw(){if(!this.ctx||!this.canvas)return;let{width:e,height:n}=this.canvas;this.ctx.clearRect(0,0,e,n),this.ctx.fillStyle=this.background(),this.ctx.fillRect(0,0,e,n),this.videos().forEach(r=>{console.log("drawing video",r);let o=r.component,i=o?.video()?.nativeElement;if(i)if(o&&o?.clipType()==="circle"){this.ctx?.save(),this.ctx?.beginPath();let{cx:s,cy:a,r:l}=o.circleProps();this.ctx?.arc(s+o.x(),a+o.y(),l,0,Math.PI*2,!1),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else if(o?.clipType()==="rectangle"){this.ctx?.save(),this.ctx?.beginPath();let{x:s,y:a,width:l,height:c}=o.rectProps();this.ctx?.moveTo(s+o.x()+20,a+o.y()),this.ctx?.lineTo(s+o.x()+l-20,a+o.y()),this.ctx?.quadraticCurveTo(s+o.x()+l,a+o.y(),s+o.x()+l,a+o.y()+20),this.ctx?.lineTo(s+o.x()+l,a+o.y()+c-20),this.ctx?.quadraticCurveTo(s+o.x()+l,a+o.y()+c,s+o.x()+l-20,a+o.y()+c),this.ctx?.lineTo(s+o.x()+20,a+o.y()+c),this.ctx?.quadraticCurveTo(s+o.x(),a+o.y()+c,s+o.x(),a+o.y()+c-20),this.ctx?.lineTo(s+o.x(),a+o.y()+20),this.ctx?.quadraticCurveTo(s+o.x(),a+o.y(),s+o.x()+20,a+o.y()),this.ctx?.closePath(),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height())})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-canvas"]],viewQuery:function(n,r){n&1&&un(r.canvasElement,OX,5),n&2&&ar()},inputs:{canvasWidth:[1,"canvasWidth"],canvasHeight:[1,"canvasHeight"],videos:[1,"videos"],background:[1,"background"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&Je(0,"canvas",null,0),n&2&&cn("width",r.canvasWidth())("height",r.canvasHeight())},styles:["[_nghost-%COMP%]{display:block}"]})};var As=class t{scale=Ee(1);recordingWidth=Ee(1920);recordingHeight=Ee(1080);backgroundColor=Ee("#000000");selectedVideo=Ee(null);setSelectedVideo(e){this.selectedVideo.set(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})};var RX=["*"],ty=class t{settings=O(As);contentWidth=pn(400);contentHeight=pn(300);contentScale=pn(1);scaleChange=ec();el=O(lt);background=Ot("#000000");resizeObserver=null;constructor(){bt(()=>{this.watchResize()})}watchResize(){this.resizeObserver=new ResizeObserver(e=>{for(let n of e)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;console.log("resize",o,i);let s=this.contentWidth()/this.contentHeight(),a=o/s,l=Math.min(o/this.contentWidth(),i/this.contentHeight());this.contentScale.set(l),this.scaleChange.emit(l),this.el.nativeElement.style.height=`${a}px`}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}ngOnDestroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-editor"]],inputs:{contentWidth:[1,"contentWidth"],contentHeight:[1,"contentHeight"],contentScale:[1,"contentScale"],background:[1,"background"]},outputs:{contentWidth:"contentWidthChange",contentHeight:"contentHeightChange",contentScale:"contentScaleChange",scaleChange:"scaleChange"},ngContentSelectors:RX,decls:3,vars:8,consts:[["content",""],[1,"content"]],template:function(n,r){n&1&&(Sa(),Qe(0,"div",1,0),xa(2),ct()),n&2&&lr("background-color",r.background())("transform",`scale(${r.contentScale()})`)("width",r.contentWidth(),"px")("height",r.contentHeight(),"px")},styles:["[_nghost-%COMP%]{display:block;overflow:hidden;border:solid 2px black}.content[_ngcontent-%COMP%]{transform-origin:top left}"]})};var PX="0.12.9",p8e=`https://unpkg.com/@ffmpeg/core@${PX}/dist/umd/ffmpeg-core.js`,ot=(function(t){return t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT",t})(ot||{});var wL=(()=>{let t=0;return()=>t++})();var g8e=new Error("unknown message type"),_L=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),EL=new Error("called FFmpeg.terminate()"),y8e=new Error("failed to import ffmpeg-core.js");var ny=class{#t=null;#r={};#n={};#o=[];#i=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:r}})=>{switch(n){case ot.LOAD:this.loaded=!0,this.#r[e](r);break;case ot.MOUNT:case ot.UNMOUNT:case ot.EXEC:case ot.FFPROBE:case ot.WRITE_FILE:case ot.READ_FILE:case ot.DELETE_FILE:case ot.RENAME:case ot.CREATE_DIR:case ot.LIST_DIR:case ot.DELETE_DIR:this.#r[e](r);break;case ot.LOG:this.#o.forEach(o=>o(r));break;case ot.PROGRESS:this.#i.forEach(o=>o(r));break;case ot.ERROR:this.#n[e](r);break}delete this.#r[e],delete this.#n[e]})};#e=({type:e,data:n},r=[],o)=>this.#t?new Promise((i,s)=>{let a=wL();this.#t&&this.#t.postMessage({id:a,type:e,data:n},r),this.#r[a]=i,this.#n[a]=s,o?.addEventListener("abort",()=>{s(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(_L);on(e,n){e==="log"?this.#o.push(n):e==="progress"&&this.#i.push(n)}off(e,n){e==="log"?this.#o=this.#o.filter(r=>r!==n):e==="progress"&&(this.#i=this.#i.filter(r=>r!==n))}load=(o={},{signal:r}={})=>{var i=o,{classWorkerURL:e}=i,n=wD(i,["classWorkerURL"]);return this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("./worker.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:ot.LOAD,data:n},void 0,r)};exec=(e,n=-1,{signal:r}={})=>this.#e({type:ot.EXEC,data:{args:e,timeout:n}},void 0,r);ffprobe=(e,n=-1,{signal:r}={})=>this.#e({type:ot.FFPROBE,data:{args:e,timeout:n}},void 0,r);terminate=()=>{let e=Object.keys(this.#n);for(let n of e)this.#n[n](EL),delete this.#n[n],delete this.#r[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:r}={})=>{let o=[];return n instanceof Uint8Array&&o.push(n.buffer),this.#e({type:ot.WRITE_FILE,data:{path:e,data:n}},o,r)};mount=(e,n,r)=>{let o=[];return this.#e({type:ot.MOUNT,data:{fsType:e,options:n,mountPoint:r}},o)};unmount=e=>{let n=[];return this.#e({type:ot.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:r}={})=>this.#e({type:ot.READ_FILE,data:{path:e,encoding:n}},void 0,r);deleteFile=(e,{signal:n}={})=>this.#e({type:ot.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:r}={})=>this.#e({type:ot.RENAME,data:{oldPath:e,newPath:n}},void 0,r);createDir=(e,{signal:n}={})=>this.#e({type:ot.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#e({type:ot.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#e({type:ot.DELETE_DIR,data:{path:e}},void 0,n)};var SL=new Error("failed to get response body reader"),xL=new Error("failed to complete download");var TL="Content-Length";var FX=t=>new Promise((e,n)=>{let r=new FileReader;r.onload=()=>{let{result:o}=r;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},r.onerror=o=>{n(Error(`File could not be read! Code=${o?.target?.error?.code||-1}`))},r.readAsArrayBuffer(t)}),iC=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await FX(t);else return new Uint8Array;return new Uint8Array(e)};var LX=async(t,e)=>{let n=await fetch(t),r;try{let o=parseInt(n.headers.get(TL)||"-1"),i=n.body?.getReader();if(!i)throw SL;let s=[],a=0;for(;;){let{done:u,value:f}=await i.read(),p=f?f.length:0;if(u){if(o!=-1&&o!==a)throw xL;e&&e({url:t,total:o,received:a,delta:p,done:u});break}s.push(f),a+=p,e&&e({url:t,total:o,received:a,delta:p,done:u})}let l=new Uint8Array(a),c=0;for(let u of s)l.set(u,c),c+=u.length;r=l.buffer}catch(o){console.log("failed to send download progress event: ",o),r=await n.arrayBuffer(),e&&e({url:t,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},sC=async(t,e,n=!1,r)=>{let o=n?await LX(t,r):await(await fetch(t)).arrayBuffer(),i=new Blob([o],{type:e});return URL.createObjectURL(i)};var Yc=class t{ffmpeg;constructor(){}async loadFFmpeg(){this.ffmpeg=new ny,this.ffmpeg.on("progress",n=>{console.log("ffmpeg progress",n.progress)}),this.ffmpeg.on("log",({message:n})=>{console.log("ffmpeg message",n)});let e=await this.loadConfig();try{await this.ffmpeg.load(e)}catch(n){console.error(n)}}async loadConfig(){let e="https://unpkg.com/@ffmpeg/core@0.12.10/dist/esm";return{coreURL:await sC(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await sC(`${e}/ffmpeg-core.wasm`,"application/wasm"),classWorkerURL:"assets/ffmpeg/worker.js"}}async trimVideo(e,n,r){if(!this.ffmpeg){console.error("ffmpeg not loaded");return}let o=new Blob(e,{type:"video/webm"}),i="input.webm";return await this.ffmpeg.writeFile(i,await iC(o)),await this.ffmpeg.exec(["-i",i,"-ss",n.toString(),"-t",(r-n).toString(),"trimmed.mp4"]),console.log("conversion done"),await this.ffmpeg.readFile("trimmed.mp4")}async convert(e){if(!this.ffmpeg){console.error("ffmpeg not loaded");return}let n=new Blob(e,{type:"video/webm"}),r="input.webm";return await this.ffmpeg.writeFile(r,await iC(n)),await this.ffmpeg.exec(["-i",r,"-t","60","-c:v","libx264","-preset","ultrafast","-r","20","-s","480x360","-crf","28","output.mp4"]),console.log("conversion done"),await this.ffmpeg.readFile("output.mp4")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})};var $f=class{constructor(e){this.stream=e;this.settings=e.getVideoTracks()[0].getSettings()}id="";component;blured=Ee(!1);blurAmount=Ee(5);edgeBlurAmount=Ee(15);foregroundThreshold=Ee(.5);backgroundType=Ee("none");settings},ry=class{constructor(e){this.stream=e}},oy=class{constructor(e){this.videoService=e}chunks=[];name;convertedData=Ee(null);startTime;endTime;duration;getRecordingUrl(){console.log("chunks",this.chunks);let e=new Blob(this.chunks,{type:this.chunks[0].type});return URL.createObjectURL(e)}getConvertedUrl(){let e=this.convertedData();return e?URL.createObjectURL(e):null}download(){let e=document.createElement("a");e.href=this.getRecordingUrl(),e.download=this.name+".webm",e.dispatchEvent(new MouseEvent("click",{view:window}))}async convertRecording(){await this.videoService.loadFFmpeg();let e=await this.videoService.convert(this.chunks);if(e){let n=new Blob([e.buffer],{type:"video/mp4"});this.convertedData.set(n)}return console.log("conversion done!"),e}};var Ms=class t{videoService=O(Yc);recorder=null;recordingCount=Ee(1);isRecording=Ee(!1);recordings=Ee([]);videos=Ee([]);audioSources=Ee([]);audioStream=null;canvasComponent=void 0;videoCount=0;constructor(){}async getDesktopStream(){let e=await navigator.mediaDevices.getDisplayMedia({video:!0}),n=new $f(e);n.id=`video-${this.videoCount++}`,e.getVideoTracks().forEach(r=>{console.log("track",r.getSettings()),r.onended=()=>{console.log("track ended")}}),n.stream=e,this.videos.update(r=>[...r,n])}async getWebcamDevices(){let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),n=new $f(e);e.getVideoTracks().forEach(r=>{console.log("webcam track",r.getSettings())}),n.id=`video-${this.videoCount++}`,this.videos.update(r=>[...r,n])}async getAudioStream(){this.audioStream=await navigator.mediaDevices.getUserMedia({video:!1,audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});let e=new ry(this.audioStream);this.audioSources.update(n=>[...n,e])}startRecording(){console.log("startRecording called",this.canvasComponent),this.isRecording.set(!0),this.canvasComponent&&(console.log("start drawing"),this.canvasComponent.startDrawing());let e=`recording-${this.recordingCount()}`;this.recordingCount.set(this.recordingCount()+1);let n=new oy(this.videoService);if(n.name=e,this.recordings.update(s=>[...s,n]),!this.canvasComponent||!this.canvasComponent.ctx||!this.canvasComponent.canvas){console.log("no canvas component");return}let r=this.canvasComponent.canvas.captureStream(30),o=new MediaStream([...r.getTracks(),...this.audioStream?.getTracks()||[]]),i=[];this.recorder=new MediaRecorder(o,{mimeType:"video/webm;codecs=vp9"}),this.recorder.ondataavailable=s=>{console.log("data available",s.data),i.push(s.data)},this.recorder.onstop=()=>{this.isRecording.set(!1),this.canvasComponent&&this.canvasComponent.stopDrawing(),this.recordings.update(s=>{let a=s[s.length-1];return a&&(a.chunks=i),[...s]})},console.log("start recording"),this.recorder.start()}stopRecording(){this.recorder?.stop()}bringToFront(e){let n=this.videos().filter(r=>r!==e);return this.videos.set([...n,e]),[...n]}static \u0275fac=function(n){return new(n||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})};var Vf=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},dl=class extends Vf{component;viewContainerRef;injector;projectableNodes;constructor(e,n,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.projectableNodes=o}},fl=class extends Vf{templateRef;viewContainerRef;context;injector;constructor(e,n,r,o){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},aC=class extends Vf{element;constructor(e){super(),this.element=e instanceof lt?e.nativeElement:e}},Xc=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof dl)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof fl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof aC)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},iy=class extends Xc{outletElement;_appRef;_defaultInjector;constructor(e,n,r){super(),this.outletElement=e,this._appRef=n,this._defaultInjector=r}attachComponentPortal(e){let n;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,o=r.get(yi,null,{optional:!0})||void 0;n=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let r=this._appRef,o=e.injector||this._defaultInjector||Ye.NULL,i=o.get(kt,r.injector);n=Yh(e.component,{elementInjector:o,environmentInjector:i,projectableNodes:e.projectableNodes||void 0}),r.attachView(n.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(r);o!==-1&&n.remove(o)}),this._attachedPortal=e,r}attachDomPortal=e=>{let n=e.element;n.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(r,n),this.outletElement.appendChild(n),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},sy=(()=>{class t extends fl{constructor(){let n=O(co),r=O(Br);super(n,r)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Qt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Xn]})}return t})();var lC=(()=>{class t extends Xc{_moduleRef=O(yi,{optional:!0});_document=O(Ue);_viewContainerRef=O(Br);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new at;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,o=r.createComponent(n.component,{index:r.length,injector:n.injector||r.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=n=>{let r=n.element;r.parentNode;let o=this._document.createComment("dom-portal");n.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=n,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Qt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Xn]})}return t})();function IL(t){return t.buttons===0||t.detail===0}function CL(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var cC;function $X(){if(cC==null){let t=typeof document<"u"?document.head:null;cC=!!(t&&(t.createShadowRoot||t.attachShadow))}return cC}function DL(t){if($X()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ay(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Li(t){return t.composedPath?t.composedPath()[0]:t.target}var uC;try{uC=typeof Intl<"u"&&Intl.v8BreakIterator}catch{uC=!1}var vr=(()=>{class t{_platformId=O(ts);isBrowser=this._platformId?qM(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||uC)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var jf;function VX(){if(jf==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jf=!0}))}finally{jf=jf||!1}return jf}function NL(t){return VX()?t:!!t.capture}function Zc(t){return t instanceof lt?t.nativeElement:t}var jX=new ee("cdk-input-modality-detector-options"),BX={ignoreKeys:[18,17,224,91,16]},AL=650,dC={passive:!0,capture:!0},HX=(()=>{class t{_platform=O(vr);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Nt(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(r=>r===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Li(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<AL||(this._modality.next(IL(n)?"keyboard":"mouse"),this._mostRecentTarget=Li(n))};_onTouchstart=n=>{if(CL(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Li(n)};constructor(){let n=O(We),r=O(Ue),o=O(jX,{optional:!0});if(this._options=B(B({},BX),o),this.modalityDetected=this._modality.pipe(Ev(1)),this.modalityChanged=this.modalityDetected.pipe(Bp()),this._platform.isBrowser){let i=O(Mn).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[i.listen(r,"keydown",this._onKeydown,dC),i.listen(r,"mousedown",this._onMousedown,dC),i.listen(r,"touchstart",this._onTouchstart,dC)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cy=(function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t})(cy||{}),UX=new ee("cdk-focus-monitor-default-options"),ly=NL({passive:!0,capture:!0}),ML=(()=>{class t{_ngZone=O(We);_platform=O(vr);_inputModalityDetector=O(HX);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=O(Ue);_stopInputModalityDetector=new Me;constructor(){let n=O(UX,{optional:!0});this._detectionMode=n?.detectionMode||cy.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let r=Li(n);for(let o=r;o;o=o.parentElement)n.type==="focus"?this._onFocus(n,o):this._onBlur(n,o)};monitor(n,r=!1){let o=Zc(n);if(!this._platform.isBrowser||o.nodeType!==1)return he();let i=DL(o)||this._document,s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new Me,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let r=Zc(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let i=Zc(n),s=this._document.activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===cy.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===cy.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?AL:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),i=Li(n);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,ly),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,ly)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(sn(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ly),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ly),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,i)=>{(i===n||o.checkChildren&&i.contains(n))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let i=n.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var uy=new WeakMap,Bf=(()=>{class t{_appRef;_injector=O(Ye);_environmentInjector=O(kt);load(n){let r=this._appRef=this._appRef||this._injector.get(Tr),o=uy.get(r);o||(o={loaders:new Set,refs:[]},uy.set(r,o),r.onDestroy(()=>{uy.get(r)?.refs.forEach(i=>i.destroy()),uy.delete(r)})),o.loaders.has(n)||(o.loaders.add(n),o.refs.push(Yh(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var kL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();function fC(t){return Array.isArray(t)?t:[t]}var hC=(()=>{class t{_platform=O(vr);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return GX(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=zX(JX(n));if(r&&(OL(r)===-1||!this.isVisible(r)))return!1;let o=n.nodeName.toLowerCase(),i=OL(n);return n.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!ZX(n)?!1:o==="audio"?n.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return QX(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zX(t){try{return t.frameElement}catch{return null}}function GX(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function WX(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function qX(t){return YX(t)&&t.type=="hidden"}function KX(t){return XX(t)&&t.hasAttribute("href")}function YX(t){return t.nodeName.toLowerCase()=="input"}function XX(t){return t.nodeName.toLowerCase()=="a"}function RL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function OL(t){if(!RL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function ZX(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function QX(t){return qX(t)?!1:WX(t)||KX(t)||t.hasAttribute("contenteditable")||RL(t)}function JX(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var pC=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,n,r,o,i=!1,s){this._element=e,this._checker=n,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=0;r<n.length;r++){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(o)return o}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=n.length-1;r>=0;r--){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(o)return o}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?bt(e,{injector:this._injector}):setTimeout(e)}},PL=(()=>{class t{_checker=O(hC);_ngZone=O(We);_document=O(Ue);_injector=O(Ye);constructor(){O(Bf).load(kL)}create(n,r=!1){return new pC(n,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function FL(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function mC(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ht(t){return t==null?"":typeof t=="string"?t:`${t}px`}var eZ=new ee("cdk-dir-doc",{providedIn:"root",factory:tZ});function tZ(){return O(Ue)}var nZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function rZ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?nZ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Hf=(()=>{class t{get value(){return this.valueSignal()}valueSignal=Ee("ltr");change=new at;constructor(){let n=O(eZ,{optional:!0});if(n){let r=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(rZ(r||o||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pl;function LL(){if(pl==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return pl=!1,pl;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)pl=!0;else{let t=Element.prototype.scrollTo;t?pl=!/\{\s*\[native code\]\s*\}/.test(t.toString()):pl=!1}}return pl}var oZ=20,gC=(()=>{class t{_ngZone=O(We);_platform=O(vr);_renderer=O(Mn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Me;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=oZ){return this._platform.isBrowser?new Te(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=n>0?this._scrolled.pipe(jp(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):he()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(At(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,n)&&r.push(i)}),r}_scrollableContainsElement(n,r){let o=Zc(r),i=n.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var iZ=20,Uf=(()=>{class t{_platform=O(vr);_listeners;_viewportSize;_change=new Me;_document=O(Ue);constructor(){let n=O(We),r=O(Mn).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),o=n.documentElement,i=o.getBoundingClientRect(),s=-i.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(n=iZ){return n>0?this._change.pipe(jp(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var yC={},dy=(()=>{class t{_appId=O(Zl);getId(n){return this._appId!=="ng"&&(n+=this._appId),yC.hasOwnProperty(n)||(yC[n]=0),`${n}${yC[n]++}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $L=LL();function vy(t){return new fy(t.get(Uf),t.get(Ue))}var fy=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,n){this._viewportRuler=e,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ht(-this._previousScrollPosition.left),e.style.top=Ht(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,r=e.style,o=n.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),$L&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),$L&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};function GL(t,e){return new py(t.get(gC),t.get(We),t.get(Uf),e)}var py=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,n,r,o){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(At(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var zf=class{enable(){}disable(){}attach(){}};function vC(t,e){return e.some(n=>{let r=t.bottom<n.top,o=t.top>n.bottom,i=t.right<n.left,s=t.left>n.right;return r||o||i||s})}function VL(t,e){return e.some(n=>{let r=t.top<n.top,o=t.bottom>n.bottom,i=t.left<n.left,s=t.right>n.right;return r||o||i||s})}function WL(t,e){return new hy(t.get(gC),t.get(Uf),t.get(We),e)}var hy=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();vC(n,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},qL=(()=>{class t{_injector=O(Ye);constructor(){}noop=()=>new zf;close=n=>GL(this._injector,n);block=()=>vy(this._injector);reposition=n=>WL(this._injector,n);static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ks=class{positionStrategy;scrollStrategy=new zf;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let n=Object.keys(e);for(let r of n)e[r]!==void 0&&(this[r]=e[r])}}};var my=class{connectionPair;scrollableViewProperties;constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var KL=(()=>{class t{_attachedOverlays=[];_document=O(Ue);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YL=(()=>{class t extends KL{_ngZone=O(We);_renderer=O(Mn).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XL=(()=>{class t extends KL{_platform=O(vr);_ngZone=O(We);_renderer=O(Mn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let r=this._document.body,o={capture:!0},i=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[i.listen(r,"pointerdown",this._pointerDownListener,o),i.listen(r,"click",this._clickListener,o),i.listen(r,"auxclick",this._clickListener,o),i.listen(r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=Li(n)};_clickListener=n=>{let r=Li(n),o=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(jL(a.overlayElement,r)||jL(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=jr(t)))(o||t)}})();static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jL(t,e){let n=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===t)return!0;r=n&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var ZL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),by=(()=>{class t{_platform=O(vr);_containerElement;_document=O(Ue);_styleLoader=O(Bf);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||mC()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(n),mC()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(ZL)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bC=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,n,r,o){this._renderer=n,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Qc=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Me;_attachments=new Me;_detachments=new Me;_positionStrategy;_scrollStrategy;_locationChanges=pt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Me;_outsidePointerEvents=new Me;_afterNextRenderRef;constructor(e,n,r,o,i,s,a,l,c,u=!1,f,p){this._portalOutlet=e,this._host=n,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=f,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=bt(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=B(B({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ce(B({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ht(this._config.width),e.height=Ht(this._config.height),e.minWidth=Ht(this._config.minWidth),e.minHeight=Ht(this._config.minHeight),e.maxWidth=Ht(this._config.maxWidth),e.maxHeight=Ht(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new bC(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,n,r){let o=fC(n||[]).filter(i=>!!i);o.length&&(r?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=bt(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(n){if(e)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},BL="cdk-overlay-connected-position-bounding-box",aZ=/([A-Za-z%]+)$/;function QL(t,e){return new gy(e,t.get(Uf),t.get(Ue),t.get(vr),t.get(by))}var gy=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Me;_resizeSubscription=pt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,n,r,o,i){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(BL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,o,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(BL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,r){let o;if(r.originX=="center")o=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;o=r.originX=="start"?s:a}n.left<0&&(o-=n.left);let i;return r.originY=="center"?i=e.top+e.height/2:i=r.originY=="top"?e.top:e.bottom,n.top<0&&(i-=n.top),{x:o,y:i}}_getOverlayPoint(e,n,r){let o;r.overlayX=="center"?o=-n.width/2:r.overlayX==="start"?o=this._isRtl()?-n.width:0:o=this._isRtl()?0:-n.width;let i;return r.overlayY=="center"?i=-n.height/2:i=r.overlayY=="top"?0:-n.height,{x:e.x+o,y:e.y+i}}_getOverlayFit(e,n,r,o){let i=UL(n),{x:s,y:a}=e,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,f=s+i.width-r.width,p=0-a,m=a+i.height-r.height,w=this._subtractOverflows(i.width,u,f),x=this._subtractOverflows(i.height,p,m),T=w*x;return{visibleArea:T,isCompletelyWithinViewport:i.width*i.height===T,fitsInViewportVertically:x===i.height,fitsInViewportHorizontally:w==i.width}}_canFitWithFlexibleDimensions(e,n,r){if(this._hasFlexibleDimensions){let o=r.bottom-n.y,i=r.right-n.x,s=HL(this._overlayRef.getConfig().minHeight),a=HL(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=o,c=e.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(e,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let o=UL(n),i=this._viewportRect,s=Math.max(e.x+o.width-i.width,0),a=Math.max(e.y+o.height-i.height,0),l=Math.max(i.top-r.top-e.y,0),c=Math.max(i.left-r.left-e.x,0),u=0,f=0;return o.width<=i.width?u=c||-s:u=e.x<this._viewportMargin?i.left-r.left-e.x:0,o.height<=i.height?f=l||-a:f=e.y<this._viewportMargin?i.top-r.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!lZ(this._lastScrollVisibility,r)){let o=new my(e,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let i=0;i<n.length;i++)n[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(e,n){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(n.overlayY==="top")s=e.y,i=r.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let m=Math.min(r.bottom-e.y+r.top,e.y),w=this._lastBoundingBoxSize.height;i=m*2,s=e.y-m,i>w&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-w/2)}let l=n.overlayX==="start"&&!o||n.overlayX==="end"&&o,c=n.overlayX==="end"&&!o||n.overlayX==="start"&&o,u,f,p;if(c)p=r.width-e.x+this._viewportMargin*2,u=e.x-this._viewportMargin;else if(l)f=e.x,u=r.right-e.x;else{let m=Math.min(r.right-e.x+r.left,e.x),w=this._lastBoundingBoxSize.width;u=m*2,f=e.x-m,u>w&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-w/2)}return{top:s,left:f,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(e,n){let r=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Ht(r.height),o.top=Ht(r.top),o.bottom=Ht(r.bottom),o.width=Ht(r.width),o.left=Ht(r.left),o.right=Ht(r.right),n.overlayX==="center"?o.alignItems="center":o.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?o.justifyContent="center":o.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=Ht(i)),s&&(o.maxWidth=Ht(s))}this._lastBoundingBoxSize=r,hl(this._boundingBox.style,o)}_resetBoundingBoxStyles(){hl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();hl(r,this._getExactOverlayY(n,e,u)),hl(r,this._getExactOverlayX(n,e,u))}else r.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=Ht(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=Ht(s.maxWidth):i&&(r.maxWidth="")),hl(this._pane.style,r)}_getExactOverlayY(e,n,r){let o={top:"",bottom:""},i=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=Ht(i.y);return o}_getExactOverlayX(e,n,r){let o={left:"",right:""},i=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=Ht(i.x);return o}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:VL(e,r),isOriginOutsideView:vC(e,r),isOverlayClipped:VL(n,r),isOverlayOutsideView:vC(n,r)}}_subtractOverflows(e,...n){return n.reduce((r,o)=>r-Math.max(o,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&fC(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof lt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+n,height:r,width:n}}};function hl(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function HL(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(aZ);return!n||n==="px"?parseFloat(e):null}return t||null}function UL(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function lZ(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var zL="cdk-global-overlay-wrapper";function wy(t){return new yy}var yy=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(zL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,f=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",w="",x="";l?x="flex-start":u==="center"?(x="center",p?w=f:m=f):p?u==="left"||u==="end"?(x="flex-end",m=f):(u==="right"||u==="start")&&(x="flex-start",w=f):u==="left"||u==="start"?(x="flex-start",m=f):(u==="right"||u==="end")&&(x="flex-end",w=f),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":w,n.justifyContent=x,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(zL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},JL=(()=>{class t{_injector=O(Ye);constructor(){}global(){return wy()}flexibleConnectedTo(n){return QL(this._injector,n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _y(t,e){t.get(Bf).load(ZL);let n=t.get(by),r=t.get(Ue),o=t.get(dy),i=t.get(Tr),s=t.get(Hf),a=r.createElement("div"),l=r.createElement("div");l.id=o.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),n.getContainerElement().appendChild(a);let c=new iy(l,i,t),u=new ks(e),f=t.get(bi,null,{optional:!0})||t.get(Mn).createRenderer(null,null);return u.direction=u.direction||s.value,new Qc(c,a,l,u,t.get(We),t.get(YL),r,t.get(is),t.get(XL),e?.disableAnimations??t.get(fw,null,{optional:!0})==="NoopAnimations",t.get(kt),f)}var wC=(()=>{class t{scrollStrategies=O(qL);_positionBuilder=O(JL);_injector=O(Ye);constructor(){}create(n){return _y(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uZ(t,e){}var Jc=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var dZ=(()=>{class t extends Xc{_elementRef=O(lt);_focusTrapFactory=O(PL);_config;_interactivityChecker=O(hC);_ngZone=O(We);_focusMonitor=O(ML);_renderer=O(bi);_changeDetectorRef=O(Ca);_injector=O(Ye);_platform=O(vr);_document=O(Ue);_portalOutlet;_focusTrapped=new Me;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=O(Jc,{optional:!0})||new Jc,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){let r=this._ariaLabelledByQueue.indexOf(n);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),r}attachTemplatePortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),r}attachDomPortal=n=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(n);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,r){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),n.removeAttribute("tabindex")},i=this._renderer.listen(n,"blur",o),s=this._renderer.listen(n,"mousedown",o)})),n.focus(r)}_focusByCssSelector(n,r){let o=this._elementRef.nativeElement.querySelector(n);o&&this._forceFocus(o,r)}_trapFocus(n){this._isDestroyed||bt(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(n);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(n)||this._focusDialogContainer(n);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',n);break;default:this._focusByCssSelector(this._config.autoFocus,n);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let n=this._config.restoreFocus,r=null;if(typeof n=="string"?r=this._document.querySelector(n):typeof n=="boolean"?r=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(r=n),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=ay(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(n){this._elementRef.nativeElement.focus?.(n)}_containsFocus(){let n=this._elementRef.nativeElement,r=ay();return n===r||n.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ay()))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Ku(lC,7),r&2){let i;Yu(i=Xu())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&cn("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Xn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&Ql(0,uZ,0,0,"ng-template",0)},dependencies:[lC],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),ml=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Me;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,n){this.overlayRef=e,this.config=n,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!FL(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this._canClose(e)){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let n=this.config;return!!this.containerInstance&&(!n.closePredicate||n.closePredicate(e,n,this.componentInstance))}},fZ=new ee("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=O(Ye);return()=>vy(t)}}),EC=new ee("DialogData"),pZ=new ee("DefaultDialogConfig");function hZ(t){let e=Ee(t),n=new at;return{valueSignal:e,get value(){return e()},change:n,ngOnDestroy(){n.complete()}}}var e$=(()=>{class t{_injector=O(Ye);_defaultOptions=O(pZ,{optional:!0});_parentDialog=O(t,{optional:!0,skipSelf:!0});_overlayContainer=O(by);_idGenerator=O(dy);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Me;_afterOpenedAtThisLevel=new Me;_ariaHiddenElements=new Map;_scrollStrategy=O(fZ);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Xs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ro(void 0)));constructor(){}open(n,r){let o=this._defaultOptions||new Jc;r=B(B({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=_y(this._injector,i),a=new ml(s,r),l=this._attachContainer(s,a,r);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(An(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(n,a,l,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){_C(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(r=>r.id===n)}ngOnDestroy(){_C(this._openDialogsAtThisLevel,n=>{n.config.closeOnDestroy===!1&&this._removeOpenDialog(n,!1)}),_C(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){let r=new ks({positionStrategy:n.positionStrategy||wy().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation,disableAnimations:n.disableAnimations});return n.backdropClass&&(r.backdropClass=n.backdropClass),r}_attachContainer(n,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:Jc,useValue:o},{provide:ml,useValue:r},{provide:Qc,useValue:n}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=dZ;let l=new dl(a,o.viewContainerRef,Ye.create({parent:i||this._injector,providers:s}));return n.attach(l).instance}_attachDialogContent(n,r,o,i){if(n instanceof co){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=B(B({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new fl(n,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new dl(n,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(n,r,o,i){let s=n.injector||n.viewContainerRef?.injector,a=[{provide:EC,useValue:n.data},{provide:ml,useValue:r}];return n.providers&&(typeof n.providers=="function"?a.push(...n.providers(r,n,o)):a.push(...n.providers)),n.direction&&(!s||!s.get(Hf,null,{optional:!0}))&&a.push({provide:Hf,useValue:hZ(n.direction)}),Ye.create({parent:s||i,providers:a})}_removeOpenDialog(n,r){let o=this.openDialogs.indexOf(n);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(n){if(n.parentElement){let r=n.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==n&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _C(t,e){let n=t.length;for(;n--;)e(t[n])}var mZ=["videoPlayer"],Ey=class t{dialogRef=O(ml);data=O(EC);videoPlayer=Sn("videoPlayer");videoElement;constructor(){bt(()=>{console.log("video player",this.videoPlayer()),console.log("dialog data",this.data),this.videoElement=this.videoPlayer()?.nativeElement,this.videoElement.src=this.data.getRecordingUrl()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-video-editor"]],viewQuery:function(n,r){n&1&&un(r.videoPlayer,mZ,5),n&2&&ar()},decls:5,vars:0,consts:[["videoPlayer",""],["controls",""],[1,"timeline"],[1,"thumb","start"],[1,"thumb","end"]],template:function(n,r){n&1&&(Je(0,"video",1,0),Qe(2,"div",2),Je(3,"div",3)(4,"div",4),ct())},styles:["[_nghost-%COMP%]{display:block;background:#222;width:100%;height:100%}video[_ngcontent-%COMP%]{width:100%;height:auto}.timeline[_ngcontent-%COMP%]{position:relative;height:50px;background:#333;margin-top:10px}.thumb[_ngcontent-%COMP%]{position:absolute;top:0;width:10px;height:100%;background:#666;cursor:ew-resize}.thumb.start[_ngcontent-%COMP%]{left:0}.thumb.end[_ngcontent-%COMP%]{right:0}"]})};var Sy=class t{dialog=O(e$);open(e){let n=this.dialog.open(Ey,{height:"600px",width:"800px",panelClass:"editor-dialog",data:e})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})};var xy=to(document,"pointermove").pipe(wr()),Ty=to(document,"pointerup").pipe(wr());function t$(t,e=new Nt(!1)){let n=to(t,"pointerdown").pipe(At(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Mt(a=>{!(a.target instanceof HTMLInputElement)&&e.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),ve(a=>{let l=t.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:t}}),wr()),r=n.pipe(qe(a=>xy.pipe(ve(l=>ce(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),An(1)).pipe(sn(Ty))),wr()),o=r.pipe(qe(a=>xy.pipe(ve(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Ty))),wr()),i=r.pipe(qe(a=>xy.pipe(ro(a),ve(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),sn(Ty),Ui()))),s=n.pipe(qe(a=>Ty.pipe(sn(xy))));return{dragStart$:e.pipe(qe(a=>a?no:r)),dragMove$:e.pipe(qe(a=>a?no:o)),dragEnd$:e.pipe(qe(a=>a?no:i)),click$:e.pipe(qe(a=>a?no:s))}}var n$=["*"];function gZ(t,e){t&1&&(_e(0,"div",2)(1,"div",3),xa(2),Se()())}function yZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",1),ct())}function vZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",2),ct())}function bZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",3),ct())}function wZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",4),ct())}function _Z(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",5),ct())}function EZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",6),ct())}function SZ(t,e){t&1&&(ln(),Qe(0,"svg",0),Je(1,"path",7),ct())}function xZ(t,e){if(t&1&&(_e(0,"div",0)(1,"span"),Ct(2),Se()()),t&2){let n=wt();fe(2),Jl(n.prefix())}}function TZ(t,e){if(t&1&&(Ct(0),_e(1,"div",0),Zn(2,"ed-icon",2),Se()),t&2){let n=wt();Ia(" ",n.suffixIcon()," "),fe(2),Rn("icon",n.prefixIcon())}}function IZ(t,e){if(t&1&&(_e(0,"div",0)(1,"span"),Ct(2),Se()()),t&2){let n=wt();fe(2),Jl(n.suffix())}}function CZ(t,e){if(t&1&&(_e(0,"div",0),Zn(1,"ed-icon",2),Se()),t&2){let n=wt();fe(),Rn("icon",n.prefixIcon())}}var r$=(()=>{class t{value=pn("#ff0000");writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){this.onTouched=n}onChange=()=>{};onTouched=()=>{};static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["color"]],inputs:{value:[1,"value"]},outputs:{value:"valueChange"},features:[Ur([{provide:ls,useExisting:sr(()=>t),multi:!0}])],decls:4,vars:4,consts:[["type","color",3,"ngModelChange","ngModel"],[1,"color-icon"],["type","text",3,"ngModelChange","ngModel"]],template:function(r,o){r&1&&(_e(0,"label")(1,"input",0),fn("ngModelChange",function(s){return En(o.value,s)||(o.value=s),s}),Se(),Zn(2,"div",1),_e(3,"input",2),fn("ngModelChange",function(s){return En(o.value,s)||(o.value=s),s}),Se()()),r&2&&(fe(),dn("ngModel",o.value),fe(),lr("background-color",o.value()),fe(),dn("ngModel",o.value))},dependencies:[Oa,ka,Td,yc],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box;color:var(--form-item-color)}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}input[_ngcontent-%COMP%]{background:transparent;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[type=color][_ngcontent-%COMP%]{-webkit-appearance:none;padding:0;border:none}label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;height:1.5rem}label[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{visibility:hidden;width:1px;height:1px}label[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:.3125rem;border:solid 1px var(--form-border)}"],changeDetection:0})}return t})(),Iy=(()=>{class t{value=Ot();select=O(SC);elementRef=O(lt);onSelect(){console.log("option selected",this.value()),this.select.selected.set(this.value())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ed-select-option"]],hostVars:2,hostBindings:function(r,o){r&1&&Jt("click",function(){return o.onSelect()}),r&2&&Ta("selected",o.select.selected()===o.value)},inputs:{value:[1,"value"]},ngContentSelectors:n$,decls:1,vars:0,template:function(r,o){r&1&&(Sa(),xa(0))},styles:["[_nghost-%COMP%]{display:block;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color);padding:5px 10px;border-radius:.3125rem;cursor:pointer}[_nghost-%COMP%]:hover{background:#0f8be8}"]})}return t})(),SC=(()=>{class t{selected=pn();options=LM(Iy);contentTemplate=Sn(sy);writeValue(n){this.selected.set(n)}registerOnChange(n){this.selected.subscribe(n)}registerOnTouched(n){this.onTouched=n}onTouched=()=>{};overlayRef=null;elementRef=O(lt);change=ec();overlay=O(wC);label=jo(()=>{let n=this.selected();return n||"Select..."});selectedOption=jo(()=>this.options().find(n=>n.value===this.selected()));constructor(){po(()=>{let n=this.selected();this.change.emit(n?n.value:null),this.hide()})}toggleDropdown(){this.showDropdown()}showDropdown(){this.overlayRef=this.overlay.create(this.getOverlayConfig()),this.overlayRef.attach(this.contentTemplate()),this.overlayRef.backdropClick().subscribe(()=>this.hide())}hide(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}getOverlayConfig(){let n=this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPush(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]),r=this.overlay.scrollStrategies.reposition();return new ks({positionStrategy:n,scrollStrategy:r,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop"})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ed-select"]],contentQueries:function(r,o,i){r&1&&Vw(i,o.options,Iy,4),r&2&&ar()},viewQuery:function(r,o){r&1&&un(o.contentTemplate,sy,5),r&2&&ar()},inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange",change:"change"},features:[Ur([{provide:ls,useExisting:sr(()=>t),multi:!0}])],ngContentSelectors:n$,decls:4,vars:1,consts:[[1,"custom-select",3,"click"],["cdk-portal","","cdkPortal","",1,"dropdown"],[1,"custom-dropdown-menu",2,"width","100%"],[1,"dropdown-options-container"]],template:function(r,o){r&1&&(Sa(),_e(0,"label",0),Jt("click",function(){return o.toggleDropdown()}),_e(1,"span"),Ct(2),Se()(),Ql(3,gZ,3,0,"ng-template",1)),r&2&&(fe(2),Jl(o.label()))},dependencies:[sy],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px #444444;padding-left:6px;padding-right:6px;box-sizing:border-box;cursor:pointer}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}label[_ngcontent-%COMP%]{display:flex;gap:5px;height:1.5rem;align-items:center;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}.custom-dropdown-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#1e1e1e;box-shadow:0 10px 16px #00000059,0 2px 5px #00000059,inset 0 .5px #ffffff14,inset 0 0 .5px #ffffff59;padding:.5rem;border-radius:.8125rem;min-width:150px;z-index:1000}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e1e1e;text-align:left;border-radius:3px;line-height:24px;height:auto}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0f8be8}"],changeDetection:0})}return t})();var DZ=(()=>{class t{icon=Ot();static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["ed-icon"]],inputs:{icon:[1,"icon"]},decls:7,vars:1,consts:[["width","24","height","24","fill","none","viewBox","0 0 24 24"],["fill","#c3c3c3","fill-rule","evenodd","d","M8.9 6h-.02c-.403 0-.735 0-1.006.022-.28.023-.54.072-.782.196a2 2 0 0 0-.874.874c-.124.243-.173.501-.196.782C6 8.144 6 8.477 6 8.88v.62a.5.5 0 0 0 1 0v-.6c0-.428 0-.72.019-.944.018-.22.05-.332.09-.41a1 1 0 0 1 .437-.437c.078-.04.19-.072.41-.09C8.18 7 8.472 7 8.9 7h.6a.5.5 0 0 0 0-1zm6.2 0h.02c.403 0 .735 0 1.006.022.281.023.54.072.782.196a2 2 0 0 1 .874.874c.124.243.173.501.196.782.022.27.022.603.022 1.005V9.5a.5.5 0 0 1-1 0v-.6c0-.428 0-.72-.019-.944-.018-.22-.05-.332-.09-.41a1 1 0 0 0-.437-.437c-.078-.04-.19-.072-.41-.09A13 13 0 0 0 15.1 7h-.6a.5.5 0 0 1 0-1zm.02 12h-.62a.5.5 0 0 1 0-1h.6c.428 0 .72 0 .944-.019.22-.018.332-.05.41-.09a1 1 0 0 0 .437-.437c.04-.078.072-.19.09-.41.019-.225.019-.516.019-.944v-.6a.5.5 0 0 1 1 0v.62c0 .403 0 .735-.022 1.006-.023.281-.072.54-.196.782a2 2 0 0 1-.874.874c-.243.124-.501.173-.782.196-.27.022-.603.022-1.005.022M8.9 18h-.02c-.403 0-.735 0-1.006-.022-.281-.023-.54-.072-.782-.196a2 2 0 0 1-.874-.874c-.124-.243-.173-.501-.196-.782A13 13 0 0 1 6 15.12v-.62a.5.5 0 0 1 1 0v.6c0 .428 0 .72.019.944.018.22.05.332.09.41a1 1 0 0 0 .437.437c.078.04.19.072.41.09.225.019.516.019.944.019h.6a.5.5 0 0 1 0 1z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M4.886 3.21a1 1 0 0 1 .812-.19l7.698 1.56.338.076a7.67 7.67 0 0 1 5.806 7.266v.346l-.008.329 1.197 1.197a1 1 0 0 1 0 1.414l-5.523 5.522a1 1 0 0 1-1.413 0l-1.198-1.197-.328.008a7.67 7.67 0 0 1-7.612-5.806l-.077-.338L3.02 5.7a1 1 0 0 1 .274-.906l1.5-1.5zm.674 9.99a6.666 6.666 0 0 0 6.383 5.342h.3l.756-.018 1.5 1.5 5.523-5.522-1.5-1.5.018-.756a6.67 6.67 0 0 0-5.048-6.619l-.295-.066L5.5 4l-.396.397 5.16 5.16A3 3 0 0 1 12 9.001 3.001 3.001 0 0 1 12 15a3 3 0 0 1-2.444-4.737l-5.16-5.16L4 5.5zM12 10.001a2 2 0 0 0-2 2l.01.204a2 2 0 0 0 1.786 1.785L12 14a2 2 0 0 0 1.989-1.795l.01-.204a2 2 0 0 0-1.795-1.99z"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M18 5H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M6 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M19.5 4a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V5h-6.5v14H15a.5.5 0 0 1 0 1H9a.5.5 0 0 1 0-1h2.5V5H5v2.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5z"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zm2.725 5.582a.5.5 0 0 1 .629.064l6.5 6.5a.5.5 0 1 1-.707.707L9 11.708l-2.146 2.146a.5.5 0 1 1-.708-.707l2.5-2.5zM14.5 7a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M9 8.5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1H13a4 4 0 0 0-4-4zM9 12v3h3a3 3 0 0 0-3-3","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M6 6.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5M7 10v1h10v-1zm-.25-1a.75.75 0 0 0-.75.75v1.5c0 .414.336.75.75.75h10.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 0-.75-.75zM7 17v-2h10v2zm-1-2.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75z","clip-rule","evenodd"]],template:function(r,o){r&1&&kn(0,yZ,2,0,":svg:svg",0)(1,vZ,2,0,":svg:svg",0)(2,bZ,2,0,":svg:svg",0)(3,wZ,2,0,":svg:svg",0)(4,_Z,2,0,":svg:svg",0)(5,EZ,2,0,":svg:svg",0)(6,SZ,2,0,":svg:svg",0),r&2&&On(o.icon()==="iconRadius"?0:o.icon()==="pen"?1:o.icon()==="container"?2:o.icon()==="text"?3:o.icon()==="image"?4:o.icon()==="rotate"?5:o.icon()==="strokeWeight"?6:-1)},styles:["[_nghost-%COMP%]{display:inline-flex}"],changeDetection:0})}return t})(),o$=(()=>{class t{prefixIcon=Ot();suffixIcon=Ot();el=O(lt);writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){}value=pn("");type=Ot("text");prefix=Ot("");suffix=Ot("");constructor(){bt(()=>{this.initDrag()})}initDrag(){let{dragStart$:n,dragMove$:r,dragEnd$:o}=t$(this.el.nativeElement),i=this.value();n.subscribe(s=>{i=this.value()}),r.subscribe(s=>{this.value.set(Math.round(i+s.deltaX))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Xe({type:t,selectors:[["input-component"]],inputs:{prefixIcon:[1,"prefixIcon"],suffixIcon:[1,"suffixIcon"],value:[1,"value"],type:[1,"type"],prefix:[1,"prefix"],suffix:[1,"suffix"]},outputs:{value:"valueChange"},features:[Ur([{provide:ls,useExisting:sr(()=>t),multi:!0}])],decls:7,vars:6,consts:[[1,"icon"],[3,"ngModelChange","ngModel"],[3,"icon"]],template:function(r,o){r&1&&(_e(0,"label"),kn(1,xZ,3,1,"div",0),kn(2,TZ,3,2),_e(3,"div")(4,"input",1),fn("ngModelChange",function(s){return En(o.value,s)||(o.value=s),s}),Se()(),kn(5,IZ,3,1,"div",0),kn(6,CZ,2,1,"div",0),Se()),r&2&&(fe(),On(o.prefix()&&o.prefix()!==""?1:-1),fe(),On(o.prefixIcon()?2:-1),fe(2),dn("ngModel",o.value),cn("type",o.type()),fe(),On(o.suffix()&&o.suffix()!==""?5:-1),fe(),On(o.suffixIcon()?6:-1))},dependencies:[Oa,ka,Td,yc,DZ],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}label[_ngcontent-%COMP%]{display:flex;gap:3px;height:1.5rem;align-items:center;padding-left:.3rem;padding-right:.3rem}.icon[_ngcontent-%COMP%]{display:flex;align-items:center;width:24px;height:24px;line-height:24px;justify-content:center;color:var(--form-item-color-secondary);font-family:var(--font-family)}input[_ngcontent-%COMP%]{background:transparent;width:100%;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}return t})();var NZ=["canvas"],Cy=class t{stream=Ot.required();canvas=Sn("canvas");canvasCtx=null;audioCtx;analyser;dataArray;bufferLength=0;width=Ee(160);height=Ee(20);constructor(){bt(()=>{let e=this.canvas()?.nativeElement;e&&(this.canvasCtx=e.getContext("2d"),this.prepare(),this.draw())})}prepare(){let e=this.stream();if(!e)return;this.audioCtx=new AudioContext,this.analyser=this.audioCtx.createAnalyser(),this.audioCtx.createMediaStreamSource(e).connect(this.analyser),this.analyser.connect(this.audioCtx.destination),this.analyser.fftSize=64,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-15,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength)}draw(){if(!this.analyser||!this.dataArray||!this.canvasCtx)return;let e=requestAnimationFrame(this.draw.bind(this));this.canvasCtx.fillStyle="rgb(0, 0, 0)",this.canvasCtx.fillRect(0,0,this.width(),this.height()),this.canvasCtx.lineTo(this.width(),this.height()/2),this.canvasCtx.stroke(),this.analyser.getByteFrequencyData(this.dataArray);let n=this.width()/this.bufferLength;console.log("barWidth",n);for(let r=0;r<this.bufferLength;r++){let o=r*n,i=(1-this.dataArray[r]/255)*this.height();console.log("bar",r,o,i),this.canvasCtx.fillStyle=`rgb(${i+100} 50 50)`,this.canvasCtx.fillRect(o,i,n,this.height()-i)}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-audio-visualizer"]],viewQuery:function(n,r){n&1&&un(r.canvas,NZ,5),n&2&&ar()},inputs:{stream:[1,"stream"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&Je(0,"canvas",null,0),n&2&&cn("width",r.width())("height",r.height())},styles:["[_nghost-%COMP%]{display:block}"]})};function AZ(t,e){if(t&1){let n=fo();_e(0,"div",2)(1,"ed-select",5),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.clipType,o)||(i.clipType=o),It(o)}),_e(2,"ed-select-option",6),Ct(3,"None"),Se(),_e(4,"ed-select-option",7),Ct(5,"Circle"),Se(),_e(6,"ed-select-option",8),Ct(7,"Rectangle"),Se()()(),_e(8,"div",1)(9,"h2"),Ct(10,"Border"),Se()(),_e(11,"div",2)(12,"color",5),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.borderColor,o)||(i.borderColor=o),It(o)}),Se(),_e(13,"input-component",9),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.borderWidth,o)||(i.borderWidth=o),It(o)}),Se()(),_e(14,"div",2)(15,"button",10),Jt("click",function(){Tt(n);let o=wt(),i=Hr(9);return It(o.recordingService.bringToFront(i.videoDO()))}),Ct(16," Bring to Front "),Se()(),_e(17,"ed-select",5),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.videoDO().backgroundType,o)||(i.videoDO().backgroundType=o),It(o)}),_e(18,"ed-select-option",6),Ct(19,"None"),Se(),_e(20,"ed-select-option",11),Ct(21,"Blur"),Se(),_e(22,"ed-select-option",12),Ct(23,"Image"),Se()(),_e(24,"input",13),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.showClippedHint,o)||(i.showClippedHint=o),It(o)}),Se(),_e(25,"input",14),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.videoDO().blurAmount,o)||(i.videoDO().blurAmount=o),It(o)}),Se(),_e(26,"input",14),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.videoDO().edgeBlurAmount,o)||(i.videoDO().edgeBlurAmount=o),It(o)}),Se(),_e(27,"input",15),fn("ngModelChange",function(o){Tt(n),wt();let i=Hr(9);return En(i.videoDO().foregroundThreshold,o)||(i.videoDO().foregroundThreshold=o),It(o)}),Se(),Ct(28," Muted ")}if(t&2){wt();let n=Hr(9);fe(),dn("ngModel",n.clipType),fe(11),dn("ngModel",n.borderColor),fe(),dn("ngModel",n.borderWidth),fe(4),dn("ngModel",n.videoDO().backgroundType),fe(7),dn("ngModel",n.showClippedHint),fe(),Rn("min",0),dn("ngModel",n.videoDO().blurAmount),fe(),Rn("min",0),dn("ngModel",n.videoDO().edgeBlurAmount),fe(),Rn("min",0),dn("ngModel",n.videoDO().foregroundThreshold)}}function MZ(t,e){if(t&1){let n=fo();_e(0,"div"),Ct(1),_e(2,"button",10),Jt("click",function(){let o=Tt(n).$implicit;return It(o.convertRecording())}),Ct(3,"Convert"),Se(),_e(4,"button",10),Jt("click",function(){let o=Tt(n).$implicit;return It(o.download())}),Ct(5,"Download"),Se(),_e(6,"button",10),Jt("click",function(){let o=Tt(n).$implicit,i=wt();return It(i.editorService.open(o))}),Ct(7,"Edit"),Se()()}if(t&2){let n=e.$implicit;fe(),Ia(" ",n.name," ")}}function kZ(t,e){if(t&1&&(Ct(0," audio "),Zn(1,"app-audio-visualizer",16)),t&2){let n=e.$implicit;fe(),Rn("stream",n.stream)}}var Dy=class t{settings=O(As);recordingService=O(Ms);editorService=O(Sy);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-sidebar"]],decls:15,vars:5,consts:[[1,"properties-panel"],[1,"properties-panel_header"],[1,"properties-panel_row"],["prefix","W",3,"ngModelChange","ngModel"],["prefix","H",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","none"],["value","circle"],["value","rectangle"],["type","number",3,"ngModelChange","ngModel"],[3,"click"],["value","blur"],["value","image"],["type","checkbox",3,"ngModelChange","ngModel"],["type","range","max","50",3,"ngModelChange","min","ngModel"],["type","range","max","1","step","0.01",3,"ngModelChange","min","ngModel"],[3,"stream"]],template:function(n,r){if(n&1){let o=fo();_e(0,"div",0)(1,"div",1)(2,"h2"),Ct(3,"Canvas"),Se()(),_e(4,"div",2)(5,"input-component",3),fn("ngModelChange",function(s){return Tt(o),En(r.settings.recordingWidth,s)||(r.settings.recordingWidth=s),It(s)}),Se(),_e(6,"input-component",4),fn("ngModelChange",function(s){return Tt(o),En(r.settings.recordingHeight,s)||(r.settings.recordingHeight=s),It(s)}),Se()(),_e(7,"div",2)(8,"color",5),fn("ngModelChange",function(s){return Tt(o),En(r.settings.backgroundColor,s)||(r.settings.backgroundColor=s),It(s)}),Se()(),Wh(9),kn(10,AZ,29,11),Se(),_a(11,MZ,8,1,"div",null,Gu),_a(13,kZ,2,1,null,null,Gu)}if(n&2){fe(5),dn("ngModel",r.settings.recordingWidth),fe(),dn("ngModel",r.settings.recordingHeight),fe(2),dn("ngModel",r.settings.backgroundColor),fe();let o=jw(r.settings.selectedVideo());fe(),On(o?10:-1),fe(),Ea(r.recordingService.recordings()),fe(2),Ea(r.recordingService.audioSources())}},dependencies:[Oa,ka,Y_,q_,Td,yc,o$,r$,SC,Iy,Cy],styles:["[_nghost-%COMP%]{display:block;width:280px;background:#181818;flex-shrink:0;border-left:solid 1px #484848}"]})};function OZ(t,e){t&1&&(ln(),Qe(0,"svg",2),Je(1,"rect",11),ct())}function RZ(t,e){t&1&&(ln(),Qe(0,"svg",3)(1,"g",12),Je(2,"circle",13),ct(),Qe(3,"defs")(4,"filter",14),Je(5,"feFlood",15)(6,"feBlend",16)(7,"feColorMatrix",17)(8,"feOffset",18)(9,"feGaussianBlur",19)(10,"feComposite",20)(11,"feColorMatrix",21)(12,"feBlend",22),ct()()())}var Ny=class t{recordingService=O(Ms);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-controls"]],decls:15,vars:1,consts:[[2,"display","flex","align-items","center","gap","10px"],[1,"btn",3,"click"],["width","21","height","21","viewBox","0 0 21 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","19","height","19","viewBox","0 0 19 19","fill","none","xmlns","http://www.w3.org/2000/svg"],[1,"btn-small",3,"click"],["width","24px","height","24px","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","13","r","3","stroke","#fff","stroke-width","1.5"],["d","M2 13.3636C2 10.2994 2 8.76721 2.74902 7.6666C3.07328 7.19014 3.48995 6.78104 3.97524 6.46268C4.69555 5.99013 5.59733 5.82123 6.978 5.76086C7.63685 5.76086 8.20412 5.27068 8.33333 4.63636C8.52715 3.68489 9.37805 3 10.3663 3H13.6337C14.6219 3 15.4728 3.68489 15.6667 4.63636C15.7959 5.27068 16.3631 5.76086 17.022 5.76086C18.4027 5.82123 19.3044 5.99013 20.0248 6.46268C20.51 6.78104 20.9267 7.19014 21.251 7.6666C22 8.76721 22 10.2994 22 13.3636C22 16.4279 22 17.9601 21.251 19.0607C20.9267 19.5371 20.51 19.9462 20.0248 20.2646C18.9038 21 17.3433 21 14.2222 21H9.77778C6.65675 21 5.09624 21 3.97524 20.2646C3.48995 19.9462 3.07328 19.5371 2.74902 19.0607C2.53746 18.7498 2.38566 18.4045 2.27673 18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M19 10H18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M12 20.5H16M12 20.5H8M12 20.5V16.5M12 16.5C16 16.5 19.5 16.1667 20 15.8333C20.5 15.5 21 12.6667 21 10C21 7.33333 20.5 4.5 20 4.16667C19.5 3.83333 16 3.5 12 3.5C8 3.5 4.5 3.83333 4 4.16667C3.5 4.5 3 7.33333 3 10C3 12.6667 3.5 15.5 4 15.8333C4.5 16.1667 8 16.5 12 16.5Z","stroke","#fff","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z","stroke","#fff","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["width","21","height","21","rx","5","fill","#D9D9D9"],["filter","url(#filter0_i_2_5)"],["cx","9.5","cy","9.5","r","9.5","fill","#FE3030"],["id","filter0_i_2_5","x","0","y","0","width","19","height","21","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["mode","normal","in","SourceGraphic","in2","BackgroundImageFix","result","shape"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","2"],["stdDeviation","1"],["in2","hardAlpha","operator","arithmetic","k2","-1","k3","1"],["type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"],["mode","normal","in2","shape","result","effect1_innerShadow_2_5"]],template:function(n,r){n&1&&(Qe(0,"div",0)(1,"div",1),wi("click",function(){return r.recordingService.isRecording()?r.recordingService.stopRecording():r.recordingService.startRecording()}),kn(2,OZ,2,0,":svg:svg",2)(3,RZ,13,0,":svg:svg",3),ct(),Qe(4,"div",4),wi("click",function(){return r.recordingService.getWebcamDevices()}),ln(),Qe(5,"svg",5),Je(6,"circle",6)(7,"path",7)(8,"path",8),ct()(),fa(),Qe(9,"div",4),wi("click",function(){return r.recordingService.getDesktopStream()}),ln(),Qe(10,"svg",5),Je(11,"path",9),ct()(),fa(),Qe(12,"div",4),wi("click",function(){return r.recordingService.getAudioStream()}),ln(),Qe(13,"svg",5),Je(14,"path",10),ct()()()),n&2&&(fe(2),On(r.recordingService.isRecording()?2:3))},styles:['[_nghost-%COMP%]{width:100%;height:100px;z-index:1000;background:#181818;border-top:solid 1px #484848;display:flex;align-items:center;justify-items:center;justify-content:center}.btn[_ngcontent-%COMP%]{position:relative;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-items:center;justify-content:center;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(360deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:50%;z-index:-1;background:linear-gradient(202.15deg,#646361 -9.36%,#242424 58.02%)}.btn-small[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:10px;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn-small[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:10px;z-index:-1;background:linear-gradient(223deg,#646361 -9.36%,#242424 58.02%);transition:all .3s}.btn-small[_ngcontent-%COMP%]:hover:before{background:linear-gradient(43deg,#646361 -9.36%,#242424 58.02%)}']})};var PZ=(t,e)=>e.id;function FZ(t,e){if(t&1){let n=fo();_e(0,"app-video",10,1),Jt("selected",function(o){Tt(n);let i=wt();return It(i.settings.setSelectedVideo(o))}),Se()}if(t&2){let n=e.$implicit,r=wt();Rn("scale",r.settings.scale())("width",r.settings.recordingWidth())("srcObject",n.stream)("videoDO",n)}}function LZ(t,e){if(t&1&&(_e(0,"h3"),Ct(1,"Playback"),Se(),Zn(2,"video",11,2)),t&2){let n=wt();fe(2),Rn("src",n.currentVideo(),mw)}}var Ay=class t{title=Ee("demo");videoService=O(Yc);recordingService=O(Ms);currentVideo=Ee(null);settings=O(As);canvasComponent=Sn(Kc);downloadData=null;constructor(){bt(()=>{console.log("canvas component",this.canvasComponent()),this.recordingService.canvasComponent=this.canvasComponent()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Xe({type:t,selectors:[["app-root"]],viewQuery:function(n,r){n&1&&un(r.canvasComponent,Kc,5),n&2&&ar()},decls:12,vars:11,consts:[["canvasComponent",""],["screenVideo",""],["playbackVideo",""],[2,"display","flex","width","100%","height","100%","overflow","hidden"],[2,"display","flex","flex-direction","column","width","100%","overflow","hidden","height","100%"],[2,"padding","40px","background","#222","overflow","hidden","flex","1","display","flex","align-items","center","justify-content","center"],[2,"width","100%",3,"scaleChange","background","contentWidth","contentHeight"],[3,"scale","width","srcObject","videoDO"],[2,"width","100%","display","none",3,"background","contentWidth","contentHeight"],[3,"background","canvasHeight","canvasWidth","videos"],[3,"selected","scale","width","srcObject","videoDO"],["controls","",3,"src"]],template:function(n,r){if(n&1){let o=fo();_e(0,"div",3)(1,"div",4)(2,"div",5)(3,"app-editor",6),Jt("scaleChange",function(s){return Tt(o),It(r.settings.scale.set(s))}),_a(4,FZ,2,4,"app-video",7,PZ),Se()(),Zn(6,"app-controls"),Se(),Zn(7,"app-sidebar"),Se(),kn(8,LZ,4,1),_e(9,"app-editor",8),Zn(10,"app-canvas",9,0),Se()}n&2&&(fe(3),Rn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),fe(),Ea(r.recordingService.videos()),fe(4),On(r.currentVideo()?8:-1),fe(),Rn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),fe(),Rn("background",r.settings.backgroundColor())("canvasHeight",r.settings.recordingHeight())("canvasWidth",r.settings.recordingWidth())("videos",r.recordingService.videos()))},dependencies:[Oa,ey,Kc,ty,Dy,Ny],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background:#121212;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;box-sizing:border-box}"]})};i_(Ay,qk).catch(t=>console.error(t));
