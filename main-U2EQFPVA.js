var i$=Object.create;var lp=Object.defineProperty,s$=Object.defineProperties,a$=Object.getOwnPropertyDescriptor,l$=Object.getOwnPropertyDescriptors,c$=Object.getOwnPropertyNames,ap=Object.getOwnPropertySymbols,u$=Object.getPrototypeOf,iv=Object.prototype.hasOwnProperty,DD=Object.prototype.propertyIsEnumerable;var ID=(t,e,n)=>e in t?lp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||={})iv.call(e,n)&&ID(t,n,e[n]);if(ap)for(var n of ap(e))DD.call(e,n)&&ID(t,n,e[n]);return t},he=(t,e)=>s$(t,l$(e));var ND=(t,e)=>{var n={};for(var r in t)iv.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ap)for(var r of ap(t))e.indexOf(r)<0&&DD.call(t,r)&&(n[r]=t[r]);return n};var _r=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ge=(t,e)=>{for(var n in e)lp(t,n,{get:e[n],enumerable:!0})},d$=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of c$(e))!iv.call(t,o)&&o!==n&&lp(t,o,{get:()=>e[o],enumerable:!(r=a$(e,o))||r.enumerable});return t};var sv=(t,e,n)=>(n=t!=null?i$(u$(t)):{},d$(e||!t||!t.__esModule?lp(n,"default",{value:t,enumerable:!0}):n,t));var rR=_r((Ome,nR)=>{"use strict";nR.exports=wt;var Kr=null;try{Kr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function wt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}wt.prototype.__isLong__;Object.defineProperty(wt.prototype,"__isLong__",{value:!0});function hr(t){return(t&&t.__isLong__)===!0}wt.isLong=hr;var qO={},KO={};function Wa(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=KO[t],r)?r:(n=_t(t,(t|0)<0?-1:0,!0),o&&(KO[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=qO[t],r)?r:(n=_t(t,t<0?-1:0,!1),o&&(qO[t]=n),n))}wt.fromInt=Wa;function Yr(t,e){if(isNaN(t))return e?Ga:Xr;if(e){if(t<0)return Ga;if(t>=QO)return tR}else{if(t<=-XO)return pr;if(t+1>=XO)return eR}return t<0?Yr(-t,e).neg():_t(t%Nc|0,t/Nc|0,e)}wt.fromNumber=Yr;function _t(t,e,n){return new wt(t,e,n)}wt.fromBits=_t;var zm=Math.pow;function BS(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Xr;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return BS(t.substring(1),e,n).neg();for(var o=Yr(zm(n,8)),i=Xr,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),n);if(a<8){var c=Yr(zm(n,a));i=i.mul(c).add(Yr(l))}else i=i.mul(o),i=i.add(Yr(l))}return i.unsigned=e,i}wt.fromString=BS;function Eo(t,e){return typeof t=="number"?Yr(t,e):typeof t=="string"?BS(t,e):_t(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}wt.fromValue=Eo;var YO=65536,aW=1<<24,Nc=YO*YO,QO=Nc*Nc,XO=QO/2,ZO=Wa(aW),Xr=Wa(0);wt.ZERO=Xr;var Ga=Wa(0,!0);wt.UZERO=Ga;var Dc=Wa(1);wt.ONE=Dc;var JO=Wa(1,!0);wt.UONE=JO;var jS=Wa(-1);wt.NEG_ONE=jS;var eR=_t(-1,2147483647,!1);wt.MAX_VALUE=eR;var tR=_t(-1,-1,!0);wt.MAX_UNSIGNED_VALUE=tR;var pr=_t(0,-2147483648,!1);wt.MIN_VALUE=pr;var Q=wt.prototype;Q.toInt=function(){return this.unsigned?this.low>>>0:this.low};Q.toNumber=function(){return this.unsigned?(this.high>>>0)*Nc+(this.low>>>0):this.high*Nc+(this.low>>>0)};Q.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(pr)){var n=Yr(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=Yr(zm(e,6),this.unsigned),s=this,a="";;){var l=s.div(i),c=s.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Q.getHighBits=function(){return this.high};Q.getHighBitsUnsigned=function(){return this.high>>>0};Q.getLowBits=function(){return this.low};Q.getLowBitsUnsigned=function(){return this.low>>>0};Q.getNumBitsAbs=function(){if(this.isNegative())return this.eq(pr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&(e&1<<n)==0;n--);return this.high!=0?n+33:n+1};Q.isZero=function(){return this.high===0&&this.low===0};Q.eqz=Q.isZero;Q.isNegative=function(){return!this.unsigned&&this.high<0};Q.isPositive=function(){return this.unsigned||this.high>=0};Q.isOdd=function(){return(this.low&1)===1};Q.isEven=function(){return(this.low&1)===0};Q.equals=function(e){return hr(e)||(e=Eo(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Q.eq=Q.equals;Q.notEquals=function(e){return!this.eq(e)};Q.neq=Q.notEquals;Q.ne=Q.notEquals;Q.lessThan=function(e){return this.comp(e)<0};Q.lt=Q.lessThan;Q.lessThanOrEqual=function(e){return this.comp(e)<=0};Q.lte=Q.lessThanOrEqual;Q.le=Q.lessThanOrEqual;Q.greaterThan=function(e){return this.comp(e)>0};Q.gt=Q.greaterThan;Q.greaterThanOrEqual=function(e){return this.comp(e)>=0};Q.gte=Q.greaterThanOrEqual;Q.ge=Q.greaterThanOrEqual;Q.compare=function(e){if(hr(e)||(e=Eo(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Q.comp=Q.compare;Q.negate=function(){return!this.unsigned&&this.eq(pr)?pr:this.not().add(Dc)};Q.neg=Q.negate;Q.add=function(e){hr(e)||(e=Eo(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,f=0,p=0,m=0;return m+=i+c,p+=m>>>16,m&=65535,p+=o+l,f+=p>>>16,p&=65535,f+=r+a,u+=f>>>16,f&=65535,u+=n+s,u&=65535,_t(p<<16|m,u<<16|f,this.unsigned)};Q.subtract=function(e){return hr(e)||(e=Eo(e)),this.add(e.neg())};Q.sub=Q.subtract;Q.multiply=function(e){if(this.isZero())return Xr;if(hr(e)||(e=Eo(e)),Kr){var n=Kr.mul(this.low,this.high,e.low,e.high);return _t(n,Kr.get_high(),this.unsigned)}if(e.isZero())return Xr;if(this.eq(pr))return e.isOdd()?pr:Xr;if(e.eq(pr))return this.isOdd()?pr:Xr;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(ZO)&&e.lt(ZO))return Yr(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,i=this.low>>>16,s=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,f=0,p=0,m=0,w=0;return w+=s*u,m+=w>>>16,w&=65535,m+=i*u,p+=m>>>16,m&=65535,m+=s*c,p+=m>>>16,m&=65535,p+=o*u,f+=p>>>16,p&=65535,p+=i*c,f+=p>>>16,p&=65535,p+=s*l,f+=p>>>16,p&=65535,f+=r*u+o*c+i*l+s*a,f&=65535,_t(m<<16|w,f<<16|p,this.unsigned)};Q.mul=Q.multiply;Q.divide=function(e){if(hr(e)||(e=Eo(e)),e.isZero())throw Error("division by zero");if(Kr){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Kr.div_u:Kr.div_s)(this.low,this.high,e.low,e.high);return _t(n,Kr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ga:Xr;var r,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ga;if(e.gt(this.shru(1)))return JO;i=Ga}else{if(this.eq(pr)){if(e.eq(Dc)||e.eq(jS))return pr;if(e.eq(pr))return Dc;var s=this.shr(1);return r=s.div(e).shl(1),r.eq(Xr)?e.isNegative()?Dc:jS:(o=this.sub(e.mul(r)),i=r.add(o.div(e)),i)}else if(e.eq(pr))return this.unsigned?Ga:Xr;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Xr}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:zm(2,a-48),c=Yr(r),u=c.mul(e);u.isNegative()||u.gt(o);)r-=l,c=Yr(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Dc),i=i.add(c),o=o.sub(u)}return i};Q.div=Q.divide;Q.modulo=function(e){if(hr(e)||(e=Eo(e)),Kr){var n=(this.unsigned?Kr.rem_u:Kr.rem_s)(this.low,this.high,e.low,e.high);return _t(n,Kr.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Q.mod=Q.modulo;Q.rem=Q.modulo;Q.not=function(){return _t(~this.low,~this.high,this.unsigned)};Q.and=function(e){return hr(e)||(e=Eo(e)),_t(this.low&e.low,this.high&e.high,this.unsigned)};Q.or=function(e){return hr(e)||(e=Eo(e)),_t(this.low|e.low,this.high|e.high,this.unsigned)};Q.xor=function(e){return hr(e)||(e=Eo(e)),_t(this.low^e.low,this.high^e.high,this.unsigned)};Q.shiftLeft=function(e){return hr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_t(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):_t(0,this.low<<e-32,this.unsigned)};Q.shl=Q.shiftLeft;Q.shiftRight=function(e){return hr(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?_t(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):_t(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Q.shr=Q.shiftRight;Q.shiftRightUnsigned=function(e){if(hr(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return _t(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?_t(n,0,this.unsigned):_t(n>>>e-32,0,this.unsigned)};Q.shru=Q.shiftRightUnsigned;Q.shr_u=Q.shiftRightUnsigned;Q.toSigned=function(){return this.unsigned?_t(this.low,this.high,!1):this};Q.toUnsigned=function(){return this.unsigned?this:_t(this.low,this.high,!0)};Q.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Q.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Q.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};wt.fromBytes=function(e,n,r){return r?wt.fromBytesLE(e,n):wt.fromBytesBE(e,n)};wt.fromBytesLE=function(e,n){return new wt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};wt.fromBytesBE=function(e,n){return new wt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)}});var qR=_r((Fc,WR)=>{"use strict";var s5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},el=s5();WR.exports=Fc=el.fetch;el.fetch&&(Fc.default=el.fetch.bind(el));Fc.Headers=el.Headers;Fc.Request=el.Request;Fc.Response=el.Response});var KR=_r(()=>{"use strict"});var a2=_r((s2,DC)=>{"use strict";(function(t,e,n){function r(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function i(a,l){var c=new r(a),u=l&&l.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,u&&(typeof u=="object"&&o(u,c),f.state=function(){return o(c,{})}),f}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var f=.02519603282416938*a;a=f>>>0,f-=a,f*=a,a=f>>>0,f-=a,a+=f*4294967296}return(a>>>0)*23283064365386963e-26};return l}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.alea=i})(s2,typeof DC=="object"&&DC,typeof define=="function"&&define)});var c2=_r((l2,NC)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i})(l2,typeof NC=="object"&&NC,typeof define=="function"&&define)});var d2=_r((u2,AC)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function o(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i})(u2,typeof AC=="object"&&AC,typeof define=="function"&&define)});var p2=_r((f2,MC)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.x,u=a.i,f,p,m;return f=c[u],f^=f>>>7,p=f^f<<24,f=c[u+1&7],p^=f^f>>>10,f=c[u+3&7],p^=f^f>>>3,f=c[u+4&7],p^=f^f<<7,f=c[u+7&7],f=f^f<<13,p^=f^f<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var f,p,m=[];if(u===(u|0))p=m[0]=u;else for(u=""+u,f=0;f<u.length;++f)m[f&7]=m[f&7]<<15^u.charCodeAt(f)+m[f+1&7]<<13;for(;m.length<8;)m.push(0);for(f=0;f<8&&m[f]===0;++f);for(f==8?p=m[7]=-1:p=m[f],c.x=m,c.i=0,f=256;f>0;--f)c.next()}l(a,s)}function o(s,a){return a.x=s.x.slice(),a.i=s.i,a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.x&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i})(f2,typeof MC=="object"&&MC,typeof define=="function"&&define)});var m2=_r((h2,kC)=>{"use strict";(function(t,e,n){function r(s){var a=this;a.next=function(){var c=a.w,u=a.X,f=a.i,p,m;return a.w=c=c+1640531527|0,m=u[f+34&127],p=u[f=f+1&127],m^=m<<13,p^=p<<17,m^=m>>>15,p^=p>>>12,m=u[f]=m^p,a.i=f,m+(c^c>>>16)|0};function l(c,u){var f,p,m,w,x,C=[],I=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,I=Math.max(I,u.length)),m=0,w=-32;w<I;++w)u&&(p^=u.charCodeAt((w+32)%u.length)),w===0&&(x=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,w>=0&&(x=x+1640531527|0,f=C[w&127]^=p+x,m=f==0?m+1:0);for(m>=128&&(C[(u&&u.length||0)&127]=-1),m=127,w=512;w>0;--w)p=C[m+34&127],f=C[m=m+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,C[m]=p^f;c.w=x,c.X=C,c.i=m}l(a,s)}function o(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function i(s,a){s==null&&(s=+new Date);var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(c.X&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i})(h2,typeof kC=="object"&&kC,typeof define=="function"&&define)});var y2=_r((g2,OC)=>{"use strict";(function(t,e,n){function r(s){var a=this,l="";a.next=function(){var u=a.b,f=a.c,p=a.d,m=a.a;return u=u<<25^u>>>7^f,f=f-p|0,p=p<<24^p>>>8^m,m=m-u|0,a.b=u=u<<20^u>>>12^f,a.c=f=f-p|0,a.d=p<<16^f>>>16^m,a.a=m-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function o(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function i(s,a){var l=new r(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var f=l.next()>>>11,p=(l.next()>>>0)/4294967296,m=(f+p)/(1<<21);while(m===0);return m},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&o(c,l),u.state=function(){return o(l,{})}),u}e&&e.exports?e.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i})(g2,typeof OC=="object"&&OC,typeof define=="function"&&define)});var v2=_r(()=>{"use strict"});var w2=_r((b2,dg)=>{"use strict";(function(t,e,n){var r=256,o=6,i=52,s="random",a=n.pow(r,o),l=n.pow(2,i),c=l*2,u=r-1,f;function p(A,k,V){var L=[];k=k==!0?{entropy:!0}:k||{};var H=C(x(k.entropy?[A,P(e)]:A??I(),3),L),G=new m(L),W=function(){for(var X=G.g(o),U=a,fe=0;X<l;)X=(X+fe)*r,U*=r,fe=G.g(1);for(;X>=c;)X/=2,U/=2,fe>>>=1;return(X+fe)/U};return W.int32=function(){return G.g(4)|0},W.quick=function(){return G.g(4)/4294967296},W.double=W,C(P(G.S),e),(k.pass||V||function(X,U,fe,ue){return ue&&(ue.S&&w(ue,G),X.state=function(){return w(G,{})}),fe?(n[s]=X,U):X})(W,H,"global"in k?k.global:this==n,k.state)}function m(A){var k,V=A.length,L=this,H=0,G=L.i=L.j=0,W=L.S=[];for(V||(A=[V++]);H<r;)W[H]=H++;for(H=0;H<r;H++)W[H]=W[G=u&G+A[H%V]+(k=W[H])],W[G]=k;(L.g=function(X){for(var U,fe=0,ue=L.i,Pe=L.j,Ve=L.S;X--;)U=Ve[ue=u&ue+1],fe=fe*r+Ve[u&(Ve[ue]=Ve[Pe=u&Pe+U])+(Ve[Pe]=U)];return L.i=ue,L.j=Pe,fe})(r)}function w(A,k){return k.i=A.i,k.j=A.j,k.S=A.S.slice(),k}function x(A,k){var V=[],L=typeof A,H;if(k&&L=="object")for(H in A)try{V.push(x(A[H],k-1))}catch{}return V.length?V:L=="string"?A:A+"\0"}function C(A,k){for(var V=A+"",L,H=0;H<V.length;)k[u&H]=u&(L^=k[u&H]*19)+V.charCodeAt(H++);return P(k)}function I(){try{var A;return f&&(A=f.randomBytes)?A=A(r):(A=new Uint8Array(r),(t.crypto||t.msCrypto).getRandomValues(A)),P(A)}catch{var k=t.navigator,V=k&&k.plugins;return[+new Date,t,V,t.screen,P(e)]}}function P(A){return String.fromCharCode.apply(0,A)}if(C(n.random(),e),typeof dg=="object"&&dg.exports){dg.exports=p;try{f=v2()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):n["seed"+s]=p})(typeof self<"u"?self:b2,[],Math)});var E2=_r((Q1e,_2)=>{"use strict";var Y8=a2(),X8=c2(),Z8=d2(),Q8=p2(),J8=m2(),eq=y2(),al=w2();al.alea=Y8;al.xor128=X8;al.xorwow=Z8;al.xorshift7=Q8;al.xor4096=J8;al.tychei=eq;_2.exports=al});var jF=_r($F=>{"use strict";(function(){"use strict";var t;function e(d){var h=0;return function(){return h<d.length?{done:!1,value:d[h++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,h,v){return d==Array.prototype||d==Object.prototype||(d[h]=v.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var h=0;h<d.length;++h){var v=d[h];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var o=r(this);function i(d,h){if(h)e:{var v=o;d=d.split(".");for(var E=0;E<d.length-1;E++){var T=d[E];if(!(T in v))break e;v=v[T]}d=d[d.length-1],E=v[d],h=h(E),h!=E&&h!=null&&n(v,d,{configurable:!0,writable:!0,value:h})}}i("Symbol",function(d){function h(N){if(this instanceof h)throw new TypeError("Symbol is not a constructor");return new v(E+(N||"")+"_"+T++,N)}function v(N,D){this.h=N,n(this,"description",{configurable:!0,writable:!0,value:D})}if(d)return d;v.prototype.toString=function(){return this.h};var E="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",T=0;return h}),i("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var h="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),v=0;v<h.length;v++){var E=o[h[v]];typeof E=="function"&&typeof E.prototype[d]!="function"&&n(E.prototype,d,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return d});function s(d){return d={next:d},d[Symbol.iterator]=function(){return this},d}function a(d){var h=typeof Symbol<"u"&&Symbol.iterator&&d[Symbol.iterator];return h?h.call(d):{next:e(d)}}function l(d){if(!(d instanceof Array)){d=a(d);for(var h,v=[];!(h=d.next()).done;)v.push(h.value);d=v}return d}var c=typeof Object.assign=="function"?Object.assign:function(d,h){for(var v=1;v<arguments.length;v++){var E=arguments[v];if(E)for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(d[T]=E[T])}return d};i("Object.assign",function(d){return d||c});var u=typeof Object.create=="function"?Object.create:function(d){function h(){}return h.prototype=d,new h},f;if(typeof Object.setPrototypeOf=="function")f=Object.setPrototypeOf;else{var p;e:{var m={a:!0},w={};try{w.__proto__=m,p=w.a;break e}catch{}p=!1}f=p?function(d,h){if(d.__proto__=h,d.__proto__!==h)throw new TypeError(d+" is not extensible");return d}:null}var x=f;function C(d,h){if(d.prototype=u(h.prototype),d.prototype.constructor=d,x)x(d,h);else for(var v in h)if(v!="prototype")if(Object.defineProperties){var E=Object.getOwnPropertyDescriptor(h,v);E&&Object.defineProperty(d,v,E)}else d[v]=h[v];d.za=h.prototype}function I(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function P(d){if(d.m)throw new TypeError("Generator is already running");d.m=!0}I.prototype.u=function(d){this.i=d};function A(d,h){d.l={ma:h,na:!0},d.h=d.s||d.v}I.prototype.return=function(d){this.l={return:d},this.h=this.v};function k(d,h,v){return d.h=v,{value:h}}function V(d){this.h=new I,this.i=d}function L(d,h){P(d.h);var v=d.h.j;return v?H(d,"return"in v?v.return:function(E){return{value:E,done:!0}},h,d.h.return):(d.h.return(h),G(d))}function H(d,h,v,E){try{var T=h.call(d.h.j,v);if(!(T instanceof Object))throw new TypeError("Iterator result "+T+" is not an object");if(!T.done)return d.h.m=!1,T;var N=T.value}catch(D){return d.h.j=null,A(d.h,D),G(d)}return d.h.j=null,E.call(d.h,N),G(d)}function G(d){for(;d.h.h;)try{var h=d.i(d.h);if(h)return d.h.m=!1,{value:h.value,done:!1}}catch(v){d.h.i=void 0,A(d.h,v)}if(d.h.m=!1,d.h.l){if(h=d.h.l,d.h.l=null,h.na)throw h.ma;return{value:h.return,done:!0}}return{value:void 0,done:!0}}function W(d){this.next=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.next,h,d.h.u):(d.h.u(h),h=G(d)),h},this.throw=function(h){return P(d.h),d.h.j?h=H(d,d.h.j.throw,h,d.h.u):(A(d.h,h),h=G(d)),h},this.return=function(h){return L(d,h)},this[Symbol.iterator]=function(){return this}}function X(d){function h(E){return d.next(E)}function v(E){return d.throw(E)}return new Promise(function(E,T){function N(D){D.done?E(D.value):Promise.resolve(D.value).then(h,v).then(N,T)}N(d.next())})}function U(d){return X(new W(new V(d)))}i("Promise",function(d){function h(D){this.i=0,this.j=void 0,this.h=[],this.u=!1;var O=this.l();try{D(O.resolve,O.reject)}catch(F){O.reject(F)}}function v(){this.h=null}function E(D){return D instanceof h?D:new h(function(O){O(D)})}if(d)return d;v.prototype.i=function(D){if(this.h==null){this.h=[];var O=this;this.j(function(){O.m()})}this.h.push(D)};var T=o.setTimeout;v.prototype.j=function(D){T(D,0)},v.prototype.m=function(){for(;this.h&&this.h.length;){var D=this.h;this.h=[];for(var O=0;O<D.length;++O){var F=D[O];D[O]=null;try{F()}catch(z){this.l(z)}}}this.h=null},v.prototype.l=function(D){this.j(function(){throw D})},h.prototype.l=function(){function D(z){return function(Z){F||(F=!0,z.call(O,Z))}}var O=this,F=!1;return{resolve:D(this.I),reject:D(this.m)}},h.prototype.I=function(D){if(D===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(D instanceof h)this.L(D);else{e:switch(typeof D){case"object":var O=D!=null;break e;case"function":O=!0;break e;default:O=!1}O?this.F(D):this.s(D)}},h.prototype.F=function(D){var O=void 0;try{O=D.then}catch(F){this.m(F);return}typeof O=="function"?this.M(O,D):this.s(D)},h.prototype.m=function(D){this.v(2,D)},h.prototype.s=function(D){this.v(1,D)},h.prototype.v=function(D,O){if(this.i!=0)throw Error("Cannot settle("+D+", "+O+"): Promise already settled in state"+this.i);this.i=D,this.j=O,this.i===2&&this.K(),this.H()},h.prototype.K=function(){var D=this;T(function(){if(D.D()){var O=o.console;typeof O<"u"&&O.error(D.j)}},1)},h.prototype.D=function(){if(this.u)return!1;var D=o.CustomEvent,O=o.Event,F=o.dispatchEvent;return typeof F>"u"?!0:(typeof D=="function"?D=new D("unhandledrejection",{cancelable:!0}):typeof O=="function"?D=new O("unhandledrejection",{cancelable:!0}):(D=o.document.createEvent("CustomEvent"),D.initCustomEvent("unhandledrejection",!1,!0,D)),D.promise=this,D.reason=this.j,F(D))},h.prototype.H=function(){if(this.h!=null){for(var D=0;D<this.h.length;++D)N.i(this.h[D]);this.h=null}};var N=new v;return h.prototype.L=function(D){var O=this.l();D.T(O.resolve,O.reject)},h.prototype.M=function(D,O){var F=this.l();try{D.call(O,F.resolve,F.reject)}catch(z){F.reject(z)}},h.prototype.then=function(D,O){function F(ce,ee){return typeof ce=="function"?function(we){try{z(ce(we))}catch($e){Z($e)}}:ee}var z,Z,be=new h(function(ce,ee){z=ce,Z=ee});return this.T(F(D,z),F(O,Z)),be},h.prototype.catch=function(D){return this.then(void 0,D)},h.prototype.T=function(D,O){function F(){switch(z.i){case 1:D(z.j);break;case 2:O(z.j);break;default:throw Error("Unexpected state: "+z.i)}}var z=this;this.h==null?N.i(F):this.h.push(F),this.u=!0},h.resolve=E,h.reject=function(D){return new h(function(O,F){F(D)})},h.race=function(D){return new h(function(O,F){for(var z=a(D),Z=z.next();!Z.done;Z=z.next())E(Z.value).T(O,F)})},h.all=function(D){var O=a(D),F=O.next();return F.done?E([]):new h(function(z,Z){function be(we){return function($e){ce[we]=$e,ee--,ee==0&&z(ce)}}var ce=[],ee=0;do ce.push(void 0),ee++,E(F.value).T(be(ce.length-1),Z),F=O.next();while(!F.done)})},h});function fe(d,h){d instanceof String&&(d+="");var v=0,E=!1,T={next:function(){if(!E&&v<d.length){var N=v++;return{value:h(N,d[N]),done:!1}}return E=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.keys",function(d){return d||function(){return fe(this,function(h){return h})}}),i("Array.prototype.fill",function(d){return d||function(h,v,E){var T=this.length||0;for(0>v&&(v=Math.max(0,T+v)),(E==null||E>T)&&(E=T),E=Number(E),0>E&&(E=Math.max(0,T+E)),v=Number(v||0);v<E;v++)this[v]=h;return this}});function ue(d){return d||Array.prototype.fill}i("Int8Array.prototype.fill",ue),i("Uint8Array.prototype.fill",ue),i("Uint8ClampedArray.prototype.fill",ue),i("Int16Array.prototype.fill",ue),i("Uint16Array.prototype.fill",ue),i("Int32Array.prototype.fill",ue),i("Uint32Array.prototype.fill",ue),i("Float32Array.prototype.fill",ue),i("Float64Array.prototype.fill",ue),i("Object.is",function(d){return d||function(h,v){return h===v?h!==0||1/h===1/v:h!==h&&v!==v}}),i("Array.prototype.includes",function(d){return d||function(h,v){var E=this;E instanceof String&&(E=String(E));var T=E.length;for(v=v||0,0>v&&(v=Math.max(v+T,0));v<T;v++){var N=E[v];if(N===h||Object.is(N,h))return!0}return!1}}),i("String.prototype.includes",function(d){return d||function(h,v){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(h instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(h,v||0)!==-1}});var Pe=this||self;function Ve(d,h){d=d.split(".");var v=Pe;d[0]in v||typeof v.execScript>"u"||v.execScript("var "+d[0]);for(var E;d.length&&(E=d.shift());)d.length||h===void 0?v[E]&&v[E]!==Object.prototype[E]?v=v[E]:v=v[E]={}:v[E]=h}function Et(d){var h;e:{if((h=Pe.navigator)&&(h=h.userAgent))break e;h=""}return h.indexOf(d)!=-1}var It=Array.prototype.map?function(d,h){return Array.prototype.map.call(d,h,void 0)}:function(d,h){for(var v=d.length,E=Array(v),T=typeof d=="string"?d.split(""):d,N=0;N<v;N++)N in T&&(E[N]=h.call(void 0,T[N],N,d));return E},mn={},Xt=null;function ci(d){var h=d.length,v=3*h/4;v%3?v=Math.floor(v):"=.".indexOf(d[h-1])!=-1&&(v="=.".indexOf(d[h-2])!=-1?v-2:v-1);var E=new Uint8Array(v),T=0;return Us(d,function(N){E[T++]=N}),T!==v?E.subarray(0,T):E}function Us(d,h){function v(F){for(;E<d.length;){var z=d.charAt(E++),Z=Xt[z];if(Z!=null)return Z;if(!/^[\s\xa0]*$/.test(z))throw Error("Unknown base64 encoding at char: "+z)}return F}ui();for(var E=0;;){var T=v(-1),N=v(0),D=v(64),O=v(64);if(O===64&&T===-1)break;h(T<<2|N>>4),D!=64&&(h(N<<4&240|D>>2),O!=64&&h(D<<6&192|O))}}function ui(){if(!Xt){Xt={};for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],v=0;5>v;v++){var E=d.concat(h[v].split(""));mn[v]=E;for(var T=0;T<E.length;T++){var N=E[T];Xt[N]===void 0&&(Xt[N]=T)}}}}var Or=typeof Uint8Array<"u",Rr=!(Et("Trident")||Et("MSIE"))&&typeof Pe.btoa=="function";function Jr(d){if(!Rr){var h;h===void 0&&(h=0),ui(),h=mn[h];for(var v=Array(Math.floor(d.length/3)),E=h[64]||"",T=0,N=0;T<d.length-2;T+=3){var D=d[T],O=d[T+1],F=d[T+2],z=h[D>>2];D=h[(D&3)<<4|O>>4],O=h[(O&15)<<2|F>>6],F=h[F&63],v[N++]=z+D+O+F}switch(z=0,F=E,d.length-T){case 2:z=d[T+1],F=h[(z&15)<<2]||E;case 1:d=d[T],v[N]=h[d>>2]+h[(d&3)<<4|z>>4]+F+E}return v.join("")}for(h="";10240<d.length;)h+=String.fromCharCode.apply(null,d.subarray(0,10240)),d=d.subarray(10240);return h+=String.fromCharCode.apply(null,d),btoa(h)}var Pr=RegExp("[-_.]","g");function di(d){switch(d){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Yi(d){if(!Rr)return ci(d);Pr.test(d)&&(d=d.replace(Pr,di)),d=atob(d);for(var h=new Uint8Array(d.length),v=0;v<d.length;v++)h[v]=d.charCodeAt(v);return h}var zs;function El(){return zs||(zs=new Uint8Array(0))}var Gs={},fV=typeof Uint8Array.prototype.slice=="function",sn=0,Kn=0;function OI(d){var h=0>d;d=Math.abs(d);var v=d>>>0;d=Math.floor((d-v)/4294967296),h&&(v=a(RI(v,d)),h=v.next().value,d=v.next().value,v=h),sn=v>>>0,Kn=d>>>0}var pV=typeof BigInt=="function";function RI(d,h){return h=~h,d?d=~d+1:h+=1,[d,h]}function PI(d,h){this.i=d>>>0,this.h=h>>>0}function FI(d){if(!d)return LI||(LI=new PI(0,0));if(!/^-?\d+$/.test(d))return null;if(16>d.length)OI(Number(d));else if(pV)d=BigInt(d),sn=Number(d&BigInt(4294967295))>>>0,Kn=Number(d>>BigInt(32)&BigInt(4294967295));else{var h=+(d[0]==="-");Kn=sn=0;for(var v=d.length,E=h,T=(v-h)%6+h;T<=v;E=T,T+=6)E=Number(d.slice(E,T)),Kn*=1e6,sn=1e6*sn+E,4294967296<=sn&&(Kn+=sn/4294967296|0,sn%=4294967296);h&&(h=a(RI(sn,Kn)),d=h.next().value,h=h.next().value,sn=d,Kn=h)}return new PI(sn,Kn)}var LI;function VI(d,h){return Error("Invalid wire type: "+d+" (at position "+h+")")}function Vy(){return Error("Failed to read varint, encoding is invalid.")}function $I(d,h){return Error("Tried to read past the end of the data "+h+" > "+d)}function Ws(){throw Error("Invalid UTF8")}function jI(d,h){return h=String.fromCharCode.apply(null,h),d==null?h:d+h}var Yf=void 0,$y,hV=typeof TextDecoder<"u",BI,mV=typeof TextEncoder<"u",HI;function UI(d){if(d!==Gs)throw Error("illegal external caller")}function iu(d,h){if(UI(h),this.V=d,d!=null&&d.length===0)throw Error("ByteString should be constructed with non-empty values")}function jy(){return HI||(HI=new iu(null,Gs))}function zI(d){UI(Gs);var h=d.V;return h=h==null||Or&&h!=null&&h instanceof Uint8Array?h:typeof h=="string"?Yi(h):null,h==null?h:d.V=h}function gV(d){if(typeof d=="string")return{buffer:Yi(d),C:!1};if(Array.isArray(d))return{buffer:new Uint8Array(d),C:!1};if(d.constructor===Uint8Array)return{buffer:d,C:!1};if(d.constructor===ArrayBuffer)return{buffer:new Uint8Array(d),C:!1};if(d.constructor===iu)return{buffer:zI(d)||El(),C:!0};if(d instanceof Uint8Array)return{buffer:new Uint8Array(d.buffer,d.byteOffset,d.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function GI(d,h){this.i=null,this.m=!1,this.h=this.j=this.l=0,By(this,d,h)}function By(d,h,v){v=v===void 0?{}:v,d.S=v.S===void 0?!1:v.S,h&&(h=gV(h),d.i=h.buffer,d.m=h.C,d.l=0,d.j=d.i.length,d.h=d.l)}GI.prototype.reset=function(){this.h=this.l};function qs(d,h){if(d.h=h,h>d.j)throw $I(d.j,h)}function su(d){var h=d.i,v=d.h,E=h[v++],T=E&127;if(E&128&&(E=h[v++],T|=(E&127)<<7,E&128&&(E=h[v++],T|=(E&127)<<14,E&128&&(E=h[v++],T|=(E&127)<<21,E&128&&(E=h[v++],T|=E<<28,E&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128&&h[v++]&128)))))throw Vy();return qs(d,v),T}function WI(d,h){if(0>h)throw Error("Tried to read a negative byte length: "+h);var v=d.h,E=v+h;if(E>d.j)throw $I(h,d.j-v);return d.h=E,v}var qI=[];function Hy(){this.h=[]}Hy.prototype.length=function(){return this.h.length},Hy.prototype.end=function(){var d=this.h;return this.h=[],d};function KI(d,h,v){for(;0<v||127<h;)d.h.push(h&127|128),h=(h>>>7|v<<25)>>>0,v>>>=7;d.h.push(h)}function Ks(d,h){for(;127<h;)d.h.push(h&127|128),h>>>=7;d.h.push(h)}function Uy(d,h){if(qI.length){var v=qI.pop();By(v,d,h),d=v}else d=new GI(d,h);this.h=d,this.j=this.h.h,this.i=this.l=-1,this.setOptions(h)}Uy.prototype.setOptions=function(d){d=d===void 0?{}:d,this.ca=d.ca===void 0?!1:d.ca},Uy.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function YI(d){var h=d.h;if(h.h==h.j)return!1;d.j=d.h.h;var v=su(d.h)>>>0;if(h=v>>>3,v&=7,!(0<=v&&5>=v))throw VI(v,d.j);if(1>h)throw Error("Invalid field number: "+h+" (at position "+d.j+")");return d.l=h,d.i=v,!0}function Xf(d){switch(d.i){case 0:if(d.i!=0)Xf(d);else e:{d=d.h;for(var h=d.h,v=h+10,E=d.i;h<v;)if((E[h++]&128)===0){qs(d,h);break e}throw Vy()}break;case 1:d=d.h,qs(d,d.h+8);break;case 2:d.i!=2?Xf(d):(h=su(d.h)>>>0,d=d.h,qs(d,d.h+h));break;case 5:d=d.h,qs(d,d.h+4);break;case 3:h=d.l;do{if(!YI(d))throw Error("Unmatched start-group tag: stream EOF");if(d.i==4){if(d.l!=h)throw Error("Unmatched end-group tag");break}Xf(d)}while(!0);break;default:throw VI(d.i,d.j)}}var Zf=[];function yV(){this.j=[],this.i=0,this.h=new Hy}function Sl(d,h){h.length!==0&&(d.j.push(h),d.i+=h.length)}function vV(d,h){if(h=h.R){Sl(d,d.h.end());for(var v=0;v<h.length;v++)Sl(d,zI(h[v])||El())}}var fi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Ys(d,h){return fi?d[fi]|=h:d.A!==void 0?d.A|=h:(Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}}),h)}function XI(d,h){fi?d[fi]&&(d[fi]&=~h):d.A!==void 0&&(d.A&=~h)}function Gt(d){var h;return fi?h=d[fi]:h=d.A,h??0}function Po(d,h){fi?d[fi]=h:d.A!==void 0?d.A=h:Object.defineProperties(d,{A:{value:h,configurable:!0,writable:!0,enumerable:!1}})}function zy(d){return Ys(d,1),d}function bV(d,h){Po(h,(d|0)&-51)}function Qf(d,h){Po(h,(d|18)&-41)}var Gy={};function Jf(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&d.constructor===Object}var au,ZI=[];Po(ZI,23),au=Object.freeze(ZI);function Wy(d){if(Gt(d.o)&2)throw Error("Cannot mutate an immutable Message")}function qy(d){var h=d.length;(h=h?d[h-1]:void 0)&&Jf(h)?h.g=1:(h={},d.push((h.g=1,h)))}function QI(d){var h=d.i+d.G;return d.B||(d.B=d.o[h]={})}function eo(d,h){return h===-1?null:h>=d.i?d.B?d.B[h]:void 0:d.o[h+d.G]}function Fo(d,h,v,E){Wy(d),lu(d,h,v,E)}function lu(d,h,v,E){d.j&&(d.j=void 0),h>=d.i||E?QI(d)[h]=v:(d.o[h+d.G]=v,(d=d.B)&&h in d&&delete d[h])}function Ky(d,h,v,E){var T=eo(d,h);Array.isArray(T)||(T=au);var N=Gt(T);if(N&1||zy(T),E)N&2||Ys(T,2),v&1||Object.freeze(T);else{E=!(v&2);var D=N&2;v&1||!D?E&&N&16&&!D&&XI(T,16):(T=zy(Array.prototype.slice.call(T)),lu(d,h,T))}return T}function Yy(d,h){var v=eo(d,h),E=v==null?v:typeof v=="number"||v==="NaN"||v==="Infinity"||v==="-Infinity"?Number(v):void 0;return E!=null&&E!==v&&lu(d,h,E),E}function JI(d,h,v,E,T){d.h||(d.h={});var N=d.h[v],D=Ky(d,v,3,T);if(!N){var O=D;N=[];var F=!!(Gt(d.o)&16);D=!!(Gt(O)&2);var z=O;!T&&D&&(O=Array.prototype.slice.call(O));for(var Z=D,be=0;be<O.length;be++){var ce=O[be],ee=h,we=!1;if(we=we===void 0?!1:we,ce=Array.isArray(ce)?new ee(ce):we?new ee:void 0,ce!==void 0){ee=ce.o;var $e=we=Gt(ee);D&&($e|=2),F&&($e|=16),$e!=we&&Po(ee,$e),ee=$e,Z=Z||!!(2&ee),N.push(ce)}}return d.h[v]=N,F=Gt(O),h=F|33,h=Z?h&-9:h|8,F!=h&&(Z=O,Object.isFrozen(Z)&&(Z=Array.prototype.slice.call(Z)),Po(Z,h),O=Z),z!==O&&lu(d,v,O),(T||E&&D)&&Ys(N,2),E&&Object.freeze(N),N}return T||(T=Object.isFrozen(N),E&&!T?Object.freeze(N):!E&&T&&(N=Array.prototype.slice.call(N),d.h[v]=N)),N}function Xy(d,h,v){var E=!!(Gt(d.o)&2);if(h=JI(d,h,v,E,E),d=Ky(d,v,3,E),!(E||Gt(d)&8)){for(E=0;E<h.length;E++){if(v=h[E],Gt(v.o)&2){var T=iD(v,!1);T.j=v}else T=v;v!==T&&(h[E]=T,d[E]=T.o)}Ys(d,8)}return h}function Lo(d,h,v){if(v!=null&&typeof v!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof v+": "+v);Fo(d,h,v)}function eD(d,h,v,E,T){Wy(d);var N=JI(d,v,h,!1,!1);return v=E??new v,d=Ky(d,h,2,!1),T!=null?(N.splice(T,0,v),d.splice(T,0,v.o)):(N.push(v),d.push(v.o)),v.C()&&XI(d,8),v}function ep(d,h){return d??h}function Vo(d,h,v){return v=v===void 0?0:v,ep(Yy(d,h),v)}var tp;function wV(d){switch(typeof d){case"number":return isFinite(d)?d:String(d);case"object":if(d)if(Array.isArray(d)){if((Gt(d)&128)!==0)return d=Array.prototype.slice.call(d),qy(d),d}else{if(Or&&d!=null&&d instanceof Uint8Array)return Jr(d);if(d instanceof iu){var h=d.V;return h==null?"":typeof h=="string"?h:d.V=Jr(h)}}}return d}function tD(d,h,v,E){if(d!=null){if(Array.isArray(d))d=Zy(d,h,v,E!==void 0);else if(Jf(d)){var T={},N;for(N in d)T[N]=tD(d[N],h,v,E);d=T}else d=h(d,E);return d}}function Zy(d,h,v,E){var T=Gt(d);E=E?!!(T&16):void 0,d=Array.prototype.slice.call(d);for(var N=0;N<d.length;N++)d[N]=tD(d[N],h,v,E);return v(T,d),d}function _V(d){return d.ja===Gy?d.toJSON():wV(d)}function EV(d,h){d&128&&qy(h)}function nD(d,h,v){if(v=v===void 0?Qf:v,d!=null){if(Or&&d instanceof Uint8Array)return d.length?new iu(new Uint8Array(d),Gs):jy();if(Array.isArray(d)){var E=Gt(d);return E&2?d:h&&!(E&32)&&(E&16||E===0)?(Po(d,E|2),d):(d=Zy(d,nD,E&4?Qf:v,!0),h=Gt(d),h&4&&h&2&&Object.freeze(d),d)}return d.ja===Gy?oD(d):d}}function rD(d,h,v,E,T,N,D){if(d=d.h&&d.h[v]){if(E=Gt(d),E&2?E=d:(N=It(d,oD),Qf(E,N),Object.freeze(N),E=N),Wy(h),D=E==null?au:zy([]),E!=null){for(N=!!E.length,d=0;d<E.length;d++){var O=E[d];N=N&&!(Gt(O.o)&2),D[d]=O.o}N=(N?8:0)|1,d=Gt(D),(d&N)!==N&&(Object.isFrozen(D)&&(D=Array.prototype.slice.call(D)),Po(D,d|N)),h.h||(h.h={}),h.h[v]=E}else h.h&&(h.h[v]=void 0);lu(h,v,D,T)}else Fo(h,v,nD(E,N,D),T)}function oD(d){return Gt(d.o)&2||(d=iD(d,!0),Ys(d.o,2)),d}function iD(d,h){var v=d.o,E=[];Ys(E,16);var T=d.constructor.h;if(T&&E.push(T),T=d.B,T){E.length=v.length,E.fill(void 0,E.length,v.length);var N={};E[E.length-1]=N}(Gt(v)&128)!==0&&qy(E),h=h||d.C()?Qf:bV,N=d.constructor,tp=E,E=new N(E),tp=void 0,d.R&&(E.R=d.R.slice()),N=!!(Gt(v)&16);for(var D=T?v.length-1:v.length,O=0;O<D;O++)rD(d,E,O-d.G,v[O],!1,N,h);if(T)for(var F in T)rD(d,E,+F,T[F],!0,N,h);return E}function or(d,h,v){d==null&&(d=tp),tp=void 0;var E=this.constructor.i||0,T=0<E,N=this.constructor.h,D=!1;if(d==null){d=N?[N]:[];var O=48,F=!0;T&&(E=0,O|=128),Po(d,O)}else{if(!Array.isArray(d)||N&&N!==d[0])throw Error();var z=O=Ys(d,0);if((F=(16&z)!==0)&&((D=(32&z)!==0)||(z|=32)),T){if(128&z)E=0;else if(0<d.length){var Z=d[d.length-1];if(Jf(Z)&&"g"in Z){E=0,z|=128,delete Z.g;var be=!0,ce;for(ce in Z){be=!1;break}be&&d.pop()}}}else if(128&z)throw Error();O!==z&&Po(d,z)}this.G=(N?0:-1)-E,this.h=void 0,this.o=d;e:{if(N=this.o.length,E=N-1,N&&(N=this.o[E],Jf(N))){this.B=N,this.i=E-this.G;break e}h!==void 0&&-1<h?(this.i=Math.max(h,E+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!T&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(v){h=F&&!D&&!0,T=this.i;var ee;for(F=0;F<v.length;F++)D=v[F],D<T?(D+=this.G,(E=d[D])?sD(E,h):d[D]=au):(ee||(ee=QI(this)),(E=ee[D])?sD(E,h):ee[D]=au)}}or.prototype.toJSON=function(){return Zy(this.o,_V,EV)},or.prototype.C=function(){return!!(Gt(this.o)&2)};function sD(d,h){if(Array.isArray(d)){var v=Gt(d),E=1;!h||v&2||(E|=16),(v&E)!==E&&Po(d,v|E)}}or.prototype.ja=Gy,or.prototype.toString=function(){return this.o.toString()};function aD(d,h,v){if(v){var E={},T;for(T in v){var N=v[T],D=N.ra;D||(E.J=N.xa||N.oa.W,N.ia?(E.aa=fD(N.ia),D=(function(O){return function(F,z,Z){return O.J(F,z,Z,O.aa)}})(E)):N.ka?(E.Z=pD(N.da.P,N.ka),D=(function(O){return function(F,z,Z){return O.J(F,z,Z,O.Z)}})(E)):D=E.J,N.ra=D),D(h,d,N.da),E={J:E.J,aa:E.aa,Z:E.Z}}}vV(h,d)}var np=Symbol();function lD(d,h,v){return d[np]||(d[np]=function(E,T){return h(E,T,v)})}function cD(d){var h=d[np];if(!h){var v=Jy(d);h=function(E,T){return hD(E,T,v)},d[np]=h}return h}function SV(d){var h=d.ia;if(h)return cD(h);if(h=d.wa)return lD(d.da.P,h,d.ka)}function xV(d){var h=SV(d),v=d.da,E=d.oa.U;return h?function(T,N){return E(T,N,v,h)}:function(T,N){return E(T,N,v)}}function uD(d,h){var v=d[h];return typeof v=="function"&&v.length===0&&(v=v(),d[h]=v),Array.isArray(v)&&(uu in v||cu in v||0<v.length&&typeof v[0]=="function")?v:void 0}function dD(d,h,v,E,T,N){h.P=d[0];var D=1;if(d.length>D&&typeof d[D]!="number"){var O=d[D++];v(h,O)}for(;D<d.length;){v=d[D++];for(var F=D+1;F<d.length&&typeof d[F]!="number";)F++;switch(O=d[D++],F-=D,F){case 0:E(h,v,O);break;case 1:(F=uD(d,D))?(D++,T(h,v,O,F)):E(h,v,O,d[D++]);break;case 2:F=D++,F=uD(d,F),T(h,v,O,F,d[D++]);break;case 3:N(h,v,O,d[D++],d[D++],d[D++]);break;case 4:N(h,v,O,d[D++],d[D++],d[D++],d[D++]);break;default:throw Error("unexpected number of binary field arguments: "+F)}}return h}var rp=Symbol();function fD(d){var h=d[rp];if(!h){var v=Qy(d);h=function(E,T){return mD(E,T,v)},d[rp]=h}return h}function pD(d,h){var v=d[rp];return v||(v=function(E,T){return aD(E,T,h)},d[rp]=v),v}var cu=Symbol();function CV(d,h){d.push(h)}function TV(d,h,v){d.push(h,v.W)}function IV(d,h,v,E){var T=fD(E),N=Qy(E).P,D=v.W;d.push(h,function(O,F,z){return D(O,F,z,N,T)})}function DV(d,h,v,E,T,N){var D=pD(E,N),O=v.W;d.push(h,function(F,z,Z){return O(F,z,Z,E,D)})}function Qy(d){var h=d[cu];return h||(h=dD(d,d[cu]=[],CV,TV,IV,DV),uu in d&&cu in d&&(d.length=0),h)}var uu=Symbol();function NV(d,h){d[0]=h}function AV(d,h,v,E){var T=v.U;d[h]=E?function(N,D,O){return T(N,D,O,E)}:T}function MV(d,h,v,E,T){var N=v.U,D=cD(E),O=Jy(E).P;d[h]=function(F,z,Z){return N(F,z,Z,O,D,T)}}function kV(d,h,v,E,T,N,D){var O=v.U,F=lD(E,T,N);d[h]=function(z,Z,be){return O(z,Z,be,E,F,D)}}function Jy(d){var h=d[uu];return h||(h=dD(d,d[uu]={},NV,AV,MV,kV),uu in d&&cu in d&&(d.length=0),h)}function hD(d,h,v){for(;YI(h)&&h.i!=4;){var E=h.l,T=v[E];if(!T){var N=v[0];N&&(N=N[E])&&(T=v[E]=xV(N))}if(!T||!T(h,d,E)){T=h,E=d,N=T.j,Xf(T);var D=T;if(!D.ca){if(T=D.h.h-N,D.h.h=N,D=D.h,T==0)T=jy();else{if(N=WI(D,T),D.S&&D.m)T=D.i.subarray(N,N+T);else{D=D.i;var O=N;T=N+T,T=O===T?El():fV?D.slice(O,T):new Uint8Array(D.subarray(O,T))}T=T.length==0?jy():new iu(T,Gs)}(N=E.R)?N.push(T):E.R=[T]}}}return d}function mD(d,h,v){for(var E=v.length,T=E%2==1,N=T?1:0;N<E;N+=2)(0,v[N+1])(h,d,v[N]);aD(d,h,T?v[0]:void 0)}function du(d,h){return{U:d,W:h}}var to=du(function(d,h,v){if(d.i!==5)return!1;d=d.h;var E=d.i,T=d.h,N=E[T],D=E[T+1],O=E[T+2];return E=E[T+3],qs(d,d.h+4),D=(N<<0|D<<8|O<<16|E<<24)>>>0,d=2*(D>>31)+1,N=D>>>23&255,D&=8388607,Fo(h,v,N==255?D?NaN:1/0*d:N==0?d*Math.pow(2,-149)*D:d*Math.pow(2,N-150)*(D+Math.pow(2,23))),!0},function(d,h,v){if(h=Yy(h,v),h!=null){Ks(d.h,8*v+5),d=d.h;var E=+h;E===0?0<1/E?sn=Kn=0:(Kn=0,sn=2147483648):isNaN(E)?(Kn=0,sn=2147483647):(E=(v=0>E?-2147483648:0)?-E:E,34028234663852886e22<E?(Kn=0,sn=(v|2139095040)>>>0):11754943508222875e-54>E?(E=Math.round(E/Math.pow(2,-149)),Kn=0,sn=(v|E)>>>0):(h=Math.floor(Math.log(E)/Math.LN2),E*=Math.pow(2,-h),E=Math.round(8388608*E),16777216<=E&&++h,Kn=0,sn=(v|h+127<<23|E&8388607)>>>0)),v=sn,d.h.push(v>>>0&255),d.h.push(v>>>8&255),d.h.push(v>>>16&255),d.h.push(v>>>24&255)}}),OV=du(function(d,h,v){if(d.i!==0)return!1;var E=d.h,T=0,N=d=0,D=E.i,O=E.h;do{var F=D[O++];T|=(F&127)<<N,N+=7}while(32>N&&F&128);for(32<N&&(d|=(F&127)>>4),N=3;32>N&&F&128;N+=7)F=D[O++],d|=(F&127)<<N;if(qs(E,O),128>F)E=T>>>0,F=d>>>0,(d=F&2147483648)&&(E=~E+1>>>0,F=~F>>>0,E==0&&(F=F+1>>>0)),E=4294967296*F+(E>>>0);else throw Vy();return Fo(h,v,d?-E:E),!0},function(d,h,v){h=eo(h,v),h!=null&&(typeof h=="string"&&FI(h),h!=null&&(Ks(d.h,8*v),typeof h=="number"?(d=d.h,OI(h),KI(d,sn,Kn)):(v=FI(h),KI(d.h,v.i,v.h))))}),RV=du(function(d,h,v){return d.i!==0?!1:(Fo(h,v,su(d.h)),!0)},function(d,h,v){if(h=eo(h,v),h!=null&&h!=null)if(Ks(d.h,8*v),d=d.h,v=h,0<=v)Ks(d,v);else{for(h=0;9>h;h++)d.h.push(v&127|128),v>>=7;d.h.push(1)}}),gD=du(function(d,h,v){if(d.i!==2)return!1;var E=su(d.h)>>>0;d=d.h;var T=WI(d,E);if(d=d.i,hV){var N=d,D;(D=$y)||(D=$y=new TextDecoder("utf-8",{fatal:!0})),d=T+E,N=T===0&&d===N.length?N:N.subarray(T,d);try{var O=D.decode(N)}catch(be){if(Yf===void 0){try{D.decode(new Uint8Array([128]))}catch{}try{D.decode(new Uint8Array([97])),Yf=!0}catch{Yf=!1}}throw!Yf&&($y=void 0),be}}else{O=T,E=O+E,T=[];for(var F=null,z,Z;O<E;)z=d[O++],128>z?T.push(z):224>z?O>=E?Ws():(Z=d[O++],194>z||(Z&192)!==128?(O--,Ws()):T.push((z&31)<<6|Z&63)):240>z?O>=E-1?Ws():(Z=d[O++],(Z&192)!==128||z===224&&160>Z||z===237&&160<=Z||((N=d[O++])&192)!==128?(O--,Ws()):T.push((z&15)<<12|(Z&63)<<6|N&63)):244>=z?O>=E-2?Ws():(Z=d[O++],(Z&192)!==128||(z<<28)+(Z-144)>>30!==0||((N=d[O++])&192)!==128||((D=d[O++])&192)!==128?(O--,Ws()):(z=(z&7)<<18|(Z&63)<<12|(N&63)<<6|D&63,z-=65536,T.push((z>>10&1023)+55296,(z&1023)+56320))):Ws(),8192<=T.length&&(F=jI(F,T),T.length=0);O=jI(F,T)}return Fo(h,v,O),!0},function(d,h,v){if(h=eo(h,v),h!=null){var E=!1;if(E=E===void 0?!1:E,mV){if(E&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(h))throw Error("Found an unpaired surrogate");h=(BI||(BI=new TextEncoder)).encode(h)}else{for(var T=0,N=new Uint8Array(3*h.length),D=0;D<h.length;D++){var O=h.charCodeAt(D);if(128>O)N[T++]=O;else{if(2048>O)N[T++]=O>>6|192;else{if(55296<=O&&57343>=O){if(56319>=O&&D<h.length){var F=h.charCodeAt(++D);if(56320<=F&&57343>=F){O=1024*(O-55296)+F-56320+65536,N[T++]=O>>18|240,N[T++]=O>>12&63|128,N[T++]=O>>6&63|128,N[T++]=O&63|128;continue}else D--}if(E)throw Error("Found an unpaired surrogate");O=65533}N[T++]=O>>12|224,N[T++]=O>>6&63|128}N[T++]=O&63|128}}h=T===N.length?N:N.subarray(0,T)}Ks(d.h,8*v+2),Ks(d.h,h.length),Sl(d,d.h.end()),Sl(d,h)}}),yD=du(function(d,h,v,E,T){if(d.i!==2)return!1;h=eD(h,v,E),v=d.h.j,E=su(d.h)>>>0;var N=d.h.h+E,D=N-v;if(0>=D&&(d.h.j=N,T(h,d,void 0,void 0,void 0),D=N-d.h.h),D)throw Error("Message parsing ended unexpectedly. Expected to read "+(E+" bytes, instead read "+(E-D)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return d.h.h=N,d.h.j=v,!0},function(d,h,v,E,T){if(h=Xy(h,E,v),h!=null)for(E=0;E<h.length;E++){var N=d;Ks(N.h,8*v+2);var D=N.h.end();Sl(N,D),D.push(N.i),N=D,T(h[E],d),D=d;var O=N.pop();for(O=D.i+D.h.length()-O;127<O;)N.push(O&127|128),O>>>=7,D.i++;N.push(O),D.i++}});function ev(d){return function(h,v){e:{if(Zf.length){var E=Zf.pop();E.setOptions(v),By(E.h,h,v),h=E}else h=new Uy(h,v);try{var T=Jy(d),N=hD(new T.P,h,T);break e}finally{T=h.h,T.i=null,T.m=!1,T.l=0,T.j=0,T.h=0,T.S=!1,h.l=-1,h.i=-1,100>Zf.length&&Zf.push(h)}N=void 0}return N}}function tv(d){return function(){var h=new yV;mD(this,h,Qy(d)),Sl(h,h.h.end());for(var v=new Uint8Array(h.i),E=h.j,T=E.length,N=0,D=0;D<T;D++){var O=E[D];v.set(O,N),N+=O.length}return h.j=[v],v}}function xl(d){or.call(this,d)}C(xl,or);var vD=[xl,1,RV,2,to,3,gD,4,gD];xl.prototype.l=tv(vD);function nv(d){or.call(this,d,-1,PV)}C(nv,or),nv.prototype.addClassification=function(d,h){return eD(this,1,xl,d,h),this};var PV=[1],FV=ev([nv,1,yD,vD]);function fu(d){or.call(this,d)}C(fu,or);var bD=[fu,1,to,2,to,3,to,4,to,5,to];fu.prototype.l=tv(bD);function wD(d){or.call(this,d,-1,LV)}C(wD,or);var LV=[1],VV=ev([wD,1,yD,bD]);function op(d){or.call(this,d)}C(op,or);var _D=[op,1,to,2,to,3,to,4,to,5,to,6,OV],$V=ev(_D);op.prototype.l=tv(_D);function ED(d,h,v){if(v=d.createShader(v===0?d.VERTEX_SHADER:d.FRAGMENT_SHADER),d.shaderSource(v,h),d.compileShader(v),!d.getShaderParameter(v,d.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+d.getShaderInfoLog(v));return v}function jV(d){return Xy(d,xl,1).map(function(h){var v=eo(h,1);return{index:v??0,qa:Vo(h,2),label:eo(h,3)!=null?ep(eo(h,3),""):void 0,displayName:eo(h,4)!=null?ep(eo(h,4),""):void 0}})}function BV(d){return{x:Vo(d,1),y:Vo(d,2),z:Vo(d,3),visibility:Yy(d,4)!=null?Vo(d,4):void 0}}function rv(d,h){this.i=d,this.h=h,this.m=0}function SD(d,h,v){return HV(d,h),typeof d.h.canvas.transferToImageBitmap=="function"?Promise.resolve(d.h.canvas.transferToImageBitmap()):v?Promise.resolve(d.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(d.h.canvas):(d.j===void 0&&(d.j=document.createElement("canvas")),new Promise(function(E){d.j.height=d.h.canvas.height,d.j.width=d.h.canvas.width,d.j.getContext("2d",{}).drawImage(d.h.canvas,0,0,d.h.canvas.width,d.h.canvas.height),E(d.j)}))}function HV(d,h){var v=d.h;if(d.s===void 0){var E=ED(v,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),T=ED(v,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),N=v.createProgram();if(v.attachShader(N,E),v.attachShader(N,T),v.linkProgram(N),!v.getProgramParameter(N,v.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+v.getProgramInfoLog(N));E=d.s=N,v.useProgram(E),T=v.getUniformLocation(E,"sampler0"),d.l={O:v.getAttribLocation(E,"aVertex"),N:v.getAttribLocation(E,"aTex"),ya:T},d.v=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.enableVertexAttribArray(d.l.O),v.vertexAttribPointer(d.l.O,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),d.u=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.enableVertexAttribArray(d.l.N),v.vertexAttribPointer(d.l.N,2,v.FLOAT,!1,0,0),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),v.STATIC_DRAW),v.bindBuffer(v.ARRAY_BUFFER,null),v.uniform1i(T,0)}E=d.l,v.useProgram(d.s),v.canvas.width=h.width,v.canvas.height=h.height,v.viewport(0,0,h.width,h.height),v.activeTexture(v.TEXTURE0),d.i.bindTexture2d(h.glName),v.enableVertexAttribArray(E.O),v.bindBuffer(v.ARRAY_BUFFER,d.v),v.vertexAttribPointer(E.O,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,d.u),v.vertexAttribPointer(E.N,2,v.FLOAT,!1,0,0),v.bindFramebuffer(v.DRAW_FRAMEBUFFER?v.DRAW_FRAMEBUFFER:v.FRAMEBUFFER,null),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.colorMask(!0,!0,!0,!0),v.drawArrays(v.TRIANGLE_FAN,0,4),v.disableVertexAttribArray(E.O),v.disableVertexAttribArray(E.N),v.bindBuffer(v.ARRAY_BUFFER,null),d.i.bindTexture2d(0)}function UV(d){this.h=d}var zV=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function GV(d,h){return h+d}function xD(d,h){window[d]=h}function WV(d){var h=document.createElement("script");return h.setAttribute("src",d),h.setAttribute("crossorigin","anonymous"),new Promise(function(v){h.addEventListener("load",function(){v()},!1),h.addEventListener("error",function(){v()},!1),document.body.appendChild(h)})}function qV(){return U(function(d){switch(d.h){case 1:return d.s=2,k(d,WebAssembly.instantiate(zV),4);case 4:d.h=3,d.s=0;break;case 2:return d.s=0,d.l=null,d.return(!1);case 3:return d.return(!0)}})}function ov(d){if(this.h=d,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=d&&d.locateFile||GV,typeof window=="object")var h=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")h=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=h,d.options){h=a(Object.keys(d.options));for(var v=h.next();!v.done;v=h.next()){v=v.value;var E=d.options[v].default;E!==void 0&&(this.l[v]=typeof E=="function"?E():E)}}}t=ov.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function KV(d){var h,v,E,T,N,D,O,F,z,Z,be;return U(function(ce){switch(ce.h){case 1:return d.ga?(h=d.h.files===void 0?[]:typeof d.h.files=="function"?d.h.files(d.l):d.h.files,k(ce,qV(),2)):ce.return();case 2:if(v=ce.i,typeof window=="object")return xD("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),xD("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),D=h.filter(function(ee){return ee.data!==void 0}),O=h.filter(function(ee){return ee.data===void 0}),F=Promise.all(D.map(function(ee){var we=ip(d,ee.url);if(ee.path!==void 0){var $e=ee.path;we=we.then(function(St){return d.overrideFile($e,St),Promise.resolve(St)})}return we})),z=Promise.all(O.map(function(ee){return ee.simd===void 0||ee.simd&&v||!ee.simd&&!v?WV(d.locateFile(ee.url,d.ha)):Promise.resolve()})).then(function(){var ee,we,$e;return U(function(St){if(St.h==1)return ee=window.createMediapipeSolutionsWasm,we=window.createMediapipeSolutionsPackedAssets,$e=d,k(St,ee(we),2);$e.i=St.i,St.h=0})}),Z=(function(){return U(function(ee){return d.h.graph&&d.h.graph.url?ee=k(ee,ip(d,d.h.graph.url),0):(ee.h=0,ee=void 0),ee})})(),k(ce,Promise.all([z,F,Z]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return E=h.filter(function(ee){return ee.simd===void 0||ee.simd&&v||!ee.simd&&!v}).map(function(ee){return d.locateFile(ee.url,d.ha)}),importScripts.apply(null,l(E)),T=d,k(ce,createMediapipeSolutionsWasm(Module),6);case 6:T.i=ce.i,d.m=new OffscreenCanvas(1,1),d.i.canvas=d.m,N=d.i.GL.createContext(d.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),d.i.GL.makeContextCurrent(N),ce.h=4;break;case 7:if(d.m=document.createElement("canvas"),be=d.m.getContext("webgl2",{}),!be&&(be=d.m.getContext("webgl",{}),!be))return alert("Failed to create WebGL canvas context when passing video frame."),ce.return();d.K=be,d.i.canvas=d.m,d.i.createContext(d.m,!0,!0,{});case 4:d.j=new d.i.SolutionWasm,d.ga=!1,ce.h=0}})}function YV(d){var h,v,E,T,N,D,O,F;return U(function(z){if(z.h==1){if(d.h.graph&&d.h.graph.url&&d.fa===d.h.graph.url)return z.return();if(d.u=!0,!d.h.graph||!d.h.graph.url){z.h=2;return}return d.fa=d.h.graph.url,k(z,ip(d,d.h.graph.url),3)}for(z.h!=2&&(h=z.i,d.j.loadGraph(h)),v=a(Object.keys(d.D)),E=v.next();!E.done;E=v.next())T=E.value,d.j.overrideFile(T,d.D[T]);if(d.D={},d.h.listeners)for(N=a(d.h.listeners),D=N.next();!D.done;D=N.next())O=D.value,JV(d,O);F=d.l,d.l={},d.setOptions(F),z.h=0})}t.reset=function(){var d=this;return U(function(h){d.j&&(d.j.reset(),d.s={},d.v={}),h.h=0})},t.setOptions=function(d,h){var v=this;if(h=h||this.h.options){for(var E=[],T=[],N={},D=a(Object.keys(d)),O=D.next();!O.done;N={X:N.X,Y:N.Y},O=D.next())if(O=O.value,!(O in this.l&&this.l[O]===d[O])){this.l[O]=d[O];var F=h[O];F!==void 0&&(F.onChange&&(N.X=F.onChange,N.Y=d[O],E.push((function(z){return function(){var Z;return U(function(be){if(be.h==1)return k(be,z.X(z.Y),2);Z=be.i,Z===!0&&(v.u=!0),be.h=0})}})(N))),F.graphOptionXref&&(O=Object.assign({},{calculatorName:"",calculatorIndex:0},F.graphOptionXref,{valueNumber:F.type===1?d[O]:0,valueBoolean:F.type===0?d[O]:!1,valueString:F.type===2?d[O]:""}),T.push(O)))}(E.length!==0||T.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(T),this.F=(this.F===void 0?[]:this.F).concat(E))}};function XV(d){var h,v,E,T,N,D,O;return U(function(F){switch(F.h){case 1:if(!d.u)return F.return();if(!d.F){F.h=2;break}h=a(d.F),v=h.next();case 3:if(v.done){F.h=5;break}return E=v.value,k(F,E(),4);case 4:v=h.next(),F.h=3;break;case 5:d.F=void 0;case 2:if(d.H){for(T=new d.i.GraphOptionChangeRequestList,N=a(d.H),D=N.next();!D.done;D=N.next())O=D.value,T.push_back(O);d.j.changeOptions(T),T.delete(),d.H=void 0}d.u=!1,F.h=0}})}t.initialize=function(){var d=this;return U(function(h){return h.h==1?k(h,KV(d),2):h.h!=3?k(h,YV(d),3):k(h,XV(d),0)})};function ip(d,h){var v,E;return U(function(T){return h in d.L?T.return(d.L[h]):(v=d.locateFile(h,""),E=fetch(v).then(function(N){return N.arrayBuffer()}),d.L[h]=E,T.return(E))})}t.overrideFile=function(d,h){this.j?this.j.overrideFile(d,h):this.D[d]=h},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(d,h){var v=this,E,T,N,D,O,F,z,Z,be;return U(function(ce){switch(ce.h){case 1:return v.h.inputs?(E=1e3*(h??performance.now()),k(ce,v.I,2)):ce.return();case 2:return k(ce,v.initialize(),3);case 3:for(T=new v.i.PacketDataList,N=a(Object.keys(d)),D=N.next();!D.done;D=N.next())if(O=D.value,F=v.h.inputs[O]){e:{var ee=d[O];switch(F.type){case"video":var we=v.s[F.stream];if(we||(we=new rv(v.i,v.K),v.s[F.stream]=we),we.m===0&&(we.m=we.i.createTexture()),typeof HTMLVideoElement<"u"&&ee instanceof HTMLVideoElement)var $e=ee.videoWidth,St=ee.videoHeight;else typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?($e=ee.naturalWidth,St=ee.naturalHeight):($e=ee.width,St=ee.height);St={glName:we.m,width:$e,height:St},$e=we.h,$e.canvas.width=St.width,$e.canvas.height=St.height,$e.activeTexture($e.TEXTURE0),we.i.bindTexture2d(we.m),$e.texImage2D($e.TEXTURE_2D,0,$e.RGBA,$e.RGBA,$e.UNSIGNED_BYTE,ee),we.i.bindTexture2d(0),we=St;break e;case"detections":for(we=v.s[F.stream],we||(we=new UV(v.i),v.s[F.stream]=we),we.data||(we.data=new we.h.DetectionListData),we.data.reset(ee.length),St=0;St<ee.length;++St){$e=ee[St];var yt=we.data,Cn=yt.setBoundingBox,Fr=St,ir=$e.la,Qe=new op;if(Lo(Qe,1,ir.sa),Lo(Qe,2,ir.ta),Lo(Qe,3,ir.height),Lo(Qe,4,ir.width),Lo(Qe,5,ir.rotation),Fo(Qe,6,ir.pa),ir=Qe.l(),Cn.call(yt,Fr,ir),$e.ea)for(yt=0;yt<$e.ea.length;++yt){Qe=$e.ea[yt],Cn=we.data,Fr=Cn.addNormalizedLandmark,ir=St,Qe=Object.assign({},Qe,{visibility:Qe.visibility?Qe.visibility:0});var Tn=new fu;Lo(Tn,1,Qe.x),Lo(Tn,2,Qe.y),Lo(Tn,3,Qe.z),Qe.visibility&&Lo(Tn,4,Qe.visibility),Qe=Tn.l(),Fr.call(Cn,ir,Qe)}if($e.ba)for(yt=0;yt<$e.ba.length;++yt)Cn=we.data,Fr=Cn.addClassification,ir=St,Qe=$e.ba[yt],Tn=new xl,Lo(Tn,2,Qe.qa),Qe.index&&Fo(Tn,1,Qe.index),Qe.label&&Fo(Tn,3,Qe.label),Qe.displayName&&Fo(Tn,4,Qe.displayName),Qe=Tn.l(),Fr.call(Cn,ir,Qe)}we=we.data;break e;default:we={}}}switch(z=we,Z=F.stream,F.type){case"video":T.pushTexture2d(Object.assign({},z,{stream:Z,timestamp:E}));break;case"detections":be=z,be.stream=Z,be.timestamp=E,T.pushDetectionList(be);break;default:throw Error("Unknown input config type: '"+F.type+"'")}}return v.j.send(T),k(ce,v.I,4);case 4:T.delete(),ce.h=0}})};function ZV(d,h,v){var E,T,N,D,O,F,z,Z,be,ce,ee,we,$e,St;return U(function(yt){switch(yt.h){case 1:if(!v)return yt.return(h);for(E={},T=0,N=a(Object.keys(v)),D=N.next();!D.done;D=N.next())O=D.value,F=v[O],typeof F!="string"&&F.type==="texture"&&h[F.stream]!==void 0&&++T;1<T&&(d.M=!1),z=a(Object.keys(v)),D=z.next();case 2:if(D.done){yt.h=4;break}if(Z=D.value,be=v[Z],typeof be=="string")return $e=E,St=Z,k(yt,QV(d,Z,h[be]),14);if(ce=h[be.stream],be.type==="detection_list"){if(ce){for(var Cn=ce.getRectList(),Fr=ce.getLandmarksList(),ir=ce.getClassificationsList(),Qe=[],Tn=0;Tn<Cn.size();++Tn){var Xi=$V(Cn.get(Tn)),e$=Vo(Xi,1),t$=Vo(Xi,2),n$=Vo(Xi,3),r$=Vo(Xi,4),o$=Vo(Xi,5,0),sp=void 0;sp=sp===void 0?0:sp,Xi={la:{sa:e$,ta:t$,height:n$,width:r$,rotation:o$,pa:ep(eo(Xi,6),sp)},ea:Xy(VV(Fr.get(Tn)),fu,1).map(BV),ba:jV(FV(ir.get(Tn)))},Qe.push(Xi)}Cn=Qe}else Cn=[];E[Z]=Cn,yt.h=7;break}if(be.type==="proto_list"){if(ce){for(Cn=Array(ce.size()),Fr=0;Fr<ce.size();Fr++)Cn[Fr]=ce.get(Fr);ce.delete()}else Cn=[];E[Z]=Cn,yt.h=7;break}if(ce===void 0){yt.h=3;break}if(be.type==="float_list"){E[Z]=ce,yt.h=7;break}if(be.type==="proto"){E[Z]=ce,yt.h=7;break}if(be.type!=="texture")throw Error("Unknown output config type: '"+be.type+"'");return ee=d.v[Z],ee||(ee=new rv(d.i,d.K),d.v[Z]=ee),k(yt,SD(ee,ce,d.M),13);case 13:we=yt.i,E[Z]=we;case 7:be.transform&&E[Z]&&(E[Z]=be.transform(E[Z])),yt.h=3;break;case 14:$e[St]=yt.i;case 3:D=z.next(),yt.h=2;break;case 4:return yt.return(E)}})}function QV(d,h,v){var E;return U(function(T){return typeof v=="number"||v instanceof Uint8Array||v instanceof d.i.Uint8BlobList?T.return(v):v instanceof d.i.Texture2dDataOut?(E=d.v[h],E||(E=new rv(d.i,d.K),d.v[h]=E),T.return(SD(E,v,d.M))):T.return(void 0)})}function JV(d,h){for(var v=h.name||"$",E=[].concat(l(h.wants)),T=new d.i.StringList,N=a(h.wants),D=N.next();!D.done;D=N.next())T.push_back(D.value);N=d.i.PacketListener.implement({onResults:function(O){for(var F={},z=0;z<h.wants.length;++z)F[E[z]]=O.get(z);var Z=d.listeners[v];Z&&(d.I=ZV(d,F,h.outs).then(function(be){be=Z(be);for(var ce=0;ce<h.wants.length;++ce){var ee=F[E[ce]];typeof ee=="object"&&ee.hasOwnProperty&&ee.hasOwnProperty("delete")&&ee.delete()}be&&(d.I=be)}))}}),d.j.attachMultiListener(T,N),T.delete()}t.onResults=function(d,h){this.listeners[h||"$"]=d},Ve("Solution",ov),Ve("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function CD(d){switch(d===void 0&&(d=0),d){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function TD(d){var h=this;d=d||{},this.h=new ov({locateFile:d.locateFile,files:function(v){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:CD(v.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(v){var E,T,N;return U(function(D){return D.h==1?(E=CD(v),T="third_party/mediapipe/modules/selfie_segmentation/"+E,k(D,ip(h.h,E),2)):(N=D.i,h.h.overrideFile(T,N),D.return(!0))})}}}})}t=TD.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(d){this.h.onResults(d)},t.initialize=function(){var d=this;return U(function(h){return k(h,d.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(d){var h=this;return U(function(v){return k(v,h.h.send(d),0)})},t.setOptions=function(d){this.h.setOptions(d)},Ve("SelfieSegmentation",TD),Ve("VERSION","0.1.1675465747")}).call($F)});var av;function cp(){return av}function $o(t){let e=av;return av=t,e}var AD=Symbol("NotFound");function Cl(t){return t===AD||t?.name==="\u0275NotFound"}var Rn=null,up=!1,lv=1,f$=null,an=Symbol("SIGNAL");function ye(t){let e=Rn;return Rn=t,e}function hp(){return Rn}var Xs={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zs(t){if(up)throw new Error("");if(Rn===null)return;Rn.consumerOnSignalRead(t);let e=Rn.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Rn.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Rn.producers,n!==void 0&&n.producer===t)){Rn.producersTail=n,n.lastReadVersion=t.version;return}let o=t.consumersTail;if(o!==void 0&&o.consumer===Rn&&(!r||h$(o,Rn)))return;let i=Dl(Rn),s={producer:t,consumer:Rn,nextProducer:n,prevConsumer:o,lastReadVersion:t.version,nextConsumer:void 0};Rn.producersTail=s,e!==void 0?e.nextProducer=s:Rn.producers=s,i&&RD(t,s)}function MD(){lv++}function mp(t){if(!(Dl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lv)){if(!t.producerMustRecompute(t)&&!Il(t)){pp(t);return}t.producerRecomputeValue(t),pp(t)}}function cv(t){if(t.consumers===void 0)return;let e=up;up=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||p$(r)}}finally{up=e}}function uv(){return Rn?.consumerAllowSignalWrites!==!1}function p$(t){t.dirty=!0,cv(t),t.consumerMarkedDirty?.(t)}function pp(t){t.dirty=!1,t.lastCleanEpoch=lv}function Qs(t){return t&&kD(t),ye(t)}function kD(t){t.producersTail=void 0,t.recomputing=!0}function Tl(t,e){ye(e),t&&OD(t)}function OD(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Dl(t))do n=dv(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Il(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(mp(n),r!==n.version))return!0}return!1}function Js(t){if(Dl(t)){let e=t.producers;for(;e!==void 0;)e=dv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function RD(t,e){let n=t.consumersTail,r=Dl(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let o=t.producers;o!==void 0;o=o.nextProducer)RD(o.producer,o)}function dv(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,o=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!Dl(e)){let i=e.producers;for(;i!==void 0;)i=dv(i)}return n}function Dl(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function gp(t){f$?.(t)}function h$(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function yp(t,e){return Object.is(t,e)}function hu(t,e){let n=Object.create(m$);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(mp(n),Zs(n),n.value===pu)throw n.error;return n.value};return r[an]=n,gp(n),r}var dp=Symbol("UNSET"),fp=Symbol("COMPUTING"),pu=Symbol("ERRORED"),m$=he(B({},Xs),{value:dp,dirty:!0,error:null,equal:yp,kind:"computed",producerMustRecompute(t){return t.value===dp||t.value===fp},producerRecomputeValue(t){if(t.value===fp)throw new Error("");let e=t.value;t.value=fp;let n=Qs(t),r,o=!1;try{r=t.computation(),ye(null),o=e!==dp&&e!==pu&&r!==pu&&t.equal(e,r)}catch(i){r=pu,t.error=i}finally{Tl(t,n)}if(o){t.value=e;return}t.value=r,t.version++}});function g$(){throw new Error}var PD=g$;function FD(t){PD(t)}function fv(t){PD=t}var y$=null;function pv(t,e){let n=Object.create(vp);n.value=t,e!==void 0&&(n.equal=e);let r=()=>LD(n);return r[an]=n,gp(n),[r,s=>ea(n,s),s=>hv(n,s)]}function LD(t){return Zs(t),t.value}function ea(t,e){uv()||FD(t),t.equal(t.value,e)||(t.value=e,v$(t))}function hv(t,e){uv()||FD(t),ea(t,e(t.value))}var vp=he(B({},Xs),{equal:yp,value:void 0,kind:"signal"});function v$(t){t.version++,MD(),cv(t),y$?.(t)}function me(t){return typeof t=="function"}function Nl(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bp=Nl(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ta(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var vt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(me(r))try{r()}catch(i){e=i instanceof bp?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{VD(i)}catch(s){e=e??[],s instanceof bp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new bp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)VD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ta(n,e)}remove(e){let{_finalizers:n}=this;n&&ta(n,e),e instanceof t&&e._removeParent(this)}};vt.EMPTY=(()=>{let t=new vt;return t.closed=!0,t})();var mv=vt.EMPTY;function wp(t){return t instanceof vt||t&&"closed"in t&&me(t.remove)&&me(t.add)&&me(t.unsubscribe)}function VD(t){me(t)?t():t.unsubscribe()}var no={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Al={setTimeout(t,e,...n){let{delegate:r}=Al;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Al;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function _p(t){Al.setTimeout(()=>{let{onUnhandledError:e}=no;if(e)e(t);else throw t})}function na(){}var $D=gv("C",void 0,void 0);function jD(t){return gv("E",void 0,t)}function BD(t){return gv("N",t,void 0)}function gv(t,e,n){return{kind:t,value:e,error:n}}var ra=null;function Ml(t){if(no.useDeprecatedSynchronousErrorHandling){let e=!ra;if(e&&(ra={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ra;if(ra=null,n)throw r}}else t()}function HD(t){no.useDeprecatedSynchronousErrorHandling&&ra&&(ra.errorThrown=!0,ra.error=t)}var oa=class extends vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wp(e)&&e.add(this)):this.destination=_$}static create(e,n,r){return new ro(e,n,r)}next(e){this.isStopped?vv(BD(e),this):this._next(e)}error(e){this.isStopped?vv(jD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vv($D,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},b$=Function.prototype.bind;function yv(t,e){return b$.call(t,e)}var bv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ep(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ep(r)}else Ep(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ep(n)}}},ro=class extends oa{constructor(e,n,r){super();let o;if(me(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&no.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&yv(e.next,i),error:e.error&&yv(e.error,i),complete:e.complete&&yv(e.complete,i)}):o=e}this.destination=new bv(o)}};function Ep(t){no.useDeprecatedSynchronousErrorHandling?HD(t):_p(t)}function w$(t){throw t}function vv(t,e){let{onStoppedNotification:n}=no;n&&Al.setTimeout(()=>n(t,e))}var _$={closed:!0,next:na,error:w$,complete:na};var kl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yn(t){return t}function wv(...t){return _v(t)}function _v(t){return t.length===0?Yn:t.length===1?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}var Te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=S$(n)?n:new ro(n,r,o);return Ml(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=UD(r),new r((o,i)=>{let s=new ro({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[kl](){return this}pipe(...n){return _v(n)(this)}toPromise(n){return n=UD(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function UD(t){var e;return(e=t??no.Promise)!==null&&e!==void 0?e:Promise}function E$(t){return t&&me(t.next)&&me(t.error)&&me(t.complete)}function S$(t){return t&&t instanceof oa||E$(t)&&wp(t)}function Ev(t){return me(t?.lift)}function Fe(t){return e=>{if(Ev(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(t,e,n,r,o){return new Sv(t,e,n,r,o)}var Sv=class extends oa{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ol(){return Fe((t,e)=>{let n=null;t._refCount++;let r=ke(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Rl=class extends Te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ev(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vt;let n=this.getSubject();e.add(this.source.subscribe(ke(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vt.EMPTY)}return e}refCount(){return Ol()(this)}};var zD=Nl(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Sp(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zD}next(n){Ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ml(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?mv:(this.currentObservers=null,i.push(n),new vt(()=>{this.currentObservers=null,ta(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Te;return n.source=this,n}}return t.create=(e,n)=>new Sp(e,n),t})(),Sp=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:mv}};var Ot=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var xv={now(){return(xv.delegate||Date).now()},delegate:void 0};var xp=class extends vt{constructor(e,n){super()}schedule(e,n=0){return this}};var mu={setInterval(t,e,...n){let{delegate:r}=mu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=mu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Cp=class extends xp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return mu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&mu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ta(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Pl=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Pl.now=xv.now;var Tp=class extends Pl{constructor(e,n=Pl.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Cv=new Tp(Cp),GD=Cv;var sr=new Te(t=>t.complete());function Ip(t){return t&&me(t.schedule)}function WD(t){return t[t.length-1]}function Dp(t){return me(WD(t))?t.pop():void 0}function Zi(t){return Ip(WD(t))?t.pop():void 0}function KD(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(f){s(f)}}function l(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function qD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ia(t){return this instanceof ia?(this.v=t,this):new ia(t)}function YD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(w){return Promise.resolve(w).then(m,f)}}function a(m,w){r[m]&&(o[m]=function(x){return new Promise(function(C,I){i.push([m,x,C,I])>1||l(m,x)})},w&&(o[m]=w(o[m])))}function l(m,w){try{c(r[m](w))}catch(x){p(i[0][3],x)}}function c(m){m.value instanceof ia?Promise.resolve(m.value.v).then(u,f):p(i[0][2],m)}function u(m){l("next",m)}function f(m){l("throw",m)}function p(m,w){m(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function XD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qD=="function"?qD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,l){s=t[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var Fl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Np(t){return me(t?.then)}function Ap(t){return me(t[kl])}function Mp(t){return Symbol.asyncIterator&&me(t?.[Symbol.asyncIterator])}function kp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function x$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Op=x$();function Rp(t){return me(t?.[Op])}function Pp(t){return YD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:o}=yield ia(n.read());if(o)return yield ia(void 0);yield yield ia(r)}}finally{n.releaseLock()}})}function Fp(t){return me(t?.getReader)}function pt(t){if(t instanceof Te)return t;if(t!=null){if(Ap(t))return C$(t);if(Fl(t))return T$(t);if(Np(t))return I$(t);if(Mp(t))return ZD(t);if(Rp(t))return D$(t);if(Fp(t))return N$(t)}throw kp(t)}function C$(t){return new Te(e=>{let n=t[kl]();if(me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function T$(t){return new Te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function I$(t){return new Te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,_p)})}function D$(t){return new Te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ZD(t){return new Te(e=>{A$(t,e).catch(n=>e.error(n))})}function N$(t){return ZD(Pp(t))}function A$(t,e){var n,r,o,i;return KD(this,void 0,void 0,function*(){try{for(n=XD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})}function ar(t,e,n,r=0,o=!1){let i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function Lp(t,e=0){return Fe((n,r)=>{n.subscribe(ke(r,o=>ar(r,t,()=>r.next(o),e),()=>ar(r,t,()=>r.complete(),e),o=>ar(r,t,()=>r.error(o),e)))})}function Vp(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function QD(t,e){return pt(t).pipe(Vp(e),Lp(e))}function JD(t,e){return pt(t).pipe(Vp(e),Lp(e))}function eN(t,e){return new Te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function tN(t,e){return new Te(n=>{let r;return ar(n,e,()=>{r=t[Op](),ar(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>me(r?.return)&&r.return()})}function $p(t,e){if(!t)throw new Error("Iterable cannot be null");return new Te(n=>{ar(n,e,()=>{let r=t[Symbol.asyncIterator]();ar(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function nN(t,e){return $p(Pp(t),e)}function rN(t,e){if(t!=null){if(Ap(t))return QD(t,e);if(Fl(t))return eN(t,e);if(Np(t))return JD(t,e);if(Mp(t))return $p(t,e);if(Rp(t))return tN(t,e);if(Fp(t))return nN(t,e)}throw kp(t)}function jt(t,e){return e?rN(t,e):pt(t)}function ve(...t){let e=Zi(t);return jt(t,e)}function Ll(t,e){let n=me(t)?t:()=>t,r=o=>o.error(n());return new Te(e?o=>e.schedule(r,0,o):r)}function jp(t){return!!t&&(t instanceof Te||me(t.lift)&&me(t.subscribe))}var oo=Nl(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Tv(t,e){let n=typeof e=="object";return new Promise((r,o)=>{let i=new ro({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(e.defaultValue):o(new oo)}});t.subscribe(i)})}function oN(t){return t instanceof Date&&!isNaN(t)}function Ee(t,e){return Fe((n,r)=>{let o=0;n.subscribe(ke(r,i=>{r.next(t.call(e,i,o++))}))})}var{isArray:M$}=Array;function k$(t,e){return M$(e)?t(...e):t(e)}function Vl(t){return Ee(e=>k$(t,e))}var{isArray:O$}=Array,{getPrototypeOf:R$,prototype:P$,keys:F$}=Object;function Bp(t){if(t.length===1){let e=t[0];if(O$(e))return{args:e,keys:null};if(L$(e)){let n=F$(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function L$(t){return t&&typeof t=="object"&&R$(t)===P$}function Hp(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function Up(...t){let e=Zi(t),n=Dp(t),{args:r,keys:o}=Bp(t);if(r.length===0)return jt([],e);let i=new Te(V$(r,e,o?s=>Hp(o,s):Yn));return n?i.pipe(Vl(n)):i}function V$(t,e,n=Yn){return r=>{iN(e,()=>{let{length:o}=t,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)iN(e,()=>{let c=jt(t[l],e),u=!1;c.subscribe(ke(r,f=>{i[l]=f,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function iN(t,e,n){t?ar(n,t,e):e()}function sN(t,e,n,r,o,i,s,a){let l=[],c=0,u=0,f=!1,p=()=>{f&&!l.length&&!c&&e.complete()},m=x=>c<r?w(x):l.push(x),w=x=>{i&&e.next(x),c++;let C=!1;pt(n(x,u++)).subscribe(ke(e,I=>{o?.(I),i?m(I):e.next(I)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<r;){let I=l.shift();s?ar(e,s,()=>w(I)):w(I)}p()}catch(I){e.error(I)}}))};return t.subscribe(ke(e,m,()=>{f=!0,p()})),()=>{a?.()}}function Wt(t,e,n=1/0){return me(e)?Wt((r,o)=>Ee((i,s)=>e(r,i,o,s))(pt(t(r,o))),n):(typeof e=="number"&&(n=e),Fe((r,o)=>sN(r,o,t,n)))}function aN(t=1/0){return Wt(Yn,t)}function lN(){return aN(1)}function $l(...t){return lN()(jt(t,Zi(t)))}function sa(t){return new Te(e=>{pt(t()).subscribe(e)})}function Iv(...t){let e=Dp(t),{args:n,keys:r}=Bp(t),o=new Te(i=>{let{length:s}=n;if(!s){i.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let f=!1;pt(n[u]).subscribe(ke(i,p=>{f||(f=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||i.next(r?Hp(r,a):a),i.complete())}))}});return e?o.pipe(Vl(e)):o}var $$=["addListener","removeListener"],j$=["addEventListener","removeEventListener"],B$=["on","off"];function io(t,e,n,r){if(me(n)&&(r=n,n=void 0),r)return io(t,e,n).pipe(Vl(r));let[o,i]=z$(t)?j$.map(s=>a=>t[s](e,a,n)):H$(t)?$$.map(cN(t,e)):U$(t)?B$.map(cN(t,e)):[];if(!o&&Fl(t))return Wt(s=>io(s,e,n))(pt(t));if(!o)throw new TypeError("Invalid event target");return new Te(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return o(a),()=>i(a)})}function cN(t,e){return n=>r=>t[n](e,r)}function H$(t){return me(t.addListener)&&me(t.removeListener)}function U$(t){return me(t.on)&&me(t.off)}function z$(t){return me(t.addEventListener)&&me(t.removeEventListener)}function uN(t=0,e,n=GD){let r=-1;return e!=null&&(Ip(e)?n=e:r=e),new Te(o=>{let i=oN(t)?+t-n.now():t;i<0&&(i=0);let s=0;return n.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}var so=new Te(na);function Rt(t,e){return Fe((n,r)=>{let o=0;n.subscribe(ke(r,i=>t.call(e,i,o++)&&r.next(i)))})}function dN(t){return Fe((e,n)=>{let r=!1,o=null,i=null,s=!1,a=()=>{if(i?.unsubscribe(),i=null,r){r=!1;let c=o;o=null,n.next(c)}s&&n.complete()},l=()=>{i=null,s&&n.complete()};e.subscribe(ke(n,c=>{r=!0,o=c,i||pt(t(c)).subscribe(i=ke(n,a,l))},()=>{s=!0,(!r||!i||i.closed)&&n.complete()}))})}function zp(t,e=Cv){return dN(()=>uN(t,e))}function Qi(t){return Fe((e,n)=>{let r=null,o=!1,i;r=e.subscribe(ke(n,void 0,void 0,s=>{i=pt(t(s,Qi(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function fN(t,e,n,r,o){return(i,s)=>{let a=n,l=e,c=0;i.subscribe(ke(s,u=>{let f=c++;l=a?t(l,u,f):(a=!0,u),r&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function jl(t,e){return me(e)?Wt(t,e,1):Wt(t,1)}function Ji(t){return Fe((e,n)=>{let r=!1;e.subscribe(ke(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>sr:Fe((e,n)=>{let r=0;e.subscribe(ke(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Gp(t,e=Yn){return t=t??G$,Fe((n,r)=>{let o,i=!0;n.subscribe(ke(r,s=>{let a=e(s);(i||!t(o,a))&&(i=!1,o=a,r.next(s))}))})}function G$(t,e){return t===e}function Wp(t=W$){return Fe((e,n)=>{let r=!1;e.subscribe(ke(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function W$(){return new oo}function gu(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function pi(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((o,i)=>t(o,i,r)):Yn,Pn(1),n?Ji(e):Wp(()=>new oo))}function Bl(t){return t<=0?()=>sr:Fe((e,n)=>{let r=[];e.subscribe(ke(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function es(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Rt((o,i)=>t(o,i,r)):Yn,Bl(1),n?Ji(e):Wp(()=>new oo))}function Dv(t,e){return Fe(fN(t,e,arguments.length>=2,!0))}function Er(t={}){let{connector:e=()=>new Ae,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s,a,l,c=0,u=!1,f=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),s=l=void 0,u=f=!1},w=()=>{let x=s;m(),x?.unsubscribe()};return Fe((x,C)=>{c++,!f&&!u&&p();let I=l=l??e();C.add(()=>{c--,c===0&&!f&&!u&&(a=Nv(w,o))}),I.subscribe(C),!s&&c>0&&(s=new ro({next:P=>I.next(P),error:P=>{f=!0,p(),a=Nv(m,n,P),I.error(P)},complete:()=>{u=!0,p(),a=Nv(m,r),I.complete()}}),pt(x).subscribe(s))})(i)}}function Nv(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new ro({next:()=>{r.unsubscribe(),t()}});return pt(e(...n)).subscribe(r)}function Av(t){return Rt((e,n)=>t<=n)}function ao(...t){let e=Zi(t);return Fe((n,r)=>{(e?$l(t,n,e):$l(t,n)).subscribe(r)})}function Xe(t,e){return Fe((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(ke(r,l=>{o?.unsubscribe();let c=0,u=i++;pt(t(l,u)).subscribe(o=ke(r,f=>r.next(e?e(l,f,u,c++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Bt(t){return Fe((e,n)=>{pt(t).subscribe(ke(n,()=>n.complete(),na)),!n.closed&&e.subscribe(n)})}function Pt(t,e,n){let r=me(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(ke(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Yn}function pN(t){let e=ye(null);try{return t()}finally{ye(e)}}var hN=he(B({},Xs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function mN(t){if(t.dirty=!1,t.version>0&&!Il(t))return;t.version++;let e=Qs(t);try{t.cleanup(),t.fn()}finally{Tl(t,e)}}var Xp="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",le=class extends Error{code;constructor(e,n){super(_u(e,n)),this.code=e}};function q$(t){return`NG0${Math.abs(t)}`}function _u(t,e){return`${q$(t)}${e?": "+e:""}`}function rt(t){for(let e in t)if(t[e]===rt)return e;throw Error("")}function vN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function mi(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(mi).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Bv(t,e){return t?e?`${t} ${e}`:t:e||""}var K$=rt({__forward_ref__:rt});function cr(t){return t.__forward_ref__=cr,t.toString=function(){return mi(this())},t}function In(t){return Hv(t)?t():t}function Hv(t){return typeof t=="function"&&t.hasOwnProperty(K$)&&t.__forward_ref__===cr}function Y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Lr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Eu(t){return Y$(t,Zp)}function Uv(t){return Eu(t)!==null}function Y$(t,e){return t.hasOwnProperty(e)&&t[e]||null}function X$(t){let e=t?.[Zp]??null;return e||null}function kv(t){return t&&t.hasOwnProperty(Kp)?t[Kp]:null}var Zp=rt({\u0275prov:rt}),Kp=rt({\u0275inj:rt}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zv(t){return t&&!!t.\u0275providers}var Gv=rt({\u0275cmp:rt}),Wv=rt({\u0275dir:rt}),qv=rt({\u0275pipe:rt}),Kv=rt({\u0275mod:rt}),vu=rt({\u0275fac:rt}),fa=rt({__NG_ELEMENT_ID__:rt}),gN=rt({__NG_ENV_ID__:rt});function pa(t){return typeof t=="string"?t:t==null?"":String(t)}function bN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():pa(t)}var wN=rt({ngErrorCode:rt}),Z$=rt({ngErrorMessage:rt}),Q$=rt({ngTokenPath:rt});function Yv(t,e){return _N("",-200,e)}function Qp(t,e){throw new le(-201,!1)}function _N(t,e,n){let r=new le(e,t);return r[wN]=e,r[Z$]=t,n&&(r[Q$]=n),r}function J$(t){return t[wN]}var Ov;function EN(){return Ov}function Sr(t){let e=Ov;return Ov=t,e}function Xv(t,e,n){let r=Eu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Qp(t,"Injector")}var ej={},aa=ej,tj="__NG_DI_FLAG__",Rv=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=la(n)||0;try{return this.injector.get(e,r&8?null:aa,r)}catch(o){if(Cl(o))return o;throw o}}};function nj(t,e=0){let n=cp();if(n===void 0)throw new le(-203,!1);if(n===null)return Xv(t,void 0,e);{let r=rj(e),o=n.retrieve(t,r);if(Cl(o)){if(r.optional)return null;throw o}return o}}function Le(t,e=0){return(EN()||nj)(In(t),e)}function M(t,e){return Le(t,la(e))}function la(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function rj(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Pv(t){let e=[];for(let n=0;n<t.length;n++){let r=In(t[n]);if(Array.isArray(r)){if(r.length===0)throw new le(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],l=oj(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}e.push(Le(o,i))}else e.push(Le(r))}return e}function oj(t){return t[tj]}function ca(t,e){let n=t.hasOwnProperty(vu);return n?t[vu]:null}function SN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}function xN(t){return t.flat(Number.POSITIVE_INFINITY)}function Jp(t,e){t.forEach(n=>Array.isArray(n)?Jp(n,e):e(n))}function Zv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Su(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function CN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function TN(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(o===1)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;){let i=o-2;t[o]=t[i],o--}t[e]=n,t[e+1]=r}}function IN(t,e,n){let r=Ul(t,e);return r>=0?t[r|1]=n:(r=~r,TN(t,r,e,n)),r}function eh(t,e){let n=Ul(t,e);if(n>=0)return t[n|1]}function Ul(t,e){return ij(t,e,1)}function ij(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}var ns={},lr=[],gi=new re(""),Qv=new re("",-1),Jv=new re(""),bu=class{get(e,n=aa){if(n===aa){let o=_N("",-201);throw o.name="\u0275NotFound",o}return n}};function eb(t){return t[Kv]||null}function yi(t){return t[Gv]||null}function tb(t){return t[Wv]||null}function DN(t){return t[qv]||null}function ha(t){return{\u0275providers:t}}function NN(t){return ha([{provide:gi,multi:!0,useValue:t}])}function AN(...t){return{\u0275providers:nb(!0,t),\u0275fromNgModule:!0}}function nb(t,...e){let n=[],r=new Set,o,i=s=>{n.push(s)};return Jp(e,s=>{let a=s;Yp(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&MN(o,i),n}function MN(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:o}=t[n];rb(o,i=>{e(i,r)})}}function Yp(t,e,n,r){if(t=In(t),!t)return!1;let o=null,i=kv(t),s=!i&&yi(t);if(!i&&!s){let l=t.ngModule;if(i=kv(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=t}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)Yp(c,e,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;try{Jp(i.imports,u=>{Yp(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&MN(c,e)}if(!a){let c=ca(o)||(()=>new o);e({provide:o,useFactory:c,deps:lr},o),e({provide:Jv,useValue:o,multi:!0},o),e({provide:gi,useValue:()=>Le(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=t;rb(l,u=>{e(u,c)})}}else return!1;return o!==t&&t.providers!==void 0}function rb(t,e){for(let n of t)zv(n)&&(n=n.\u0275providers),Array.isArray(n)?rb(n,e):e(n)}var sj=rt({provide:String,useValue:rt});function kN(t){return t!==null&&typeof t=="object"&&sj in t}function aj(t){return!!(t&&t.useExisting)}function lj(t){return!!(t&&t.useFactory)}function ua(t){return typeof t=="function"}function ON(t){return!!t.useClass}var xu=new re(""),qp={},yN={},Mv;function zl(){return Mv===void 0&&(Mv=new bu),Mv}var Ft=class{},da=class extends Ft{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Lv(e,s=>this.processProvider(s)),this.records.set(Qv,Hl(void 0,this)),o.has("environment")&&this.records.set(Ft,Hl(void 0,this));let i=this.records.get(xu);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Jv,lr,{self:!0}))}retrieve(e,n){let r=la(n)||0;try{return this.get(e,aa,r)}catch(o){if(Cl(o))return o;throw o}}destroy(){yu(this),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return yu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){yu(this);let n=$o(this),r=Sr(void 0),o;try{return e()}finally{$o(n),Sr(r)}}get(e,n=aa,r){if(yu(this),e.hasOwnProperty(gN))return e[gN](this);let o=la(r),i,s=$o(this),a=Sr(void 0);try{if(!(o&4)){let c=this.records.get(e);if(c===void 0){let u=pj(e)&&Eu(e);u&&this.injectableDefInScope(u)?c=Hl(Fv(e),qp):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,o)}let l=o&2?zl():this.parent;return n=o&8&&n===aa?null:n,l.get(e,n)}catch(l){let c=J$(l);throw c===-200||c===-201?new le(c,null):l}finally{Sr(a),$o(s)}}resolveInjectorInitializers(){let e=ye(null),n=$o(this),r=Sr(void 0),o;try{let i=this.get(gi,lr,{self:!0});for(let s of i)s()}finally{$o(n),Sr(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mi(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=In(e);let n=ua(e)?e:In(e&&e.provide),r=uj(e);if(!ua(e)&&e.multi===!0){let o=this.records.get(n);o||(o=Hl(void 0,qp,!0),o.factory=()=>Pv(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let o=ye(null);try{if(n.value===yN)throw Yv(mi(e));return n.value===qp&&(n.value=yN,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&fj(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=In(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Fv(t){let e=Eu(t),n=e!==null?e.factory:ca(t);if(n!==null)return n;if(t instanceof re)throw new le(204,!1);if(t instanceof Function)return cj(t);throw new le(204,!1)}function cj(t){if(t.length>0)throw new le(204,!1);let n=X$(t);return n!==null?()=>n.factory(t):()=>new t}function uj(t){if(kN(t))return Hl(void 0,t.useValue);{let e=ob(t);return Hl(e,qp)}}function ob(t,e,n){let r;if(ua(t)){let o=In(t);return ca(o)||Fv(o)}else if(kN(t))r=()=>In(t.useValue);else if(lj(t))r=()=>t.useFactory(...Pv(t.deps||[]));else if(aj(t))r=(o,i)=>Le(In(t.useExisting),i!==void 0&&i&8?8:void 0);else{let o=In(t&&(t.useClass||t.provide));if(dj(t))r=()=>new o(...Pv(t.deps));else return ca(o)||Fv(o)}return r}function yu(t){if(t.destroyed)throw new le(205,!1)}function Hl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dj(t){return!!t.deps}function fj(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function pj(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Lv(t,e){for(let n of t)Array.isArray(n)?Lv(n,e):n&&zv(n)?Lv(n.\u0275providers,e):e(n)}function Xn(t,e){let n;t instanceof da?(yu(t),n=t):n=new Rv(t);let r,o=$o(n),i=Sr(void 0);try{return e()}finally{$o(o),Sr(i)}}function RN(){return EN()!==void 0||cp()!=null}var co=0,ge=1,_e=2,ln=3,Vr=4,Zn=5,ma=6,Gl=7,qt=8,rs=9,jo=10,bt=11,Wl=12,ib=13,ga=14,Qn=15,os=16,ya=17,Bo=18,Cu=19,sb=20,hi=21,th=22,vi=23,Cr=24,va=25,ba=26,Ht=27,PN=1,ab=6,is=7,Tu=8,wa=9,Zt=10;function Ho(t){return Array.isArray(t)&&typeof t[PN]=="object"}function uo(t){return Array.isArray(t)&&t[PN]===!0}function lb(t){return(t.flags&4)!==0}function ss(t){return t.componentOffset>-1}function Iu(t){return(t.flags&1)===1}function Uo(t){return!!t.template}function ql(t){return(t[_e]&512)!==0}function _a(t){return(t[_e]&256)===256}var cb="svg",FN="math";function $r(t){for(;Array.isArray(t);)t=t[co];return t}function ub(t,e){return $r(e[t])}function fo(t,e){return $r(e[t.index])}function Du(t,e){return t.data[e]}function LN(t,e){return t[e]}function nh(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function jr(t,e){let n=e[t];return Ho(n)?n:n[co]}function VN(t){return(t[_e]&4)===4}function rh(t){return(t[_e]&128)===128}function $N(t){return uo(t[ln])}function Br(t,e){return e==null?null:t[e]}function db(t){t[ya]=0}function fb(t){t[_e]&1024||(t[_e]|=1024,rh(t)&&as(t))}function jN(t,e){for(;t>0;)e=e[ga],t--;return e}function Nu(t){return!!(t[_e]&9216||t[Cr]?.dirty)}function oh(t){t[jo].changeDetectionScheduler?.notify(8),t[_e]&64&&(t[_e]|=1024),Nu(t)&&as(t)}function as(t){t[jo].changeDetectionScheduler?.notify(0);let e=ts(t);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!rh(e)));)e=ts(e)}function pb(t,e){if(_a(t))throw new le(911,!1);t[hi]===null&&(t[hi]=[]),t[hi].push(e)}function BN(t,e){if(t[hi]===null)return;let n=t[hi].indexOf(e);n!==-1&&t[hi].splice(n,1)}function ts(t){let e=t[ln];return uo(e)?e[ln]:e}function hb(t){return t[Gl]??=[]}function mb(t){return t.cleanup??=[]}function HN(t,e,n,r){let o=hb(e);o.push(n),t.firstCreatePass&&mb(t).push(r,o.length-1)}var Oe={lFrame:e1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Vv=!1;function UN(){return Oe.lFrame.elementDepthCount}function zN(){Oe.lFrame.elementDepthCount++}function gb(){Oe.lFrame.elementDepthCount--}function yb(){return Oe.bindingsEnabled}function vb(){return Oe.skipHydrationRootTNode!==null}function bb(t){return Oe.skipHydrationRootTNode===t}function wb(){Oe.skipHydrationRootTNode=null}function Se(){return Oe.lFrame.lView}function Dt(){return Oe.lFrame.tView}function je(t){return Oe.lFrame.contextLView=t,t[qt]}function Be(t){return Oe.lFrame.contextLView=null,t}function gn(){let t=_b();for(;t!==null&&t.type===64;)t=t.parent;return t}function _b(){return Oe.lFrame.currentTNode}function GN(){let t=Oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ea(t,e){let n=Oe.lFrame;n.currentTNode=t,n.isParent=e}function Eb(){return Oe.lFrame.isParent}function Sb(){Oe.lFrame.isParent=!1}function WN(){return Oe.lFrame.contextLView}function xb(){return Vv}function Kl(t){let e=Vv;return Vv=t,e}function qN(){return Oe.lFrame.bindingIndex}function KN(t){return Oe.lFrame.bindingIndex=t}function ls(){return Oe.lFrame.bindingIndex++}function Cb(t){let e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function YN(){return Oe.lFrame.inI18n}function XN(t,e){let n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,ih(e)}function ZN(){return Oe.lFrame.currentDirectiveIndex}function ih(t){Oe.lFrame.currentDirectiveIndex=t}function QN(t){let e=Oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function sh(){return Oe.lFrame.currentQueryIndex}function Au(t){Oe.lFrame.currentQueryIndex=t}function hj(t){let e=t[ge];return e.type===2?e.declTNode:e.type===1?t[Zn]:null}function Tb(t,e,n){if(n&4){let o=e,i=t;for(;o=o.parent,o===null&&!(n&1);)if(o=hj(i),o===null||(i=i[ga],o.type&10))break;if(o===null)return!1;e=o,t=i}let r=Oe.lFrame=JN();return r.currentTNode=e,r.lView=t,!0}function ah(t){let e=JN(),n=t[ge];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function JN(){let t=Oe.lFrame,e=t===null?null:t.child;return e===null?e1(t):e}function e1(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function t1(){let t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ib=t1;function lh(){let t=t1();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function n1(t){return(Oe.lFrame.contextLView=jN(t,Oe.lFrame.contextLView))[qt]}function zo(){return Oe.lFrame.selectedIndex}function cs(t){Oe.lFrame.selectedIndex=t}function Mu(){let t=Oe.lFrame;return Du(t.tView,t.selectedIndex)}function Ut(){Oe.lFrame.currentNamespace=cb}function Sa(){mj()}function mj(){Oe.lFrame.currentNamespace=null}function r1(){return Oe.lFrame.currentNamespace}var o1=!0;function ch(){return o1}function uh(t){o1=t}function $v(t,e=null,n=null,r){let o=Db(t,e,n,r);return o.resolveInjectorInitializers(),o}function Db(t,e=null,n=null,r,o=new Set){let i=[n||lr,AN(t)];return r=r||(typeof t=="object"?void 0:mi(t)),new da(i,e||zl(),r||null,o)}var Je=class t{static THROW_IF_NOT_FOUND=aa;static NULL=new bu;static create(e,n){if(Array.isArray(e))return $v({name:""},n,e,"");{let r=e.name??"";return $v({name:r},e.parent,e.providers,r)}}static \u0275prov=Y({token:t,providedIn:"any",factory:()=>Le(Qv)});static __NG_ELEMENT_ID__=-1},We=new re(""),Tr=(()=>{class t{static __NG_ELEMENT_ID__=gj;static __NG_ENV_ID__=n=>n}return t})(),wu=class extends Tr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return _a(this._lView)}onDestroy(e){let n=this._lView;return pb(n,e),()=>BN(n,e)}};function gj(){return new wu(Se())}var xr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Hr=new re("",{providedIn:"root",factory:()=>{let t=M(Ft),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(xr),e.handleError(n))}}}),i1={provide:gi,useValue:()=>void M(xr),multi:!0},yj=new re("",{providedIn:"root",factory:()=>{let t=M(We).defaultView;if(!t)return;let e=M(Hr),n=i=>{e(i.reason),i.preventDefault()},r=i=>{i.error?e(i.error):e(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),M(Tr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Nb(){return ha([NN(()=>void M(yj))])}function Ab(t){return typeof t=="function"&&t[an]!==void 0}function ae(t,e){let[n,r,o]=pv(t,e?.equal),i=n,s=i[an];return i.set=r,i.update=o,i.asReadonly=dh.bind(i),i}function dh(){let t=this[an];if(t.readonlyFn===void 0){let e=()=>this();e[an]=t,t.readonlyFn=e}return t.readonlyFn}function Mb(t){return Ab(t)&&typeof t.set=="function"}var lo=class{},ku=new re("",{providedIn:"root",factory:()=>!1});var kb=new re(""),fh=new re("");var Yl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=vj}return t})();function vj(){return new Yl(Se(),gn())}var bi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ot(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})();function xa(...t){}var Ou=(()=>{class t{static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new jv})}return t})(),jv=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Uu(t){return{toString:t}.toString()}function xj(t){return typeof t=="function"}var bh=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function V1(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ds=(()=>{let t=()=>$1;return t.ngInherit=!0,t})();function $1(t){return t.type.prototype.ngOnChanges&&(t.setInput=Tj),Cj}function Cj(){let t=B1(this),e=t?.current;if(e){let n=t.previous;if(n===ns)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Tj(t,e,n,r,o){let i=this.declaredInputs[r],s=B1(t)||Ij(t,{previous:ns,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new bh(c&&c.currentValue,n,l===ns),V1(t,e,o,n)}var j1="__ngSimpleChanges__";function B1(t){return t[j1]||null}function Ij(t,e){return t[j1]=e}var s1=[];var st=function(t,e=null,n){for(let r=0;r<s1.length;r++){let o=s1[r];o(t,e,n)}};function Dj(t,e,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=$1(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function H1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function hh(t,e,n){U1(t,e,3,n)}function mh(t,e,n,r){(t[_e]&3)===n&&U1(t,e,n,r)}function Ob(t,e){let n=t[_e];(n&3)===e&&(n&=16383,n+=1,t[_e]=n)}function U1(t,e,n,r){let o=r!==void 0?t[ya]&65535:0,i=r??-1,s=e.length-1,a=0;for(let l=o;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[ya]+=65536),(a<i||i==-1)&&(Nj(t,n,e,l),t[ya]=(t[ya]&4294901760)+l+2),l++}function a1(t,e){st(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),st(5,t,e)}}function Nj(t,e,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=t[s];o?t[_e]>>14<t[ya]>>16&&(t[_e]&3)===e&&(t[_e]+=16384,a1(a,i)):a1(a,i)}var Zl=-1,Ta=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function Aj(t){return(t.flags&8)!==0}function Mj(t){return(t.flags&16)!==0}function kj(t,e,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{let i=o,s=n[++r];Rj(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function Oj(t){return t===3||t===4||t===6}function Rj(t){return t.charCodeAt(0)===64}function Ql(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?l1(t,n,o,null,e[++r]):l1(t,n,o,null,null))}}return t}function l1(t,e,n,r,o){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let a=t[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<t.length;){let a=t[i];if(typeof a=="number")break;if(a===n){o!==null&&(t[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),o!==null&&t.splice(i++,0,o)}function z1(t){return t!==Zl}function wh(t){return t&32767}function Pj(t){return t>>16}function _h(t,e){let n=Pj(t),r=e;for(;n>0;)r=r[ga],n--;return r}var Ub=!0;function c1(t){let e=Ub;return Ub=t,e}var Fj=256,G1=Fj-1,W1=5,Lj=0,Go={};function Vj(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(fa)&&(r=n[fa]),r==null&&(r=n[fa]=Lj++);let o=r&G1,i=1<<o;e.data[t+(o>>W1)]|=i}function Eh(t,e){let n=q1(t,e);if(n!==-1)return n;let r=e[ge];r.firstCreatePass&&(t.injectorIndex=e.length,Rb(r.data,t),Rb(e,null),Rb(r.blueprint,null));let o=vw(t,e),i=t.injectorIndex;if(z1(o)){let s=wh(o),a=_h(o,e),l=a[ge].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|l[s+c]}return e[i+8]=o,i}function Rb(t,e){t.push(0,0,0,0,0,0,0,0,e)}function q1(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function vw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;o!==null;){if(r=Q1(o),r===null)return Zl;if(n++,o=o[ga],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Zl}function zb(t,e,n){Vj(t,e,n)}function K1(t,e,n){if(n&8||t!==void 0)return t;Qp(e,"NodeInjector")}function Y1(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=t[rs],i=Sr(void 0);try{return o?o.get(e,r,n&8):Xv(e,r,n&8)}finally{Sr(i)}}return K1(r,e,n)}function X1(t,e,n,r=0,o){if(t!==null){if(e[_e]&2048&&!(r&2)){let s=Hj(t,e,n,r,Go);if(s!==Go)return s}let i=Z1(t,e,n,r,Go);if(i!==Go)return i}return Y1(e,n,r,o)}function Z1(t,e,n,r,o){let i=jj(n);if(typeof i=="function"){if(!Tb(e,t,r))return r&1?K1(o,n,r):Y1(e,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Qp(n);else return s}finally{Ib()}}else if(typeof i=="number"){let s=null,a=q1(t,e),l=Zl,c=r&1?e[Qn][Zn]:null;for((a===-1||r&4)&&(l=a===-1?vw(t,e):e[a+8],l===Zl||!d1(r,!1)?a=-1:(s=e[ge],a=wh(l),e=_h(l,e)));a!==-1;){let u=e[ge];if(u1(i,a,u.data)){let f=$j(a,e,n,s,r,c);if(f!==Go)return f}l=e[a+8],l!==Zl&&d1(r,e[ge].data[a+8]===c)&&u1(i,a,e)?(s=u,a=wh(l),e=_h(l,e)):a=-1}}return o}function $j(t,e,n,r,o,i){let s=e[ge],a=s.data[t+8],l=r==null?ss(a)&&Ub:r!=s&&(a.type&3)!==0,c=o&1&&i===a,u=gh(a,s,n,l,c);return u!==null?Fu(e,s,u,a,o):Go}function gh(t,e,n,r,o){let i=t.providerIndexes,s=e.data,a=i&1048575,l=t.directiveStart,c=t.directiveEnd,u=i>>20,f=r?a:a+u,p=o?a+u:c;for(let m=f;m<p;m++){let w=s[m];if(m<l&&n===w||m>=l&&w.type===n)return m}if(o){let m=s[l];if(m&&Uo(m)&&m.type===n)return l}return null}function Fu(t,e,n,r,o){let i=t[n],s=e.data;if(i instanceof Ta){let a=i;if(a.resolving){let m=bN(s[n]);throw Yv(m)}let l=c1(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],u,f=a.injectImpl?Sr(a.injectImpl):null,p=Tb(t,r,0);try{i=t[n]=a.factory(void 0,o,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Dj(n,s[n],e)}finally{f!==null&&Sr(f),c1(l),a.resolving=!1,Ib()}}return i}function jj(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(fa)?t[fa]:void 0;return typeof e=="number"?e>=0?e&G1:Bj:e}function u1(t,e,n){let r=1<<t;return!!(n[e+(t>>W1)]&r)}function d1(t,e){return!(t&2)&&!(t&1&&e)}var Ca=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return X1(this._tNode,this._lView,e,la(r),n)}};function Bj(){return new Ca(gn(),Se())}function Ur(t){return Uu(()=>{let e=t.prototype.constructor,n=e[vu]||Gb(e),r=Object.prototype,o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){let i=o[vu]||Gb(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Gb(t){return Hv(t)?()=>{let e=Gb(In(t));return e&&e()}:ca(t)}function Hj(t,e,n,r,o){let i=t,s=e;for(;i!==null&&s!==null&&s[_e]&2048&&!ql(s);){let a=Z1(i,s,n,r|2,Go);if(a!==Go)return a;let l=i.parent;if(!l){let c=s[sb];if(c){let u=c.get(n,Go,r);if(u!==Go)return u}l=Q1(s),s=s[ga]}i=l}return o}function Q1(t){let e=t[ge],n=e.type;return n===2?e.declTNode:n===1?t[Zn]:null}function Uj(){return nc(gn(),Se())}function nc(t,e){return new at(fo(t,e))}var at=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Uj}return t})();function J1(t){return t instanceof at?t.nativeElement:t}function zj(){return this._results[Symbol.iterator]()}var Sh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ae}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=xN(e);(this._changesDetected=!SN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zj};function eA(t){return(t.flags&128)===128}var bw=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(bw||{}),tA=new Map,Gj=0;function Wj(){return Gj++}function qj(t){tA.set(t[Cu],t)}function Wb(t){tA.delete(t[Cu])}var f1="__ngContext__";function Jl(t,e){Ho(e)?(t[f1]=e[Cu],qj(e)):t[f1]=e}function nA(t){return oA(t[Wl])}function rA(t){return oA(t[Vr])}function oA(t){for(;t!==null&&!uo(t);)t=t[Vr];return t}var qb;function ww(t){qb=t}function iA(){if(qb!==void 0)return qb;if(typeof document<"u")return document;throw new le(210,!1)}var rc=new re("",{providedIn:"root",factory:()=>Kj}),Kj="ng",$h=new re(""),fs=new re("",{providedIn:"platform",factory:()=>"unknown"});var _w=new re(""),jh=new re("",{providedIn:"root",factory:()=>iA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Yj="h",Xj="b";var sA="r";var aA="di";var lA=!1,cA=new re("",{providedIn:"root",factory:()=>lA});var Zj=(t,e,n,r)=>{};function Qj(t,e,n,r){Zj(t,e,n,r)}function Bh(t){return(t.flags&32)===32}var Jj=()=>null;function uA(t,e,n=!1){return Jj(t,e,n)}function dA(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=t.data[s];Au(i),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function Kb(t,e,n){Au(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function fA(t,e,n){if(lb(e)){let r=ye(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{ye(r)}}}var wi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(wi||{});var xh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xp})`}};function Ew(t){return t instanceof xh?t.changingThisBreaksApplicationSecurity:t}function pA(t,e){let n=hA(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Xp})`)}return n===e}function hA(t){return t instanceof xh&&t.getTypeName()||null}var eB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mA(t){return t=String(t),t.match(eB)?t:"unsafe:"+t}var Sw=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Sw||{});function xw(t){let e=tB();return e?e.sanitize(Sw.URL,t)||"":pA(t,"URL")?Ew(t):mA(pa(t))}function tB(){let t=Se();return t&&t[jo].sanitizer}function gA(t){return t instanceof Function?t():t}function nB(t,e,n){let r=t.length;for(;;){let o=t.indexOf(e,n);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}var yA="ng-template";function rB(t,e,n,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&nB(e[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Cw(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Cw(t){return t.type===4&&t.value!==yA}function oB(t,e,n){let r=t.type===4&&!n?yA:t.value;return e===r}function iB(t,e,n){let r=4,o=t.attrs,i=o!==null?lB(o):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!po(r)&&!po(l))return!1;if(s&&po(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!oB(t,l,n)||l===""&&e.length===1){if(po(r))return!1;s=!0}}else if(r&8){if(o===null||!rB(t,o,l,n)){if(po(r))return!1;s=!0}}else{let c=e[++a],u=sB(l,o,Cw(t),n);if(u===-1){if(po(r))return!1;s=!0;continue}if(c!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&c!==f){if(po(r))return!1;s=!0}}}}return po(r)||s}function po(t){return(t&1)===0}function sB(t,e,n,r){if(e===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){let s=e[o];if(s===t)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return cB(e,t)}function vA(t,e,n=!1){for(let r=0;r<e.length;r++)if(iB(t,e[r],n))return!0;return!1}function aB(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function lB(t){for(let e=0;e<t.length;e++){let n=t[e];if(Oj(n))return e}return t.length}function cB(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function uB(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let o=0;o<t.length;o++)if(t[o]!==r[o])continue e;return!0}}return!1}function p1(t,e){return t?":not("+e.trim()+")":e}function dB(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!po(s)&&(e+=p1(i,o),o=""),r=s,i=i||!po(r);n++}return o!==""&&(e+=p1(i,o)),e}function fB(t){return t.map(dB).join(",")}function pB(t){let e=[],n=[],r=1,o=2;for(;r<t.length;){let i=t[r];if(typeof i=="string")o===2?i!==""&&e.push(i,t[++r]):o===8&&n.push(i);else{if(!po(o))break;o=i}r++}return n.length&&e.push(1,...n),e}var mo={};function hB(t,e){return t.createText(e)}function mB(t,e,n){t.setValue(e,n)}function bA(t,e,n){return t.createElement(e,n)}function Ch(t,e,n,r,o){t.insertBefore(e,n,r,o)}function wA(t,e,n){t.appendChild(e,n)}function h1(t,e,n,r,o){r!==null?Ch(t,e,n,r,o):wA(t,e,n)}function _A(t,e,n,r){t.removeChild(null,e,n,r)}function gB(t,e,n){t.setAttribute(e,"style",n)}function yB(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function EA(t,e,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&kj(t,e,r),o!==null&&yB(t,e,o),i!==null&&gB(t,e,i)}function Tw(t,e,n,r,o,i,s,a,l,c,u){let f=Ht+r,p=f+o,m=vB(f,p),w=typeof c=="function"?c():c;return m[ge]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:u}}function vB(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:mo);return n}function bB(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Tw(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Iw(t,e,n,r,o,i,s,a,l,c,u){let f=e.blueprint.slice();return f[co]=o,f[_e]=r|4|128|8|64|1024,(c!==null||t&&t[_e]&2048)&&(f[_e]|=2048),db(f),f[ln]=f[ga]=t,f[qt]=n,f[jo]=s||t&&t[jo],f[bt]=a||t&&t[bt],f[rs]=l||t&&t[rs]||null,f[Zn]=i,f[Cu]=Wj(),f[ma]=u,f[sb]=c,f[Qn]=e.type==2?t[Qn]:f,f}function wB(t,e,n){let r=fo(e,t),o=bB(n),i=t[jo].rendererFactory,s=Dw(t,Iw(t,o,null,SA(n),r,e,null,i.createRenderer(r,n),null,null,null));return t[e.index]=s}function SA(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function xA(t,e,n,r){if(n===0)return-1;let o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Dw(t,e){return t[Wl]?t[ib][Vr]=e:t[Wl]=e,t[ib]=e,e}function te(t=1){CA(Dt(),Se(),zo()+t,!1)}function CA(t,e,n,r){if(!r)if((e[_e]&3)===3){let i=t.preOrderCheckHooks;i!==null&&hh(e,i,n)}else{let i=t.preOrderHooks;i!==null&&mh(e,i,0,n)}cs(n)}var Hh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Hh||{});function Yb(t,e,n,r){let o=ye(null);try{let[i,s,a]=t.inputs[n],l=null;(s&Hh.SignalBased)!==0&&(l=e[i][an]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,i):V1(e,l,i,r)}finally{ye(o)}}var _i=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(_i||{}),_B;function Nw(t,e){return _B(t,e)}var zu=new Set;var TA=new re("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1})});function m1(t,e,n,r){let o=t?.[ba]?.enter;if(e!==null&&o&&o.has(n.index)){let i=r.get(TA);for(let s of o.get(n.index).animateFns)i.queue.add(s)}}function Xl(t,e,n,r,o,i,s,a){if(o!=null){let l,c=!1;uo(o)?l=o:Ho(o)&&(c=!0,o=o[co]);let u=$r(o);t===0&&r!==null?(m1(a,r,i,n),s==null?wA(e,r,u):Ch(e,r,u,s||null,!0)):t===1&&r!==null?(m1(a,r,i,n),Ch(e,r,u,s||null,!0)):t===2?g1(a,i,n,f=>{_A(e,u,c,f)}):t===3&&g1(a,i,n,()=>{e.destroyNode(u)}),l!=null&&OB(e,t,n,l,i,r,s)}}function EB(t,e){let n=t.get(TA);if(Array.isArray(e))for(let r of e)n.queue.add(r);else n.queue.add(e)}function SB(t,e){IA(t,e),e[co]=null,e[Zn]=null}function xB(t,e,n,r,o,i){r[co]=o,r[Zn]=e,zh(t,r,n,1,o,i)}function IA(t,e){e[jo].changeDetectionScheduler?.notify(9),zh(t,e,e[bt],2,null,null)}function CB(t){let e=t[Wl];if(!e)return Pb(t[ge],t);for(;e;){let n=null;if(Ho(e))n=e[Wl];else{let r=e[Zt];r&&(n=r)}if(!n){for(;e&&!e[Vr]&&e!==t;)Ho(e)&&Pb(e[ge],e),e=e[ln];e===null&&(e=t),Ho(e)&&Pb(e[ge],e),n=e&&e[Vr]}e=n}}function Aw(t,e){let n=t[wa],r=n.indexOf(e);n.splice(r,1)}function Uh(t,e){if(_a(e))return;let n=e[bt];n.destroyNode&&zh(t,e,n,3,null,null),CB(e)}function Pb(t,e){if(_a(e))return;let n=ye(null);try{e[_e]&=-129,e[_e]|=256,e[Cr]&&Js(e[Cr]),DB(t,e),IB(t,e),e[ge].type===1&&e[bt].destroy();let r=e[os];if(r!==null&&uo(e[ln])){r!==e[ln]&&Aw(r,e);let o=e[Bo];o!==null&&o.detachView(t)}Wb(e)}finally{ye(n)}}function g1(t,e,n,r){let o=t?.[ba];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);if(o.skipLeaveAnimations)return o.skipLeaveAnimations=!1,r(!1);EB(n,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s)for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:u}=c();a.push(u)}o.running=Promise.allSettled(a),TB(t,r)}else t&&zu.delete(t),r(!1)})}function TB(t,e){let n=t[ba]?.running;if(n){n.then(()=>{t[ba].running=void 0,zu.delete(t),e(!0)});return}e(!1)}function IB(t,e){let n=t.cleanup,r=e[Gl];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Gl]=null);let o=e[hi];if(o!==null){e[hi]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[vi];if(i!==null){e[vi]=null;for(let s of i)s.destroy()}}function DB(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=e[n[r]];if(!(o instanceof Ta)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];st(4,a,l);try{l.call(a)}finally{st(5,a,l)}}else{st(4,o,i);try{i.call(o)}finally{st(5,o,i)}}}}}function DA(t,e,n){return NB(t,e.parent,n)}function NB(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[co];if(ss(r)){let{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===wi.None||o===wi.Emulated)return null}return fo(r,n)}function NA(t,e,n){return MB(t,e,n)}function AB(t,e,n){return t.type&40?fo(t,n):null}var MB=AB,y1;function Mw(t,e,n,r){let o=DA(t,r,e),i=e[bt],s=r.parent||e[Zn],a=NA(s,r,e);if(o!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)h1(i,o,n[l],a,!1);else h1(i,o,n,a,!1);y1!==void 0&&y1(i,r,e,n,o)}function Ru(t,e){if(e!==null){let n=e.type;if(n&3)return fo(e,t);if(n&4)return Xb(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ru(t,r);{let o=t[e.index];return uo(o)?Xb(-1,o):$r(o)}}else{if(n&128)return Ru(t,e.next);if(n&32)return Nw(e,t)()||$r(t[e.index]);{let r=AA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let o=ts(t[Qn]);return Ru(o,r)}else return Ru(t,e.next)}}}return null}function AA(t,e){if(e!==null){let r=t[Qn][Zn],o=e.projection;return r.projection[o]}return null}function Xb(t,e){let n=Zt+t+1;if(n<e.length){let r=e[n],o=r[ge].firstChild;if(o!==null)return Ru(r,o)}return e[is]}function kw(t,e,n,r,o,i,s){for(;n!=null;){let a=r[rs];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(s&&e===0&&(l&&Jl($r(l),r),n.flags|=2),!Bh(n))if(c&8)kw(t,e,n.child,r,o,i,!1),Xl(e,t,a,o,l,n,i,r);else if(c&32){let u=Nw(n,r),f;for(;f=u();)Xl(e,t,a,o,f,n,i,r);Xl(e,t,a,o,l,n,i,r)}else c&16?MA(t,e,r,n,o,i):Xl(e,t,a,o,l,n,i,r);n=s?n.projectionNext:n.next}}function zh(t,e,n,r,o,i){kw(n,r,t.firstChild,e,o,i,!1)}function kB(t,e,n){let r=e[bt],o=DA(t,n,e),i=n.parent||e[Zn],s=NA(i,n,e);MA(r,0,e,n,o,s)}function MA(t,e,n,r,o,i){let s=n[Qn],l=s[Zn].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Xl(e,t,n[rs],o,u,r,i,n)}else{let c=l,u=s[ln];eA(r)&&(c.flags|=128),kw(t,e,c,u,o,i,!0)}}function OB(t,e,n,r,o,i,s){let a=r[is],l=$r(r);a!==l&&Xl(e,t,n,i,a,o,s);for(let c=Zt;c<r.length;c++){let u=r[c];zh(u[ge],u,t,e,i,a)}}function RB(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:_i.DashCase;o==null?t.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=_i.Important),t.setStyle(n,r,o,i))}}function kA(t,e,n,r,o){let i=zo(),s=r&2;try{cs(-1),s&&e.length>Ht&&CA(t,e,Ht,!1),st(s?2:0,o,n),n(r,o)}finally{cs(i),st(s?3:1,o,n)}}function Ow(t,e,n){jB(t,e,n),(n.flags&64)===64&&BB(t,e,n)}function Gh(t,e,n=fo){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(e,t):t[s];t[o++]=a}}}function PB(t,e,n,r){let i=r.get(cA,lA)||n===wi.ShadowDom,s=t.selectRootElement(e,i);return FB(s),s}function FB(t){LB(t)}var LB=()=>null;function VB(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function OA(t,e,n,r,o,i){let s=e[ge];if(Rw(t,s,e,n,r)){ss(t)&&$B(e,t.index);return}t.type&3&&(n=VB(n)),RA(t,e,n,r,o,i)}function RA(t,e,n,r,o,i){if(t.type&3){let s=fo(t,e);r=i!=null?i(r,t.value||"",n):r,o.setProperty(s,n,r)}else t.type&12}function $B(t,e){let n=jr(e,t);n[_e]&16||(n[_e]|=64)}function jB(t,e,n){let r=n.directiveStart,o=n.directiveEnd;ss(n)&&wB(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Eh(n,e);let i=n.initialInputs;for(let s=r;s<o;s++){let a=t.data[s],l=Fu(e,t,s,n);if(Jl(l,e),i!==null&&GB(e,s-r,l,a,n,i),Uo(a)){let c=jr(n.index,e);c[qt]=Fu(e,t,s,n)}}}function BB(t,e,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=ZN();try{cs(i);for(let a=r;a<o;a++){let l=t.data[a],c=e[a];ih(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&HB(l,c)}}finally{cs(-1),ih(s)}}function HB(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function PA(t,e){let n=t.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];vA(e,i.selectors,!1)&&(r??=[],Uo(i)?r.unshift(i):r.push(i))}return r}function UB(t,e,n,r,o,i){let s=fo(t,e);zB(e[bt],s,i,t.value,n,r,o)}function zB(t,e,n,r,o,i,s){if(i==null)t.removeAttribute(e,o,n);else{let a=s==null?pa(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}function GB(t,e,n,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];Yb(r,n,l,c)}}function FA(t,e,n,r,o){let i=Ht+n,s=e[ge],a=o(s,e,t,r,n);e[i]=a,Ea(t,!0);let l=t.type===2;return l?(EA(e[bt],a,t),(UN()===0||Iu(t))&&Jl(a,e),zN()):Jl(a,e),ch()&&(!l||!Bh(t))&&Mw(s,e,a,t),t}function LA(t){let e=t;return Eb()?Sb():(e=e.parent,Ea(e,!1)),e}function WB(t,e){let n=t[rs];if(!n)return;let r;try{r=n.get(Hr,null)}catch{r=null}r?.(e)}function Rw(t,e,n,r,o){let i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],f=e.data[c];Yb(f,n[c],u,o),a=!0}if(i)for(let l of i){let c=n[l],u=e.data[l];Yb(u,c,r,o),a=!0}return a}function qB(t,e){let n=jr(e,t),r=n[ge];KB(r,n);let o=n[co];o!==null&&n[ma]===null&&(n[ma]=uA(o,n[rs])),st(18),Pw(r,n,n[qt]),st(19,n[qt])}function KB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Pw(t,e,n){ah(e);try{let r=t.viewQuery;r!==null&&Kb(1,r,n);let o=t.template;o!==null&&kA(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Bo]?.finishViewCreation(t),t.staticContentQueries&&dA(t,e),t.staticViewQueries&&Kb(2,t.viewQuery,n);let i=t.components;i!==null&&YB(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_e]&=-5,lh()}}function YB(t,e){for(let n=0;n<e.length;n++)qB(t,e[n])}function Gu(t,e,n,r){let o=ye(null);try{let i=e.tView,a=t[_e]&4096?4096:16,l=Iw(t,i,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[os]=c;let u=t[Bo];return u!==null&&(l[Bo]=u.createEmbeddedView(i)),Pw(i,l,n),l}finally{ye(o)}}function ec(t,e){return!e||e.firstChild===null||eA(t)}function Lu(t,e,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=e[n.index];i!==null&&r.push($r(i)),uo(i)&&VA(i,r);let s=n.type;if(s&8)Lu(t,e,n.child,r);else if(s&32){let a=Nw(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=AA(e,n);if(Array.isArray(a))r.push(...a);else{let l=ts(e[Qn]);Lu(l[ge],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function VA(t,e){for(let n=Zt;n<t.length;n++){let r=t[n],o=r[ge].firstChild;o!==null&&Lu(r[ge],r,o,e)}t[is]!==t[co]&&e.push(t[is])}function $A(t){if(t[va]!==null){for(let e of t[va])e.impl.addSequence(e);t[va].length=0}}var jA=[];function XB(t){return t[Cr]??ZB(t)}function ZB(t){let e=jA.pop()??Object.create(JB);return e.lView=t,e}function QB(t){t.lView[Cr]!==t&&(t.lView=null,jA.push(t))}var JB=he(B({},Xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{as(t.lView)},consumerOnSignalRead(){this.lView[Cr]=this}});function e3(t){let e=t[Cr]??Object.create(t3);return e.lView=t,e}var t3=he(B({},Xs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ts(t.lView);for(;e&&!BA(e[ge]);)e=ts(e);e&&fb(e)},consumerOnSignalRead(){this.lView[Cr]=this}});function BA(t){return t.type!==2}function HA(t){if(t[vi]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[vi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[_e]&8192)}}var n3=100;function UA(t,e=0){let r=t[jo].rendererFactory,o=!1;o||r.begin?.();try{r3(t,e)}finally{o||r.end?.()}}function r3(t,e){let n=xb();try{Kl(!0),Zb(t,e);let r=0;for(;Nu(t);){if(r===n3)throw new le(103,!1);r++,Zb(t,1)}}finally{Kl(n)}}function o3(t,e,n,r){if(_a(e))return;let o=e[_e],i=!1,s=!1;ah(e);let a=!0,l=null,c=null;i||(BA(t)?(c=XB(e),l=Qs(c)):hp()===null?(a=!1,c=e3(e),l=Qs(c)):e[Cr]&&(Js(e[Cr]),e[Cr]=null));try{db(e),KN(t.bindingStartIndex),n!==null&&kA(t,e,n,2,r);let u=(o&3)===3;if(!i)if(u){let m=t.preOrderCheckHooks;m!==null&&hh(e,m,null)}else{let m=t.preOrderHooks;m!==null&&mh(e,m,0,null),Ob(e,0)}if(s||i3(e),HA(e),zA(e,0),t.contentQueries!==null&&dA(t,e),!i)if(u){let m=t.contentCheckHooks;m!==null&&hh(e,m)}else{let m=t.contentHooks;m!==null&&mh(e,m,1),Ob(e,1)}a3(t,e);let f=t.components;f!==null&&WA(e,f,0);let p=t.viewQuery;if(p!==null&&Kb(2,p,r),!i)if(u){let m=t.viewCheckHooks;m!==null&&hh(e,m)}else{let m=t.viewHooks;m!==null&&mh(e,m,2),Ob(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[th]){for(let m of e[th])m();e[th]=null}i||($A(e),e[_e]&=-73)}catch(u){throw i||as(e),u}finally{c!==null&&(Tl(c,l),a&&QB(c)),lh()}}function zA(t,e){for(let n=nA(t);n!==null;n=rA(n))for(let r=Zt;r<n.length;r++){let o=n[r];GA(o,e)}}function i3(t){for(let e=nA(t);e!==null;e=rA(e)){if(!(e[_e]&2))continue;let n=e[wa];for(let r=0;r<n.length;r++){let o=n[r];fb(o)}}}function s3(t,e,n){st(18);let r=jr(e,t);GA(r,n),st(19,r[qt])}function GA(t,e){rh(t)&&Zb(t,e)}function Zb(t,e){let r=t[ge],o=t[_e],i=t[Cr],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Il(i)),s||=!1,i&&(i.dirty=!1),t[_e]&=-9217,s)o3(r,t,r.template,t[qt]);else if(o&8192){let a=ye(null);try{HA(t),zA(t,1);let l=r.components;l!==null&&WA(t,l,1),$A(t)}finally{ye(a)}}}function WA(t,e,n){for(let r=0;r<e.length;r++)s3(t,e[r],n)}function a3(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)cs(~o);else{let i=o,s=n[++r],a=n[++r];XN(s,i);let l=e[i];st(24,l),a(2,l),st(25,l)}}}finally{cs(-1)}}function Fw(t,e){let n=xb()?64:1088;for(t[jo].changeDetectionScheduler?.notify(e);t;){t[_e]|=n;let r=ts(t);if(ql(t)&&!r)return t;t=r}return null}function qA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KA(t,e){let n=Zt+e;if(n<t.length)return t[n]}function Wu(t,e,n,r=!0){let o=e[ge];if(l3(o,e,t,n),r){let s=Xb(n,t),a=e[bt],l=a.parentNode(t[is]);l!==null&&xB(o,t[Zn],a,e,l,s)}let i=e[ma];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function YA(t,e){let n=Vu(t,e);return n!==void 0&&Uh(n[ge],n),n}function Vu(t,e){if(t.length<=Zt)return;let n=Zt+e,r=t[n];if(r){let o=r[os];o!==null&&o!==t&&Aw(o,r),e>0&&(t[n-1][Vr]=r[Vr]);let i=Su(t,Zt+e);SB(r[ge],r);let s=i[Bo];s!==null&&s.detachView(i[ge]),r[ln]=null,r[Vr]=null,r[_e]&=-129}return r}function l3(t,e,n,r){let o=Zt+r,i=n.length;r>0&&(n[o-1][Vr]=e),r<i-Zt?(e[Vr]=n[o],Zv(n,Zt+r,e)):(n.push(e),e[Vr]=null),e[ln]=n;let s=e[os];s!==null&&n!==s&&XA(s,e);let a=e[Bo];a!==null&&a.insertView(t),oh(e),e[_e]|=128}function XA(t,e){let n=t[wa],r=e[ln];if(Ho(r))t[_e]|=2;else{let o=r[ln][Qn];e[Qn]!==o&&(t[_e]|=2)}n===null?t[wa]=[e]:n.push(e)}var us=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ge];return Lu(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[qt]}set context(e){this._lView[qt]=e}get destroyed(){return _a(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ln];if(uo(e)){let n=e[Tu],r=n?n.indexOf(this):-1;r>-1&&(Vu(e,r),Su(n,r))}this._attachedToViewContainer=!1}Uh(this._lView[ge],this._lView)}onDestroy(e){pb(this._lView,e)}markForCheck(){Fw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){oh(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,UA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ql(this._lView),n=this._lView[os];n!==null&&!e&&Aw(n,this._lView),IA(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e;let n=ql(this._lView),r=this._lView[os];r!==null&&!n&&XA(r,this._lView),oh(this._lView)}};var ho=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=c3;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){let i=Gu(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new us(i)}}return t})();function c3(){return Lw(gn(),Se())}function Lw(t,e){return t.type&4?new ho(e,t,nc(t,e)):null}function Na(t,e,n,r,o){let i=t.data[e];if(i===null)i=u3(t,e,n,r,o),YN()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=GN();i.injectorIndex=s===null?-1:s.injectorIndex}return Ea(i,!0),i}function u3(t,e,n,r,o){let i=_b(),s=Eb(),a=s?i:i&&i.parent,l=t.data[e]=f3(t,a,n,e,r,o);return d3(t,l,i,s),l}function d3(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function f3(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return vb()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var kse=new RegExp(`^(\\d+)*(${Xj}|${Yj})*(.*)`);function p3(t){let e=t[ab]??[],r=t[ln][bt],o=[];for(let i of e)i.data[aA]!==void 0?o.push(i):h3(i,r);t[ab]=o}function h3(t,e){let n=0,r=t.firstChild;if(r){let o=t.data[sA];for(;n<o;){let i=r.nextSibling;_A(e,r,!1),r=i,n++}}}var m3=()=>null,g3=()=>null;function Th(t,e){return m3(t,e)}function ZA(t,e,n){return g3(t,e,n)}var QA=class{},Wh=class{},Qb=class{resolveComponentFactory(e){throw new le(917,!1)}},qu=class{static NULL=new Qb},Fn=class{},Si=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>y3()}return t})();function y3(){let t=Se(),e=gn(),n=jr(e.index,t);return(Ho(n)?n:t)[bt]}var JA=(()=>{class t{static \u0275prov=Y({token:t,providedIn:"root",factory:()=>null})}return t})();var yh={},Jb=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let o=this.injector.get(e,yh,r);return o!==yh||n===yh?o:this.parentInjector.get(e,n,r)}};function Ih(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=Bv(o,a);else if(i==2){let l=a,c=e[++s];r=Bv(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function Dn(t,e=0){let n=Se();if(n===null)return Le(t,e);let r=gn();return X1(r,n,In(t),e)}function eM(t,e,n,r,o){let i=r===null?null:{"":-1},s=o(t,n);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}w3(t,e,n,a,i,l,c)}i!==null&&r!==null&&v3(n,r,i)}function v3(t,e,n){let r=t.localNames=[];for(let o=0;o<e.length;o+=2){let i=n[e[o+1]];if(i==null)throw new le(-301,!1);r.push(e[o],i)}}function b3(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function w3(t,e,n,r,o,i,s){let a=r.length,l=!1;for(let p=0;p<a;p++){let m=r[p];!l&&Uo(m)&&(l=!0,b3(t,n,p)),zb(Eh(n,e),t,m.type)}T3(n,t.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,u=!1,f=xA(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(n.mergedAttrs=Ql(n.mergedAttrs,m.hostAttrs),E3(t,n,e,f,m),C3(f,m,o),s!==null&&s.has(m)){let[x,C]=s.get(m);n.directiveToIndex.set(m.type,[f,x+n.directiveStart,C+n.directiveStart])}else(i===null||!i.has(m))&&n.directiveToIndex.set(m.type,f);m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let w=m.type.prototype;!c&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!u&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),f++}_3(t,n,i)}function _3(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=t.data[r];if(n===null||!n.has(o))v1(0,e,o,r),v1(1,e,o,r),w1(e,r,!1);else{let i=n.get(o);b1(0,e,i,r),b1(1,e,i,r),w1(e,r,!0)}}}function v1(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),tM(e,i)}}function b1(t,e,n,r){let o=t===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),tM(e,s)}}function tM(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function w1(t,e,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(r===null||!n&&o===null||n&&i===null||Cw(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&o.hasOwnProperty(l)){let c=o[l];for(let u of c)if(u===e){s??=[],s.push(l,r[a+1]);break}}else if(n&&i.hasOwnProperty(l)){let c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function E3(t,e,n,r,o){t.data[r]=o;let i=o.factory||(o.factory=ca(o.type,!0)),s=new Ta(i,Uo(o),Dn,null);t.blueprint[r]=s,n[r]=s,S3(t,e,r,xA(t,n,o.hostVars,mo),o)}function S3(t,e,n,r,o){let i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;x3(s)!=a&&s.push(a),s.push(n,r,i)}}function x3(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function C3(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Uo(e)&&(n[""]=t)}}function T3(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function nM(t,e,n,r,o,i,s,a){let l=e[ge],c=l.consts,u=Br(c,s),f=Na(l,t,n,r,u);return i&&eM(l,e,f,Br(c,a),o),f.mergedAttrs=Ql(f.mergedAttrs,f.attrs),f.attrs!==null&&Ih(f,f.attrs,!1),f.mergedAttrs!==null&&Ih(f,f.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,f),f}function rM(t,e){H1(t,e),lb(e)&&t.queries.elementEnd(e)}function I3(t,e,n,r,o,i){let s=e.consts,a=Br(s,o),l=Na(e,t,n,r,a);if(l.mergedAttrs=Ql(l.mergedAttrs,l.attrs),i!=null){let c=Br(s,i);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Ih(l,l.attrs,!1),l.mergedAttrs!==null&&Ih(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Wo(t,e,n){if(n===mo)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function D3(t,e,n,r){let o=Wo(t,e,n);return Wo(t,e+1,r)||o}function vh(t,e,n){return function r(o){let i=ss(t)?jr(t.index,e):e;Fw(i,5);let s=e[qt],a=_1(e,s,n,o),l=r.__ngNextListenerFn__;for(;l;)a=_1(e,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function _1(t,e,n,r){let o=ye(null);try{return st(6,e,n),n(r)!==!1}catch(i){return WB(t,i),!1}finally{st(7,e,n),ye(o)}}function oM(t,e,n,r,o,i,s,a){let l=Iu(t),c=!1,u=null;if(!r&&l&&(u=A3(e,n,i,t.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let f=fo(t,n),p=r?r(f):f;Qj(n,p,i,a);let m=o.listen(p,i,a);if(!N3(i)){let w=r?x=>r($r(x[t.index])):t.index;iM(w,e,n,i,a,m,!1)}}return c}function N3(t){return t.startsWith("animation")||t.startsWith("transition")}function A3(t,e,n,r){let o=t.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=e[Gl],l=o[i+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function iM(t,e,n,r,o,i,s){let a=e.firstCreatePass?mb(e):null,l=hb(n),c=l.length;l.push(o,i),a&&a.push(r,t,c,(c+1)*(s?-1:1))}function E1(t,e,n,r,o,i){let s=e[n],a=e[ge],c=a.data[n].outputs[r],f=s[c].subscribe(i);iM(t.index,a,e,o,i,f,!0)}var ew=Symbol("BINDING");var Dh=class extends qu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=yi(e);return new Ia(n,this.ngModule)}};function M3(t){return Object.keys(t).map(e=>{let[n,r,o]=t[e],i={propName:n,templateName:e,isSignal:(r&Hh.SignalBased)!==0};return o&&(i.transform=o),i})}function k3(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function O3(t,e,n){let r=e instanceof Ft?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Jb(n,r):n}function R3(t){let e=t.get(Fn,null);if(e===null)throw new le(407,!1);let n=t.get(JA,null),r=t.get(lo,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function P3(t,e){let n=sM(t);return bA(e,n,n==="svg"?cb:n==="math"?FN:null)}function sM(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ia=class extends Wh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=M3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=k3(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=fB(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o,i,s){st(22);let a=ye(null);try{let l=this.componentDef,c=F3(r,l,s,i),u=O3(l,o||this.ngModule,e),f=R3(u),p=f.rendererFactory.createRenderer(null,l),m=r?PB(p,r,l.encapsulation,u):P3(l,p),w=s?.some(S1)||i?.some(I=>typeof I!="function"&&I.bindings.some(S1)),x=Iw(null,c,null,512|SA(l),null,null,f,p,u,null,uA(m,u,!0));x[Ht]=m,ah(x);let C=null;try{let I=nM(Ht,x,2,"#host",()=>c.directiveRegistry,!0,0);EA(p,m,I),Jl(m,x),Ow(c,x,I),fA(c,I,x),rM(c,I),n!==void 0&&V3(I,this.ngContentSelectors,n),C=jr(I.index,x),x[qt]=C[qt],Pw(c,x,null)}catch(I){throw C!==null&&Wb(C),Wb(x),I}finally{st(23),lh()}return new Nh(this.componentType,x,!!w)}finally{ye(a)}}};function F3(t,e,n,r){let o=t?["ng-version","20.3.4"]:pB(e.selectors[0]),i=null,s=null,a=0;if(n)for(let u of n)a+=u[ew].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[ew].requiredVars;let m=u+1;p.create&&(p.targetIdx=m,(i??=[]).push(p)),p.update&&(p.targetIdx=m,(s??=[]).push(p))}}let l=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=tb(f);l.push(p)}return Tw(0,null,L3(i,s),1,a,l,null,null,null,[o],null)}function L3(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function S1(t){let e=t[ew].kind;return e==="input"||e==="twoWay"}var Nh=class extends QA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Du(n[ge],Ht),this.location=nc(this._tNode,n),this.instance=jr(this._tNode.index,n)[qt],this.hostView=this.changeDetectorRef=new us(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView,i=Rw(r,o[ge],o,e,n);this.previousInputValues.set(e,n);let s=jr(r.index,o);Fw(s,1)}get injector(){return new Ca(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function V3(t,e,n){let r=t.projection=[];for(let o=0;o<e.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var zr=(()=>{class t{static __NG_ELEMENT_ID__=$3}return t})();function $3(){let t=gn();return lM(t,Se())}var j3=zr,aM=class extends j3{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Ca(this._hostTNode,this._hostLView)}get parentInjector(){let e=vw(this._hostTNode,this._hostLView);if(z1(e)){let n=_h(e,this._hostLView),r=wh(e),o=n[ge].data[r+8];return new Ca(o,n)}else return new Ca(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=x1(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Zt}createEmbeddedView(e,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Th(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,ec(this._hostTNode,s)),a}createComponent(e,n,r,o,i,s,a){let l=e&&!xj(e),c;if(l)c=n;else{let C=n||{};c=C.index,r=C.injector,o=C.projectableNodes,i=C.environmentInjector||C.ngModuleRef,s=C.directives,a=C.bindings}let u=l?e:new Ia(yi(e)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let I=(l?f:this.parentInjector).get(Ft,null);I&&(i=I)}let p=yi(u.componentType??{}),m=Th(this._lContainer,p?.id??null),w=m?.firstChild??null,x=u.create(f,o,w,i,s,a);return this.insertImpl(x.hostView,c,ec(this._hostTNode,m)),x}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let o=e._lView;if($N(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=o[ln],c=new aM(l,l[Zn],l[ln]);c.detach(c.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return Wu(s,o,i,r),e.attachToViewContainerRef(),Zv(Fb(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=x1(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Vu(this._lContainer,n);r&&(Su(Fb(this._lContainer),n),Uh(r[ge],r))}detach(e){let n=this._adjustIndex(e,-1),r=Vu(this._lContainer,n);return r&&Su(Fb(this._lContainer),n)!=null?new us(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function x1(t){return t[Tu]}function Fb(t){return t[Tu]||(t[Tu]=[])}function lM(t,e){let n,r=e[t.index];return uo(r)?n=r:(n=qA(r,e,null,t),e[t.index]=n,Dw(e,n)),H3(n,e,t,r),new aM(n,t,e)}function B3(t,e){let n=t[bt],r=n.createComment(""),o=fo(e,t),i=n.parentNode(o);return Ch(n,i,r,n.nextSibling(o),!1),r}var H3=G3,U3=()=>!1;function z3(t,e,n){return U3(t,e,n)}function G3(t,e,n,r){if(t[is])return;let o;n.type&8?o=$r(r):o=B3(e,n),t[is]=o}var tw=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},nw=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){let s=n.getByIndex(i),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)$w(e,n).matches!==null&&this.queries[n].setDirty()}},Ah=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Z3(e):this.predicate=e}},rw=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let o=n!==null?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ow=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){let i=r[o];this.matchTNodeWithReadOption(e,n,W3(n,i)),this.matchTNodeWithReadOption(e,n,gh(n,e,i,!1,!1))}else r===ho?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,gh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let o=this.metadata.read;if(o!==null)if(o===at||o===zr||o===ho&&n.type&4)this.addMatch(n.index,-2);else{let i=gh(n,e,o,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function W3(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function q3(t,e){return t.type&11?nc(t,e):t.type&4?Lw(t,e):null}function K3(t,e,n,r){return n===-1?q3(e,t):n===-2?Y3(t,e,r):Fu(t,t[ge],n,e)}function Y3(t,e,n){if(n===at)return nc(e,t);if(n===ho)return Lw(e,t);if(n===zr)return lM(e,t)}function cM(t,e,n,r){let o=e[Bo].queries[r];if(o.matches===null){let i=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=i[c];a.push(K3(e,u,s[l+1],n.metadata.read))}}o.matches=a}return o.matches}function iw(t,e,n,r){let o=t.queries.getByIndex(n),i=o.matches;if(i!==null){let s=cM(t,e,o,n);for(let a=0;a<i.length;a+=2){let l=i[a];if(l>0)r.push(s[a/2]);else{let c=i[a+1],u=e[-l];for(let f=Zt;f<u.length;f++){let p=u[f];p[os]===p[ln]&&iw(p[ge],p,c,r)}if(u[wa]!==null){let f=u[wa];for(let p=0;p<f.length;p++){let m=f[p];iw(m[ge],m,c,r)}}}}}return r}function Vw(t,e){return t[Bo].queries[e].queryList}function uM(t,e,n){let r=new Sh((n&4)===4);return HN(t,e,r,r.destroy),(e[Bo]??=new nw).queries.push(new tw(r))-1}function dM(t,e,n){let r=Dt();return r.firstCreatePass&&(fM(r,new Ah(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),uM(r,Se(),e)}function X3(t,e,n,r){let o=Dt();if(o.firstCreatePass){let i=gn();fM(o,new Ah(e,n,r),i.index),Q3(o,t),(n&2)===2&&(o.staticContentQueries=!0)}return uM(o,Se(),n)}function Z3(t){return t.split(",").map(e=>e.trim())}function fM(t,e,n){t.queries===null&&(t.queries=new rw),t.queries.track(new ow(e,n))}function Q3(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function $w(t,e){return t.queries.getByIndex(e)}function pM(t,e){let n=t[ge],r=$w(n,e);return r.crossesNgTemplate?iw(n,t,e,[]):cM(n,t,r,e)}function jw(t,e,n){let r,o=hu(()=>{r._dirtyCounter();let i=J3(r,t);if(e&&i===void 0)throw new le(-951,!1);return i});return r=o[an],r._dirtyCounter=ae(0),r._flatValue=void 0,o}function hM(t){return jw(!0,!1,t)}function mM(t){return jw(!0,!0,t)}function gM(t){return jw(!1,!1,t)}function yM(t,e){let n=t[an];n._lView=Se(),n._queryIndex=e,n._queryList=Vw(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function J3(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[_e]&4)return e?void 0:lr;let o=Vw(n,r),i=pM(n,r);return o.reset(i,J1),e?o.first:o._changesDetected||t._flatValue===void 0?t._flatValue=o.toArray():t._flatValue}var C1=new Set;function qo(t){C1.has(t)||(C1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ei=class{},qh=class{};var Mh=class extends Ei{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dh(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;let i=eb(e);this._bootstrapComponents=gA(i.bootstrap),this._r3Injector=Db(e,n,[{provide:Ei,useValue:this},{provide:qu,useValue:this.componentFactoryResolver},...r],mi(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},kh=class extends qh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Mh(this.moduleType,e,[])}};var $u=class extends Ei{injector;componentFactoryResolver=new Dh(this);instance=null;constructor(e){super();let n=new da([...e.providers,{provide:Ei,useValue:this},{provide:qu,useValue:this.componentFactoryResolver}],e.parent||zl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ku(t,e,n=null){return new $u({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var eH=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=nb(!1,n.type),o=r.length>0?Ku([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Y({token:t,providedIn:"environment",factory:()=>new t(Le(Ft))})}return t})();function Ze(t){return Uu(()=>{let e=vM(t),n=he(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===bw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(eH).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wi.Emulated,styles:t.styles||lr,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&qo("NgStandalone"),bM(n);let r=t.dependencies;return n.directiveDefs=T1(r,tH),n.pipeDefs=T1(r,DN),n.id=oH(n),n})}function tH(t){return yi(t)||tb(t)}function go(t){return Uu(()=>({type:t.type,bootstrap:t.bootstrap||lr,declarations:t.declarations||lr,imports:t.imports||lr,exports:t.exports||lr,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nH(t,e){if(t==null)return ns;let n={};for(let r in t)if(t.hasOwnProperty(r)){let o=t[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=Hh.None,l=null),n[i]=[r,a,l],e[i]=s}return n}function rH(t){if(t==null)return ns;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Kt(t){return Uu(()=>{let e=vM(t);return bM(e),e})}function vM(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ns,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||lr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nH(t.inputs,e),outputs:rH(t.outputs),debugInfo:null}}function bM(t){t.features?.forEach(e=>e(t))}function T1(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let o of n){let i=e(o);i!==null&&r.push(i)}return r}:null}function oH(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function iH(t){return Object.getPrototypeOf(t.prototype).constructor}function Jn(t){let e=iH(t.type),n=!0,r=[t];for(;e;){let o;if(Uo(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);let s=t;s.inputs=Lb(t.inputs),s.declaredInputs=Lb(t.declaredInputs),s.outputs=Lb(t.outputs);let a=o.hostBindings;a&&uH(t,a);let l=o.viewQuery,c=o.contentQueries;if(l&&lH(t,l),c&&cH(t,c),sH(t,o),vN(t.outputs,o.outputs),Uo(o)&&o.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(t),a===Jn&&(n=!1)}}e=Object.getPrototypeOf(e)}aH(r)}function sH(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function aH(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Ql(o.hostAttrs,n=Ql(n,o.hostAttrs))}}function Lb(t){return t===ns?{}:t===lr?[]:t}function lH(t,e){let n=t.viewQuery;n?t.viewQuery=(r,o)=>{e(r,o),n(r,o)}:t.viewQuery=e}function cH(t,e){let n=t.contentQueries;n?t.contentQueries=(r,o,i)=>{e(r,o,i),n(r,o,i)}:t.contentQueries=e}function uH(t,e){let n=t.hostBindings;n?t.hostBindings=(r,o)=>{e(r,o),n(r,o)}:t.hostBindings=e}function wM(t,e,n,r,o,i,s,a){if(n.firstCreatePass){t.mergedAttrs=Ql(t.mergedAttrs,t.attrs);let u=t.tView=Tw(2,t,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Ea(t,!1);let l=fH(n,e,t,r);ch()&&Mw(n,e,l,t),Jl(l,e);let c=qA(l,e,l,t);e[r+Ht]=c,Dw(e,c),z3(c,t,e)}function dH(t,e,n,r,o,i,s,a,l,c,u){let f=n+Ht,p;return e.firstCreatePass?(p=Na(e,f,4,s||null,a||null),yb()&&eM(e,t,p,Br(e.consts,c),PA),H1(e,p)):p=e.data[f],wM(p,t,e,n,r,o,i,l),Iu(p)&&Ow(e,t,p),c!=null&&Gh(t,p,u),p}function ju(t,e,n,r,o,i,s,a,l,c,u){let f=n+Ht,p;if(e.firstCreatePass){if(p=Na(e,f,4,s||null,a||null),c!=null){let m=Br(e.consts,c);p.localNames=[];for(let w=0;w<m.length;w+=2)p.localNames.push(m[w],-1)}}else p=e.data[f];return wM(p,t,e,n,r,o,i,l),c!=null&&Gh(t,p,u),p}function oc(t,e,n,r,o,i,s,a){let l=Se(),c=Dt(),u=Br(c.consts,i);return dH(l,c,t,e,n,r,o,u,void 0,s,a),oc}var fH=pH;function pH(t,e,n,r){return uh(!0),e[bt].createComment("")}var Kh=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Kh||{}),Aa=new re(""),_M=!1,sw=class extends Ae{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,RN()&&(this.destroyRef=M(Tr,{optional:!0})??void 0,this.pendingTasks=M(bi,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof vt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},nt=sw;function EM(t){let e,n;function r(){t=xa;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function I1(t){return queueMicrotask(()=>t()),()=>{t=xa}}var Bw="isAngularZone",Oh=Bw+"_ID",hH=0,Ye=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nt(!1);onMicrotaskEmpty=new nt(!1);onStable=new nt(!1);onError=new nt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=_M}=e;if(typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,yH(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bw)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new le(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,mH,xa,xa);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},mH={};function Hw(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gH(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){EM(()=>{t.callbackScheduled=!1,aw(t),t.isCheckStableRunning=!0,Hw(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),aw(t)}function yH(t){let e=()=>{gH(t)},n=hH++;t._inner=t._inner.fork({name:"angular",properties:{[Bw]:!0,[Oh]:n,[Oh+n]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(vH(l))return r.invokeTask(i,s,a,l);try{return D1(t),r.invokeTask(i,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),N1(t)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return D1(t),r.invoke(i,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!bH(l)&&e(),N1(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,aw(t),Hw(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function aw(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function D1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function N1(t){t._nesting--,Hw(t)}var Bu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nt;onMicrotaskEmpty=new nt;onStable=new nt;onError=new nt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}};function vH(t){return SM(t,"__ignore_ng_zone__")}function bH(t){return SM(t,"__scheduler_tick__")}function SM(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Uw=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),xM=[0,1,2,3],CM=(()=>{class t{ngZone=M(Ye);scheduler=M(lo);errorHandler=M(xr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Aa,{optional:!0})}execute(){let n=this.sequences.size>0;n&&st(16),this.executing=!0;for(let r of xM)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&st(17)}register(n){let{view:r}=n;r!==void 0?((r[va]??=[]).push(n),as(r),r[_e]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Kh.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),Rh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,i,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[va];e&&(this.view[va]=e.filter(n=>n!==this))}};function xt(t,e){let n=e?.injector??M(Je);return qo("NgAfterNextRender"),_H(t,n,e,!0)}function wH(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function _H(t,e,n,r){let o=e.get(Uw);o.impl??=e.get(CM);let i=e.get(Aa,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Tr):null,a=e.get(Yl,null,{optional:!0}),l=new Rh(o.impl,wH(t),a?.view,r,s,i?.snapshot(null));return o.impl.register(l),l}var zw=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Gw=new re("");function Ma(t){return!!t&&typeof t.then=="function"}function TM(t){return!!t&&typeof t.subscribe=="function"}var IM=new re("");var Ww=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(IM,{optional:!0})??[];injector=M(Je);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=Xn(this.injector,o);if(Ma(i))n.push(i);else if(TM(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yh=new re("");function DM(){fv(()=>{let t="";throw new le(600,t)})}function NM(t){return t.isBoundToModule}var EH=10;var Ir=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Hr);afterRenderManager=M(Uw);zonelessEnabled=M(ku);rootEffectScheduler=M(Ou);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ae;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(bi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ee(n=>!n))}constructor(){M(Aa,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Ft);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Je.NULL){return this._injector.get(Ye).run(()=>{st(10);let s=n instanceof Wh;if(!this._injector.get(Ww).done){let w="";throw new le(405,w)}let l;s?l=n:l=this._injector.get(qu).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=NM(l)?void 0:this._injector.get(Ei),u=r||l.selector,f=l.create(o,[],u,c),p=f.location.nativeElement,m=f.injector.get(Gw,null);return m?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Pu(this.components,f),m?.unregisterApplication(p)}),this._loadComponent(f),st(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){st(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new le(101,!1);let n=ye(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(n),this.afterTick.next(),st(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<EH;)st(14),this.synchronizeOnce(),st(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Nu(o))continue;let i=r&&!this.zonelessEnabled?0:1;UA(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Nu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Pu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Yh,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Pu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new le(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yn(t,e,n,r){let o=Se(),i=ls();if(Wo(o,i,e)){let s=Dt(),a=Mu();UB(a,o,t,e,n,r)}return yn}var $se=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var lw=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),o=Math.max(e,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(e,n){this.attach(n,this.detach(e,!0))}};function Vb(t,e,n,r,o){return t===n&&Object.is(e,r)?1:Object.is(o(t,e),o(n,r))?-1:0}function SH(t,e,n){let r,o,i=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;i<=s&&i<=l;){let c=t.at(i),u=e[i],f=Vb(i,c,i,u,n);if(f!==0){f<0&&t.updateValue(i,u),i++;continue}let p=t.at(s),m=e[l],w=Vb(s,p,l,m,n);if(w!==0){w<0&&t.updateValue(s,m),s--,l--;continue}let x=n(i,c),C=n(s,p),I=n(i,u);if(Object.is(I,C)){let P=n(l,m);Object.is(P,x)?(t.swap(i,s),t.updateValue(s,m),l--,s--):t.move(s,i),t.updateValue(i,u),i++;continue}if(r??=new Ph,o??=M1(t,i,s,n),cw(t,r,i,I))t.updateValue(i,u),i++,s++;else if(o.has(I))r.set(x,t.detach(i)),s--;else{let P=t.create(i,e[i]);t.attach(i,P),i++,s++}}for(;i<=l;)A1(t,r,n,i,e[i]),i++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&i<=s;){let u=t.at(i),f=c.value,p=Vb(i,u,i,f,n);if(p!==0)p<0&&t.updateValue(i,f),i++,c=l.next();else{r??=new Ph,o??=M1(t,i,s,n);let m=n(i,f);if(cw(t,r,i,m))t.updateValue(i,f),i++,s++,c=l.next();else if(!o.has(m))t.attach(i,t.create(i,f)),i++,s++,c=l.next();else{let w=n(i,u);r.set(w,t.detach(i)),s--}}}for(;!c.done;)A1(t,r,n,t.length,c.value),c=l.next()}for(;i<=s;)t.destroy(t.detach(s--));r?.forEach(l=>{t.destroy(l)})}function cw(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function A1(t,e,n,r,o){if(cw(t,e,r,n(r,o)))t.updateValue(r,o);else{let i=t.create(r,o);t.attach(r,i)}}function M1(t,e,n,r){let o=new Set;for(let i=e;i<=n;i++)o.add(r(i,t.at(i)));return o}var Ph=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),e(r,n)}}};function Qt(t,e,n,r,o,i,s,a){qo("NgControlFlow");let l=Se(),c=Dt(),u=Br(c.consts,i);return ju(l,c,t,e,n,r,o,u,256,s,a),qw}function qw(t,e,n,r,o,i,s,a){qo("NgControlFlow");let l=Se(),c=Dt(),u=Br(c.consts,i);return ju(l,c,t,e,n,r,o,u,512,s,a),qw}function Jt(t,e){qo("NgControlFlow");let n=Se(),r=ls(),o=n[r]!==mo?n[r]:-1,i=o!==-1?Fh(n,Ht+o):void 0,s=0;if(Wo(n,r,t)){let a=ye(null);try{if(i!==void 0&&YA(i,s),t!==-1){let l=Ht+t,c=Fh(n,l),u=pw(n[ge],l),f=ZA(c,u,n),p=Gu(n,u,e,{dehydratedView:f});Wu(c,p,s,ec(u,f))}}finally{ye(a)}}else if(i!==void 0){let a=KA(i,s);a!==void 0&&(a[qt]=e)}}var uw=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Zt}};function xi(t){return t}var dw=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function yo(t,e,n,r,o,i,s,a,l,c,u,f,p){qo("NgControlFlow");let m=Se(),w=Dt(),x=l!==void 0,C=Se(),I=a?s.bind(C[Qn][qt]):s,P=new dw(x,I);C[Ht+t]=P,ju(m,w,t+1,e,n,r,o,Br(w.consts,i),256),x&&ju(m,w,t+2,l,c,u,f,Br(w.consts,p),512)}var fw=class extends lw{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Zt}at(e){return this.getLView(e)[qt].$implicit}attach(e,n){let r=n[ma];this.needsIndexUpdate||=e!==this.length,Wu(this.lContainer,n,e,ec(this.templateTNode,r))}detach(e,n){return this.needsIndexUpdate||=e!==this.length-1,n&&xH(this.lContainer,e),CH(this.lContainer,e)}create(e,n){let r=Th(this.lContainer,this.templateTNode.tView.ssrId),o=Gu(this.hostLView,this.templateTNode,new uw(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(e){Uh(e[ge],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[qt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[qt].$index=e}getLView(e){return TH(this.lContainer,e)}};function vo(t){let e=ye(null),n=zo();try{let r=Se(),o=r[ge],i=r[n],s=n+1,a=Fh(r,s);if(i.liveCollection===void 0){let c=pw(o,s);i.liveCollection=new fw(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(SH(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){let c=ls(),u=l.length===0;if(Wo(r,c,u)){let f=n+2,p=Fh(r,f);if(u){let m=pw(o,f),w=ZA(p,m,r),x=Gu(r,m,void 0,{dehydratedView:w});Wu(p,x,0,ec(m,w))}else o.firstUpdatePass&&p3(p),YA(p,0)}}}finally{ye(e)}}function Fh(t,e){return t[e]}function xH(t,e){if(t.length<=Zt)return;let n=Zt+e,r=t[n];r&&r[ba]&&(r[ba].skipLeaveAnimations=!0)}function CH(t,e){return Vu(t,e)}function TH(t,e){return KA(t,e)}function pw(t,e){return Du(t,e)}function cn(t,e,n){let r=Se(),o=ls();if(Wo(r,o,e)){let i=Dt(),s=Mu();OA(s,r,t,e,r[bt],n)}return cn}function k1(t,e,n,r,o){Rw(e,t,n,o?"class":"style",r)}function q(t,e,n,r){let o=Se(),i=o[ge],s=t+Ht,a=i.firstCreatePass?nM(s,o,2,e,PA,yb(),n,r):i.data[s];if(FA(a,o,t,e,AM),Iu(a)){let l=o[ge];Ow(l,o,a),fA(l,a,o)}return r!=null&&Gh(o,a),q}function K(){let t=Dt(),e=gn(),n=LA(e);return t.firstCreatePass&&rM(t,n),bb(n)&&wb(),gb(),n.classesWithoutHost!=null&&Aj(n)&&k1(t,n,Se(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Mj(n)&&k1(t,n,Se(),n.stylesWithoutHost,!1),K}function en(t,e,n,r){return q(t,e,n,r),K(),en}function ot(t,e,n,r){let o=Se(),i=o[ge],s=t+Ht,a=i.firstCreatePass?I3(s,i,2,e,n,r):i.data[s];return FA(a,o,t,e,AM),r!=null&&Gh(o,a),ot}function ut(){let t=gn(),e=LA(t);return bb(e)&&wb(),gb(),ut}function ht(t,e,n,r){return ot(t,e,n,r),ut(),ht}var AM=(t,e,n,r,o)=>(uh(!0),bA(e[bt],r,r1()));function vn(){return Se()}function Yu(t,e,n){let r=Se(),o=ls();if(Wo(r,o,e)){let i=Dt(),s=Mu();RA(s,r,t,e,r[bt],n)}return Yu}var Xu="en-US";var IH=Xu;function MM(t){typeof t=="string"&&(IH=t.toLowerCase().replace(/_/g,"-"))}function Nt(t,e,n){let r=Se(),o=Dt(),i=gn();return kM(o,r,r[bt],i,t,e,n),Nt}function bo(t,e,n){let r=Se(),o=Dt(),i=gn();return(i.type&3||n)&&oM(i,o,r,n,r[bt],t,e,vh(i,r,e)),bo}function kM(t,e,n,r,o,i,s){let a=!0,l=null;if((r.type&3||s)&&(l??=vh(r,e,i),oM(r,t,e,s,n,o,i,l)&&(a=!1)),a){let c=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],m=u[f+1];l??=vh(r,e,i),E1(r,e,p,m,o,l)}if(c&&c.length)for(let f of c)l??=vh(r,e,i),E1(r,e,f,o,o,l)}}function et(t=1){return n1(t)}function DH(t,e){let n=null,r=aB(t);for(let o=0;o<e.length;o++){let i=e[o];if(i==="*"){n=o;continue}if(r===null?vA(t,i,!0):uB(r,i))return o}return n}function ka(t){let e=Se()[Qn][Zn];if(!e.projection){let n=t?t.length:1,r=e.projection=CN(n,null),o=r.slice(),i=e.child;for(;i!==null;){if(i.type!==128){let s=t?DH(i,t):0;s!==null&&(o[s]?o[s].projectionNext=i:r[s]=i,o[s]=i)}i=i.next}}}function Oa(t,e=0,n,r,o,i){let s=Se(),a=Dt(),l=r?t+1:null;l!==null&&ju(s,a,l,r,o,i,null,n);let c=Na(a,Ht+t,16,null,n||null);c.projection===null&&(c.projection=e),Sb();let f=!s[ma]||vb();s[Qn][Zn].projection[c.projection]===null&&l!==null?NH(s,a,l):f&&!Bh(c)&&kB(a,s,c)}function NH(t,e,n){let r=Ht+n,o=e.data[r],i=t[r],s=Th(i,o.tView.ssrId),a=Gu(t,o,void 0,{dehydratedView:s});Wu(i,a,0,ec(o,s))}function Zu(t,e,n){dM(t,e,n)}function Qu(t){let e=Se(),n=Dt(),r=sh();Au(r+1);let o=$w(n,r);if(t.dirty&&VN(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let i=pM(e,r);t.reset(i,J1),t.notifyOnChanges()}return!0}return!1}function Ju(){return Vw(Se(),sh())}function Kw(t,e,n,r,o){yM(e,X3(t,n,r,o))}function un(t,e,n,r){yM(t,dM(e,n,r))}function ur(t=1){Au(sh()+t)}function ph(t,e){return t<<17|e<<2}function Da(t){return t>>17&32767}function AH(t){return(t&2)==2}function MH(t,e){return t&131071|e<<17}function hw(t){return t|2}function tc(t){return(t&131068)>>2}function $b(t,e){return t&-131069|e<<2}function kH(t){return(t&1)===1}function mw(t){return t|1}function OH(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Da(s),l=tc(s);t[r]=n;let c=!1,u;if(Array.isArray(n)){let f=n;u=f[1],(u===null||Ul(f,u)>0)&&(c=!0)}else u=n;if(o)if(l!==0){let p=Da(t[a+1]);t[r+1]=ph(p,a),p!==0&&(t[p+1]=$b(t[p+1],r)),t[a+1]=MH(t[a+1],r)}else t[r+1]=ph(a,0),a!==0&&(t[a+1]=$b(t[a+1],r)),a=r;else t[r+1]=ph(l,0),a===0?a=r:t[l+1]=$b(t[l+1],r),l=r;c&&(t[r+1]=hw(t[r+1])),O1(t,u,r,!0),O1(t,u,r,!1),RH(e,u,t,r,i),s=ph(a,l),i?e.classBindings=s:e.styleBindings=s}function RH(t,e,n,r,o){let i=o?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&Ul(i,e)>=0&&(n[r+1]=mw(n[r+1]))}function O1(t,e,n,r){let o=t[n+1],i=e===null,s=r?Da(o):tc(o),a=!1;for(;s!==0&&(a===!1||i);){let l=t[s],c=t[s+1];PH(l,e)&&(a=!0,t[s+1]=r?mw(c):hw(c)),s=r?Da(c):tc(c)}a&&(t[n+1]=r?hw(o):mw(o))}function PH(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ul(t,e)>=0:!1}function Ln(t,e,n){return OM(t,e,n,!1),Ln}function Ci(t,e){return OM(t,e,null,!0),Ci}function OM(t,e,n,r){let o=Se(),i=Dt(),s=Cb(2);if(i.firstUpdatePass&&LH(i,t,s,r),e!==mo&&Wo(o,s,e)){let a=i.data[zo()];HH(i,a,o,o[bt],t,o[s+1]=UH(e,n),r,s)}}function FH(t,e){return e>=t.expandoStartIndex}function LH(t,e,n,r){let o=t.data;if(o[n+1]===null){let i=o[zo()],s=FH(t,n);zH(i,r)&&e===null&&!s&&(e=!1),e=VH(o,i,e,r),OH(o,i,e,n,s,r)}}function VH(t,e,n,r){let o=QN(t),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(n=jb(null,t,e,n,r),n=Hu(n,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==o)if(n=jb(o,t,e,n,r),i===null){let l=$H(t,e,r);l!==void 0&&Array.isArray(l)&&(l=jb(null,t,e,l[1],r),l=Hu(l,e.attrs,r),jH(t,e,r,l))}else i=BH(t,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),n}function $H(t,e,n){let r=n?e.classBindings:e.styleBindings;if(tc(r)!==0)return t[Da(r)]}function jH(t,e,n,r){let o=n?e.classBindings:e.styleBindings;t[Da(o)]=r}function BH(t,e,n){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=t[i].hostAttrs;r=Hu(r,s,n)}return Hu(r,e.attrs,n)}function jb(t,e,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=e[a],r=Hu(r,i.hostAttrs,o),i!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Hu(t,e,n){let r=n?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),IN(t,s,n?!0:e[++i]))}return t===void 0?null:t}function HH(t,e,n,r,o,i,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=kH(c)?R1(l,e,n,o,tc(c),s):void 0;if(!Lh(u)){Lh(i)||AH(c)&&(i=R1(l,null,n,o,a,s));let f=ub(zo(),n);RB(r,s,f,o,i)}}function R1(t,e,n,r,o,i){let s=e===null,a;for(;o>0;){let l=t[o],c=Array.isArray(l),u=c?l[1]:l,f=u===null,p=n[o+1];p===mo&&(p=f?lr:void 0);let m=f?eh(p,r):u===r?p:void 0;if(c&&!Lh(m)&&(m=eh(l,r)),Lh(m)&&(a=m,s))return a;let w=t[o+1];o=s?Da(w):tc(w)}if(e!==null){let l=i?e.residualClasses:e.residualStyles;l!=null&&(a=eh(l,r))}return a}function Lh(t){return t!==void 0}function UH(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=mi(Ew(t)))),t}function zH(t,e){return(t.flags&(e?8:16))!==0}function de(t,e=""){let n=Se(),r=Dt(),o=t+Ht,i=r.firstCreatePass?Na(r,o,1,e,null):r.data[o],s=GH(r,n,i,e,t);n[o]=s,ch()&&Mw(r,n,s,i),Ea(i,!1)}var GH=(t,e,n,r,o)=>(uh(!0),hB(e[bt],r));function WH(t,e,n,r=""){return Wo(t,ls(),n)?e+pa(n)+r:mo}function qH(t,e,n,r,o,i=""){let s=qN(),a=D3(t,s,n,o);return Cb(2),a?e+pa(n)+r+pa(o)+i:mo}function Ti(t){return Ko("",t),Ti}function Ko(t,e,n){let r=Se(),o=WH(r,t,e,n);return o!==mo&&RM(r,zo(),o),Ko}function Xh(t,e,n,r,o){let i=Se(),s=qH(i,t,e,n,r,o);return s!==mo&&RM(i,zo(),s),Xh}function RM(t,e,n){let r=ub(e,t);mB(t[bt],r,n)}function At(t,e,n){Mb(e)&&(e=e());let r=Se(),o=ls();if(Wo(r,o,e)){let i=Dt(),s=Mu();OA(s,r,t,e,r[bt],n)}return At}function Lt(t,e){let n=Mb(t);return n&&t.set(e),n}function Mt(t,e){let n=Se(),r=Dt(),o=gn();return kM(r,n,n[bt],o,t,e),Mt}var PM={};function Zh(t){let e=Dt(),n=Se(),r=t+Ht,o=Na(e,r,128,null,null);return Ea(o,!1),nh(e,n,r,PM),Zh}function Yw(t){qo("NgLet");let e=Dt(),n=Se(),r=zo();return nh(e,n,r,t),t}function er(t){let e=WN(),n=LN(e,Ht+t);if(n===PM)throw new le(314,!1);return n}function KH(t,e,n){let r=Dt();if(r.firstCreatePass){let o=Uo(t);gw(n,r.data,r.blueprint,o,!0),gw(e,r.data,r.blueprint,o,!1)}}function gw(t,e,n,r,o){if(t=In(t),Array.isArray(t))for(let i=0;i<t.length;i++)gw(t[i],e,n,r,o);else{let i=Dt(),s=Se(),a=gn(),l=ua(t)?t:In(t.provide),c=ob(t),u=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(ua(t)||!t.multi){let m=new Ta(c,o,Dn,null),w=Hb(l,e,o?u:u+p,f);w===-1?(zb(Eh(a,s),i,l),Bb(i,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[w]=m,s[w]=m)}else{let m=Hb(l,e,u+p,f),w=Hb(l,e,u,u+p),x=m>=0&&n[m],C=w>=0&&n[w];if(o&&!C||!o&&!x){zb(Eh(a,s),i,l);let I=ZH(o?XH:YH,n.length,o,r,c,t);!o&&C&&(n[w].providerFactory=I),Bb(i,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(I),s.push(I)}else{let I=FM(n[o?w:m],c,!o&&r);Bb(i,t,m>-1?m:w,I)}!o&&r&&C&&n[w].componentProviders++}}}function Bb(t,e,n,r){let o=ua(e),i=ON(e);if(o||i){let l=(i?In(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function FM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Hb(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function YH(t,e,n,r,o){return yw(this.multi,[])}function XH(t,e,n,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Fu(r,r[ge],this.providerFactory.index,o);s=l.slice(0,a),yw(i,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],yw(i,s);return s}function yw(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ZH(t,e,n,r,o,i){let s=new Ta(t,n,Dn,null);return s.multi=[],s.index=e,s.componentProviders=0,FM(s,o,r&&!n),s}function Gr(t,e=[]){return n=>{n.providersResolver=(r,o)=>KH(r,o?o(t):t,e)}}var Vh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Xw=(()=>{class t{compileModuleSync(n){return new kh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=eb(n),i=gA(o.declarations).reduce((s,a)=>{let l=yi(a);return l&&s.push(new Ia(l)),s},[]);return new Vh(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var QH=(()=>{class t{zone=M(Ye);changeDetectionScheduler=M(lo);applicationRef=M(Ir);applicationErrorHandler=M(Hr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function LM({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Ye(he(B({},VM()),{scheduleInRootZone:n})),[{provide:Ye,useFactory:t},{provide:gi,multi:!0,useFactory:()=>{let r=M(QH,{optional:!0});return()=>r.initialize()}},{provide:gi,multi:!0,useFactory:()=>{let r=M(JH);return()=>{r.initialize()}}},e===!0?{provide:kb,useValue:!0}:[],{provide:fh,useValue:n??_M},{provide:Hr,useFactory:()=>{let r=M(Ye),o=M(Ft),i;return s=>{r.runOutsideAngular(()=>{o.destroyed&&!i?setTimeout(()=>{throw s}):(i??=o.get(xr),i.handleError(s))})}}}]}function VM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var JH=(()=>{class t{subscription=new vt;initialized=!1;zone=M(Ye);pendingTasks=M(bi);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Zw=(()=>{class t{applicationErrorHandler=M(Hr);appRef=M(Ir);taskService=M(bi);ngZone=M(Ye);zonelessEnabled=M(ku);tracing=M(Aa,{optional:!0});disableScheduling=M(kb,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new vt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Oh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(fh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bu||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?I1:EM;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Oh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,I1(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qw(){return qo("NgZoneless"),ha([{provide:lo,useExisting:Zw},{provide:Ye,useClass:Bu},{provide:ku,useValue:!0},{provide:fh,useValue:!1},[]])}function eU(){return typeof $localize<"u"&&$localize.locale||Xu}var Jw=new re("",{providedIn:"root",factory:()=>M(Jw,{optional:!0,skipSelf:!0})||eU()});var ed=class{destroyed=!1;listeners=null;errorHandler=M(xr,{optional:!0});destroyRef=M(Tr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new le(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(_u(953,!1));return}if(this.listeners===null)return;let n=ye(null);try{for(let r of this.listeners)try{r(e)}catch(o){this.errorHandler?.handleError(o)}}finally{ye(n)}}};function Vn(t){return pN(t)}function Dr(t,e){return hu(t,e?.equal)}var e_=class{[an];constructor(e){this[an]=e}destroy(){this[an].destroy()}};function Ii(t,e){let n=e?.injector??M(Je),r=e?.manualCleanup!==!0?n.get(Tr):null,o,i=n.get(Yl,null,{optional:!0}),s=n.get(lo);return i!==null?(o=rU(i.view,s,t),r instanceof wu&&r._lView===i.view&&(r=null)):o=oU(t,n.get(Ou),s),o.injector=n,r!==null&&(o.onDestroyFn=r.onDestroy(()=>o.destroy())),new e_(o)}var $M=he(B({},hN),{cleanupFns:void 0,zone:null,onDestroyFn:xa,run(){let t=Kl(!1);try{mN(this)}finally{Kl(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=ye(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ye(t)}}}),tU=he(B({},$M),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Js(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),nU=he(B({},$M),{consumerMarkedDirty(){this.view[_e]|=8192,as(this.view),this.notifier.notify(13)},destroy(){Js(this),this.onDestroyFn(),this.cleanup(),this.view[vi]?.delete(this)}});function rU(t,e,n){let r=Object.create(nU);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=jM(r,n),t[vi]??=new Set,t[vi].add(r),r.consumerMarkedDirty(r),r}function oU(t,e,n){let r=Object.create(tU);return r.fn=jM(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function jM(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var Jh=Symbol("InputSignalNode#UNSET"),GM=he(B({},vp),{transformFn:void 0,applyValueToInputSignal(t,e){ea(t,e)}});function WM(t,e){let n=Object.create(GM);n.value=t,n.transformFn=e?.transform;function r(){if(Zs(n),n.value===Jh){let o=null;throw new le(-950,o)}return n.value}return r[an]=n,r}var bU=new re("");bU.__NG_ELEMENT_ID__=t=>{let e=gn();if(e===null)throw new le(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new le(204,!1)};function Ni(t){return new ed}function BM(t,e){return WM(t,e)}function wU(t){return WM(Jh,t)}var dt=(BM.required=wU,BM);function HM(t,e){return hM(e)}function _U(t,e){return mM(e)}var bn=(HM.required=_U,HM);function qM(t,e){return gM(e)}function KM(t,e){let n=Object.create(GM),r=new ed;n.value=t;function o(){return Zs(n),UM(n.value),n.value}return o[an]=n,o.asReadonly=dh.bind(o),o.set=i=>{n.equal(n.value,i)||(ea(n,i),r.emit(i))},o.update=i=>{UM(n.value),o.set(i(n.value))},o.subscribe=r.subscribe.bind(r),o.destroyRef=r.destroyRef,o}function UM(t){if(t===Jh)throw new le(952,!1)}function zM(t,e){return KM(t,e)}function EU(t){return KM(Jh,t)}var wn=(zM.required=EU,zM);var t_=new re(""),SU=new re("");function td(t){return!t.moduleRef}function xU(t){let e=td(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ye);return n.run(()=>{td(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Hr),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),td(t)){let i=()=>e.destroy(),s=t.platformInjector.get(t_);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(t_);s.add(i),t.moduleRef.onDestroy(()=>{Pu(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return TU(r,n,()=>{let i=e.get(bi),s=i.add(),a=e.get(Ww);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Jw,Xu);if(MM(l||Xu),!e.get(SU,!0))return td(t)?e.get(Ir):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(td(t)){let u=e.get(Ir);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return CU?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void i.remove(s))})})}var CU;function TU(t,e,n){try{let r=n();return Ma(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Qh=null;function IU(t=[],e){return Je.create({name:e,providers:[{provide:xu,useValue:"platform"},{provide:t_,useValue:new Set([()=>Qh=null])},...t]})}function DU(t=[]){if(Qh)return Qh;let e=IU(t);return Qh=e,DM(),NU(e),e}function NU(t){let e=t.get($h,null);Xn(t,()=>{e?.forEach(n=>n())})}var Ra=(()=>{class t{static __NG_ELEMENT_ID__=AU}return t})();function AU(t){return MU(gn(),Se(),(t&16)===16)}function MU(t,e,n){if(ss(t)&&!n){let r=jr(t.index,e);return new us(r,r)}else if(t.type&175){let r=e[Qn];return new us(r,e)}return null}function YM(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:o}=t;st(8);try{let i=o?.injector??DU(r),s=[LM({}),{provide:lo,useExisting:Zw},i1,...n||[]],a=new $u({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return xU({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{st(9)}}function ic(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function em(t,e){let n=yi(t),r=e.elementInjector||zl();return new Ia(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var QM=null;function Wr(){return QM}function n_(t){QM??=t}var nd=class{},r_=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(JM),providedIn:"platform"})}return t})();var JM=(()=>{class t extends r_{_location;_history;_doc=M(We);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wr().getBaseHref(this._doc)}onPopState(n){let r=Wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function ek(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function XM(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ps(t){return t&&t[0]!=="?"?`?${t}`:t}var tm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(nk),providedIn:"root"})}return t})(),tk=new re(""),nk=(()=>{class t extends tm{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ek(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ps(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+ps(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+ps(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Le(r_),Le(tk,8))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hs=(()=>{class t{_subject=new Ae;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=RU(XM(ZM(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ps(r))}normalize(n){return t.stripTrailingSlash(OU(this._basePath,ZM(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ps(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ps(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=ps;static joinWithSlash=ek;static stripTrailingSlash=XM;static \u0275fac=function(r){return new(r||t)(Le(tm))};static \u0275prov=Y({token:t,factory:()=>kU(),providedIn:"root"})}return t})();function kU(){return new hs(Le(tm))}function OU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function ZM(t){return t.replace(/\/index.html$/,"")}function RU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function o_(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var rd=class{};var i_="browser";function rk(t){return t===i_}var rm=new re(""),u_=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new le(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Le(rm),Le(Ye))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),od=class{_doc;constructor(e){this._doc=e}manager},s_="ng-app-id";function ok(t){for(let e of t)e.remove()}function ik(t,e){let n=e.createElement("style");return n.textContent=t,n}function PU(t,e,n,r){let o=t.head?.querySelectorAll(`style[${s_}="${e}"],link[${s_}="${e}"]`);if(o)for(let i of o)i.removeAttribute(s_),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function l_(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var d_=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,PU(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,ik);r?.forEach(o=>this.addUsage(o,this.external,l_))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(ok(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])ok(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,ik(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,l_(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Le(We),Le(rc),Le(jh,8),Le(fs))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),a_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},f_=/%COMP%/g;var ak="%COMP%",FU=`_nghost-${ak}`,LU=`_ngcontent-${ak}`,VU=!0,$U=new re("",{providedIn:"root",factory:()=>VU});function jU(t){return LU.replace(f_,t)}function BU(t){return FU.replace(f_,t)}function lk(t,e){return e.map(n=>n.replace(f_,t))}var p_=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,i,s,a,l,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new id(n,s,l,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof nm?o.applyToHost(n):o instanceof sd&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case wi.Emulated:i=new nm(l,c,r,this.appId,u,s,a,f,p);break;case wi.ShadowDom:return new c_(l,c,n,r,s,a,this.nonce,f,p);default:i=new sd(l,c,r,u,s,a,f,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(Le(u_),Le(d_),Le(rc),Le($U),Le(We),Le(fs),Le(Ye),Le(jh),Le(Aa,8))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),id=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,o,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(a_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sk(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sk(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new le(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;let i=a_[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let o=a_[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(_i.DashCase|_i.Important)?e.style.setProperty(n,r,o&_i.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_i.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,o){if(typeof e=="string"&&(e=Wr().getGlobalEventTarget(this.doc,e),!e))throw new le(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,o)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function sk(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var c_=class extends id{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,o,i,s,a,l,c){super(e,i,s,l,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=o.styles;u=lk(o.id,u);for(let p of u){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let f=o.getExternalStyles?.();if(f)for(let p of f){let m=l_(p,i);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sd=class extends id{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,o,i,s,a,l,c){super(e,i,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?lk(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&zu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nm=class extends sd{contentAttr;hostAttr;constructor(e,n,r,o,i,s,a,l,c){let u=o+"-"+r.id;super(e,n,r,i,s,a,l,c,u),this.contentAttr=jU(u),this.hostAttr=BU(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var om=class t extends nd{supportsDOMEvents=!0;static makeCurrent(){n_(new t)}onAndCancel(e,n,r,o){return e.addEventListener(n,r,o),()=>{e.removeEventListener(n,r,o)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=HU();return n==null?null:UU(n)}resetBaseElement(){ad=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return o_(document.cookie,e)}},ad=null;function HU(){return ad=ad||document.head.querySelector("base"),ad?ad.getAttribute("href"):null}function UU(t){return new URL(t,document.baseURI).pathname}var zU=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),uk=(()=>{class t extends od{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(Le(We))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})(),ck=["alt","control","meta","shift"],GU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dk=(()=>{class t extends od{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wr().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ck.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=GU[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ck.forEach(s=>{if(s!==o){let a=WU[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Le(We))};static \u0275prov=Y({token:t,factory:t.\u0275fac})}return t})();function h_(t,e,n){let r=B({rootComponent:t,platformRef:n?.platformRef},qU(e));return YM(r)}function qU(t){return{appProviders:[...QU,...t?.providers??[]],platformProviders:ZU}}function KU(){om.makeCurrent()}function YU(){return new xr}function XU(){return ww(document),document}var ZU=[{provide:fs,useValue:i_},{provide:$h,useValue:KU,multi:!0},{provide:We,useFactory:XU}];var QU=[{provide:xu,useValue:"root"},{provide:xr,useFactory:YU},{provide:rm,useClass:uk,multi:!0,deps:[We]},{provide:rm,useClass:dk,multi:!0,deps:[We]},p_,d_,u_,{provide:Fn,useExisting:p_},{provide:rd,useClass:zU},[]];var fk=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Le(We))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Re="primary",wd=Symbol("RouteTitle"),b_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function dc(t){return new b_(t)}function e4(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function t4(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yo(t[n],e[n]))return!1;return!0}function Yo(t,e){let n=t?w_(t):void 0,r=e?w_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!wk(t[o],e[o]))return!1;return!0}function w_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function wk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}else return t===e}function _k(t){return t.length>0?t[t.length-1]:null}function ki(t){return jp(t)?t:Ma(t)?jt(Promise.resolve(t)):ve(t)}var n4={exact:Sk,subset:xk},Ek={exact:r4,subset:o4,ignored:()=>!0};function pk(t,e,n){return n4[n.paths](t.root,e.root,n.matrixParams)&&Ek[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function r4(t,e){return Yo(t,e)}function Sk(t,e,n){if(!Fa(t.segments,e.segments)||!am(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Sk(t.children[r],e.children[r],n))return!1;return!0}function o4(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>wk(t[n],e[n]))}function xk(t,e,n){return Ck(t,e,e.segments,n)}function Ck(t,e,n,r){if(t.segments.length>n.length){let o=t.segments.slice(0,n.length);return!(!Fa(o,n)||e.hasChildren()||!am(o,n,r))}else if(t.segments.length===n.length){if(!Fa(t.segments,n)||!am(t.segments,n,r))return!1;for(let o in e.children)if(!t.children[o]||!xk(t.children[o],e.children[o],r))return!1;return!0}else{let o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!Fa(t.segments,o)||!am(t.segments,o,r)||!t.children[Re]?!1:Ck(t.children[Re],e,i,r)}}function am(t,e,n){return e.every((r,o)=>Ek[n](t[o].parameters,r.parameters))}var Mi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new it([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=dc(this.queryParams),this._queryParamMap}toString(){return a4.serialize(this)}},it=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lm(this)}},Pa=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=dc(this.parameters),this._parameterMap}toString(){return Ik(this)}};function i4(t,e){return Fa(t,e)&&t.every((n,r)=>Yo(n.parameters,e[r].parameters))}function Fa(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function s4(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===Re&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==Re&&(n=n.concat(e(o,r)))}),n}var wm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>new fc,providedIn:"root"})}return t})(),fc=class{parse(e){let n=new E_(e);return new Mi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ld(e.root,!0)}`,r=u4(e.queryParams),o=typeof e.fragment=="string"?`#${l4(e.fragment)}`:"";return`${n}${r}${o}`}},a4=new fc;function lm(t){return t.segments.map(e=>Ik(e)).join("/")}function ld(t,e){if(!t.hasChildren())return lm(t);if(e){let n=t.children[Re]?ld(t.children[Re],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==Re&&r.push(`${o}:${ld(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=s4(t,(r,o)=>o===Re?[ld(t.children[Re],!1)]:[`${o}:${ld(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Re]!=null?`${lm(t)}/${n[0]}`:`${lm(t)}/(${n.join("//")})`}}function Tk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function im(t){return Tk(t).replace(/%3B/gi,";")}function l4(t){return encodeURI(t)}function __(t){return Tk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cm(t){return decodeURIComponent(t)}function hk(t){return cm(t.replace(/\+/g,"%20"))}function Ik(t){return`${__(t.path)}${c4(t.parameters)}`}function c4(t){return Object.entries(t).map(([e,n])=>`;${__(e)}=${__(n)}`).join("")}function u4(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${im(n)}=${im(o)}`).join("&"):`${im(n)}=${im(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var d4=/^[^\/()?;#]+/;function m_(t){let e=t.match(d4);return e?e[0]:""}var f4=/^[^\/()?;=#]+/;function p4(t){let e=t.match(f4);return e?e[0]:""}var h4=/^[^=?&#]+/;function m4(t){let e=t.match(h4);return e?e[0]:""}var g4=/^[^&#]+/;function y4(t){let e=t.match(g4);return e?e[0]:""}var E_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new it([],{}):new it([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Re]=new it(e,n)),r}parseSegment(){let e=m_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Pa(cm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=p4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=m_(this.remaining);o&&(r=o,this.capture(r))}e[cm(n)]=cm(r)}parseQueryParam(e){let n=m4(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=y4(this.remaining);s&&(r=s,this.capture(r))}let o=hk(n),i=hk(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=m_(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new le(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Re);let s=this.parseChildren();n[i]=Object.keys(s).length===1?s[Re]:new it([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}};function Dk(t){return t.segments.length>0?new it([],{[Re]:t}):t}function Nk(t){let e={};for(let[r,o]of Object.entries(t.children)){let i=Nk(o);if(r===Re&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let n=new it(t.segments,e);return v4(n)}function v4(t){if(t.numberOfChildren===1&&t.children[Re]){let e=t.children[Re];return new it(t.segments.concat(e.segments),e.children)}return t}function pc(t){return t instanceof Mi}function b4(t,e,n=null,r=null){let o=Ak(t);return Mk(o,e,n,r)}function Ak(t){let e;function n(i){let s={};for(let l of i.children){let c=n(l);s[l.outlet]=c}let a=new it(i.url,s);return i===t&&(e=a),a}let r=n(t.root),o=Dk(r);return e??o}function Mk(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return g_(o,o,o,n,r);let i=w4(e);if(i.toRoot())return g_(o,o,new it([],{}),n,r);let s=_4(i,o,t),a=s.processChildren?ud(s.segmentGroup,s.index,i.commands):Ok(s.segmentGroup,s.index,i.commands);return g_(o,s.segmentGroup,a,n,r)}function um(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function pd(t){return typeof t=="object"&&t!=null&&t.outlets}function g_(t,e,n,r,o){let i={};r&&Object.entries(r).forEach(([l,c])=>{i[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=kk(t,e,n);let a=Dk(Nk(s));return new Mi(a,i,o)}function kk(t,e,n){let r={};return Object.entries(t.children).forEach(([o,i])=>{i===e?r[o]=n:r[o]=kk(i,e,n)}),new it(t.segments,r)}var dm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&um(r[0]))throw new le(4003,!1);let o=r.find(pd);if(o&&o!==_k(r))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w4(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new dm(!0,0,t);let e=0,n=!1,r=t.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new dm(n,e,r)}var lc=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function _4(t,e,n){if(t.isAbsolute)return new lc(e,!0,0);if(!n)return new lc(e,!1,NaN);if(n.parent===null)return new lc(n,!0,0);let r=um(t.commands[0])?0:1,o=n.segments.length-1+r;return E4(n,o,t.numberOfDoubleDots)}function E4(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new le(4005,!1);o=r.segments.length}return new lc(r,!1,o-i)}function S4(t){return pd(t[0])?t[0].outlets:{[Re]:t}}function Ok(t,e,n){if(t??=new it([],{}),t.segments.length===0&&t.hasChildren())return ud(t,e,n);let r=x4(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let i=new it(t.segments.slice(0,r.pathIndex),{});return i.children[Re]=new it(t.segments.slice(r.pathIndex),t.children),ud(i,0,o)}else return r.match&&o.length===0?new it(t.segments,{}):r.match&&!t.hasChildren()?S_(t,e,n):r.match?ud(t,0,o):S_(t,e,n)}function ud(t,e,n){if(n.length===0)return new it(t.segments,{});{let r=S4(n),o={};if(Object.keys(r).some(i=>i!==Re)&&t.children[Re]&&t.numberOfChildren===1&&t.children[Re].segments.length===0){let i=ud(t.children[Re],e,n);return new it(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Ok(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new it(t.segments,o)}}function x4(t,e,n){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;let s=t.segments[o],a=n[r];if(pd(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!gk(l,c,s))return i;r+=2}else{if(!gk(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function S_(t,e,n){let r=t.segments.slice(0,e),o=0;for(;o<n.length;){let i=n[o];if(pd(i)){let l=C4(i.outlets);return new it(r,l)}if(o===0&&um(n[0])){let l=t.segments[e];r.push(new Pa(l.path,mk(n[0]))),o++;continue}let s=pd(i)?i.outlets[Re]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&um(a)?(r.push(new Pa(s,mk(a))),o+=2):(r.push(new Pa(s,{})),o++)}return new it(r,{})}function C4(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=S_(new it([],{}),0,r))}),e}function mk(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function gk(t,e,n){return t==n.path&&Yo(e,n.parameters)}var dd="imperative",Nn=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Nn||{}),qr=class{id;url;constructor(e,n){this.id=e,this.url=n}},hc=class extends qr{type=Nn.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ms=class extends qr{urlAfterRedirects;type=Nn.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dr=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(dr||{}),fm=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(fm||{}),Ai=class extends qr{reason;code;type=Nn.NavigationCancel;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gs=class extends qr{reason;code;type=Nn.NavigationSkipped;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}},hd=class extends qr{error;target;type=Nn.NavigationError;constructor(e,n,r,o){super(e,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pm=class extends qr{urlAfterRedirects;state;type=Nn.RoutesRecognized;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x_=class extends qr{urlAfterRedirects;state;type=Nn.GuardsCheckStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C_=class extends qr{urlAfterRedirects;state;shouldActivate;type=Nn.GuardsCheckEnd;constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},T_=class extends qr{urlAfterRedirects;state;type=Nn.ResolveStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I_=class extends qr{urlAfterRedirects;state;type=Nn.ResolveEnd;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D_=class{route;type=Nn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},N_=class{route;type=Nn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},A_=class{snapshot;type=Nn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},M_=class{snapshot;type=Nn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},k_=class{snapshot;type=Nn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},O_=class{snapshot;type=Nn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var md=class{},mc=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function T4(t){return!(t instanceof md)&&!(t instanceof mc)}function I4(t,e){return t.providers&&!t._injector&&(t._injector=Ku(t.providers,e,`Route: ${t.path}`)),t._injector??e}function wo(t){return t.outlet||Re}function D4(t,e){let n=t.filter(r=>wo(r)===e);return n.push(...t.filter(r=>wo(r)!==e)),n}function yc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var R_=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return yc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new _d(this.rootInjector)}},_d=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new R_(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Le(Ft))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=P_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=P_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=F_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return F_(e,this._root).map(n=>n.value)}};function P_(t,e){if(t===e.value)return e;for(let n of e.children){let r=P_(t,n);if(r)return r}return null}function F_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=F_(t,n);if(r.length)return r.unshift(e),r}return[]}var Nr=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ac(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var mm=class extends hm{snapshot;constructor(e,n){super(e),this.snapshot=n,G_(this,e)}toString(){return this.snapshot.toString()}};function Rk(t){let e=N4(t),n=new Ot([new Pa("",{})]),r=new Ot({}),o=new Ot({}),i=new Ot({}),s=new Ot(""),a=new La(n,r,i,s,o,Re,t,e.root);return a.snapshot=e.root,new mm(new Nr(a,[]),e)}function N4(t){let e={},n={},r={},i=new cc([],e,r,"",n,Re,t,null,{});return new ym("",new Nr(i,[]))}var La=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,o,i,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ee(c=>c[wd]))??ve(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ee(e=>dc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ee(e=>dc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gm(t,e,n="emptyOnly"){let r,{routeConfig:o}=t;return e!==null&&(n==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),t.params),data:B(B({},e.data),t.data),resolve:B(B(B(B({},t.data),e.data),o?.data),t._resolvedData)}:r={params:B({},t.params),data:B({},t.data),resolve:B(B({},t.data),t._resolvedData??{})},o&&Fk(o)&&(r.resolve[wd]=o.title),r}var cc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[wd]}constructor(e,n,r,o,i,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=dc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=dc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ym=class extends hm{url;constructor(e,n){super(n),this.url=e,G_(this,n)}toString(){return Pk(this._root)}};function G_(t,e){e.value._routerState=t,e.children.forEach(n=>G_(t,n))}function Pk(t){let e=t.children.length>0?` { ${t.children.map(Pk).join(", ")} } `:"";return`${t.value}${e}`}function y_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yo(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Yo(e.params,n.params)||t.paramsSubject.next(n.params),t4(e.url,n.url)||t.urlSubject.next(n.url),Yo(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function L_(t,e){let n=Yo(t.params,e.params)&&i4(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||L_(t.parent,e.parent))}function Fk(t){return typeof t.title=="string"||t.title===null}var A4=new re(""),Lk=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Re;activateEvents=new nt;deactivateEvents=new nt;attachEvents=new nt;detachEvents=new nt;routerOutletData=dt(void 0);parentContexts=M(_d);location=M(zr);changeDetector=M(Ra);inputBinder=M(_m,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new V_(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ds]})}return t})(),V_=class{route;childContexts;parent;outletData;constructor(e,n,r,o){this.route=e,this.childContexts=n,this.parent=r,this.outletData=o}get(e,n){return e===La?this.route:e===_d?this.childContexts:e===A4?this.outletData:this.parent.get(e,n)}},_m=new re("");var Vk=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&en(0,"router-outlet")},dependencies:[Lk],encapsulation:2})}return t})();function W_(t){let e=t.children&&t.children.map(W_),n=e?he(B({},t),{children:e}):B({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Re&&(n.component=Vk),n}function M4(t,e,n){let r=gd(t,e._root,n?n._root:void 0);return new mm(r,e)}function gd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let o=k4(t,e,n);return new Nr(r,o)}else{if(t.shouldAttach(e.value)){let i=t.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>gd(t,a)),s}}let r=O4(e.value),o=e.children.map(i=>gd(t,i));return new Nr(r,o)}}function k4(t,e,n){return e.children.map(r=>{for(let o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return gd(t,r,o);return gd(t,r)})}function O4(t){return new La(new Ot(t.url),new Ot(t.params),new Ot(t.queryParams),new Ot(t.fragment),new Ot(t.data),t.outlet,t.component,t)}var yd=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},$k="ngNavigationCancelingError";function vm(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=pc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=jk(!1,dr.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function jk(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[$k]=!0,n.cancellationCode=e,n}function R4(t){return Bk(t)&&pc(t.url)}function Bk(t){return!!t&&t[$k]}var P4=(t,e,n,r)=>Ee(o=>(new $_(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)),$_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),y_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let o=ac(n);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ac(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=ac(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let o=ac(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new O_(i.value.snapshot))}),e.children.length&&this.forwardEvent(new M_(e.value.snapshot))}activateRoutes(e,n,r){let o=e.value,i=n?n.value:null;if(y_(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),y_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},uc=class{component;route;constructor(e,n){this.component=e,this.route=n}};function F4(t,e,n){let r=t._root,o=e?e._root:null;return cd(r,o,n,[r.value])}function L4(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function vc(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Uv(t)?t:e.get(t):r}function cd(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=ac(e);return t.children.forEach(s=>{V4(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>fd(a,n.getContext(s),o)),o}function V4(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=$4(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new bm(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?cd(t,e,a?a.children:null,r,o):cd(t,e,n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new uc(a.outlet.component,s))}else s&&fd(e,a,o),o.canActivateChecks.push(new bm(r)),i.component?cd(t,null,a?a.children:null,r,o):cd(t,null,n,r,o);return o}function $4(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Fa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fa(t.url,e.url)||!Yo(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!L_(t,e)||!Yo(t.queryParams,e.queryParams);case"paramsChange":default:return!L_(t,e)}}function fd(t,e,n){let r=ac(t),o=t.value;Object.entries(r).forEach(([i,s])=>{o.component?e?fd(s,e.children.getContext(i),n):fd(s,null,n):fd(s,e,n)}),o.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new uc(e.outlet.component,o)):n.canDeactivateChecks.push(new uc(null,o)):n.canDeactivateChecks.push(new uc(null,o))}function Ed(t){return typeof t=="function"}function j4(t){return typeof t=="boolean"}function B4(t){return t&&Ed(t.canLoad)}function H4(t){return t&&Ed(t.canActivate)}function U4(t){return t&&Ed(t.canActivateChild)}function z4(t){return t&&Ed(t.canDeactivate)}function G4(t){return t&&Ed(t.canMatch)}function Hk(t){return t instanceof oo||t?.name==="EmptyError"}var sm=Symbol("INITIAL_VALUE");function gc(){return Xe(t=>Up(t.map(e=>e.pipe(Pn(1),ao(sm)))).pipe(Ee(e=>{for(let n of e)if(n!==!0){if(n===sm)return sm;if(n===!1||W4(n))return n}return!0}),Rt(e=>e!==sm),Pn(1)))}function W4(t){return pc(t)||t instanceof yd}function q4(t,e){return Wt(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return s.length===0&&i.length===0?ve(he(B({},n),{guardsResult:!0})):K4(s,r,o,t).pipe(Wt(a=>a&&j4(a)?Y4(r,i,t,e):ve(a)),Ee(a=>he(B({},n),{guardsResult:a})))})}function K4(t,e,n,r){return jt(t).pipe(Wt(o=>ez(o.component,o.route,n,e,r)),pi(o=>o!==!0,!0))}function Y4(t,e,n,r){return jt(e).pipe(jl(o=>$l(Z4(o.route.parent,r),X4(o.route,r),J4(t,o.path,n),Q4(t,o.route,n))),pi(o=>o!==!0,!0))}function X4(t,e){return t!==null&&e&&e(new k_(t)),ve(!0)}function Z4(t,e){return t!==null&&e&&e(new A_(t)),ve(!0)}function Q4(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ve(!0);let o=r.map(i=>sa(()=>{let s=yc(e)??n,a=vc(i,s),l=H4(a)?a.canActivate(e,t):Xn(s,()=>a(e,t));return ki(l).pipe(pi())}));return ve(o).pipe(gc())}function J4(t,e,n){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>L4(s)).filter(s=>s!==null).map(s=>sa(()=>{let a=s.guards.map(l=>{let c=yc(s.node)??n,u=vc(l,c),f=U4(u)?u.canActivateChild(r,t):Xn(c,()=>u(r,t));return ki(f).pipe(pi())});return ve(a).pipe(gc())}));return ve(i).pipe(gc())}function ez(t,e,n,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return ve(!0);let s=i.map(a=>{let l=yc(e)??o,c=vc(a,l),u=z4(c)?c.canDeactivate(t,e,n,r):Xn(l,()=>c(t,e,n,r));return ki(u).pipe(pi())});return ve(s).pipe(gc())}function tz(t,e,n,r){let o=e.canLoad;if(o===void 0||o.length===0)return ve(!0);let i=o.map(s=>{let a=vc(s,t),l=B4(a)?a.canLoad(e,n):Xn(t,()=>a(e,n));return ki(l)});return ve(i).pipe(gc(),Uk(r))}function Uk(t){return wv(Pt(e=>{if(typeof e!="boolean")throw vm(t,e)}),Ee(e=>e===!0))}function nz(t,e,n,r){let o=e.canMatch;if(!o||o.length===0)return ve(!0);let i=o.map(s=>{let a=vc(s,t),l=G4(a)?a.canMatch(e,n):Xn(t,()=>a(e,n));return ki(l)});return ve(i).pipe(gc(),Uk(r))}var vd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},bd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function sc(t){return Ll(new vd(t))}function rz(t){return Ll(new le(4e3,!1))}function oz(t){return Ll(jk(!1,dr.GuardRejected))}var j_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ve(r);if(o.numberOfChildren>1||!o.children[Re])return rz(`${e.redirectTo}`);o=o.children[Re]}}applyRedirectCommands(e,n,r,o,i){return iz(n,o,i).pipe(Ee(s=>{if(s instanceof Mi)throw new bd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new bd(a);return a}))}applyRedirectCreateUrlTree(e,n,r,o){let i=this.createSegmentGroup(e,n.root,r,o);return new Mi(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){let i=this.createSegments(e,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,o)}),new it(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){let o=r[n.path.substring(1)];if(!o)throw new le(4001,!1);return o}findOrReturn(e,n){let r=0;for(let o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}};function iz(t,e,n){if(typeof t=="string")return ve(t);let r=t,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,params:c,data:u,title:f}=e;return ki(Xn(n,()=>r({params:c,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,title:f})))}var B_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sz(t,e,n,r,o){let i=zk(t,e,n);return i.matched?(r=I4(e,r),nz(r,e,n,o).pipe(Ee(s=>s===!0?i:B({},B_)))):ve(i)}function zk(t,e,n){if(e.path==="**")return az(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?B({},B_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(e.matcher||e4)(n,t,e);if(!o)return B({},B_);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?B(B({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function az(t){return{matched:!0,parameters:t.length>0?_k(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yk(t,e,n,r){return n.length>0&&uz(t,n,r)?{segmentGroup:new it(e,cz(r,new it(n,t.children))),slicedSegments:[]}:n.length===0&&dz(t,n,r)?{segmentGroup:new it(t.segments,lz(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new it(t.segments,t.children),slicedSegments:n}}function lz(t,e,n,r){let o={};for(let i of n)if(Em(t,e,i)&&!r[wo(i)]){let s=new it([],{});o[wo(i)]=s}return B(B({},r),o)}function cz(t,e){let n={};n[Re]=e;for(let r of t)if(r.path===""&&wo(r)!==Re){let o=new it([],{});n[wo(r)]=o}return n}function uz(t,e,n){return n.some(r=>Em(t,e,r)&&wo(r)!==Re)}function dz(t,e,n){return n.some(r=>Em(t,e,r))}function Em(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function fz(t,e,n){return e.length===0&&!t.children[n]}var H_=class{};function pz(t,e,n,r,o,i,s="emptyOnly"){return new U_(t,e,n,r,o,s,i).recognize()}var hz=31,U_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new j_(this.urlSerializer,this.urlTree)}noMatchError(e){return new le(4002,`'${e.segmentGroup}'`)}recognize(){let e=yk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ee(({children:n,rootSnapshot:r})=>{let o=new Nr(r,n),i=new ym("",o),s=b4(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let n=new cc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Re,n).pipe(Ee(r=>({children:r,rootSnapshot:n})),Qi(r=>{if(r instanceof bd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vd?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,i):this.processSegment(e,n,r,r.segments,o,!0,i).pipe(Ee(s=>s instanceof Nr?[s]:[]))}processChildren(e,n,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return jt(i).pipe(jl(s=>{let a=r.children[s],l=D4(n,s);return this.processSegmentGroup(e,l,a,s,o)}),Dv((s,a)=>(s.push(...a),s)),Ji(null),es(),Wt(s=>{if(s===null)return sc(r);let a=Gk(s);return mz(a),ve(a)}))}processSegment(e,n,r,o,i,s,a){return jt(n).pipe(jl(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,o,i,s,a).pipe(Qi(c=>{if(c instanceof vd)return ve(null);throw c}))),pi(l=>!!l),Qi(l=>{if(Hk(l))return fz(r,o,i)?ve(new H_):sc(r);throw l}))}processSegmentAgainstRoute(e,n,r,o,i,s,a,l){return wo(r)!==s&&(s===Re||!Em(o,i,r))?sc(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,l):sc(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=zk(n,o,i);if(!l)return sc(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hz&&(this.allowRedirects=!1));let m=new cc(i,c,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vk(o),wo(o),o.component??o._loadedComponent??null,o,bk(o)),w=gm(m,a,this.paramsInheritanceStrategy);return m.params=Object.freeze(w.params),m.data=Object.freeze(w.data),this.applyRedirects.applyRedirectCommands(u,o.redirectTo,f,m,e).pipe(Xe(C=>this.applyRedirects.lineralizeSegments(o,C)),Wt(C=>this.processSegment(e,r,n,C.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,o,i,s){let a=sz(n,r,o,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Xe(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(Xe(({routes:c})=>{let u=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=l,w=new cc(p,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,vk(r),wo(r),r.component??r._loadedComponent??null,r,bk(r)),x=gm(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(x.params),w.data=Object.freeze(x.data);let{segmentGroup:C,slicedSegments:I}=yk(n,p,m,c);if(I.length===0&&C.hasChildren())return this.processChildren(u,c,C,w).pipe(Ee(A=>new Nr(w,A)));if(c.length===0&&I.length===0)return ve(new Nr(w,[]));let P=wo(r)===i;return this.processSegment(u,c,C,I,P?Re:i,!0,w).pipe(Ee(A=>new Nr(w,A instanceof Nr?[A]:[])))}))):sc(n)))}getChildConfig(e,n,r){return n.children?ve({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ve({routes:n._loadedRoutes,injector:n._loadedInjector}):tz(e,n,r,this.urlSerializer).pipe(Wt(o=>o?this.configLoader.loadChildren(e,n).pipe(Pt(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):oz(n))):ve({routes:[],injector:e})}};function mz(t){t.sort((e,n)=>e.value.outlet===Re?-1:n.value.outlet===Re?1:e.value.outlet.localeCompare(n.value.outlet))}function gz(t){let e=t.value.routeConfig;return e&&e.path===""}function Gk(t){let e=[],n=new Set;for(let r of t){if(!gz(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):e.push(r)}for(let r of n){let o=Gk(r.children);e.push(new Nr(r.value,o))}return e.filter(r=>!n.has(r))}function vk(t){return t.data||{}}function bk(t){return t.resolve||{}}function yz(t,e,n,r,o,i){return Wt(s=>pz(t,e,n,r,s.extractedUrl,o,i).pipe(Ee(({state:a,tree:l})=>he(B({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function vz(t,e){return Wt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return ve(n);let i=new Set(o.map(l=>l.route)),s=new Set;for(let l of i)if(!s.has(l))for(let c of Wk(l))s.add(c);let a=0;return jt(s).pipe(jl(l=>i.has(l)?bz(l,r,t,e):(l.data=gm(l,l.parent,t).resolve,ve(void 0))),Pt(()=>a++),Bl(1),Wt(l=>a===s.size?ve(n):sr))})}function Wk(t){let e=t.children.map(n=>Wk(n)).flat();return[t,...e]}function bz(t,e,n,r){let o=t.routeConfig,i=t._resolve;return o?.title!==void 0&&!Fk(o)&&(i[wd]=o.title),sa(()=>(t.data=gm(t,t.parent,n).resolve,wz(i,t,e,r).pipe(Ee(s=>(t._resolvedData=s,t.data=B(B({},t.data),s),null)))))}function wz(t,e,n,r){let o=w_(t);if(o.length===0)return ve({});let i={};return jt(o).pipe(Wt(s=>_z(t[s],e,n,r).pipe(pi(),Pt(a=>{if(a instanceof yd)throw vm(new fc,a);i[s]=a}))),Bl(1),Ee(()=>i),Qi(s=>Hk(s)?sr:Ll(s)))}function _z(t,e,n,r){let o=yc(e)??r,i=vc(t,o),s=i.resolve?i.resolve(e,n):Xn(o,()=>i(e,n));return ki(s)}function v_(t){return Xe(e=>{let n=t(e);return n?jt(n).pipe(Ee(()=>e)):ve(e)})}var qk=(()=>{class t{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Re);return r}getResolvedTitleForRoute(n){return n.data[wd]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(Ez),providedIn:"root"})}return t})(),Ez=(()=>{class t extends qk{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Le(fk))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sm=new re("",{providedIn:"root",factory:()=>({})}),xm=new re(""),Kk=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Xw);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=ki(Xn(n,()=>r.loadComponent())).pipe(Ee(Yk),Xe(Xk),Pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),gu(()=>{this.componentLoaders.delete(r)})),i=new Rl(o,()=>new Ae).pipe(Ol());return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Sz(r,this.compiler,n,this.onLoadEndListener).pipe(gu(()=>{this.childrenLoaders.delete(r)})),s=new Rl(i,()=>new Ae).pipe(Ol());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sz(t,e,n,r){return ki(Xn(n,()=>t.loadChildren())).pipe(Ee(Yk),Xe(Xk),Wt(o=>o instanceof qh||Array.isArray(o)?ve(o):jt(e.compileModuleAsync(o))),Ee(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(n).injector,s=i.get(xm,[],{optional:!0,self:!0}).flat()),{routes:s.map(W_),injector:i}}))}function xz(t){return t&&typeof t=="object"&&"default"in t}function Yk(t){return xz(t)?t.default:t}function Xk(t){return ve(t)}var q_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(Cz),providedIn:"root"})}return t})(),Cz=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zk=new re("");var Qk=new re(""),Jk=(()=>{class t{currentNavigation=ae(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ae;transitionAbortWithErrorSubject=new Ae;configLoader=M(Kk);environmentInjector=M(Ft);destroyRef=M(Tr);urlSerializer=M(wm);rootContexts=M(_d);location=M(hs);inputBindingEnabled=M(_m,{optional:!0})!==null;titleStrategy=M(qk);options=M(Sm,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(q_);createViewTransition=M(Zk,{optional:!0});navigationErrorHandler=M(Qk,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new D_(o)),r=o=>this.events.next(new N_(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Vn(()=>{this.transitions?.next(he(B({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Ot(null),this.transitions.pipe(Rt(r=>r!==null),Xe(r=>{let o=!1;return ve(r).pipe(Xe(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),sr;this.currentTransition=r,this.currentNavigation.set({id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?he(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new gs(i.id,this.urlSerializer.serialize(i.rawUrl),"",fm.IgnoredSameUrlNavigation)),i.resolve(!1),sr;if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return ve(i).pipe(Xe(l=>(this.events.next(new hc(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?sr:Promise.resolve(l))),yz(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Pt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=l.urlAfterRedirects,u));let c=new pm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:f,extras:p}=i,m=new hc(l,this.urlSerializer.serialize(c),u,f);this.events.next(m);let w=Rk(this.rootComponentType).snapshot;return this.currentTransition=r=he(B({},i),{targetSnapshot:w,urlAfterRedirects:c,extras:he(B({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=c,x)),ve(r)}else return this.events.next(new gs(i.id,this.urlSerializer.serialize(i.extractedUrl),"",fm.IgnoredByUrlHandlingStrategy)),i.resolve(!1),sr}),Pt(i=>{let s=new x_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(s)}),Ee(i=>(this.currentTransition=r=he(B({},i),{guards:F4(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),q4(this.environmentInjector,i=>this.events.next(i)),Pt(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw vm(this.urlSerializer,i.guardsResult);let s=new C_(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(s)}),Rt(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",dr.GuardRejected),!1)),v_(i=>{if(i.guards.canActivateChecks.length!==0)return ve(i).pipe(Pt(s=>{let a=new T_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Xe(s=>{let a=!1;return ve(s).pipe(vz(this.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",dr.NoDataFromResolver)}}))}),Pt(s=>{let a=new I_(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),v_(i=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=yc(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(Pt(u=>{a.component=u}),Ee(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return Up(s(i.targetSnapshot.root)).pipe(Ji(null),Pn(1))}),v_(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:i,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,s.root);return a?jt(a).pipe(Ee(()=>r)):ve(r)}),Ee(i=>{let s=M4(n.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=he(B({},i),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Pt(()=>{this.events.next(new md)}),P4(this.rootContexts,n.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Pn(1),Bt(new Te(i=>{let s=r.abortController.signal,a=()=>i.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Rt(()=>!o&&!r.targetRouterState),Pt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",dr.Aborted)}))),Pt({next:i=>{o=!0,this.lastSuccessfulNavigation=Vn(this.currentNavigation),this.events.next(new ms(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{o=!0}}),Bt(this.transitionAbortWithErrorSubject.pipe(Pt(i=>{throw i}))),gu(()=>{o||this.cancelNavigationTransition(r,"",dr.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qi(i=>{if(this.destroyed)return r.resolve(!1),sr;if(o=!0,Bk(i))this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),R4(i)?this.events.next(new mc(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let s=new hd(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=Xn(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof yd){let{message:l,cancellationCode:c}=vm(this.urlSerializer,a);this.events.next(new Ai(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new mc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return sr}))}))}cancelNavigationTransition(n,r,o){let i=new Ai(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Vn(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tz(t){return t!==dd}var Iz=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(Dz),providedIn:"root"})}return t})(),z_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Dz=(()=>{class t extends z_{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),eO=(()=>{class t{urlSerializer=M(wm);options=M(Sm,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(hs);urlHandlingStrategy=M(q_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Mi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Mi?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=Rk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>M(Nz),providedIn:"root"})}return t})(),Nz=(()=>{class t extends eO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof hc?this.updateStateMemento():n instanceof gs?this.commitTransition(r):n instanceof pm?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof md?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ai&&n.code!==dr.SupersededByNewNavigation&&n.code!==dr.Redirect?this.restoreHistory(r):n instanceof hd?this.restoreHistory(r,!0):n instanceof ms&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,l=B(B({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",l)}else{let a=B(B({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tO(t,e){t.events.pipe(Rt(n=>n instanceof ms||n instanceof Ai||n instanceof hd||n instanceof gs),Ee(n=>n instanceof ms||n instanceof gs?0:(n instanceof Ai?n.code===dr.Redirect||n.code===dr.SupersededByNewNavigation:!1)?2:1),Rt(n=>n!==2),Pn(1)).subscribe(()=>{e()})}var Az={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},K_=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(zw);stateManager=M(eO);options=M(Sm,{optional:!0})||{};pendingTasks=M(bi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(Jk);urlSerializer=M(wm);location=M(hs);urlHandlingStrategy=M(q_);injector=M(Ft);_events=new Ae;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(Iz);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(xm,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(_m,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new vt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=Vn(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Ai&&r.code!==dr.Redirect&&r.code!==dr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ms)this.navigated=!0;else if(r instanceof mc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=B({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Tz(o.source)},s);this.scheduleNavigation(a,dd,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}T4(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),dd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=B({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(l=>{this.disposed||this.injector.get(Hr)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Vn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(W_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=B(B({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=o?o.snapshot:this.routerState.snapshot.root;f=Ak(p)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return Mk(f,n,u,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=pc(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,dd,null,r)}navigate(n,r={skipLocationChange:!1}){return kz(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=B({},Az):r===!1?o=B({},Mz):o=r,pc(n))return pk(this.currentUrlTree,n,o);let i=this.parseUrl(n);return pk(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,p)=>{a=f,l=p});let u=this.pendingTasks.add();return tO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kz(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new le(4008,!1)}var Oz=new re("");function Y_(t,...e){return ha([{provide:xm,multi:!0,useValue:t},[],{provide:La,useFactory:Rz,deps:[K_]},{provide:Yh,multi:!0,useFactory:Pz},e.map(n=>n.\u0275providers)])}function Rz(t){return t.routerState.root}function Pz(){let t=M(Je);return e=>{let n=t.get(Ir);if(e!==n.components[0])return;let r=t.get(K_),o=t.get(Fz);t.get(Lz)===1&&r.initialNavigation(),t.get(Vz,null,{optional:!0})?.setUpPreloading(),t.get(Oz,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var Fz=new re("",{factory:()=>new Ae}),Lz=new re("",{providedIn:"root",factory:()=>1});var Vz=new re("");var nO=[];var rO={providers:[Nb(),Qw(),Y_(nO)]};var dO=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Dn(Si),Dn(at))};static \u0275dir=Kt({type:t})}return t})(),t0=(()=>{class t extends dO{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275dir=Kt({type:t,features:[Jn]})}return t})(),ys=new re(""),jz={provide:ys,useExisting:cr(()=>n0),multi:!0},n0=(()=>{class t extends t0{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275dir=Kt({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Nt("change",function(s){return o.onChange(s.target.checked)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Gr([jz]),Jn]})}return t})(),Bz={provide:ys,useExisting:cr(()=>$a),multi:!0};function Hz(){let t=Wr()?Wr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Uz=new re(""),$a=(()=>{class t extends dO{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,this._compositionMode==null&&(this._compositionMode=!Hz())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Dn(Si),Dn(at),Dn(Uz,8))};static \u0275dir=Kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Nt("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[Gr([Bz]),Jn]})}return t})();var zz=new re(""),Gz=new re("");function fO(t){return t!=null}function pO(t){return Ma(t)?jt(t):t}function hO(t){let e={};return t.forEach(n=>{e=n!=null?B(B({},e),n):e}),Object.keys(e).length===0?null:e}function mO(t,e){return e.map(n=>n(t))}function Wz(t){return!t.validate}function gO(t){return t.map(e=>Wz(e)?e:n=>e.validate(n))}function qz(t){if(!t)return null;let e=t.filter(fO);return e.length==0?null:function(n){return hO(mO(n,e))}}function yO(t){return t!=null?qz(gO(t)):null}function Kz(t){if(!t)return null;let e=t.filter(fO);return e.length==0?null:function(n){let r=mO(n,e).map(pO);return Iv(r).pipe(Ee(hO))}}function vO(t){return t!=null?Kz(gO(t)):null}function oO(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Yz(t){return t._rawValidators}function Xz(t){return t._rawAsyncValidators}function X_(t){return t?Array.isArray(t)?t:[t]:[]}function Tm(t,e){return Array.isArray(t)?t.includes(e):t===e}function iO(t,e){let n=X_(e);return X_(t).forEach(o=>{Tm(n,o)||n.push(o)}),n}function sO(t,e){return X_(e).filter(n=>!Tm(t,n))}var Im=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Z_=class extends Im{name;get formDirective(){return null}get path(){return null}},Id=class extends Im{_parent=null;name=null;valueAccessor=null},Q_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Zz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mme=he(B({},Zz),{"[class.ng-submitted]":"isSubmitted"}),ja=(()=>{class t extends Q_{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Dn(Id,2))};static \u0275dir=Kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Ci("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[Jn]})}return t})();var Sd="VALID",Cm="INVALID",bc="PENDING",xd="DISABLED",Va=class{},Dm=class extends Va{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Cd=class extends Va{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Td=class extends Va{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},wc=class extends Va{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var J_=class extends Va{source;constructor(e){super(),this.source=e}};function Qz(t){return(Nm(t)?t.validators:t)||null}function Jz(t){return Array.isArray(t)?yO(t):t||null}function eG(t,e){return(Nm(e)?e.asyncValidators:t)||null}function tG(t){return Array.isArray(t)?vO(t):t||null}function Nm(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var e0=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vn(this.statusReactive)}set status(e){Vn(()=>this.statusReactive.set(e))}_status=Dr(()=>this.statusReactive());statusReactive=ae(void 0);get valid(){return this.status===Sd}get invalid(){return this.status===Cm}get pending(){return this.status==bc}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}errors;get pristine(){return Vn(this.pristineReactive)}set pristine(e){Vn(()=>this.pristineReactive.set(e))}_pristine=Dr(()=>this.pristineReactive());pristineReactive=ae(!0);get dirty(){return!this.pristine}get touched(){return Vn(this.touchedReactive)}set touched(e){Vn(()=>this.touchedReactive.set(e))}_touched=Dr(()=>this.touchedReactive());touchedReactive=ae(!1);get untouched(){return!this.touched}_events=new Ae;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sO(e,this._rawAsyncValidators))}hasValidator(e){return Tm(this._rawValidators,e)}hasAsyncValidator(e){return Tm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(B({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Td(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Td(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(B({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Cd(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Cd(!0,r))}markAsPending(e={}){this.status=bc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(B({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(o=>{o.disable(he(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dm(this.value,r)),this._events.next(new wc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sd,this._forEachChild(r=>{r.enable(he(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sd||this.status===bc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dm(this.value,n)),this._events.next(new wc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(B({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:Sd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=pO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new wc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?Cm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(Cm)?Cm:Sd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),o&&this._events.next(new Cd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Td(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Jz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=tG(this._rawAsyncValidators)}};var bO=new re("",{providedIn:"root",factory:()=>r0}),r0="always";function nG(t,e){return[...e.path,t]}function rG(t,e,n=r0){iG(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),sG(t,e),lG(t,e),aG(t,e),oG(t,e)}function aO(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function oG(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function iG(t,e){let n=Yz(t);e.validator!==null?t.setValidators(oO(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Xz(t);e.asyncValidator!==null?t.setAsyncValidators(oO(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let o=()=>t.updateValueAndValidity();aO(e._rawValidators,o),aO(e._rawAsyncValidators,o)}function sG(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&wO(t,e)})}function aG(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&wO(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function wO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function lG(t,e){let n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function cG(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function uG(t){return Object.getPrototypeOf(t.constructor)===t0}function dG(t,e){if(!e)return null;Array.isArray(e);let n,r,o;return e.forEach(i=>{i.constructor===$a?n=i:uG(i)?r=i:o=i}),o||r||n||null}function lO(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cO(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var fG=class extends e0{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Qz(n),eG(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new J_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pG={provide:Id,useExisting:cr(()=>vs)},uO=Promise.resolve(),vs=(()=>{class t extends Id{_changeDetectorRef;callSetDisabledState;control=new fG;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new nt;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=dG(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),cG(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rG(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){uO.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,o=r!==0&&ic(r);uO.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?nG(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Dn(Z_,9),Dn(zz,10),Dn(Gz,10),Dn(ys,10),Dn(Ra,8),Dn(bO,8))};static \u0275dir=Kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Gr([pG]),Jn,ds]})}return t})();var hG={provide:ys,useExisting:cr(()=>o0),multi:!0},o0=(()=>{class t extends t0{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275dir=Kt({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&Nt("change",function(s){return o.onChange(s.target.value)})("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},standalone:!1,features:[Gr([hG]),Jn]})}return t})();var mG=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=go({type:t});static \u0275inj=Lr({})}return t})();var Oi=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:bO,useValue:n.callSetDisabledState??r0}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=go({type:t});static \u0275inj=Lr({imports:[mG]})}return t})();var Am=io(document,"pointermove").pipe(Er()),Mm=io(document,"pointerup").pipe(Er());function Dd(t,e=new Ot(!1)){let n=io(t,"pointerdown").pipe(Rt(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Pt(a=>{!(a.target instanceof HTMLInputElement)&&e.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),Ee(a=>{let l=t.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:t}}),Er()),r=n.pipe(Xe(a=>Am.pipe(Ee(l=>he(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),Pn(1)).pipe(Bt(Mm))),Er()),o=r.pipe(Xe(a=>Am.pipe(Ee(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),Bt(Mm))),Er()),i=r.pipe(Xe(a=>Am.pipe(ao(a),Ee(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),Bt(Mm),es()))),s=n.pipe(Xe(a=>Mm.pipe(Bt(Am))));return{dragStart$:e.pipe(Xe(a=>a?so:r)),dragMove$:e.pipe(Xe(a=>a?so:o)),dragEnd$:e.pipe(Xe(a=>a?so:i)),click$:e.pipe(Xe(a=>a?so:s))}}var Af={};Ge(Af,{Abs:()=>h0,Acos:()=>m0,Acosh:()=>g0,AdadeltaOptimizer:()=>Os,AdagradOptimizer:()=>Rs,AdamOptimizer:()=>Ps,AdamaxOptimizer:()=>Fs,Add:()=>Fm,AddN:()=>y0,All:()=>IO,Any:()=>DO,ArgMax:()=>v0,ArgMin:()=>b0,Asin:()=>w0,Asinh:()=>_0,Atan:()=>E0,Atan2:()=>x0,Atanh:()=>S0,AvgPool:()=>C0,AvgPool3D:()=>T0,AvgPool3DGrad:()=>VG,AvgPoolGrad:()=>LG,BatchMatMul:()=>I0,BatchToSpaceND:()=>D0,Bincount:()=>N0,BitwiseAnd:()=>A0,BroadcastArgs:()=>M0,BroadcastTo:()=>$G,Cast:()=>Md,Ceil:()=>k0,ClipByValue:()=>O0,Complex:()=>R0,ComplexAbs:()=>P0,Concat:()=>F0,Conv2D:()=>L0,Conv2DBackpropFilter:()=>V0,Conv2DBackpropInput:()=>$0,Conv3D:()=>j0,Conv3DBackpropFilterV2:()=>jG,Conv3DBackpropInputV2:()=>B0,Cos:()=>NO,Cosh:()=>H0,CropAndResize:()=>G0,Cumprod:()=>U0,Cumsum:()=>z0,DataStorage:()=>km,DenseBincount:()=>W0,DepthToSpace:()=>q0,DepthwiseConv2dNative:()=>K0,DepthwiseConv2dNativeBackpropFilter:()=>Y0,DepthwiseConv2dNativeBackpropInput:()=>X0,Diag:()=>Z0,Dilation2D:()=>Q0,Dilation2DBackpropFilter:()=>HG,Dilation2DBackpropInput:()=>BG,Draw:()=>Lm,ENV:()=>Pm,Einsum:()=>eE,Elu:()=>AO,EluGrad:()=>UG,Environment:()=>Tc,Equal:()=>tE,Erf:()=>MO,Exp:()=>kO,ExpandDims:()=>nE,Expm1:()=>rE,FFT:()=>OO,Fill:()=>oE,FlipLeftRight:()=>iE,Floor:()=>sE,FloorDiv:()=>aE,FromPixels:()=>Vm,FusedBatchNorm:()=>lE,FusedConv2D:()=>jm,FusedDepthwiseConv2D:()=>Bm,GatherNd:()=>uE,GatherV2:()=>cE,Greater:()=>dE,GreaterEqual:()=>fE,IFFT:()=>pE,Identity:()=>kd,Imag:()=>hE,IsFinite:()=>mE,IsInf:()=>gE,IsNan:()=>yE,KernelBackend:()=>_c,LRN:()=>PO,LRNGrad:()=>qG,LeakyRelu:()=>vE,Less:()=>bE,LessEqual:()=>wE,LinSpace:()=>_E,Log:()=>RO,Log1p:()=>EE,LogSoftmax:()=>GG,LogicalAnd:()=>SE,LogicalNot:()=>xE,LogicalOr:()=>CE,LogicalXor:()=>zG,LowerBound:()=>WG,MatrixBandPart:()=>KG,Max:()=>FO,MaxPool:()=>IE,MaxPool3D:()=>DE,MaxPool3DGrad:()=>XG,MaxPoolGrad:()=>YG,MaxPoolWithArgmax:()=>NE,Maximum:()=>TE,Mean:()=>AE,Min:()=>LO,Minimum:()=>ME,MirrorPad:()=>kE,Mod:()=>VO,MomentumOptimizer:()=>Ls,Multinomial:()=>OE,Multiply:()=>RE,Neg:()=>$O,NonMaxSuppressionV3:()=>FE,NonMaxSuppressionV4:()=>LE,NonMaxSuppressionV5:()=>VE,NotEqual:()=>PE,OP_SCOPE_SUFFIX:()=>Qm,OneHot:()=>jE,OnesLike:()=>$E,Optimizer:()=>On,OptimizerConstructors:()=>Gc,Pack:()=>BE,PadV2:()=>HE,Pool:()=>ZG,Pow:()=>jO,Prelu:()=>UE,Prod:()=>zE,RMSPropOptimizer:()=>Vs,RaggedGather:()=>GE,RaggedRange:()=>WE,RaggedTensorToTensor:()=>qE,Range:()=>KE,Rank:()=>qS,Real:()=>YE,RealDiv:()=>J0,Reciprocal:()=>XE,Reduction:()=>Tt,Relu:()=>ZE,Relu6:()=>tS,Reshape:()=>QE,ResizeBilinear:()=>eS,ResizeBilinearGrad:()=>JG,ResizeNearestNeighbor:()=>JE,ResizeNearestNeighborGrad:()=>QG,Reverse:()=>nS,RotateWithOffset:()=>VS,Round:()=>rS,Rsqrt:()=>oS,SGDOptimizer:()=>li,ScatterNd:()=>iS,SearchSorted:()=>aS,Select:()=>lS,Selu:()=>cS,Sigmoid:()=>pS,Sign:()=>fS,Sin:()=>BO,Sinh:()=>dS,Slice:()=>uS,Softmax:()=>vS,Softplus:()=>hS,SpaceToBatchND:()=>gS,SparseFillEmptyRows:()=>bS,SparseReshape:()=>wS,SparseSegmentMean:()=>_S,SparseSegmentSum:()=>ES,SparseToDense:()=>SS,SplitV:()=>yS,Sqrt:()=>mS,Square:()=>eW,SquaredDifference:()=>xS,StaticRegexReplace:()=>CS,Step:()=>LS,StridedSlice:()=>TS,StringNGrams:()=>IS,StringSplit:()=>DS,StringToHashBucketFast:()=>NS,Sub:()=>UO,Sum:()=>HO,Tan:()=>zO,Tanh:()=>AS,Tensor:()=>Ie,TensorBuffer:()=>Pi,TensorScatterUpdate:()=>sS,Tile:()=>Od,TopK:()=>MS,Transform:()=>kS,Transpose:()=>Rd,Unique:()=>OS,Unpack:()=>RS,UnsortedSegmentSum:()=>PS,UpperBound:()=>tW,Variable:()=>Jo,ZerosLike:()=>FS,_FusedMatMul:()=>$m,abs:()=>nn,acos:()=>cx,acosh:()=>ux,add:()=>J,addN:()=>dx,all:()=>fx,any:()=>px,argMax:()=>qd,argMin:()=>hx,asin:()=>mx,asinh:()=>gx,atan:()=>yx,atan2:()=>vx,atanh:()=>bx,avgPool:()=>Xd,avgPool3d:()=>Sx,backend:()=>Ud,backend_util:()=>OT,basicLSTMCell:()=>xx,batchNorm:()=>$i,batchNorm2d:()=>Cx,batchNorm3d:()=>Tx,batchNorm4d:()=>Ix,batchToSpaceND:()=>Zd,bincount:()=>Qd,bitwiseAnd:()=>Dx,booleanMaskAsync:()=>T2,broadcastArgs:()=>Nx,broadcastTo:()=>rl,broadcast_util:()=>il,browser:()=>Mo,buffer:()=>Sn,cast:()=>pe,ceil:()=>Ax,clipByValue:()=>Mx,clone:()=>nr,complex:()=>Bn,concat:()=>lt,concat1d:()=>kx,concat2d:()=>Ox,concat3d:()=>Rx,concat4d:()=>Px,conv1d:()=>Fx,conv2d:()=>ji,conv2dTranspose:()=>Lx,conv3d:()=>Vx,conv3dTranspose:()=>$x,copyRegisteredKernels:()=>sW,cos:()=>jx,cosh:()=>Bx,cosineWindow:()=>Uc,cumprod:()=>Hx,cumsum:()=>Ux,customGrad:()=>Mn,denseBincount:()=>zx,deprecationWarn:()=>SR,depthToSpace:()=>Gx,depthwiseConv2d:()=>ol,device_util:()=>Zm,diag:()=>Wx,dilation2d:()=>qx,disableDeprecationWarnings:()=>kW,dispose:()=>Ct,disposeVariables:()=>OW,div:()=>De,divNoNan:()=>Kx,dot:()=>Yx,dropout:()=>O2,einsum:()=>Bi,elu:()=>Jd,enableDebugMode:()=>MW,enableProdMode:()=>AW,enclosingPowerOfTwo:()=>gg,engine:()=>Jm,ensureShape:()=>Xx,env:()=>ne,equal:()=>Cs,erf:()=>Zx,euclideanNorm:()=>Jx,exp:()=>Mr,expandDims:()=>pn,expm1:()=>eC,eye:()=>ef,fft:()=>ul,fill:()=>To,findBackend:()=>jW,findBackendFactory:()=>BW,floor:()=>tf,floorDiv:()=>Wd,fused:()=>yg,gather:()=>nf,gatherND:()=>M2,gather_util:()=>NT,getBackend:()=>Hd,getGradient:()=>Hm,getKernel:()=>za,getKernelsForBackend:()=>Fd,grad:()=>n2,grads:()=>r2,greater:()=>oi,greaterEqual:()=>rf,ifft:()=>Ms,imag:()=>zi,image:()=>ks,inTopKAsync:()=>R2,io:()=>zc,irfft:()=>_f,isFinite:()=>tC,isInf:()=>nC,isNaN:()=>rC,keep:()=>Un,kernel_impls:()=>RT,leakyRelu:()=>of,less:()=>jc,lessEqual:()=>sl,linalg:()=>DP,linspace:()=>oC,localResponseNormalization:()=>iC,log:()=>ii,log1p:()=>sf,logSigmoid:()=>sC,logSoftmax:()=>aC,logSumExp:()=>lf,logicalAnd:()=>Is,logicalNot:()=>cf,logicalOr:()=>uf,logicalXor:()=>lC,losses:()=>NP,lowerBound:()=>cC,matMul:()=>Me,math:()=>DT,max:()=>Io,maxPool:()=>df,maxPool3d:()=>uC,maxPoolWithArgmax:()=>dC,maximum:()=>ff,mean:()=>Ds,memory:()=>RW,meshgrid:()=>fC,min:()=>$c,minimum:()=>Ns,mirrorPad:()=>pf,mod:()=>pC,moments:()=>hC,movingAverage:()=>I2,mul:()=>$,multiRNNCell:()=>mC,multinomial:()=>gC,neg:()=>hn,nextFrame:()=>oF,norm:()=>Ts,notEqual:()=>hf,oneHot:()=>As,ones:()=>No,onesLike:()=>yC,op:()=>b,outerProduct:()=>vC,pad:()=>kr,pad1d:()=>bC,pad2d:()=>wC,pad3d:()=>mf,pad4d:()=>_C,pool:()=>EC,pow:()=>ri,prelu:()=>yf,print:()=>Gd,prod:()=>SC,profile:()=>PW,raggedGather:()=>xC,raggedRange:()=>CC,raggedTensorToTensor:()=>TC,rand:()=>IC,randomGamma:()=>VC,randomNormal:()=>vf,randomStandardNormal:()=>$C,randomUniform:()=>cl,randomUniformInt:()=>jC,range:()=>Zr,ready:()=>VW,real:()=>si,reciprocal:()=>BC,registerBackend:()=>HW,registerGradient:()=>rW,registerKernel:()=>WO,relu:()=>Gi,relu6:()=>bf,removeBackend:()=>$W,reshape:()=>R,reverse:()=>gr,reverse1d:()=>HC,reverse2d:()=>UC,reverse3d:()=>zC,reverse4d:()=>GC,rfft:()=>dl,round:()=>wf,rsqrt:()=>WC,scalar:()=>ie,scatterND:()=>D2,scatter_util:()=>Cf,searchSorted:()=>Bc,selu:()=>qC,separableConv2d:()=>KC,serialization:()=>wT,setBackend:()=>LW,setPlatform:()=>UW,setdiff1dAsync:()=>YC,sigmoid:()=>rr,sign:()=>XC,signal:()=>IP,sin:()=>ZC,sinh:()=>QC,slice:()=>Ne,slice1d:()=>JC,slice2d:()=>eT,slice3d:()=>tT,slice4d:()=>nT,slice_util:()=>Nf,softmax:()=>rT,softplus:()=>af,spaceToBatchND:()=>gf,sparse:()=>AP,sparseToDense:()=>A2,spectral:()=>TP,split:()=>ai,sqrt:()=>zn,square:()=>rn,squaredDifference:()=>Ef,squeeze:()=>Gn,stack:()=>kn,step:()=>Sf,stridedSlice:()=>oT,string:()=>MP,sub:()=>se,sum:()=>Ke,sumOutType:()=>bR,tan:()=>iT,tanh:()=>Vc,tensor:()=>fn,tensor1d:()=>on,tensor2d:()=>Ao,tensor3d:()=>xf,tensor4d:()=>sT,tensor5d:()=>aT,tensor6d:()=>lT,tensorScatterUpdate:()=>uT,tensor_util:()=>YS,test_util:()=>LC,tidy:()=>oe,tile:()=>Ui,time:()=>FW,topk:()=>dT,train:()=>j9,transpose:()=>fl,truncatedNormal:()=>fT,unique:()=>pT,unregisterGradient:()=>iW,unregisterKernel:()=>oW,unsortedSegmentSum:()=>hT,unstack:()=>yr,upcastType:()=>Xa,upperBound:()=>mT,util:()=>j,valueAndGrad:()=>o2,valueAndGrads:()=>i2,variable:()=>gT,variableGrads:()=>lg,version_core:()=>rF,where:()=>mr,whereAsync:()=>Tf,zeros:()=>Do,zerosLike:()=>zt});var km=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},_c=class{refCount(e){return fr("refCount")}incRef(e){return fr("incRef")}timerAvailable(){return!0}time(e){return fr("time")}read(e){return fr("read")}readSync(e){return fr("readSync")}readToGPU(e,n){return fr("readToGPU")}numDataIds(){return fr("numDataIds")}disposeData(e,n){return fr("disposeData")}write(e,n,r){return fr("write")}move(e,n,r,o,i){return fr("move")}createTensorFromGPUData(e,n,r){return fr("createTensorFromGPUData")}memory(){return fr("memory")}floatPrecision(){return fr("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return fr("dispose")}};function fr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function _O(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Om(t,e,n)}function gG(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Om(t,n,r),Om(e,n,r)}function Ec(t,e,n){return Math.max(t,Math.min(e,n))}function yG(t){return t%2===0?t:t+1}function Om(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function vG(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function bG(t,e){let n=Math.random();return e*n+(1-n)*t}function wG(t,e){let n=0;for(let r=0;r<t.length;r++){let o=Number(t[r])-Number(e[r]);n+=o*o}return n}function S(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ft(t,e,n=""){S($n(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Ar(t){S(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ce(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function _G(t){return t.length===0}function s0(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function $n(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ri(t){return t%1===0}function EG(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let e=Math.exp(2*t);return(e-1)/(e+1)}}function SG(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function xG(t){let e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return _O(e),e}function Ha(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function CG(t,e=o=>0,n,r){return new Promise((o,i)=>{let s=0,a=()=>{if(t()){o();return}s++;let l=e(s);if(n!=null&&s>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function TG(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);let o=t.slice();return o[r]=e/n,o}function bs(t,e){let n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),S(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),S(t.every(r=>Ri(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function a0(t,e){let n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||o?null:bs(e,t).sort(),s=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[s]==null||i[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function l0(t,e){return Rm(t,e)}function Rm(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function c0(t,e){for(let n=0;n<t.length;n++){let r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function u0(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function IG(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Sc(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function d0(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function _o(t){return typeof t=="string"||t instanceof String}function EO(t){return typeof t=="boolean"}function SO(t){return typeof t=="number"}function ws(t){return Array.isArray(t)?ws(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":SO(t)?"float32":_o(t)?"string":EO(t)?"bool":"float32"}function Xo(t){return!!(t&&t.constructor&&t.call&&t.apply)}function xc(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Zo(t){let e=t.length;if(e<2)return[];let n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function xO(t,e,n,r=!1){let o=new Array;if(e.length===1){let i=e[0]*(r?2:1);for(let s=0;s<i;s++)o[s]=n[t+s]}else{let i=e[0],s=e.slice(1),a=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)o[l]=xO(t+l*a,s,n,r)}return o}function Ba(t,e,n=!1){if(t.length===0)return e[0];let r=t.reduce((o,i)=>o*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return xO(0,t,e,n)}function DG(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function Nd(t,e){let n=Cc(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Cc(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function NG(t,e){let n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return Ba(t,new Float32Array(n));if(e==="int32")return Ba(t,new Int32Array(n));if(e==="bool")return Ba(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function mt(t){t.forEach(e=>{S(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function AG(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function MG(t,e,n){if(e===0)return[];if(e===1)return[t];let r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function Ua(t){return t&&t.then&&typeof t.then=="function"}var CO="tfjsflags",Tc=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=OG,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ne().getBool("IS_TEST")||ne().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){let o=this.urlFlags[e];ne().getBool("IS_TEST")||ne().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];let n=this.evaluateFlag(e);if(Ua(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);CO in e&&e[CO].split(",").forEach(r=>{let[o,i]=r.split(":");this.urlFlags[o]=PG(o,i)})}};function OG(t){let e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(RG(e,r[0],r[1]),r.join("="))),e}function RG(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function PG(t,e){let n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ne(){return Pm}var Pm=null;function TO(t){Pm=t}var f0;function p0(){if(f0==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");f0=t}return f0}function FG(){let t=p0();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function Ad(t,e){let n=FG();if(n.has(t))return n.get(t);{let r=e();return n.set(t,r),n.get(t)}}var h0="Abs",m0="Acos",g0="Acosh",Fm="Add",y0="AddN",IO="All",DO="Any",v0="ArgMax",b0="ArgMin",w0="Asin",_0="Asinh",E0="Atan",S0="Atanh",x0="Atan2",C0="AvgPool",LG="AvgPoolGrad",T0="AvgPool3D",VG="AvgPool3DGrad",I0="BatchMatMul",D0="BatchToSpaceND",N0="Bincount",A0="BitwiseAnd",$G="BroadcastTo",M0="BroadcastArgs",Md="Cast",k0="Ceil",O0="ClipByValue",R0="Complex",P0="ComplexAbs",F0="Concat",L0="Conv2D",V0="Conv2DBackpropFilter",$0="Conv2DBackpropInput",j0="Conv3D",jG="Conv3DBackpropFilterV2",B0="Conv3DBackpropInputV2",NO="Cos",H0="Cosh",U0="Cumprod",z0="Cumsum",G0="CropAndResize",W0="DenseBincount",q0="DepthToSpace",K0="DepthwiseConv2dNative",Y0="DepthwiseConv2dNativeBackpropFilter",X0="DepthwiseConv2dNativeBackpropInput",Z0="Diag",Q0="Dilation2D",BG="Dilation2DBackpropInput",HG="Dilation2DBackpropFilter",Lm="Draw",J0="RealDiv",eE="Einsum",AO="Elu",UG="EluGrad",MO="Erf",tE="Equal",kO="Exp",nE="ExpandDims",rE="Expm1",OO="FFT",oE="Fill",iE="FlipLeftRight",sE="Floor",aE="FloorDiv",lE="FusedBatchNorm",cE="GatherV2",uE="GatherNd",dE="Greater",fE="GreaterEqual",kd="Identity",pE="IFFT",hE="Imag",mE="IsFinite",gE="IsInf",yE="IsNan",vE="LeakyRelu",bE="Less",wE="LessEqual",_E="LinSpace",RO="Log",EE="Log1p",SE="LogicalAnd",xE="LogicalNot",CE="LogicalOr",zG="LogicalXor",GG="LogSoftmax",WG="LowerBound",PO="LRN",qG="LRNGrad",KG="MatrixBandPart",FO="Max",TE="Maximum",IE="MaxPool",YG="MaxPoolGrad",DE="MaxPool3D",XG="MaxPool3DGrad",NE="MaxPoolWithArgmax",AE="Mean",LO="Min",ME="Minimum",kE="MirrorPad",VO="Mod",OE="Multinomial",RE="Multiply",$O="Neg",PE="NotEqual",FE="NonMaxSuppressionV3",LE="NonMaxSuppressionV4",VE="NonMaxSuppressionV5",$E="OnesLike",jE="OneHot",BE="Pack",HE="PadV2",ZG="Pool",jO="Pow",UE="Prelu",zE="Prod",GE="RaggedGather",WE="RaggedRange",qE="RaggedTensorToTensor",KE="Range",YE="Real",XE="Reciprocal",ZE="Relu",QE="Reshape",JE="ResizeNearestNeighbor",QG="ResizeNearestNeighborGrad",eS="ResizeBilinear",JG="ResizeBilinearGrad",tS="Relu6",nS="Reverse",rS="Round",oS="Rsqrt",iS="ScatterNd",sS="TensorScatterUpdate",aS="SearchSorted",lS="Select",cS="Selu",uS="Slice",BO="Sin",dS="Sinh",fS="Sign",pS="Sigmoid",hS="Softplus",mS="Sqrt",HO="Sum",gS="SpaceToBatchND",yS="SplitV",vS="Softmax",bS="SparseFillEmptyRows",wS="SparseReshape",_S="SparseSegmentMean",ES="SparseSegmentSum",SS="SparseToDense",xS="SquaredDifference",eW="Square",CS="StaticRegexReplace",TS="StridedSlice",IS="StringNGrams",DS="StringSplit",NS="StringToHashBucketFast",UO="Sub",zO="Tan",AS="Tanh",Od="Tile",MS="TopK",kS="Transform",Rd="Transpose",OS="Unique",RS="Unpack",PS="UnsortedSegmentSum",tW="UpperBound",FS="ZerosLike",LS="Step",Vm="FromPixels",VS="RotateWithOffset",$m="_FusedMatMul",jm="FusedConv2D",Bm="FusedDepthwiseConv2D";function Qo(...t){ne().getBool("IS_TEST")||ne().getBool("PROD")||console.warn(...t)}function nW(...t){ne().getBool("IS_TEST")||ne().getBool("PROD")||console.log(...t)}var Ic=Ad("kernelRegistry",()=>new Map),Pd=Ad("gradRegistry",()=>new Map);function za(t,e){let n=$S(t,e);return Ic.get(n)}function Hm(t){return Pd.get(t)}function Fd(t){let e=Ic.entries(),n=[];for(;;){let{done:r,value:o}=e.next();if(r)break;let[i,s]=o,[a]=i.split("_");a===t&&n.push(s)}return n}function WO(t){let{kernelName:e,backendName:n}=t,r=$S(e,n);Ic.has(r)&&Qo(`The kernel '${e}' for backend '${n}' is already registered`),Ic.set(r,t)}function rW(t){let{kernelName:e}=t;Pd.has(e)&&ne().getBool("DEBUG")&&Qo(`Overriding the gradient for '${e}'`),Pd.set(e,t)}function oW(t,e){let n=$S(t,e);if(!Ic.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Ic.delete(n)}function iW(t){if(!Pd.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);Pd.delete(t)}function sW(t,e){Fd(t).forEach(r=>{let o=Object.assign({},r,{backendName:e});WO(o)})}function $S(t,e){return`${e}_${t}`}var j={};Ge(j,{arraysEqual:()=>$n,arraysEqualWithNull:()=>s0,assert:()=>S,assertNonNegativeIntegerDimensions:()=>mt,assertNonNull:()=>Ar,assertShapesMatch:()=>ft,bytesFromStringArray:()=>d0,bytesPerElement:()=>Sc,checkConversionForErrors:()=>c0,clamp:()=>Ec,computeStrides:()=>Zo,convertBackendValuesAndArrayBuffer:()=>DG,createScalarValue:()=>pW,createShuffledIndices:()=>xG,decodeString:()=>Mc,distSquared:()=>wG,encodeString:()=>Es,fetch:()=>mW,fingerPrint64:()=>fW,flatten:()=>So,getArrayFromDType:()=>Rm,getTypedArrayFromDType:()=>l0,hasEncodingLoss:()=>IG,hexToLong:()=>Ld,indexToLoc:()=>MG,inferDtype:()=>ws,inferFromImplicitShape:()=>TG,isBoolean:()=>EO,isFunction:()=>Xo,isInt:()=>Ri,isNumber:()=>SO,isPromise:()=>Ua,isScalarShape:()=>_G,isString:()=>_o,isTypedArray:()=>kt,isValidDtype:()=>u0,locToIndex:()=>AG,makeOnesTypedArray:()=>Nd,makeZerosNestedTypedArray:()=>NG,makeZerosTypedArray:()=>Cc,nearestDivisor:()=>xc,nearestLargerEven:()=>yG,now:()=>Ya,parseAxisParam:()=>bs,randUniform:()=>bG,repeatedTry:()=>CG,rightPad:()=>Ha,shuffle:()=>_O,shuffleCombo:()=>gG,sizeFromShape:()=>Ce,sizeToSquarishShape:()=>SG,squeezeShape:()=>a0,sum:()=>vG,swap:()=>Om,tanh:()=>EG,toNestedArray:()=>Ba,toTypedArray:()=>Ac});function Um(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var US=sv(rR());var Ka=US.default||US;function Ld(t){return Ka.fromString(t,!0,16)}var iR=Ld("c3a5c85c97cb3127"),qa=Ld("b492b66fbe98f273"),jn=Ld("9ae16a3b2f90404f");function HS(t){return t.xor(t.shru(47))}function sR(t,e,n){let r=t.slice(e,e+n);return Ka.fromBytes(Array.from(r),!0,!0)}function gt(t,e){return sR(t,e,8)}function oR(t,e){return sR(t,e,4)}function dn(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function _s(t,e,n=Ld("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function lW(t,e,n,r,o,i){o=o.add(t),i=dn(i.add(o).add(r),21);let s=o;return o=o.add(e),o=o.add(n),i=i.add(dn(o,44)),[o.add(r),i.add(s)]}function Gm(t,e,n,r){return lW(gt(t,e),gt(t,e+8),gt(t,e+16),gt(t,e+24),n,r)}function cW(t,e=t.length){if(e>=8){let n=jn.add(e*2),r=gt(t,0).add(jn),o=gt(t,e-8),i=dn(o,37).mul(n).add(r),s=dn(r,25).add(o).mul(n);return _s(i,s,n)}if(e>=4){let n=jn.add(e*2),r=oR(t,0);return _s(r.shl(3).add(e),oR(t,e-4),n)}if(e>0){let n=t[0],r=t[e>>1],o=t[e-1],i=n+(r<<8),s=e+(o<<2);return HS(jn.mul(i).xor(iR.mul(s))).mul(jn)}return jn}function uW(t,e=t.length){let n=jn.add(e*2),r=gt(t,0).mul(qa),o=gt(t,8),i=gt(t,e-8).mul(n),s=gt(t,e-16).mul(jn);return _s(dn(r.add(o),43).add(dn(i,30)).add(s),r.add(dn(o.add(jn),18)).add(i),n)}function dW(t,e=t.length){let n=jn.add(e*2),r=gt(t,0).mul(jn),o=gt(t,8),i=gt(t,e-8).mul(n),s=gt(t,e-16).mul(jn),a=dn(r.add(o),43).add(dn(i,30)).add(s),l=_s(a,r.add(dn(o.add(jn),18)).add(i),n),c=gt(t,16).mul(n),u=gt(t,24),f=a.add(gt(t,e-32)).mul(n),p=l.add(gt(t,e-24)).mul(n);return _s(dn(c.add(u),43).add(dn(f,30)).add(p),c.add(dn(u.add(r),18)).add(f),n)}function fW(t,e=t.length){let n=Ka.fromNumber(81,!0);if(e<=32)return e<=16?cW(t,e):uW(t,e);if(e<=64)return dW(t,e);let r=n,o=n.mul(qa).add(113),i=HS(o.mul(jn).add(113)).mul(jn),s=[Ka.UZERO,Ka.UZERO],a=[Ka.UZERO,Ka.UZERO];r=r.mul(jn).add(gt(t,0));let l=0,c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=dn(r.add(o).add(s[0]).add(gt(t,l+8)),37).mul(qa),o=dn(o.add(s[1]).add(gt(t,l+48)),42).mul(qa),r=r.xor(a[1]),o=o.add(s[0]).add(gt(t,l+40)),i=dn(i.add(a[0]),33).mul(qa),s=Gm(t,l,s[1].mul(qa),r.add(a[0])),a=Gm(t,l+32,i.add(a[1]),o.add(gt(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);let f=qa.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),r=dn(r.add(o).add(s[0]).add(gt(t,l+8)),37).mul(f),o=dn(o.add(s[1]).add(gt(t,l+48)),42).mul(f),r=r.xor(a[1].mul(9)),o=o.add(s[0].mul(9).add(gt(t,l+40))),i=dn(i.add(a[0]),33).mul(f),s=Gm(t,l,s[1].mul(f),r.add(a[0])),a=Gm(t,l+32,i.add(a[1]),o.add(gt(t,l+16))),[i,r]=[r,i],_s(_s(s[0],a[0],f).add(HS(o).mul(iR)).add(i),_s(s[1],a[1],f).add(r),f)}function pW(t,e){return e==="string"?Es(t):Ac([t],e)}function hW(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Ac(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=So(t)),ne().getBool("DEBUG")&&c0(t,e),hW(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){let n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Ya(){return ne().platform.now()}function mW(t,e){return ne().platform.fetch(t,e)}function Es(t,e="utf-8"){return e=e||"utf-8",ne().platform.encode(t,e)}function Mc(t,e="utf-8"){return e=e||"utf-8",ne().platform.decode(t,e)}function kt(t){return ne().platform.isTypedArray!=null?ne().platform.isTypedArray(t):Um(t)}function So(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Ua(t)||t==null||kt(t)&&n)e.push(t);else if(Array.isArray(t)||kt(t))for(let r=0;r<t.length;++r)So(t[r],e,n);else{let r=-1;for(let o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)So(t[o],e,n)}return e}var Wm=class{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new zS)}profileKernel(e,n,r){let o,i=()=>{o=r()},s,a=Ya();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(i);else{i();for(let c of o)c.dataSync();s=Promise.resolve({kernelMs:Ya()-a})}if(ne().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){let u=o[c];u.data().then(f=>{gW(f,u.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:n,outputs:r,timeMs:o,inputs:i,extraInfo:s}=e;r.forEach(a=>{Promise.all([a.data(),o,s]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}};function gW(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){let o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}var zS=class{logKernelProfile(e,n,r,o,i,s){let a=typeof o=="number"?Ha(`${o}ms`,9):o.error,l=Ha(e,25),c=n.rank,u=n.size,f=Ha(n.shape.toString(),14),p="";for(let m in i){let w=i[m];if(w!=null){let x=w.shape||n.shape,C=x.length;p+=`${m}: ${C}D ${C>0?x:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${f}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function aR(t,e,n){let r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let f in u){let p=u[f],m=!1;for(let w=0;w<e.length;w++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),m=!0,o[c.id]=!0;break}if(m)break}}let i={};i[n.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let f=0;f<c.outputs.length;f++)if(i[c.outputs[f].id]){for(let p in u)i[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(o[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let m=c.inputs[p];r[m.id]&&(u[p]=m)}let f=Object.assign({},c);f.inputs=u,f.outputs=c.outputs,a.push(f)}}return a}function lR(t,e,n,r){for(let o=e.length-1;o>=0;o--){let i=e[o],s=[];if(i.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let a=i.gradient(s);for(let l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=i.inputs[l];if(!$n(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let f=t[u.id];t[u.id]=r(f,c),f.dispose()}}}}var cR=20,Vd=3,GS=7;function uR(t,e,n,r){let o=Zo(e),i=yW(t,e,n,o),s=e.length,a=qm(t,e,n,o,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function yW(t,e,n,r){let o=Ce(e),i=r[r.length-1],s=new Array(i).fill(0),a=e.length,l=n==="complex64"?jd(t):t;if(a>1)for(let c=0;c<o/i;c++){let u=c*i;for(let f=0;f<i;f++)s[f]=Math.max(s[f],$d(l[u+f],0,n).length)}return s}function $d(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(GS))} + ${parseFloat(t[1].toFixed(GS))}j`:_o(t)?r=`'${t}'`:n==="bool"?r=dR(t):r=parseFloat(t.toFixed(GS)).toString(),Ha(r,e)}function dR(t){return t===0?"false":"true"}function qm(t,e,n,r,o,i=!0){let s=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){let x=jd(t);return[$d(x[0],0,n)]}return n==="bool"?[dR(t[0])]:[t[0].toString()]}if(l===1){if(a>cR){let C=Vd*s,I=Array.from(t.slice(0,C)),P=Array.from(t.slice((a-Vd)*s,a*s));return n==="complex64"&&(I=jd(I),P=jd(P)),["["+I.map((A,k)=>$d(A,o[k],n)).join(", ")+", ..., "+P.map((A,k)=>$d(A,o[a-Vd+k],n)).join(", ")+"]"]}return["["+(n==="complex64"?jd(t):Array.from(t)).map((C,I)=>$d(C,o[I],n)).join(", ")+"]"]}let c=e.slice(1),u=r.slice(1),f=r[0]*s,p=[];if(a>cR){for(let x=0;x<Vd;x++){let C=x*f,I=C+f;p.push(...qm(t.slice(C,I),c,n,u,o,!1))}p.push("...");for(let x=a-Vd;x<a;x++){let C=x*f,I=C+f;p.push(...qm(t.slice(C,I),c,n,u,o,x===a-1))}}else for(let x=0;x<a;x++){let C=x*f,I=C+f;p.push(...qm(t.slice(C,I),c,n,u,o,x===a-1))}let m=l===2?",":"";p[0]="["+(a>0?p[0]+m:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+m;let w=`,
`;for(let x=2;x<l;x++)w+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":w),p}function jd(t){let e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Pi=class{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Ce(e),r!=null){let o=r.length;S(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Rm(n,this.size),this.strides=Zo(e)}set(e,...n){n.length===0&&(n=[0]),S(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(let o of e){if(o<0||o>=this.shape[n]){let i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];let n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return xo().makeTensor(this.values,this.shape,this.dtype)}},xo=null,kc=null,vW=null;function fR(t){xo=t}function pR(t){kc=t}function hR(t){vW=t}var Ie=class{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ce(e),this.strides=Zo(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return kc.buffer(this.shape,this.dtype,e)}bufferSync(){return kc.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Ba(this.shape,e,this.dtype==="complex64")}arraySync(){return Ba(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();let e=xo().read(this.dataId);if(this.dtype==="string"){let n=await e;try{return n.map(r=>Mc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),xo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=xo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Mc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await xo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),xo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return kc.print(this,e)}clone(){return this.throwIfDisposed(),kc.clone(this)}toString(e=!1){let n=this.dataSync();return uR(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),kc.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),xo().makeVariable(this,e,n,r)}};Object.defineProperty(Ie,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function WS(){return Ad("Tensor",()=>Ie)}WS();var Jo=class extends Ie{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!$n(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);xo().disposeTensor(this),this.dataId=e.dataId,xo().incRef(this,null)}dispose(){xo().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Jo,Symbol.hasInstance,{value:t=>t instanceof Ie&&t.assign!=null&&t.assign instanceof Function});var YS={};Ge(YS,{assertTypesMatch:()=>KS,getTensorsInContainer:()=>Bd,isTensorInList:()=>wW,makeTypesMatch:()=>xe});var qS=(function(t){return t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6",t})(qS||{}),mR=(function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t})(mR||{}),gR=(function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t})(gR||{}),yR=(function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t})(yR||{}),vR=(function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t})(vR||{}),bW={float32:yR,int32:mR,bool:gR,complex64:vR};function Xa(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return bW[t][e]}function bR(t){return Xa(t,"int32")}function Km(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function Ym(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function xe(t,e){if(t.dtype===e.dtype)return[t,e];let n=Xa(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function KS(t,e){S(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function wW(t,e){return e.some(n=>n.id===t.id)}function Bd(t){let e=[];return wR(t,e,new Set),e}function wR(t,e,n){if(t==null)return;if(t instanceof Ie){e.push(t);return}if(!_W(t))return;let r=t;for(let o in r){let i=r[o];n.has(i)||(n.add(i),wR(i,e,n))}}function _W(t){return Array.isArray(t)||typeof t=="object"}function XS(t){return t.kernelName!=null}var Xm=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},EW=(()=>{class t{constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Xm}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r];if(await this.initializeBackend(o).success){await this.setBackend(o);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:n,asyncInit:r}=this.initializeBackendsAndReturnBest();if(r)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry))if(n in this.registryFactory){let{asyncInit:r}=this.initializeBackend(n);if(r)return null}else return null;return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,r,o=1){return n in this.registryFactory?(Qo(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:r,priority:o},!0)}async setBackend(n){if(this.registryFactory[n]==null)throw new Error(`Backend name '${n}' not found in registry`);if(this.backendName=n,this.registry[n]==null){this.backendInstance=null;let{success:r,asyncInit:o}=this.initializeBackend(n);if(!(o?await r:r))return!1}return this.backendInstance=this.registry[n],this.setupRegisteredKernels(),this.profiler=new Wm(this.backendInstance),!0}setupRegisteredKernels(){Fd(this.backendName).forEach(r=>{r.setupFunc!=null&&r.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){Fd(n).forEach(o=>{o.disposeFunc!=null&&o.disposeFunc(this.registry[n])})}initializeBackend(n){let r=this.registryFactory[n];if(r==null)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let o=r.factory();if(o&&!(o instanceof _c)&&typeof o.then=="function"){let i=++this.pendingBackendInitId,s=o.then(a=>i<this.pendingBackendInitId?!1:(this.registry[n]=a,this.pendingBackendInit=null,!0)).catch(a=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Qo(`Initialization of backend ${n} failed`),Qo(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[n]=o,{success:!0,asyncInit:!1}}catch(o){return Qo(`Initialization of backend ${n} failed`),Qo(o.stack||o.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,r)=>this.registryFactory[r].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let r=0;r<n.length;r++){let o=n[r],{success:i,asyncInit:s}=this.initializeBackend(o);if(s||i)return{name:o,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,r){let o=this.state.tensorInfo.get(r),i=o.backend,s=this.readSync(r),a=i.refCount(r);i.disposeData(r,!0),o.backend=n,n.move(r,s,o.shape,o.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,r){let o=null;if(r==null){if(typeof n!="function")throw new Error("Please provide a function to tidy()");r=n}else{if(typeof n!="string"&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=n}let i;return this.scopedRun(()=>this.startScope(o),()=>this.endScope(i),()=>(i=r(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,r,o){n();try{let i=o();return r(),i}catch(i){throw r(),i}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(n){let r=_.runKernel(kd,{x:n}),o={x:n},i=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return _.runKernel(Md,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,o,[r],i,s,{}),r}runKernel(n,r,o){if(this.backendName==null&&this.backend,!(za(n,this.backendName)!=null))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:r,attrs:o})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,r,o){let i=this.backend.numDataIds(),s=0;o.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=i-r-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${n}'`)}runKernelFunc(n){let r,o=[],i=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=XS(n)?n.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(XS(n)){let{kernelName:x,inputs:C,attrs:I}=n;this.backendName==null&&this.backend;let P=za(x,this.backendName);S(P!=null,()=>`Cannot find registered kernel '${x}' for backend '${this.backendName}'`),l=()=>{let A=this.backend.numDataIds();c=P.kernelFunc({inputs:C,attrs:I,backend:this.backend});let k=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(x,A,k);let V=k.map(L=>L.rank!=null?L:this.makeTensorFromTensorInfo(L));if(i){let L=this.getTensorsForGradient(x,C,V);o=this.saveTensorsForBackwardMode(L)}return V}}else{let{forwardFunc:x}=n,C=I=>{i&&(o=I.map(P=>this.keep(this.clone(P))))};l=()=>{let I=this.backend.numDataIds();c=this.tidy(()=>x(this.backend,C));let P=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,I,P),P}}let{inputs:f,attrs:p}=n,m=XS(n)?null:n.backwardsFunc,w;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?r=l():(w=this.profiler.profileKernel(u,f,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(w),r=w.outputs)}),i&&this.addTapeNode(u,f,r,m,o,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(x=>f[x]!=null?f[x].shape:null),outputShapes:r.map(x=>x.shape),kernelTimeMs:w.timeMs,extraInfo:w.extraInfo}),Array.isArray(c)?r:r[0]}saveTensorsForBackwardMode(n){return n.map(o=>this.keep(this.clone(o)))}getTensorsForGradient(n,r,o){let i=Hm(n);if(i!=null){let s=i.inputsToSave||[],a=i.outputsToSave||[],l;i.saveAllInputs?(S(Array.isArray(r),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(r).map(u=>r[u])):l=s.map(u=>r[u]);let c=o.filter((u,f)=>a[f]);return l.concat(c)}return[]}makeTensor(n,r,o,i){if(n==null)throw new Error("Values passed to engine.makeTensor() are null");o=o||"float32",i=i||this.backend;let s=n;o==="string"&&_o(n[0])&&(s=n.map(c=>Es(c)));let a=i.write(s,r,o),l=new Ie(r,o,a,this.nextTensorId());if(this.trackTensor(l,i),o==="string"){let c=this.state.tensorInfo.get(a),u=d0(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(n,r,o,i){o=o||"float32";let s={dataId:n,shape:r,dtype:o};return this.makeTensorFromTensorInfo(s,i)}makeTensorFromTensorInfo(n,r){let{dataId:o,shape:i,dtype:s}=n,a=new Ie(i,s,o,this.nextTensorId());return this.trackTensor(a,r),a}makeVariable(n,r=!0,o,i){o=o||this.nextVariableId().toString(),i!=null&&i!==n.dtype&&(n=n.cast(i));let s=new Jo(n,r,o,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(n,r){this.state.numTensors++,n.dtype==="string"&&this.state.numStringTensors++;let o=0;n.dtype!=="complex64"&&n.dtype!=="string"&&(o=n.size*Sc(n.dtype)),this.state.numBytes+=o,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:r||this.backend,dtype:n.dtype,shape:n.shape,bytes:o})),n instanceof Jo||this.track(n)}incRef(n,r){this.trackTensor(n,r),this.backend.incRef(n.dataId)}removeDataId(n,r){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===r&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let r=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,n.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=r.bytes),n.dtype!=="complex64"&&n.dtype!=="string"){let o=n.size*Sc(n.dtype);this.state.numBytes-=o}r.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,r.backend)}disposeVariables(){for(let n in this.state.registeredVariables){let r=this.state.registeredVariables[n];this.disposeVariable(r)}}disposeVariable(n){this.disposeTensor(n),this.state.registeredVariables[n.name]!=null&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,n.reasons==null&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}async profile(n){this.state.profiling=!0;let r=this.state.numBytes,o=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await n(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-o;for(let i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(n,r,o,i,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:n,inputs:r,outputs:o,saved:s},c=Hm(n);c!=null&&(i=c.gradFunc),i!=null&&(l.gradient=u=>(u=u.map((f,p)=>{if(f==null){let m=o[p],w=Cc(m.size,m.dtype);return this.makeTensor(w,m.shape,m.dtype)}return f}),i(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(n){return n.kept=!0,n}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(r.name=n),this.state.scopeStack.push(r),this.state.activeScope=r}endScope(n){let r=Bd(n),o=new Set(r.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!o.has(a.id)&&a.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(s=>{!s.kept&&s.scopeId===i.id&&this.track(s)})}gradients(n,r,o,i=!1){if(S(r.length>0,()=>"gradients() received an empty list of xs."),o!=null&&o.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${o.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));S(s instanceof Ie,()=>"The result y returned by f() must be a tensor.");let a=aR(this.state.activeTape,r,s);if(!i&&a.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=o??SW(s.shape),lR(l,a,u=>this.tidy(u),xW);let c=r.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let f of u.saved)f.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(n){return S(Xo(n),()=>"The f passed in customGrad(f) must be a function."),(...r)=>{S(r.every(l=>l instanceof Ie),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let o,i={};r.forEach((l,c)=>{i[c]=l});let s=(l,c)=>(o=n(...r,c),S(o.value instanceof Ie,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),S(Xo(o.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),o.value),a=(l,c)=>{let u=o.gradFunc(l,c),f=Array.isArray(u)?u:[u];S(f.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),S(f.every(m=>m instanceof Ie),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return f.forEach((m,w)=>{p[w]=()=>m}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,r){return this.state.tensorInfo.get(n).backend.readToGPU(n,r)}async time(n){let r=Ya(),o=await this.backend.time(n);return o.wallMs=Ya()-r,o}track(n){return this.state.activeScope!=null&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Xm;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function SW(t){let e=Nd(Ce(t),"float32");return _.makeTensor(e,t,"float32")}function ZS(){let t=p0();if(t._tfengine==null){let e=new Tc(t);t._tfengine=new EW(e)}return TO(t._tfengine.ENV),fR(()=>t._tfengine),t._tfengine}var _=ZS();function xW(t,e){let n={a:t,b:e};return _.runKernel("Add",n)}var Zm={};Ge(Zm,{isBrowser:()=>JS,isMobile:()=>IW,mockIsMobile:()=>TW});function CW(){return typeof navigator<"u"&&navigator!=null}var QS;function TW(t){QS=t}function IW(t){if(QS!==void 0)return QS;if(t||CW()){if(t||(t=navigator),t.product==="ReactNative")return!0;let e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){let n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function JS(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var tr=ne();tr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});tr.registerFlag("IS_BROWSER",()=>JS());tr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");tr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));tr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));tr.registerFlag("PROD",()=>!1);tr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>tr.getBool("DEBUG"));tr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);tr.registerFlag("IS_TEST",()=>!1);tr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>tr.getBool("DEBUG"));tr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);tr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);tr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function _n(t,e){let n=t;if(kt(t))return e==="string"?[]:[t.length];if(Km(t)){let o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(Ym(t))return[t.buffer.size/(e==null?4:Sc(e))];if(!Array.isArray(t))return[];let r=[];for(;Array.isArray(n)||kt(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ne().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ER(t,r,[]),r}function ER(t,e,n){if(n=n||[],!Array.isArray(t)&&!kt(t)){S(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}S(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),S(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);let r=e.slice(1);for(let o=0;o<t.length;++o)ER(t[o],r,n.concat(o))}function _R(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function y(t,e,n,r="numeric"){if(t instanceof WS())return _R(r,t.dtype,e,n),t;let o=ws(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),_R(r,o,e,n),t==null||!kt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}let i=_n(t,o);!kt(t)&&!Array.isArray(t)&&(t=[t]);let a=o!=="string"?Ac(t,o):So(t,[],!0);return _.makeTensor(a,i,o)}function Fi(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,s)=>y(i,`${e}[${s}]`,n,r))}var Qm="__op";function b(t){let e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+Qm;let o=(...i)=>{_.startScope(n);try{let s=r(...i);return Ua(s)&&console.error("Cannot return a Promise inside of tidy."),_.endScope(s),s}catch(s){throw _.endScope(null),s}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}function DW(t,e){let n=y(t,"real","complex"),r=y(e,"imag","complex");ft(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let o={real:n,imag:r};return _.runKernel(R0,o)}var Bn=b({complex_:DW});function Hn(t,e,n,r){if(r==null)r=ws(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(Ym(t)||Km(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return _.backend.createTensorFromGPUData(t,e||n,r)}if(!kt(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){mt(e);let o=Ce(e),i=Ce(n);S(o===i,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${i}`);for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1?a!==Ce(e.slice(s)):!0;S(n[s]===e[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!kt(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Ac(t,r):So(t,[],!0),_.makeTensor(t,e,r)}function fn(t,e,n){let r=_n(t,n);return Hn(t,e,r,n)}var Li={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var En=class t{static join(e){return new t(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>kt(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){let o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=n+o.byteLength;this.shards.push({buffer:o,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);let r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);let o=n-e,i=new ArrayBuffer(o),s=new Uint8Array(i),a=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],f=e+a-c.start,p=a,w=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,f,w-f);if(s.set(x,p),a+=x.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let r=NW(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function NW(t,e){let n=0,r=t.length;for(;n<=r;){let o=Math.floor((r-n)/2)+n,i=e(t[o]);if(i===0)return o;i<0?r=o:n=o+1}return-1}function AW(){ne().set("PROD",!0)}function MW(){ne().set("DEBUG",!0)}function kW(){ne().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function SR(t){ne().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}hR(SR);function OW(){_.disposeVariables()}function Jm(){return _}function RW(){return _.memory()}function PW(t){return _.profile(t)}function oe(t,e){return _.tidy(t,e)}function Ct(t){Bd(t).forEach(n=>n.dispose())}function Un(t){return _.keep(t)}function FW(t){return _.time(t)}function LW(t){return _.setBackend(t)}function VW(){return _.ready()}function Hd(){return _.backendName}function $W(t){_.removeBackend(t)}function jW(t){return _.findBackend(t)}function BW(t){return _.findBackendFactory(t)}function HW(t,e,n=1){return _.registerBackend(t,e,n)}function Ud(){return _.backend}function UW(t,e){ne().setPlatform(t,e)}var Ss=4;async function TR(t,e){let n=[],r=[],o=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<o.length;++s){let a=o[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(async f=>{let p=await l.bytes(),m=p.reduce((C,I)=>C+I.length,0)+Ss*p.length,w=new Uint8Array(m),x=0;for(let C=0;C<p.length;C++){let I=p[C],P=new Uint8Array(new Uint32Array([I.length]).buffer);w.set(P,x),x+=Ss,w.set(I,x),x+=I.length}f(w)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}let i=await Promise.all(r);return{data:WW(i),specs:n}}function eg(t,e){let n=new En(t),r={},o=0;for(let i of e){let s=zW(i,(a,l)=>n.slice(o+a,o+l));r[i.name]=IR(i,n.slice(o,o+s)),o+=s}return r}function zW(t,e){let n=Ce(t.shape),r;if("quantization"in t){let o=t.quantization;r=Li[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Ss+new Uint32Array(e(o,o+Ss))[0];return o}else r=Li[t.dtype];return n*r}async function GW(t,e){let n=Ce(t.shape),r;if("quantization"in t){let o=t.quantization;r=Li[o.dtype]}else if(t.dtype==="string"){let o=0;for(let i=0;i<n;i++)o+=Ss+new Uint32Array(await e(o,o+Ss))[0];return o}else r=Li[t.dtype];return n*r}function IR(t,e){let n=t.name,r=t.dtype,o=t.shape,i=Ce(o),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Li[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=p*l.scale+l.min}}else if(l.dtype==="float16")s=XW()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let f=0;f<u.length;f++){let p=u[f];s[f]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){let l=Ce(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(e.slice(a,a+Ss))[0];a+=Ss;let f=new Uint8Array(e.slice(a,a+u));s.push(f),a+=u}}else{let l=Li[r];if(r==="float32")s=new Float32Array(e);else if(r==="int32")s=new Int32Array(e);else if(r==="bool")s=new Uint8Array(e);else if(r==="complex64"){s=new Float32Array(e);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let w=0;w<c.length;w++)c[w]=s[w*2],u[w]=s[w*2+1];let f=fn(c,o,"float32"),p=fn(u,o,"float32"),m=Bn(f,p);return f.dispose(),p.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return fn(s,o,r)}async function xR(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){let{done:o,value:i}=await t.read();if(o&&i==null){let a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(r.length+i.byteLength);s.set(r,0),s.set(new Uint8Array(i),r.length),r=s}return r.buffer}async function tg(t,e){let n={},r=t.getReader(),o=new ArrayBuffer(0);for(let i of e){let s=await GW(i,async(c,u)=>(o=await xR(r,o,u),o.slice(c,u)));o=await xR(r,o,s);let a=o.slice(0,s);o=o.slice(s);let l=IR(i,a);if(n[i.name]=l,Hd()==="webgpu"){let c=Ud();"uploadToGPU"in c&&Ce(l.shape)>=ne().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function WW(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0,n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});let r=new Uint8Array(e),o=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var ex=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function CR(t){return ex?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function DR(t){if(ex)return Buffer.from(t).toString("base64");let e=new Uint8Array(t),n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function NR(t){if(ex){let r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function AR(t){return En.join(t)}function tx(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);let n=t.split("/");return n[n.length-1]}function ng(t,e){let n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function nx(t,e,n){let r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function Oc(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),nx(t,n,r)}function ei(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:CR(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:CR(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new En(t.weightData).byteLength}}function zd(t){let e=[];for(let n of t)e.push(...n.weights);return e}function qW(){let t=n=>{let r=n<<13,o=0;for(;(r&8388608)===0;)o-=8388608,r<<=1;return r&=-8388609,o+=947912704,r|o},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function KW(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function YW(){let t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function XW(){let t=qW(),e=KW(),n=YW();return r=>{let o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let s=0;s<r.length;s++){let a=r[s],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[s]=l}return new Float32Array(o)}}var tn=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(e){t.getInstance().saveRouters.push(e)}static registerLoadRouter(e){t.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return t.getHandlers(e,"save")}static getLoadHandlers(e,n){return t.getHandlers(e,"load",n)}static getHandlers(e,n,r){let o=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(e,r);a!==null&&o.push(a)}),o}},MR=t=>tn.registerSaveRouter(t),kR=t=>tn.registerLoadRouter(t),OR=t=>tn.getSaveHandlers(t),RR=(t,e)=>tn.getLoadHandlers(t,e);var rx="tensorflowjs",ox=1,Za="models_store",xs="model_info_store";function PR(){if(!ne().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function ix(t){let e=t.result;e.createObjectStore(Za,{keyPath:"modelPath"}),e.createObjectStore(xs,{keyPath:"modelPath"})}var Qa=(()=>{class t{constructor(n){if(this.indexedDB=PR(),n==null||!n)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=n}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,n)}async load(){return this.databaseAction(this.modelPath)}databaseAction(n,r){return new Promise((o,i)=>{let s=this.indexedDB.open(rx,ox);s.onupgradeneeded=()=>ix(s),s.onsuccess=()=>{let a=s.result;if(r==null){let l=a.transaction(Za,"readonly"),u=l.objectStore(Za).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));o(u.result.modelArtifacts)},u.onerror=f=>(a.close(),i(u.error)),l.oncomplete=()=>a.close()}else{r.weightData=En.join(r.weightData);let l=ei(r),c=a.transaction(xs,"readwrite"),u=c.objectStore(xs),f;try{f=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(m){return i(m)}let p;f.onsuccess=()=>{p=a.transaction(Za,"readwrite");let m=p.objectStore(Za),w;try{w=m.put({modelPath:this.modelPath,modelArtifacts:r,modelArtifactsInfo:l})}catch(x){return i(x)}w.onsuccess=()=>o({modelArtifactsInfo:l}),w.onerror=x=>{u=c.objectStore(xs);let C=u.delete(this.modelPath);C.onsuccess=()=>(a.close(),i(w.error)),C.onerror=I=>(a.close(),i(w.error))}},f.onerror=m=>(a.close(),i(f.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>i(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var FR=t=>ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Qa.URL_SCHEME)?ZW(t.slice(Qa.URL_SCHEME.length)):null;tn.registerSaveRouter(FR);tn.registerLoadRouter(FR);function ZW(t){return new Qa(t)}function QW(t){return t.startsWith(Qa.URL_SCHEME)?t.slice(Qa.URL_SCHEME.length):t}var rg=class{constructor(){this.indexedDB=PR()}async listModels(){return new Promise((e,n)=>{let r=this.indexedDB.open(rx,ox);r.onupgradeneeded=()=>ix(r),r.onsuccess=()=>{let o=r.result,i=o.transaction(xs,"readonly"),a=i.objectStore(xs).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),i.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=QW(e),new Promise((n,r)=>{let o=this.indexedDB.open(rx,ox);o.onupgradeneeded=()=>ix(o),o.onsuccess=()=>{let i=o.result,s=i.transaction(xs,"readwrite"),a=s.objectStore(xs),l=a.get(e),c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let u=a.delete(e),f=()=>{c=i.transaction(Za,"readwrite");let m=c.objectStore(Za).delete(e);m.onsuccess=()=>n(l.result.modelArtifactsInfo),m.onerror=w=>r(l.error)};u.onsuccess=f,u.onerror=p=>(f(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),s.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},o.onerror=i=>r(o.error)})}};var Vi="/",Rc="tensorflowjs_models",LR="info",JW="model_topology",e5="weight_specs",t5="weight_data",n5="model_metadata";function VR(t){return{info:[Rc,t,LR].join(Vi),topology:[Rc,t,JW].join(Vi),weightSpecs:[Rc,t,e5].join(Vi),weightData:[Rc,t,t5].join(Vi),modelMetadata:[Rc,t,n5].join(Vi)}}function $R(t){for(let e of Object.values(t))window.localStorage.removeItem(e)}function r5(t){let e=t.split(Vi);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Vi)}function o5(t){return t.startsWith(Ja.URL_SCHEME)?t.slice(Ja.URL_SCHEME.length):t}var Ja=(()=>{class t{constructor(n){if(!ne().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,n==null||!n)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=n,this.keys=VR(this.modelPath)}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let r=JSON.stringify(n.modelTopology),o=JSON.stringify(n.weightSpecs),i=ei(n),s=En.join(n.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,o),this.LS.setItem(this.keys.weightData,DR(s));let a={format:n.format,generatedBy:n.generatedBy,convertedBy:n.convertedBy,signature:n.signature!=null?n.signature:void 0,userDefinedMetadata:n.userDefinedMetadata!=null?n.userDefinedMetadata:void 0,modelInitializer:n.modelInitializer!=null?n.modelInitializer:void 0,initializerSignature:n.initializerSignature!=null?n.initializerSignature:void 0,trainingConfig:n.trainingConfig!=null?n.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:i}}catch{throw $R(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){let n=JSON.parse(this.LS.getItem(this.keys.info));if(n==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(n.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let r={},o=JSON.parse(this.LS.getItem(this.keys.topology));if(o==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);r.modelTopology=o;let i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);r.weightSpecs=i;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);r.format=l.format,r.generatedBy=l.generatedBy,r.convertedBy=l.convertedBy,l.signature!=null&&(r.signature=l.signature),l.userDefinedMetadata!=null&&(r.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(r.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(r.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(r.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return r.weightData=NR(a),r}}return t.URL_SCHEME="localstorage://",t})();var jR=t=>ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ja.URL_SCHEME)?i5(t.slice(Ja.URL_SCHEME.length)):null;tn.registerSaveRouter(jR);tn.registerLoadRouter(jR);function i5(t){return new Ja(t)}var og=class{constructor(){S(ne().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),S(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},n=Rc+Vi,r=Vi+LR;for(let o=0;o<this.LS.length;++o){let i=this.LS.key(o);if(i.startsWith(n)&&i.endsWith(r)){let s=r5(i);e[s]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=o5(e);let n=VR(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return $R(n),r}};var Pc="://",Co=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(e,n){S(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Pc)&&(e=e.slice(0,e.indexOf(Pc))),S(e.length>0,()=>"scheme must not be an empty string.");let r=t.getInstance();S(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){let n=t.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(t.getInstance().managers)}};function ig(t){if(t.indexOf(Pc)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Co.getSchemes().join(",")}`);return{scheme:t.split(Pc)[0],path:t.split(Pc)[1]}}async function BR(t,e,n=!1){S(t!==e,()=>`Old path and new path are the same: '${t}'`);let r=tn.getLoadHandlers(t);S(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),S(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);let o=r[0],i=tn.getSaveHandlers(e);S(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),S(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);let s=i[0],a=ig(t).scheme,l=ig(t).path,c=a===ig(t).scheme,u=await o.load();n&&c&&await Co.getManager(a).removeModel(l);let f=await s.save(u);return n&&!c&&await Co.getManager(a).removeModel(l),f.modelArtifactsInfo}async function HR(){let t=Co.getSchemes(),e={};for(let n of t){let r=await Co.getManager(n).listModels();for(let o in r){let i=n+Pc+o;e[i]=r[o]}}return e}async function UR(t){let e=ig(t);return Co.getManager(e.scheme).removeModel(e.path)}async function zR(t,e){return BR(t,e,!1)}async function GR(t,e){return BR(t,e,!0)}var sx=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ne().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();let o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Um(e)}};if(ne().get("IS_BROWSER")){ne().setPlatform("browser",new sx);try{Co.registerManager(Ja.URL_SCHEME,new og)}catch{}try{Co.registerManager(Qa.URL_SCHEME,new rg)}catch{}}var a5={importFetch:()=>qR()},ax;var lx=class{constructor(){this.util=KR(),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ne().global.fetch!=null?ne().global.fetch(e,n):(ax==null&&(ax=a5.importFetch()),ax(e,n))}now(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}};ne().get("IS_NODE")&&!ne().get("IS_BROWSER")&&ne().setPlatform("node",new lx);function Sn(t,e="float32",n){return e=e||"float32",mt(t),new Pi(t,e,n)}function l5(t,e){let n=y(t,"x","cast");if(!u0(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");let r={x:n},o={dtype:e};return _.runKernel(Md,r,o)}var pe=b({cast_:l5});function c5(t){let n={x:y(t,"x","clone","string_or_numeric")};return _.runKernel(kd,n)}var nr=b({clone_:c5});function Gd(t,e=!1){console.log(t.toString(e))}ZS();var u5={buffer:Sn,cast:pe,clone:nr,print:Gd};pR(u5);function d5(t,e){let n=y(t,"a","add"),r=y(e,"b","add");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel("Add",o)}var J=b({add_:d5});function f5(t,e){let n=y(t,"a","floorDiv"),r=y(e,"b","floorDiv");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel(aE,o)}var Wd=b({floorDiv_:f5});function p5(t,e){let n=y(t,"a","div"),r=y(e,"b","div");if([n,r]=xe(n,r),n.dtype==="int32"&&r.dtype==="int32")return Wd(n,r);let o={a:n,b:r},i={};return _.runKernel(J0,o,i)}var De=b({div_:p5});function h5(t,e){let n=y(t,"a","mul"),r=y(e,"b","mul");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel(RE,o)}var $=b({mul_:h5});function m5(t){let e=y(t,"x","abs");if(e.dtype==="complex64"){let n={x:e};return _.runKernel(P0,n)}else{let n={x:e};return _.runKernel("Abs",n)}}var nn=b({abs_:m5});function g5(t){let n={x:y(t,"x","acos")};return _.runKernel(m0,n)}var cx=b({acos_:g5});function y5(t){let n={x:y(t,"x","acosh")};return _.runKernel(g0,n)}var ux=b({acosh_:y5});function v5(t){S(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),S(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);let e=t.map((o,i)=>y(o,`tensors${i}`,"addN")),n=e[0];e.forEach(o=>{if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(o=>{if(!$n(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=e;return _.runKernel(y0,r)}var dx=b({addN_:v5});function b5(t,e=null,n=!1){let o={x:y(t,"x","all","bool")},i={axis:e,keepDims:n};return _.runKernel("All",o,i)}var fx=b({all_:b5});function w5(t,e=null,n=!1){let o={x:y(t,"x","any","bool")},i={axis:e,keepDims:n};return _.runKernel("Any",o,i)}var px=b({any_:w5});function _5(t,e=0){let r={x:y(t,"x","argMax")},o={axis:e};return _.runKernel(v0,r,o)}var qd=b({argMax_:_5});function E5(t,e=0){let r={x:y(t,"x","argMin")},o={axis:e};return _.runKernel(b0,r,o)}var hx=b({argMin_:E5});function S5(t){let n={x:y(t,"x","asin")};return _.runKernel(w0,n)}var mx=b({asin_:S5});function x5(t){let n={x:y(t,"x","asinh")};return _.runKernel(_0,n)}var gx=b({asinh_:x5});function C5(t){let n={x:y(t,"x","atan")};return _.runKernel(E0,n)}var yx=b({atan_:C5});function T5(t,e){let n=y(t,"a","atan2"),r=y(e,"b","atan2");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel(x0,o)}var vx=b({atan2_:T5});function I5(t){let n={x:y(t,"x","atanh")};return _.runKernel(S0,n)}var bx=b({atanh_:I5});function D5(t,e,n,r,o="NHWC",i){let s=t[3],a=[...e,s],l=XR(o);return nl(t,a,n,i,r,null,null,l)}function _x(t,e,n,r,o,i,s="channelsLast"){let[a,l]=Kd(e),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return nl(t,c,n,r,o,i,!1,s)}function N5(t,e,n,r,o,i,s="NDHWC"){let[a,l,c]=wx(e),u,f;if(s==="NDHWC")f="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")f="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return YR(t,u,n,r,o,!1,f,i)}function nl(t,e,n,r,o,i,s=!1,a="channelsLast"){let[l,c,u,f]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,f]=t;else if(a==="channelsFirst")[l,f,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,m,,w]=e,[x,C]=Kd(n),[I,P]=Kd(r),A=Lc(p,I),k=Lc(m,P),{padInfo:V,outHeight:L,outWidth:H}=k5(o,c,u,x,C,A,k,i,a),G=s?w*f:w,W;return a==="channelsFirst"?W=[l,G,L,H]:a==="channelsLast"&&(W=[l,L,H,G]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:f,outHeight:L,outWidth:H,outChannels:G,padInfo:V,strideHeight:x,strideWidth:C,filterHeight:p,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:k,dilationHeight:I,dilationWidth:P,inShape:t,outShape:W,filterShape:e}}function YR(t,e,n,r,o,i=!1,s="channelsLast",a){let[l,c,u,f,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,f,p]=t;else if(s==="channelsFirst")[l,p,c,u,f]=t;else throw new Error(`Unknown dataFormat ${s}`);let[m,w,x,,C]=e,[I,P,A]=wx(n),[k,V,L]=wx(r),H=Lc(m,k),G=Lc(w,V),W=Lc(x,L),{padInfo:X,outDepth:U,outHeight:fe,outWidth:ue}=O5(o,c,u,f,I,P,A,H,G,W,a),Pe=i?C*p:C,Ve;return s==="channelsFirst"?Ve=[l,Pe,U,fe,ue]:s==="channelsLast"&&(Ve=[l,U,fe,ue,Pe]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:f,inChannels:p,outDepth:U,outHeight:fe,outWidth:ue,outChannels:Pe,padInfo:X,strideDepth:I,strideHeight:P,strideWidth:A,filterDepth:m,filterHeight:w,filterWidth:x,effectiveFilterDepth:H,effectiveFilterHeight:G,effectiveFilterWidth:W,dilationDepth:k,dilationHeight:V,dilationWidth:L,inShape:t,outShape:Ve,filterShape:e}}function A5(t,e,n,r,o){r==null&&(r=Ex(t,e,n));let i=t[0],s=t[1],a=Yd((i-e+2*r)/n+1,o),l=Yd((s-e+2*r)/n+1,o);return[a,l]}function M5(t,e,n,r,o,i){o==null&&(o=Ex(t,e[0],r[0]));let s=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(s[a]=Yd((t[a]-e[a]+2*o)/r[a]+1,i));return s}function Ex(t,e,n,r=1){let o=Lc(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function Kd(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function wx(t){return typeof t=="number"?[t,t,t]:t}function Lc(t,e){return e<=1?t:t+(t-1)*(e-1)}function k5(t,e,n,r,o,i,s,a,l){let c,u,f;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let m=A5([e,n],i,r,t,a);u=m[0],f=m[1]}else if(t==="same"){u=Math.ceil(e/r),f=Math.ceil(n/o);let p=Math.max(0,(u-1)*r+i-e),m=Math.max(0,(f-1)*o+s-n),w=Math.floor(p/2),x=p-w,C=Math.floor(m/2),I=m-C;c={top:w,bottom:x,left:C,right:I,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),f=Math.ceil((n-s+1)/o);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],m=l==="channelsLast"?t[1][1]:t[2][1],w=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:m,left:w,right:x,type:p===0&&m===0&&w===0&&x===0?"VALID":"EXPLICIT"},u=Yd((e-i+p+m)/r+1,a),f=Yd((n-s+w+x)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:f}}function O5(t,e,n,r,o,i,s,a,l,c,u){let f,p,m,w;if(t==="valid"&&(t=0),typeof t=="number"){f={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let C=M5([e,n,r,1],[a,l,c],1,[o,i,s],t,u);p=C[0],m=C[1],w=C[2]}else if(t==="same"){p=Math.ceil(e/o),m=Math.ceil(n/i),w=Math.ceil(r/s);let x=(p-1)*o+a-e,C=(m-1)*i+l-n,I=(w-1)*s+c-r,P=Math.floor(x/2),A=x-P,k=Math.floor(C/2),V=C-k,L=Math.floor(I/2),H=I-L;f={top:k,bottom:V,left:L,right:H,front:P,back:A,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:f,outDepth:p,outHeight:m,outWidth:w}}function Yd(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function tl(t){let[e,n,r]=Kd(t);return e===1&&n===1&&r===1}function An(t,e){return tl(t)||tl(e)}function ti(t){return Kd(t).every(e=>e>0)}function XR(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Vt(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")S(Ri(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{S(Ri(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}function R5(t,e){let r={x:y(t,"x","reshape","string_or_numeric")},o={shape:e};return _.runKernel(QE,r,o)}var R=b({reshape_:R5});function P5(t,e,n,r,o){let i=y(t,"x","avgPool","float32"),s=1;S(An(n,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Vt("avgPool",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(C0,c,u);return f=pe(f,i.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Xd=b({avgPool_:P5});function F5(t,e,n,r,o,i="NDHWC"){let s=y(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),S(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Vt("avgPool3d",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(T0,c,u);return f=pe(f,a.dtype),l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var Sx=b({avgPool3d_:F5});function L5(t,e=0){S(t.length>=1,()=>"Pass at least one tensor to concat");let n=Fi(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return nr(n[0]);let r=n,o={axis:e};return _.runKernel(F0,r,o)}var lt=b({concat_:L5});function V5(t,e,n=!1,r=!1){let o=y(t,"a","matMul"),i=y(e,"b","matMul");[o,i]=xe(o,i);let s={a:o,b:i},a={transposeA:n,transposeB:r};return _.runKernel(I0,s,a)}var Me=b({matMul_:V5});function $5(t){let n={x:y(t,"x","sigmoid","float32")};return _.runKernel(pS,n)}var rr=b({sigmoid_:$5});function j5(t,e,n){let r=y(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");let o={x:r},i={begin:e,size:n};return _.runKernel(uS,o,i)}var Ne=b({slice_:j5});function B5(t){let n={x:y(t,"x","tanh","float32")};return _.runKernel(AS,n)}var Vc=b({tanh_:B5});function H5(t,e,n,r,o,i){let s=y(t,"forgetBias","basicLSTMCell"),a=y(e,"lstmKernel","basicLSTMCell"),l=y(n,"lstmBias","basicLSTMCell"),c=y(r,"data","basicLSTMCell"),u=y(o,"c","basicLSTMCell"),f=y(i,"h","basicLSTMCell"),p=lt([c,f],1),m=Me(p,a),w=J(m,l),x=w.shape[0],C=w.shape[1]/4,I=[x,C],P=Ne(w,[0,0],I),A=Ne(w,[0,C],I),k=Ne(w,[0,C*2],I),V=Ne(w,[0,C*3],I),L=J($(rr(P),Vc(A)),$(u,rr(J(s,k)))),H=$(Vc(L),rr(V));return[L,H]}var xx=b({basicLSTMCell_:H5});function U5(t,e,n){let r=y(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);S(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),S(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),S(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);let i={x:r},s={blockShape:e,crops:n};return _.runKernel(D0,i,s)}var Zd=b({batchToSpaceND_:U5});function ZR(t){let e;return t.rank===0||t.rank===1?e=R(t,[1,1,1,t.size]):t.rank===2?e=R(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}function z5(t,e,n,r,o,i){i==null&&(i=.001);let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;r!=null&&(u=y(r,"offset","batchNorm")),S(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),S(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),S(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:ZR(s),scale:c,offset:u,mean:a,variance:l},m={varianceEpsilon:i},w=_.runKernel(lE,p,m);return R(w,s.shape)}var $i=b({batchNorm_:z5});function G5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),S(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),S(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),$i(s,a,l,u,c,i)}var Cx=b({batchNorm2d_:G5});function W5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),S(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),S(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),$i(s,a,l,u,c,i)}var Tx=b({batchNorm3d_:W5});function q5(t,e,n,r,o,i){let s=y(t,"x","batchNorm"),a=y(e,"mean","batchNorm"),l=y(n,"variance","batchNorm"),c;o!=null&&(c=y(o,"scale","batchNorm"));let u;return r!=null&&(u=y(r,"offset","batchNorm")),S(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),S(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),S(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&S(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&S(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),$i(s,a,l,u,c,i)}var Ix=b({batchNorm4d_:q5});function K5(t,e,n){let r=y(t,"x","bincount"),o=y(e,"weights","bincount");S(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);let i={x:r,weights:o},s={size:n};return _.runKernel(N0,i,s)}var Qd=b({bincount_:K5});function Y5(t,e){let n=y(t,"x","bitwiseAnd"),r=y(e,"y","bitwiseAnd");if(!$n(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let o={a:n,b:r};return _.runKernel(A0,o)}var Dx=b({bitwiseAnd_:Y5});function X5(t,e){let n=y(t,"s0","broadcastArgs","int32"),r=y(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);let o={s0:n,s1:r};return _.runKernel(M0,o)}var Nx=b({broadcastArgs_:X5});function Z5(t,e){let n=y(t,"broadcastTo","x"),r=n.shape;if(mt(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){let c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=R(n,c)}let o=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return nr(n);let a={x:n},l={reps:i};return _.runKernel(Od,a,l)}var rl=b({broadcastTo_:Z5});function Q5(t){let n={x:y(t,"x","ceil","float32")};return _.runKernel(k0,n)}var Ax=b({ceil_:Q5});function To(t,e,n){mt(t),n=n||ws(e);let r={shape:t,value:e,dtype:n};return _.runKernel(oE,{},r)}function J5(t,e,n){let r=y(t,"x","clipByValue");if(S(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return To(r.shape,e,r.dtype);let o={x:r},i={clipValueMin:e,clipValueMax:n};return _.runKernel(O0,o,i)}var Mx=b({clipByValue_:J5});function e6(t){return lt(t,0)}var kx=b({concat1d_:e6});function t6(t,e){return lt(t,e)}var Ox=b({concat2d_:t6});function n6(t,e){return lt(t,e)}var Rx=b({concat3d_:n6});function r6(t,e){return lt(t,e)}var Px=b({concat4d_:r6});function o6(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","conv2d","float32"),l=y(e,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Vt("conv2d",r,s);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in conv2d: depth of input (${f}) must match input depth for filter ${l.shape[2]}.`),S(An(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(ti(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),S(ti(n),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel(L0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var ji=b({conv2d_:o6});function i6(t,e,n,r,o="NWC",i=1,s){let a=y(t,"x","conv1d"),l=y(e,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1]])),S(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),S(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Vt("conv1d",r,s),S(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),S(An(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),S(ti(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),S(ti(n),()=>"Error in conv1D: Stride should be larger than 0."),S(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);let f=R(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=R(c,[c.shape[0],1,c.shape[1],c.shape[2]]),C=ji(p,f,[1,n],r,"NHWC",[1,i],s);return u?R(C,[C.shape[2],C.shape[3]]):R(C,[C.shape[0],C.shape[2],C.shape[3]])}var Fx=b({conv1d_:i6});function s6(t,e,n,r,o,i="NHWC",s){S(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),S(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),S(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),S(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let u=i==="NHWC"?a[3]:a[1],f=i==="NHWC"?l.shape[3]:l.shape[1];S(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),S(f===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${f}) must match output depth for filter ${n.shape[3]}.`),Vt("conv2dDerInput",o,s);let p={dy:l,filter:n},m={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,inputShape:a},w=_.runKernel($0,p,m);return c?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var sg=b({conv2DBackpropInput_:s6});function a6(t,e,n,r,o,i){let s=y(t,"x","conv2dTranspose"),a=y(e,"filter","conv2dTranspose");return sg(n,s,a,r,o,"NHWC",i)}var Lx=b({conv2dTranspose_:a6});function l6(t,e,n,r,o="NDHWC",i=[1,1,1]){let s=y(t,"x","conv3d"),a=y(e,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),S(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),S(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),S(An(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),S(ti(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),S(ti(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},f={strides:n,pad:r,dataFormat:o,dilations:i},p=_.runKernel(j0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Vx=b({conv3d_:l6});function c6(t,e,n,r,o){S(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,s=e,a=!1;e.rank===4&&(a=!0,s=R(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);let l=i[4],c=s.shape[4];S(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),S(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),S(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),S(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),S(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);let u={dy:s,filter:n},f={pad:o,strides:r,inputShape:i},p=_.runKernel(B0,u,f);return a?R(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var QR=b({conv3DBackpropInput_:c6});function u6(t,e,n,r,o){let i=y(t,"x","conv3dTranspose"),s=y(e,"filter","conv3dTranspose");return QR(n,i,s,r,o)}var $x=b({conv3dTranspose_:u6});function d6(t){let n={x:y(t,"x","cos","float32")};return _.runKernel("Cos",n)}var jx=b({cos_:d6});function f6(t){let n={x:y(t,"x","cosh","float32")};return _.runKernel(H0,n)}var Bx=b({cosh_:f6});function p6(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumprod")},s={axis:e,exclusive:n,reverse:r};return _.runKernel(U0,i,s)}var Hx=b({cumprod_:p6});function h6(t,e=0,n=!1,r=!1){let i={x:y(t,"x","cumsum")},s={axis:e,exclusive:n,reverse:r};return _.runKernel(z0,i,s)}var Ux=b({cumsum_:h6});function m6(t,e,n,r=!1){let o=y(t,"x","denseBincount"),i=y(e,"weights","denseBincount");S(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),S(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),S(n>=0,()=>`size must be non-negative, but got ${n}.`),S(i.size===o.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${i.shape}.`);let s={x:o,weights:i},a={size:n,binaryOutput:r};return _.runKernel(W0,s,a)}var zx=b({denseBincount_:m6});function g6(t,e,n="NHWC"){let r=y(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];S(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),S(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),S(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),S(s%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${s} for depthToSpace with input shape ${r.shape}`);let a={x:r},l={blockSize:e,dataFormat:n};return _.runKernel(q0,a,l)}var Gx=b({depthToSpace_:g6});function y6(t,e,n,r,o="NHWC",i=[1,1],s){let a=y(t,"x","depthwiseConv2d","float32"),l=y(e,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),S(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let f=o==="NHWC"?c.shape[3]:c.shape[1];S(f===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${f}) must match the inChannels dimension in filter ${l.shape[2]}.`),Vt("depthwiseConv2d",r,s);let p={x:c,filter:l},m={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s},w=_.runKernel(K0,p,m);return u?R(w,[w.shape[1],w.shape[2],w.shape[3]]):w}var ol=b({depthwiseConv2d_:y6});function v6(t){let n={x:y(t,"x","diag")};return _.runKernel(Z0,n)}var Wx=b({diag_:v6});function b6(t,e,n,r,o=[1,1],i="NHWC"){let s=y(t,"x","dilation2d"),a=y(e,"filter","dilation2d");S(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),S(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),S(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=s,c=!1;s.rank===3&&(l=R(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),S(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},f={strides:n,pad:r,dilations:o},p=_.runKernel(Q0,u,f);return c?R(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var qx=b({dilation2d_:b6});var il={};Ge(il,{assertAndGetBroadcastShape:()=>qe,getBroadcastDims:()=>JR,getReductionAxes:()=>ag});function JR(t,e){let n=t.length,r=[];for(let o=0;o<n;o++){let i=n-1-o,s=t[i]||1;(e[e.length-1-o]||1)>1&&s===1&&r.unshift(i)}return r}function ag(t,e){let n=[];for(let r=0;r<e.length;r++){let o=t[t.length-r-1],i=e.length-r-1,s=e[i];(o==null||o===1&&s>1)&&n.unshift(i)}return n}function qe(t,e){let n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let i=t[t.length-o-1];i==null&&(i=1);let s=e[e.length-o-1];if(s==null&&(s=1),i===1)r[n-o-1]=s;else if(s===1)r[n-o-1]=i;else if(i!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=i}return r}function w6(t,e){let n=y(t,"a","equal","string_or_numeric"),r=y(e,"b","equal","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(tE,o)}var Cs=b({equal_:w6});function _6(t,e,n){let r=y(e,"a","where"),o=y(n,"b","where"),i=y(t,"condition","where","bool"),s=qe(qe(i.shape,r.shape),o.shape),a=rl(i,s),l=rl(r,s),c=rl(o,s),u={condition:a,t:l,e:c};return _.runKernel(lS,u)}var mr=b({where_:_6});function E6(t){let n={x:y(t,"x","zerosLike")};return _.runKernel(FS,n)}var zt=b({zerosLike_:E6});function S6(t,e){let n=y(t,"a","div"),r=y(e,"b","div");[n,r]=xe(n,r);let o=De(n,r),i=zt(o),s=Cs(r,i);return mr(s,i,o)}var Kx=b({divNoNan_:S6});function x6(t,e){let n=y(t,"t1","dot"),r=y(e,"t2","dot");S((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(S(o===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${i}.`),n.rank===1&&r.rank===1){let s=R(n,[1,-1]),a=R(r,[-1,1]),l=Me(s,a);return R(l,[])}else if(n.rank===1&&r.rank===2){let s=R(n,[1,-1]),a=R(r,[r.shape[0],r.shape[1]]),l=Me(s,a);return R(l,[l.size])}else if(n.rank===2&&r.rank===1){let s=R(r,[-1,1]),a=Me(n,s);return R(a,[a.size])}else{let s=R(r,[r.shape[0],r.shape[1]]);return Me(n,s)}}var Yx=b({dot_:x6});function C6(t,...e){let n=e.map((o,i)=>y(o,`tensors${i}`,"einsum")),r={equation:t};return _.runKernel(eE,n,r)}var Bi=b({einsum_:C6});function T6(t){let n={x:y(t,"x","elu","float32")};return _.runKernel("Elu",n)}var Jd=b({elu_:T6});function I6(t,e){let n=y(t,"x","ensureShape","string_or_numeric");if(!s0(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}var Xx=b({ensureShape_:I6});function D6(t){let e=y(t,"x","erf");S(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=pe(e,"float32"));let n={x:e};return _.runKernel("Erf",n)}var Zx=b({erf_:D6});function Qx(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function e2(t,e,n){let r=t.length+e.length,o=[],i=0,s=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[i++]):o.push(e[s++]);return o}function N6(t,e){let n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);let o=e.map(i=>t[i]);return[n,o]}function Hi(t,e){let n=e.map(r=>1);return e2(t,n,e)}function A6(t,e,n){S(Qx(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function M6(t,e){if(Qx(t,e))return null;let n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function k6(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function O6(t,e){let n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function P6(t,e=null,n=!1){let o={x:y(t,"x","max")},i={reductionIndices:e,keepDims:n};return _.runKernel("Max",o,i)}var Io=b({max_:P6});function F6(t,e=null,n=!1){let o={x:y(t,"x","min")},i={axis:e,keepDims:n};return _.runKernel("Min",o,i)}var $c=b({min_:F6});function L6(t,e){let n=y(t,"base","pow"),r=y(e,"exp","pow");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel("Pow",o)}var ri=b({pow_:L6});function ie(t,e){if((kt(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&kt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Hn(t,[],[],e)}function V6(t){let n={x:y(t,"x","sqrt","float32")};return _.runKernel(mS,n)}var zn=b({sqrt_:V6});function $6(t){let e=y(t,"x","square"),n={};return _.runKernel("Square",{x:e},n)}var rn=b({square_:$6});function j6(t,e=null,n=!1){let r=y(t,"x","sum");r.dtype==="bool"&&(r=pe(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return _.runKernel("Sum",o,i)}var Ke=b({sum_:j6});function B6(t,e="euclidean",n=null,r=!1){t=y(t,"x","norm");let o=t2(t,e,n),i=o.shape;if(r){let s=bs(n,t.shape);i=Hi(o.shape,s)}return R(o,i)}function t2(t,e,n=null){if(t.rank===0)return nn(t);if(t.rank!==1&&n===null)return t2(R(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ke(nn(t),n);if(e===1/0)return Io(nn(t),n);if(e===-1/0)return $c(nn(t),n);if(e==="euclidean"||e===2)return zn(Ke(ri(nn(t),ie(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Io(Ke(nn(t),n[0]),n[1]-1);if(e===1/0)return Io(Ke(nn(t),n[1]),n[0]);if(e===-1/0)return $c(Ke(nn(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return zn(Ke(rn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}var Ts=b({norm_:B6});function H6(t,e=null,n=!1){return Ts(t,"euclidean",e,n)}var Jx=b({euclideanNorm_:H6});function U6(t){let n={x:y(t,"x","exp")};return _.runKernel("Exp",n)}var Mr=b({exp_:U6});function z6(t,e=0){let n=y(t,"x","expandDims","string_or_numeric");S(e<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},o={dim:e};return _.runKernel(nE,r,o)}var pn=b({expandDims_:z6});function G6(t){let n={x:y(t,"x","expm1")};return _.runKernel(rE,n)}var eC=b({expm1_:G6});function W6(t,e){let n=y(t,"x","tile","string_or_numeric");S(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);let r={x:n},o={reps:e};return _.runKernel(Od,r,o)}var Ui=b({tile_:W6});function q6(t,e,n,r="float32"){e==null&&(e=t);let o=Sn([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)o.set(1,a,a);let s=R(o.toTensor(),[t,e]);if(n==null)return s;if(n.length===1)return Ui(pn(s,0),[n[0],1,1]);if(n.length===2)return Ui(pn(pn(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ui(pn(pn(pn(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}var ef=b({eye_:q6});function K6(t){let n={x:y(t,"x","floor","float32")};return _.runKernel(sE,n)}var tf=b({floor_:K6});function Y6(t,e,n=0,r=0){let o=y(t,"x","gather"),i=y(e,"indices","gather","int32"),s={x:o,indices:i},a={axis:n,batchDims:r};return _.runKernel(cE,s,a)}var nf=b({gather_:Y6});function X6(t,e){let n=y(t,"a","greater","string_or_numeric"),r=y(e,"b","greater","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(dE,o)}var oi=b({greater_:X6});function Z6(t,e){let n=y(t,"a","greaterEqual","string_or_numeric"),r=y(e,"b","greaterEqual","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(fE,o)}var rf=b({greaterEqual_:Z6});function Q6(t){let n={input:y(t,"input","imag")};return _.runKernel(hE,n)}var zi=b({imag_:Q6});function J6(t){let n={x:y(t,"x","isFinite")};return _.runKernel(mE,n)}var tC=b({isFinite_:J6});function e8(t){let n={x:y(t,"x","isInf")};return _.runKernel(gE,n)}var nC=b({isInf_:e8});function t8(t){let n={x:y(t,"x","isNaN")};return _.runKernel(yE,n)}var rC=b({isNaN_:t8});function n8(t,e=.2){let r={x:y(t,"x","leakyRelu")},o={alpha:e};return _.runKernel(vE,r,o)}var of=b({leakyRelu_:n8});function r8(t,e){let n=y(t,"a","less","string_or_numeric"),r=y(e,"b","less","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(bE,o)}var jc=b({less_:r8});function o8(t,e){let n=y(t,"a","lessEqual","string_or_numeric"),r=y(e,"b","lessEqual","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(wE,o)}var sl=b({lessEqual_:o8});function oC(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:t,stop:e,num:n};return _.runKernel(_E,{},r)}function i8(t,e=5,n=1,r=1,o=.5){let i=y(t,"x","localResponseNormalization");S(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),S(Ri(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let s=i,a=!1;i.rank===3&&(a=!0,s=R(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:e,bias:n,alpha:r,beta:o},u=_.runKernel("LRN",l,c);return a?R(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var iC=b({localResponseNormalization_:i8});function s8(t){let n={x:y(t,"x","log","float32")};return _.runKernel("Log",n)}var ii=b({log_:s8});function a8(t){let n={x:y(t,"x","log1p")};return _.runKernel(EE,n)}var sf=b({log1p_:a8});function n2(t){return S(Xo(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{let r=y(e,"x","tf.grad","string_or_numeric"),o=n!=null?y(n,"dy","tf.grad"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>t(r),[r],o);return o!=null&&ft(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),cg(s),s[0]})}}function r2(t){return S(Xo(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{S(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Fi(e,"args","tf.grads","string_or_numeric"),o=n!=null?y(n,"dy","tf.grads"):null;return _.tidy(()=>{let{value:i,grads:s}=_.gradients(()=>t(...r),r,o);return o!=null&&ft(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),cg(s),s})}}function o2(t){return S(Xo(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{S(e instanceof Ie,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:o}=_.gradients(()=>t(e),[e],n);return cg(r),{grad:r[0],value:o}}}function i2(t){return S(Xo(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{S(Array.isArray(e)&&e.every(o=>o instanceof Ie),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),S(n==null||n instanceof Ie,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=_.gradients(()=>t(...e),e,n);return n!=null&&ft(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),cg(r.grads),r}}function lg(t,e){S(Xo(t),()=>"The f passed in variableGrads(f) must be a function"),S(e==null||Array.isArray(e)&&e.every(c=>c instanceof Jo),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=e!=null;if(!n){e=[];for(let c in _.registeredVariables)e.push(_.registeredVariables[c])}let r=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),S(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);let i=!0,{value:s,grads:a}=_.gradients(t,e,null,i);S(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),S(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Mn(t){return _.customGrad(t)}function cg(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}function l8(t){let n={x:y(t,"x","neg")};return _.runKernel("Neg",n)}var hn=b({neg_:l8});function c8(t){let n={x:y(t,"x","softplus")};return _.runKernel(hS,n)}var af=b({softplus_:c8});function u8(t){let e=y(t,"x","logSigmoid");return Mn(r=>({value:hn(af(hn(r))),gradFunc:s=>$(s,rr(hn(r)))}))(e)}var sC=b({logSigmoid_:u8});function d8(t,e){let n=y(t,"a","sub"),r=y(e,"b","sub");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel("Sub",o)}var se=b({sub_:d8});function f8(t,e=-1){let n=y(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Mn((o,i)=>{let a=Io(o,e,!0),l=se(o,a),c=se(pe(l,"float32"),ii(Ke(Mr(l),e,!0)));return i([c]),{value:c,gradFunc:(f,p)=>{let[m]=p,w=!0,x=Mr(m);return se(f,$(Ke(f,e,w),x))}}})(n)}var aC=b({logSoftmax_:f8});function p8(t,e=null,n=!1){let r=y(t,"x","logSumExp"),o=bs(e,r.shape),i=Io(r,o,!0),s=se(r,i),a=Mr(s),l=Ke(a,o),c=ii(l),u=J(R(i,c.shape),c);if(n){let f=Hi(u.shape,o);return R(u,f)}return u}var lf=b({logSumExp_:p8});function h8(t,e){let n=y(t,"a","logicalAnd","bool"),r=y(e,"b","logicalAnd","bool");qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(SE,o)}var Is=b({logicalAnd_:h8});function m8(t){let n={x:y(t,"x","logicalNot","bool")};return _.runKernel(xE,n)}var cf=b({logicalNot_:m8});function g8(t,e){let n=y(t,"a","logicalOr","bool"),r=y(e,"b","logicalOr","bool");qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(CE,o)}var uf=b({logicalOr_:g8});function y8(t,e){let n=y(t,"a","logicalXor","bool"),r=y(e,"b","logicalXor","bool");return qe(n.shape,r.shape),Is(uf(t,e),cf(Is(t,e)))}var lC=b({logicalXor_:y8});var ug=2147483648;function v8(t,e,n="left"){let r=y(t,"sortedSequence","searchSorted"),o=y(e,"values","searchSorted"),i=r.shape[r.shape.length-1],s=o.shape[o.shape.length-1],a=R(r,[-1,i]),l=R(o,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Ce(l.shape)>=ug)throw new Error(`values tensor size must less than ${ug}`);if(a.shape[1]>=ug)throw new Error(`trailing dim_size must less than ${ug} for int32 output type, was ${a.shape[1]}`);let c={sortedSequence:a,values:l},u={side:n};return _.runKernel(aS,c,u)}var Bc=b({searchSorted_:v8});function cC(t,e){return Bc(t,e,"left")}function b8(t,e,n,r,o){let i=y(t,"x","maxPool"),s=1,a=i,l=!1;i.rank===3&&(l=!0,a=R(i,[1,i.shape[0],i.shape[1],i.shape[2]])),S(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),S(An(n,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),Vt("maxPool",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o},f=_.runKernel(IE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var df=b({maxPool_:b8});function w8(t,e=[1,1,1],n,r,o,i="NDHWC"){let s=y(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=R(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),S(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),S(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Vt("maxPool3d",r,o);let c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:i},f=_.runKernel(DE,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var uC=b({maxPool3d_:w8});function _8(t,e,n,r,o=!1){let s={x:y(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:o},l=_.runKernel(NE,s,a);return{result:l[0],indexes:l[1]}}var dC=b({maxPoolWithArgmax_:_8});function E8(t,e){let n=y(t,"a","maximum"),r=y(e,"b","maximum");[n,r]=xe(n,r),n.dtype==="bool"&&(n=pe(n,"int32"),r=pe(r,"int32")),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(TE,o)}var ff=b({maximum_:E8});function S8(t,e=null,n=!1){let o={x:y(t,"x","mean")},i={axis:e,keepDims:n};return _.runKernel(AE,o,i)}var Ds=b({mean_:S8});function Do(t,e="float32"){if(mt(t),e==="complex64"){let r=Do(t,"float32"),o=Do(t,"float32");return Bn(r,o)}let n=Cc(Ce(t),e);return _.makeTensor(n,t,e)}function No(t,e="float32"){if(mt(t),e==="complex64"){let r=No(t,"float32"),o=Do(t,"float32");return Bn(r,o)}let n=Nd(Ce(t),e);return _.makeTensor(n,t,e)}function fC(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=y(t,"x","meshgrid",t instanceof Ie?t.dtype:"float32");if(e===void 0)return[r];let o=y(e,"y","meshgrid",e instanceof Ie?e.dtype:"float32"),i=Ce(r.shape),s=Ce(o.shape);return n==="xy"?(r=R(r,[1,-1]),o=R(o,[-1,1]),[Me(No([s,1],r.dtype),r),Me(o,No([1,i],o.dtype))]):(r=R(r,[-1,1]),o=R(o,[1,-1]),[Me(r,No([1,s],r.dtype)),Me(No([i,1],o.dtype),o)])}function x8(t,e){let n=y(t,"a","minimum"),r=y(e,"b","minimum");[n,r]=xe(n,r),n.dtype==="bool"&&(n=pe(n,"int32"),r=pe(r,"int32")),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(ME,o)}var Ns=b({minimum_:x8});function C8(t,e,n){S(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=y(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");S(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);let o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)S(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),S(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);let i={paddings:e,mode:n},s={x:r};return _.runKernel(kE,s,i)}var pf=b({mirrorPad_:C8});function T8(t,e){let n=y(t,"a","mod"),r=y(e,"b","mod");[n,r]=xe(n,r);let o={a:n,b:r};return _.runKernel("Mod",o)}var pC=b({mod_:T8});function I8(t,e=null,n=!1){t=y(t,"x","moments");let r=bs(e,t.shape),o=Ds(t,r,n),i=o.shape;n||(i=Hi(o.shape,r));let s=rn(se(pe(t,"float32"),R(o,i))),a=Ds(s,r,n);return{mean:o,variance:a}}var hC=b({moments_:I8});function D8(t,e,n,r){let o=y(e,"data","multiRNNCell"),i=Fi(n,"c","multiRNNCell"),s=Fi(r,"h","multiRNNCell"),a=o,l=[];for(let f=0;f<t.length;f++){let p=t[f](a,i[f],s[f]);l.push(p[0]),l.push(p[1]),a=p[1]}let c=[],u=[];for(let f=0;f<l.length;f+=2)c.push(l[f]),u.push(l[f+1]);return[c,u]}var mC=b({multiRNNCell_:D8});function N8(t,e,n,r=!1){let o=y(t,"logits","multinomial"),i=o.size,s=o.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);n=n||Math.random();let l={logits:s===1?R(o,[1,-1]):o},c={numSamples:e,seed:n,normalized:r},u=_.runKernel(OE,l,c);return s===1?R(u,[u.size]):u}var gC=b({multinomial_:N8});function A8(t,e){let n=y(t,"a","notEqual","string_or_numeric"),r=y(e,"b","notEqual","string_or_numeric");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r};return _.runKernel(PE,o)}var hf=b({notEqual_:A8});function M8(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let s={indices:y(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return _.runKernel(jE,s,a)}var As=b({oneHot_:M8});function k8(t){let n={x:y(t,"x","onesLike")};return _.runKernel($E,n)}var yC=b({onesLike_:k8});function O8(t,e){let n=y(t,"v1","outerProduct"),r=y(e,"v2","outerProduct");S(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let o=R(n,[-1,1]),i=R(r,[1,-1]);return Me(o,i)}var vC=b({outerProduct_:O8});function R8(t,e,n=0){let r=y(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let o={paddings:e,constantValue:n},i={x:r};return _.runKernel(HE,i,o)}var kr=b({pad_:R8});function P8(t,e,n=0){return S(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),kr(t,[e],n)}var bC=b({pad1d_:P8});function F8(t,e,n=0){return S(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kr(t,e,n)}var wC=b({pad2d_:F8});function L8(t,e,n=0){return S(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kr(t,e,n)}var mf=b({pad3d_:L8});function V8(t,e,n=0){return S(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),kr(t,e,n)}var _C=b({pad4d_:V8});function $8(t,e,n){let r=y(t,"x","spaceToBatchND");S(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),S(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),S(r.shape.reduce((s,a,l)=>l>0&&l<=e.length?s&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);let o={x:r},i={blockShape:e,paddings:n};return _.runKernel(gS,o,i)}var gf=b({spaceToBatchND_:$8});function j8(t,e,n,r,o,i,s){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");let a=y(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),S(An(i,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${o}'`);let u=_x(l.shape,e,i,o,r),f=[u.dilationHeight,u.dilationWidth],p;r==="same"?p=H8([u.filterHeight,u.filterWidth],f):p=[[0,0],[0,0]];let m=f[0]===1&&f[1]===1,[w,x]=B8([u.inHeight,u.inWidth],f,p),C=m?r:"valid",I=m?l:gf(l,f,w),A=(n==="avg"?()=>Xd(I,e,i,C,s):()=>df(I,e,i,C,s))(),k=m?A:Zd(A,f,x);return c?R(k,[k.shape[1],k.shape[2],k.shape[3]]):k}function B8(t,e,n){let r=n.map(u=>u[0]),o=n.map(u=>u[1]),i=t.concat(r,o),s=e.map((u,f)=>(u-i[f]%u)%u),a=o.map((u,f)=>u+s[f]),l=e.map((u,f)=>[r[f],a[f]]),c=e.map((u,f)=>[0,s[f]]);return[l,c]}function H8(t,e){let r=t.map((s,a)=>s+(s-1)*(e[a]-1)).map(s=>s-1),o=r.map(s=>Math.floor(s/2)),i=r.map((s,a)=>s-o[a]);return r.map((s,a)=>[o[a],i[a]])}var EC=b({pool_:j8});function U8(t,e){let n=y(t,"x","prelu"),r=y(e,"alpha","prelu"),o={x:n,alpha:r};return _.runKernel(UE,o)}var yf=b({prelu_:U8});function z8(t,e=null,n=!1){let r=y(t,"x","prod");r.dtype==="bool"&&(r=pe(r,"int32"));let o={x:r},i={axis:e,keepDims:n};return _.runKernel(zE,o,i)}var SC=b({prod_:z8});function G8(t,e,n,r){let o=t.map((u,f)=>y(u,`tensors${f}`,"raggedGather","int32")),i=y(e,"paramsDenseValues","raggedGather"),s=y(n,"indices","raggedGather","int32"),a={paramsNestedSplits:o,paramsDenseValues:i,indices:s},l={outputRaggedRank:r},c=_.runKernel(GE,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}var xC=b({raggedGather_:G8});function W8(t,e,n){let r=y(t,"starts","raggedRange"),o=y(e,"limits","raggedRange",r.dtype),i=y(n,"deltas","raggedRange",r.dtype),s={starts:r,limits:o,deltas:i},a=_.runKernel(WE,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var CC=b({raggedRange_:W8});function q8(t,e,n,r,o){let i=y(t,"shape","raggedTensorToTensor","int32"),s=y(e,"values","raggedTensorToTensor"),a=y(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((f,p)=>y(f,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:o};return _.runKernel(qE,c,u)}var TC=b({raggedTensorToTensor_:q8});function K8(t,e,n){mt(t);let r=Ce(t),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else if(n==="bool")o=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)o[i]=e();return _.makeTensor(o,t,n)}var IC=b({rand_:K8});var hg=sv(E2());var LC={};Ge(LC,{TEST_EPSILON_FLOAT16:()=>S2,createVideoElement:()=>lq,encodeStrings:()=>x2,expectArrayBuffersEqual:()=>aq,expectArraysClose:()=>nq,expectArraysEqual:()=>oq,expectNumbersClose:()=>iq,expectPromiseToFail:()=>rq,expectValuesInRange:()=>sq,play:()=>cq,testEpsilon:()=>PC});var tq=.001,S2=.1;function nq(t,e,n){return n==null&&(n=PC()),RC(t,e,(r,o)=>FC(r,o,n))}function PC(){return _.backend.floatPrecision()===32?tq:S2}function RC(t,e,n){let r=!0;if((kt(t)||kt(e))&&(r=!1),kt(t)&&kt(e)&&(r=!0),r){let s=t.constructor.name,a=e.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){let s=_n(t),a=_n(e);if(!$n(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let o=kt(t)?t:So(t),i=kt(e)?e:So(e);if(o.length!==i.length)throw new Error(`Arrays have different lengths actual: ${o.length} vs expected: ${i.length}.
Actual:   ${o}.
Expected: ${i}.`);for(let s=0;s<i.length;++s){let a=o[s],l=i[s];if(!n(a,l))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${l}.
Actual:   ${o}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function rq(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function oq(t,e){let n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return _o(t)||_o(t[0])||_o(e)||_o(e[0])?RC(t,n,(r,o)=>r==o):RC(t,e,(r,o)=>FC(r,o,0))}function iq(t,e,n){if(n==null&&(n=PC()),!FC(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function FC(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function sq(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function aq(t,e){let n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let o=0;o<r.length;o++)if(n[o]!==r[o])throw new Error(`Expected ArrayBuffer value at ${o} to be ${r[o]} but got ${n[o]} instead`)}function x2(t){for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?x2(n):t[e]=Es(n)}return t}function lq(t){let e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function cq(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}var ll=class{constructor(e,n,r,o,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=i||Math.random();this.random=hg.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,i,s;do o=2*this.random()-1,i=2*this.random()-1,s=o*o+i*i;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},fg=class{constructor(e,n,r,o){this.alpha=e,this.beta=1/n,this.dtype=r;let i=o||Math.random();this.randu=hg.alea(i.toString()),this.randn=new ll(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,o,i,s;for(;;){do o=this.randn.nextValue(),s=1+this.c*o;while(s<=0);if(s*=s*s,e=o*o,n=1-.331*e*e,r=.5*e+this.d*(1-s+Math.log(s)),i=this.randu(),i<n||Math.log(i)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}},pg=class{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=hg.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function uq(t,e,n=1,r="float32",o){if(mt(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);let i=new fg(e,n,r,o),s=Sn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var VC=b({randomGamma_:uq});function dq(t,e=0,n=1,r,o){if(mt(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);let i=new ll(e,n,r,!1,o),s=Sn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var vf=b({randomNormal_:dq});function fq(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return vf(t,0,1,e,n)}var $C=b({randomStandardNormal_:fq});function pq(t,e=0,n=1,r="float32",o){mt(t);let i=Sn(t,r),s=new pg(e,n,null,o);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}var cl=b({randomUniform_:pq});function hq(t,e,n,r){return cl(t,e,n,"int32",r)}var jC=b({randomUniformInt_:hq});function Zr(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");let o={start:t,stop:e,step:n,dtype:r};return _.runKernel(KE,{},o)}function mq(t){let n={input:y(t,"input","real")};return _.runKernel(YE,n)}var si=b({real_:mq});function gq(t){let n={x:y(t,"x","reciprocal")};return _.runKernel(XE,n)}var BC=b({reciprocal_:gq});function yq(t){let n={x:y(t,"x","relu")};return _.runKernel(ZE,n)}var Gi=b({relu_:yq});function vq(t){let n={x:y(t,"x","relu6")};return _.runKernel(tS,n)}var bf=b({relu6_:vq});function bq(t,e){let r={x:y(t,"x","reverse")},o={dims:e};return _.runKernel(nS,r,o)}var gr=b({reverse_:bq});function wq(t){let e=y(t,"x","reverse");return S(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),gr(e,0)}var HC=b({reverse1d_:wq});function _q(t,e){let n=y(t,"x","reverse");return S(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),gr(n,e)}var UC=b({reverse2d_:_q});function Eq(t,e){let n=y(t,"x","reverse");return S(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),gr(n,e)}var zC=b({reverse3d_:Eq});function Sq(t,e){let n=y(t,"x","reverse");return S(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),gr(n,e)}var GC=b({reverse4d_:Sq});function xq(t){let n={x:y(t,"x","round")};return _.runKernel(rS,n)}var wf=b({round_:xq});function Cq(t){let n={x:y(t,"x","rsqrt","float32")};return _.runKernel(oS,n)}var WC=b({rsqrt_:Cq});function Tq(t){let n={x:y(t,"x","selu")};return _.runKernel(cS,n)}var qC=b({selu_:Tq});function Iq(t,e,n,r,o,i=[1,1],s="NHWC"){let a=y(t,"x","separableConv2d"),l=y(e,"depthwiseFilter","separableConv2d"),c=y(n,"pointwiseFilter","separableConv2d"),u=a,f=!1;if(a.rank===3&&(f=!0,u=R(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");S(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),S(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),S(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),S(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),S(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],m=l.shape[3];S(c.shape[2]===p*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*m}, but got ${c.shape[2]}.`);let w=ol(u,l,r,o,s,i),C=ji(w,c,1,"valid",s);return f?R(C,[C.shape[1],C.shape[2],C.shape[3]]):C}var KC=b({separableConv2d_:Iq});async function Dq(t,e){let n=y(t,"x","setdiff1d"),r=y(e,"y","setdiff1d");S(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),S(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),S(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);let o=await n.data(),i=await r.data(),s=new Set(i),a=0;for(let u=0;u<o.length;u++)s.has(o[u])||a++;let l=new Pi([a],n.dtype),c=new Pi([a],"int32");for(let u=0,f=0;u<o.length;u++)s.has(o[u])||(l.values[f]=o[u],c.values[f]=u,f++);return[l.toTensor(),c.toTensor()]}var YC=Dq;function Nq(t){let n={x:y(t,"x","sign")};return _.runKernel(fS,n)}var XC=b({sign_:Nq});function Aq(t){let n={x:y(t,"x","sin","float32")};return _.runKernel("Sin",n)}var ZC=b({sin_:Aq});function Mq(t){let n={x:y(t,"x","sinh")};return _.runKernel(dS,n)}var QC=b({sinh_:Mq});function kq(t,e,n){let r=y(t,"x","slice1d");return S(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ne(r,[e],[n])}var JC=b({slice1d_:kq});function Oq(t,e,n){let r=y(t,"x","slice2d");return S(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ne(r,e,n)}var eT=b({slice2d_:Oq});function Rq(t,e,n){let r=y(t,"x","slice3d");return S(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ne(r,e,n)}var tT=b({slice3d_:Rq});function Pq(t,e,n){let r=y(t,"x","slice4d");return S(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ne(r,e,n)}var nT=b({slice4d_:Pq});function Fq(t,e=-1){let n=y(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);let r={logits:n},o={dim:e};return _.runKernel(vS,r,o)}var rT=b({softmax_:Fq});function Lq(t){S(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let e={input:t};return _.runKernel("FFT",e)}var ul=b({fft_:Lq});function Vq(t){S(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let e={input:t};return _.runKernel(pE,e)}var Ms=b({ifft_:Vq});function $q(t){let e=t.shape[t.shape.length-1],n=t.size/e,r;if(e<=2){let o=R(t,[n,e]);r=Ms(o)}else{let o=[n,2*(e-1)],i=R(si(t),[n,e]),s=R(zi(t),[n,e]),a=gr(Ne(i,[0,1],[n,e-2]),1),l=$(gr(Ne(s,[0,1],[n,e-2]),1),ie(-1)),c=lt([i,a],1),u=lt([s,l],1),f=R(Bn(c,u),[o[0],o[1]]);r=Ms(f)}if(r=si(r),t.rank===3&&t.shape[0]!==0){let o=r,i=t.shape[0];r=R(r,[i,r.shape[0]/i,r.shape[1]]),o.dispose()}return r}var _f=b({irfft_:$q});function jq(t,e,n=0){let o={x:y(t,"x","split")},i={numOrSizeSplits:e,axis:n};return _.runKernel(yS,o,i)}var ai=b({split_:jq});function Bq(t,e){S(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1],r=t.size/n,o;if(e!=null&&e<n){let w=t.shape.map(C=>0),x=t.shape.map(C=>C);x[t.shape.length-1]=e,o=Ne(t,w,x),n=e}else if(e!=null&&e>n){let w=t.shape.map(x=>x);w[t.shape.length-1]=e-n,o=lt([t,Do(w)],t.shape.length-1),n=e}else o=t;let i=zt(o),s=R(Bn(o,i),[r,n]),a=ul(s),l=Math.floor(n/2)+1,c=si(a),u=zi(a),f=ai(c,[l,n-l],c.shape.length-1),p=ai(u,[l,n-l],u.shape.length-1),m=o.shape.slice();return m[o.shape.length-1]=l,R(Bn(f[0],p[0]),m)}var dl=b({rfft_:Bq});function Hq(t,e){let n=y(t,"a","squaredDifference"),r=y(e,"b","squaredDifference");[n,r]=xe(n,r),qe(n.shape,r.shape);let o={a:n,b:r},i={};return _.runKernel(xS,o,i)}var Ef=b({squaredDifference_:Hq});function Uq(t,e){let n=y(t,"x","squeeze","string_or_numeric");return R(n,a0(n.shape,e).newShape)}var Gn=b({squeeze_:Uq});function zq(t,e=0){let n=Fi(t,"tensors","stack","string_or_numeric");S(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&S(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,o={axis:e};return _.runKernel(BE,r,o)}var kn=b({stack_:zq});function Gq(t,e=0){let r={x:y(t,"x","step")},o={alpha:e};return _.runKernel(LS,r,o)}var Sf=b({step_:Gq});function Wq(t,e,n,r,o=0,i=0,s=0,a=0,l=0){let u={x:y(t,"x","stridedSlice","string_or_numeric")},f={begin:e,end:n,strides:r,beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return _.runKernel(TS,u,f)}var oT=b({stridedSlice_:Wq});function qq(t){let n={x:y(t,"x","tan","float32")};return _.runKernel("Tan",n)}var iT=b({tan_:qq});function on(t,e){Ar(t);let n=_n(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Hn(t,null,n,e)}function Ao(t,e,n){if(Ar(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let r=_n(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Hn(t,e,r,n)}function xf(t,e,n){if(Ar(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let r=_n(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Hn(t,e,r,n)}function sT(t,e,n){if(Ar(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let r=_n(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Hn(t,e,r,n)}function aT(t,e,n){if(Ar(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let r=_n(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Hn(t,e,r,n)}function lT(t,e,n){if(Ar(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let r=_n(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Hn(t,e,r,n)}var Cf={};Ge(Cf,{calculateShapes:()=>C2,validateInput:()=>Hc,validateUpdateShape:()=>cT});function cT(t,e,n){let r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(i+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(i+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(i+` update.rank != ${o+t.length-r}`);for(let s=0;s<o;++s)if(n.shape[s]!==e.shape[s])throw new Error(i+` updates.shape[${s}] (${n.shape[s]}) != indices.shape[${s}] (${e.shape[s]}).`);for(let s=0;s<n.rank-o;++s)if(n.shape[s+o]!==t[s+r])throw new Error(i+` updates.shape[${s+o}] (${n.shape[s+o]}) != shape[${s+o}] (${t[s+o]})`)}function Hc(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}cT(n,e,t)}function C2(t,e,n){let r=e.shape.length,o=r>1?e.shape[r-1]:1,i=n.length,s=1;for(let f=o;f<i;++f)s*=n[f];let a=o<1?1:o,l=Ce(e.shape)/a,c=[...Zo(n.slice(0,o)),1],u=Ce(n);return{sliceRank:o,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function Kq(t,e,n){let r=y(t,"tensor","tensorScatterupdate"),o=y(e,"indices","tensorScatterupdate","int32"),i=y(n,"updates","tensorScatterupdate");if(Hc(i,o,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);let s={tensor:r,indices:o,updates:i},a={};return _.runKernel(sS,s,a)}var uT=b({tensorScatterUpdate_:Kq});function Yq(t,e=1,n=!0){let r=y(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);let i={x:r},s={k:e,sorted:n},[a,l]=_.runKernel(MS,i,s);return{values:a,indices:l}}var dT=b({topk_:Yq});function Xq(t,e=0,n=1,r,o){if(mt(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");let i=new ll(e,n,r,!0,o),s=Sn(t,r);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}var fT=b({truncatedNormal_:Xq});function Zq(t,e=0){let n=y(t,"x","unique","string_or_numeric");S(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},o={axis:e},[i,s]=_.runKernel(OS,r,o);return{values:i,indices:s}}var pT=b({unique_:Zq});function Qq(t,e,n){let r=y(t,"x","unsortedSegmentSum"),o=y(e,"segmentIds","unsortedSegmentSum","int32");S(Ri(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:o},s={numSegments:n};return _.runKernel(PS,i,s)}var hT=b({unsortedSegmentSum_:Qq});function Jq(t,e=0){let n=y(t,"x","unstack","string_or_numeric");S(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},o={axis:e};return _.runKernel(RS,r,o)}var yr=b({unstack_:Jq});function mT(t,e){return Bc(t,e,"right")}function gT(t,e=!0,n,r){return _.makeVariable(t,e,n,r)}function mg(t,e){let n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);let r=Sn(t,"int32"),o=Sn([n.length,t.length],"int32");for(let i=0;i<n.length;i++){let s=r.indexToLoc(n[i]),a=i*t.length;o.values.set(s,a)}return o.toTensor()}async function e7(t){let e=y(t,"condition","whereAsync","bool"),n=await e.data(),r=mg(e.shape,n);return t!==e&&e.dispose(),r}var Tf=e7;async function t7(t,e,n){let r=y(t,"tensor","boolMask"),o=y(e,"mask","boolMask","bool"),i=n??0,s=o.rank,a=r.shape;S(s>0,()=>"mask cannot be scalar"),ft(a.slice(i,i+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let x=i;x<i+s;x++)l*=a[x];let c=a.slice(0,i).concat([l],a.slice(i+s)),u=R(r,c),f=R(o,[-1]),p=await Tf(f),m=Gn(p,[1]),w=nf(u,m,i);return t!==r&&r.dispose(),e!==o&&o.dispose(),m.dispose(),u.dispose(),f.dispose(),p.dispose(),w}var T2=t7;function n7(t,e,n){let r=y(t,"x","transpose");if(e==null&&(e=r.shape.map((s,a)=>a).reverse()),S(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(s=>{S(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();let o={x:r},i={perm:e};return r.dtype==="complex64"?oe(()=>{let s=si(r),a=zi(r);return s=_.runKernel(Rd,{x:s},i),a=_.runKernel(Rd,{x:a},i),n&&(a=hn(a)),Bn(s,a)}):_.runKernel(Rd,o,i)}var fl=b({transpose_:n7});function r7(t,e,n,r,o=!0){let i=y(t,"v","movingAverage"),s=y(e,"x","movingAverage"),a=y(n,"decay","movingAverage");KS(i,s),S($n(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=ie(1),c=se(l,a),u=$(se(s,i),c);if(o){S(r!=null,()=>"When using zeroDebias: true, step is required.");let f=y(r,"step","movingAverage");u=De(u,se(l,ri(a,f)))}return J(i,u)}var I2=b({movingAverage_:r7});function o7(t,e,n){mt(n);let r=y(t,"indices","scatterND","int32"),o=y(e,"updates","scatterND");Hc(o,r,n);let i={indices:r,updates:o},s={shape:n};return _.runKernel(iS,i,s)}var D2=b({scatterND_:o7});function N2(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);let o=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let s=e.size;if(!(e.rank===0||e.rank===1&&s===o))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${o}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}function s7(t,e,n,r=0){mt(n);let o=y(t,"sparseIndices","sparseToDense","int32"),i=y(e,"sparseValues","sparseToDense","string_or_numeric"),s=y(r,"defaultValue","sparseToDense",i.dtype);N2(o,i,n,s);let a={sparseIndices:o,sparseValues:i,defaultValue:s},l={outputShape:n};return _.runKernel(SS,a,l)}var A2=b({sparseToDense_:s7});function a7(t,e){let n=y(e,"indices","gatherND","int32"),o={params:y(t,"x","gatherND","string_or_numeric"),indices:n};return _.runKernel(uE,o)}var M2=b({gatherND_:a7});function k2(t,e){if(e==null)return t.shape.slice();if($n(t.shape,e))return e;if(t.shape.length===e.length){let n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}function l7(t,e,n,r){let o=y(t,"x","dropout");if(S(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),S(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Ie?o.clone():o;let i=k2(o,n),s=1-e,a=De(tf(J(cl(i,0,1,"float32",r),s)),s);return $(o,a)}var O2=b({dropout_:l7});function gg(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function Uc(t,e,n){let r=1-t%2,o=new Float32Array(t);for(let i=0;i<t;++i){let s=2*Math.PI*i/(t+r-1);o[i]=e-n*Math.cos(s)}return on(o,"float32")}async function c7(t,e,n=1){let r=y(t,"predictions","inTopK"),o=y(e,"targets","inTopK");S(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),S(r.rank-1===o.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${o.rank}`),ft(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];S(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let s=await r.data(),a=await o.data(),[l,c]=[s.length/i,i],u=l0("bool",l);for(let f=0;f<l;f++){let p=f*c,m=s.subarray(p,p+c),w=[];for(let x=0;x<m.length;x++)w.push({value:m[x],index:x});w.sort((x,C)=>C.value-x.value),u[f]=0;for(let x=0;x<n;x++)if(w[x].index===a[f]){u[f]=1;break}}return t!==r&&r.dispose(),e!==o&&o.dispose(),fn(u,o.shape,"bool")}var R2=c7;var yg={};Ge(yg,{conv2d:()=>F2,depthwiseConv2d:()=>$2,matMul:()=>j2});function u7(t,e,n,r,o,i="NHWC",s){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]])),S(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),S(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),S(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];S(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),S(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Vt("conv2dDerFilter",o,s);let f={x:a,dy:l},p={strides:r,pad:o,dataFormat:i,dimRoundingMode:s,filterShape:n};return _.runKernel(V0,f,p)}var P2=b({conv2DBackpropFilter_:u7});function pl(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return $(t,Sf(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function hl(t,e){let n=e,r=ag(t.shape,e.shape);return r.length>0&&(n=Ke(n,r)),R(n,t.shape)}function ml(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Gi(t);if(e==="elu")return Jd(t);if(e==="relu6")return bf(t);if(e==="prelu")return yf(t,n);if(e==="leakyrelu")return of(t,r);if(e==="sigmoid")return rr(t);throw new Error(`Unknown fused activation ${e}.`)}var gl=(t,e)=>!(t>0)||e==="linear";function d7({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",gl(_.state.gradientDepth,l)===!1){S(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let L=ji(t,e,n,r,o,i,s);return a!=null&&(L=J(L,a)),ml(L,l,c,u)}let f=y(t,"x","conv2d","float32"),p=y(e,"filter","conv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Vt("fused conv2d",r,s);let x=o==="NHWC"?m.shape[3]:m.shape[1];S(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),S(An(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let C=nl(m.shape,p.shape,n,i,r,s),I;a!=null&&(I=y(a,"bias","fused conv2d"),[I]=xe(I,f),o==="NHWC"?qe(C.outShape,I.shape):(S(I.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${I.shape.length}.`),S(I.shape.length===0||I.shape[0]===C.outChannels||I.shape[0]===1,()=>`Error in fused conv2d: bias shape (${I.shape}) is not compatible with the number of output channels (${C.outChannels})`)));let P;if(c!=null){let L=c.shape;if(S(L.length<=1||L.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${L.length}.`),L.length===1)S(L[0]===1||L[0]===C.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the number of output channels (${C.outChannels}).`);else if(L.length===3)try{qe(L,C.outShape)}catch{let G=`Error in fused conv2d: PReLU activation weights (${L}) is not compatible with the output shape of the conv2d (${C.outShape}).`;throw Error(G)}P=y(c,"prelu weights","fused conv2d")}let A=(L,H)=>{S(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);let[G,W,X,U]=H,fe=pl(L,X,l);S(tl(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let ue=sg(W.shape,fe,G,n,r),Pe=P2(W,fe,G.shape,n,r),Ve=[ue,Pe];if(U!=null){let Et=hl(U,fe);Ve.push(Et)}return Ve},k={x:m,filter:p,bias:I,preluActivationWeights:P},V={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Mn((H,G,W)=>{let X=_.runKernel(jm,k,V);return W([G,H,X]),w&&(X=R(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:A}})(m,p):Mn((H,G,W,X)=>{let U=_.runKernel(jm,k,V);return X([G,H,U,W]),w&&(U=R(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:A}})(m,p,I)}var F2=b({fusedConv2d_:d7});function f7(t,e,n,r,o,i=[1,1],s){let a=t;t.rank===3&&(a=R(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,filterShape:n};return _.runKernel(Y0,c,u)}var L2=b({depthwiseConv2dNativeBackpropFilter_:f7});function p7(t,e,n,r,o,i=[1,1],s){let a=e,l=!1;e.rank===3&&(l=!0,a=R(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let c={dy:a,filter:n},u={strides:r,pad:o,dimRoundingMode:s,dilations:i,inputShape:t},f=_.runKernel(X0,c,u);return l?R(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var V2=b({depthwiseConv2dNativeBackpropInput_:p7});function h7({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:i=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(gl(_.state.gradientDepth,l)===!1){let V=ol(t,e,n,r,o,i,s);return a!=null&&(V=J(V,a)),ml(V,l,c,u)}let f=y(t,"x","depthwiseConv2d","float32"),p=y(e,"filter","depthwiseConv2d","float32"),m=f,w=!1;f.rank===3&&(w=!0,m=R(f,[1,f.shape[0],f.shape[1],f.shape[2]])),S(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),S(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),S(m.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),i==null&&(i=[1,1]),S(An(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Vt("fused depthwiseConv2d",r,s);let x=nl(m.shape,p.shape,n,i,r,s,!0),C;a!=null&&(C=y(a,"bias","fused conv2d"),[C]=xe(C,f),qe(x.outShape,C.shape));let I;c!=null&&(I=y(c,"prelu weights","fused depthwiseConv2d"));let P=(V,L)=>{S(tl(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[H,G,W,X]=L,U=pl(V,W,l),fe=V2(G.shape,U,H,n,r,i,s),ue=L2(G,U,H.shape,n,r,i,s);if(X!=null){let Pe=hl(C,U);return[fe,ue,Pe]}return[fe,ue]},A={x:m,filter:p,bias:C,preluActivationWeights:I},k={strides:n,pad:r,dataFormat:o,dilations:i,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Mn((L,H,G)=>{let W=_.runKernel(Bm,A,k);return G([H,L,W]),w&&(W=R(W,[W.shape[1],W.shape[2],W.shape[3]])),{value:W,gradFunc:P}})(m,p):Mn((L,H,G,W)=>{let X=_.runKernel(Bm,A,k);return W([H,L,X,G]),w&&(X=R(X,[X.shape[1],X.shape[2],X.shape[3]])),{value:X,gradFunc:P}})(m,p,C)}var $2=b({fusedDepthwiseConv2d_:h7});function m7({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:i="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(gl(_.state.gradientDepth,i)===!1){let U=Me(t,e,n,r);return o!=null&&(U=J(U,o)),ml(U,i,s,a)}let l=y(t,"a","fused matMul"),c=y(e,"b","fused matMul");[l,c]=xe(l,c);let u=n?l.shape[l.rank-2]:l.shape[l.rank-1],f=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?c.shape[c.rank-2]:c.shape[c.rank-1],w=l.shape.slice(0,-2),x=c.shape.slice(0,-2),C=Ce(w),I=Ce(x);S(u===f,()=>`Error in fused matMul: inner shapes (${u}) and (${f}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);let A=qe(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,m]),k=n?R(l,[C,u,p]):R(l,[C,p,u]),V=r?R(c,[I,m,f]):R(c,[I,f,m]),L;o!=null&&(L=y(o,"bias","fused matMul"),[L]=xe(L,l),qe(A,L.shape));let H;s!=null&&(H=y(s,"prelu weights","fused matMul"));let G=(U,fe)=>{let[ue,Pe,Ve,Et]=fe,It=pl(R(U,Ve.shape),Ve,i),mn,Xt;if(!n&&!r?(mn=Me(It,Pe,!1,!0),Xt=Me(ue,It,!0,!1)):!n&&r?(mn=Me(It,Pe,!1,!1),Xt=Me(It,ue,!0,!1)):n&&!r?(mn=Me(Pe,It,!1,!0),Xt=Me(ue,It,!1,!1)):(mn=Me(Pe,It,!0,!0),Xt=Me(It,ue,!0,!0)),o!=null){let ci=hl(Et,It);return[mn,Xt,ci]}else return[mn,Xt]},W={a:k,b:V,bias:L,preluActivationWeights:H},X={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return o==null?Mn((fe,ue,Pe)=>{let Ve=_.runKernel($m,W,X);return Pe([fe,ue,Ve]),{value:R(Ve,A),gradFunc:G}})(k,V):Mn((fe,ue,Pe,Ve)=>{let Et=_.runKernel($m,W,X);return Ve([fe,ue,Et,Pe]),{value:R(Et,A),gradFunc:G}})(k,V,L)}var j2=b({fusedMatMul_:m7});function g7(t){return Uc(t,.54,.46)}var B2=b({hammingWindow_:g7});function y7(t){return Uc(t,.5,.5)}var vg=b({hannWindow_:y7});function v7(t,e,n,r=!1,o=0){let i=0,s=[];for(;i+e<=t.size;)s.push(Ne(t,i,e)),i+=n;if(r)for(;i<t.size;){let a=i+e-t.size,l=lt([Ne(t,i,e-a),To([a],o)]);s.push(l),i+=n}return s.length===0?Ao([],[0,e]):R(lt(s),[s.length,e])}var bg=b({frame_:v7});function b7(t,e,n,r,o=vg){r==null&&(r=gg(e));let i=bg(t,e,n),s=$(i,o(e));return dl(s,r)}var H2=b({stft_:b7});function w7(t,e,n,r,o="bilinear",i=0){let s=y(t,"image","cropAndResize"),a=y(e,"boxes","cropAndResize","float32"),l=y(n,"boxInd","cropAndResize","int32"),c=a.shape[0];S(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),S(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),S(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),S(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),S(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);let u={image:s,boxes:a,boxInd:l},f={method:o,extrapolationValue:i,cropSize:r};return _.runKernel(G0,u,f)}var U2=b({cropAndResize_:w7});function _7(t){let e=y(t,"image","flipLeftRight","float32");S(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);let n={image:e};return _.runKernel(iE,n,{})}var z2=b({flipLeftRight_:_7});function E7(t){let e=y(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];S(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),S(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Ui(e,o)}var G2=b({grayscaleToRGB_:E7});function S7(t){let e=y(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];S(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),S(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o=e.dtype,i=pe(e,"float32"),s=on([.2989,.587,.114]),a;switch(e.rank){case 2:a=Bi("ij,j->i",i,s);break;case 3:a=Bi("ijk,k->ij",i,s);break;case 4:a=Bi("ijkl,l->ijk",i,s);break;case 5:a=Bi("ijklm,m->ijkl",i,s);break;case 6:a=Bi("ijklmn,n->ijklm",i,s);break;default:throw new Error("Not a valid tensor rank.")}return a=pn(a,-1),pe(a,o)}var W2=b({rgbToGrayscale_:S7});function x7(t,e,n=0,r=.5){let o=y(t,"image","rotateWithOffset","float32");S(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);let i={image:o},s={radians:e,fillValue:n,center:r};return _.runKernel(VS,i,s)}var q2=b({rotateWithOffset_:x7});function Qr(t,e,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);let s=t.shape[0];return n=Math.min(n,s),S(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),S(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),S(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),S(e.rank===1,()=>"scores must be a 1D tensor"),S(e.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${e.shape[0]}`),S(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}function C7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(t,"boxes","nonMaxSuppression","float32"),s=y(e,"scores","nonMaxSuppression","float32"),a=Qr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return _.runKernel(FE,{boxes:i,scores:s},l)}var K2=b({nonMaxSuppression_:C7});function Y2(t,e,n){let r=T7(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function T7(t,e,n){return D7(t,e,n||I7)}function I7(t,e){return t>e?1:t<e?-1:0}function D7(t,e,n){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);let a=n(e,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}function wg(t,e,n,r,o){return yT(t,e,n,r,o,0)}function _g(t,e,n,r,o,i){return yT(t,e,n,r,o,0,!1,i,!0)}function Eg(t,e,n,r,o,i){return yT(t,e,n,r,o,i,!0)}function yT(t,e,n,r,o,i,s=!1,a=!1,l=!1){let c=[];for(let C=0;C<e.length;C++)e[C]>o&&c.push({score:e[C],boxIndex:C,suppressBeginIndex:0});c.sort(X2);let u=i>0?-.5/i:0,f=[],p=[];for(;f.length<n&&c.length>0;){let C=c.pop(),{score:I,boxIndex:P,suppressBeginIndex:A}=C;if(I<o)break;let k=!1;for(let V=f.length-1;V>=A;--V){let L=N7(t,P,f[V]);if(L>=r){k=!0;break}if(C.score=C.score*A7(r,u,L),C.score<=o)break}C.suppressBeginIndex=f.length,k||(C.score===I?(f.push(P),p.push(C.score)):C.score>o&&Y2(c,C,X2))}let m=f.length,w=n-m;a&&w>0&&(f.push(...new Array(w).fill(0)),p.push(...new Array(w).fill(0)));let x={selectedIndices:f};return s&&(x.selectedScores=p),l&&(x.validOutputs=m),x}function N7(t,e,n){let r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),m=(a-i)*(l-s),w=(f-c)*(p-u);if(m<=0||w<=0)return 0;let x=Math.max(i,c),C=Math.max(s,u),I=Math.min(a,f),P=Math.min(l,p),A=Math.max(I-x,0)*Math.max(P-C,0);return A/(m+w-A)}function A7(t,e,n){let r=Math.exp(e*n*n);return n<=t?r:0}function X2(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}async function M7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){let i=y(t,"boxes","nonMaxSuppressionAsync"),s=y(e,"scores","nonMaxSuppressionAsync"),a=Qr(i,s,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:f}=wg(c,u,n,r,o);return i!==t&&i.dispose(),s!==e&&s.dispose(),on(f,"int32")}var Z2=M7;function k7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),l=Qr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i},f=_.runKernel(VE,c,u);return{selectedIndices:f[0],selectedScores:f[1]}}var Q2=b({nonMaxSuppressionWithScore_:k7});async function O7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=0){let s=y(t,"boxes","nonMaxSuppressionAsync"),a=y(e,"scores","nonMaxSuppressionAsync"),l=Qr(s,a,n,r,o,i);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,i=l.softNmsSigma;let c=await Promise.all([s.data(),a.data()]),u=c[0],f=c[1],{selectedIndices:p,selectedScores:m}=Eg(u,f,n,r,o,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:on(p,"int32"),selectedScores:on(m)}}var J2=O7;function R7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(t,"boxes","nonMaxSuppression"),a=y(e,"scores","nonMaxSuppression"),l=Qr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,p={boxes:s,scores:a},m={maxOutputSize:c,iouThreshold:u,scoreThreshold:f,padToMaxOutputSize:i},w=_.runKernel(LE,p,m);return{selectedIndices:w[0],validOutputs:w[1]}}var eP=b({nonMaxSuppressionPadded_:R7});async function P7(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,i=!1){let s=y(t,"boxes","nonMaxSuppressionAsync"),a=y(e,"scores","nonMaxSuppressionAsync"),l=Qr(s,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,f=l.scoreThreshold,[p,m]=await Promise.all([s.data(),a.data()]),{selectedIndices:w,validOutputs:x}=_g(p,m,c,u,f,i);return s!==t&&s.dispose(),a!==e&&a.dispose(),{selectedIndices:on(w,"int32"),validOutputs:ie(x,"int32")}}var tP=P7;function F7(t,e,n=!1,r=!1){let o=y(t,"images","resizeBilinear");S(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),S(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),S(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=_.runKernel(eS,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var nP=b({resizeBilinear_:F7});function L7(t,e,n=!1,r=!1){let o=y(t,"images","resizeNearestNeighbor");S(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),S(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),S(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),S(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=o,s=!1;o.rank===3&&(s=!0,i=R(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let[]=e,a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=_.runKernel(JE,a,l);return s?R(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var rP=b({resizeNearestNeighbor_:L7});function V7(t,e="binary",n=!1,r=.5){let o=y(t,"image","threshold"),i=.2989,s=.587,a=.114,l=o.shape[0]*o.shape[1],c=$(on([r]),255),u,f,p,m;if(S(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),S(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),S(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),S(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[u,f,p]=ai(o,[1,1,1],-1);let C=$(u,i),I=$(f,s),P=$(p,a);m=J(J(C,I),P)}else m=t;if(e==="otsu"){let C=Qd(pe(wf(m),"int32"),fn([]),256);c=$7(C,l)}let w=n?sl(m,c):oi(m,c);return pe($(w,255),"int32")}function $7(t,e){let n=on([-1]),r=on([0]),o=on([0]),i,s,a,l,c,u;for(let f=0;f<t.size-1;f++){i=Ne(t,0,f+1),s=Ne(t,f+1),c=De(Ke(i),e),u=De(Ke(s),e);let p=Ke($(i,Zr(0,i.size)));a=De(p,Ke(i));let m=To(s.shape,i.size),w=J(Zr(0,s.size),m),x=$(s,w);l=De(Ke(x),Ke(s));let C=se(a,l),I=se(a,l),P=$(c,u);o=$($(P,C),I);let A=oi(o,r);r=mr(A,o,r),n=mr(A,on([f]),n)}return n}var oP=b({threshold_:V7});function j7(t,e,n="nearest",r="constant",o=0,i){let s=y(t,"image","transform","float32"),a=y(e,"transforms","transform","float32");S(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),S(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),S(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);let l={image:s,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:i};return _.runKernel(kS,l,c)}var iP=b({transform_:j7});function B7(t,e,n){let r=y(t,"a","bandPart");S(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o=r.shape,[i,s]=r.shape.slice(-2),a,l;typeof e=="number"?(S(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),S(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=y(e<0?i:e,"numLower","bandPart")):(S(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=mr(jc(e,0),i,Ns(e,i))),typeof n=="number"?(S(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),S(n<=s,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`),l=y(n<0?s:n,"numUpper","bandPart")):(S(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=mr(jc(n,0),s,Ns(n,s)));let c=R(Zr(0,i,1,"int32"),[-1,1]),u=Zr(0,s,1,"int32"),f=se(c,u),p=Is(sl(f,a),rf(f,hn(l))),m=Do([i,s],r.dtype);return R(kn(yr(R(r,[-1,i,s])).map(w=>mr(p,w,m))),o)}var sP=b({bandPart_:B7});function H7(t){let e;if(Array.isArray(t)){e=!1,S(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let o=t[0].shape[0];for(let i=1;i<t.length;++i)S(t[i].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${o})`)}else e=!0,t=ai(t,t.shape[0],0).map(o=>Gn(o,[0]));S(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let n=[],r=t;for(let o=0;o<t.length;++o)n.push(_.tidy(()=>{let i=r[o];if(o>0)for(let s=0;s<o;++s){let a=$(Ke($(n[s],i)),n[s]);i=se(i,a)}return De(i,Ts(i,"euclidean"))}));return e?kn(n,0):n}var aP=b({gramSchmidt_:H7});function U7(t,e=!1){if(S(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return lP(t,e);{let n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=yr(R(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],i=[];r.forEach(l=>{let[c,u]=lP(l,e);o.push(c),i.push(u)});let s=R(kn(o,0),t.shape),a=R(kn(i,0),t.shape);return[s,a]}}function lP(t,e=!1){return _.tidy(()=>{S(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let n=t.shape[0],r=t.shape[1],o=ef(n),i=nr(t),s=Ao([[1]],[1,1]),a=nr(s),l=n>=r?r:n;for(let c=0;c<l;++c){let u=i,f=a,p=o;[a,i,o]=_.tidy(()=>{let m=Ne(i,[c,c],[n-c,1]),w=Ts(m),x=Ne(i,[c,c],[1,1]),C=mr(oi(x,0),Ao([[-1]]),Ao([[1]])),I=se(x,$(C,w)),P=De(m,I);P.shape[0]===1?a=nr(s):a=lt([s,Ne(P,[1,0],[P.shape[0]-1,P.shape[1]])],0);let A=hn(De(Me(C,I),w)),k=Ne(i,[c,0],[n-c,r]),V=$(A,a),L=fl(a);if(c===0)i=se(k,Me(V,Me(L,k)));else{let W=se(k,Me(V,Me(L,k)));i=lt([Ne(i,[0,0],[c,r]),W],0)}let H=fl(V),G=Ne(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=se(G,Me(Me(G,a),H));else{let W=se(G,Me(Me(G,a),H));o=lt([Ne(o,[0,0],[n,c]),W],1)}return[a,i,o]}),Ct([u,f,p])}return!e&&n>r&&(o=Ne(o,[0,0],[n,r]),i=Ne(i,[0,0],[r,r])),[o,i]})}var cP=b({qr_:U7});var Tt=(function(t){return t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",t})(Tt||{});function z7(t,e,n=Tt.SUM_BY_NONZERO_WEIGHTS){let r=y(t,"losses","computeWeightedLoss"),o=null;e!=null&&(o=y(e,"weights","computeWeightedLoss"));let i=o==null?r:$(r,o);if(n===Tt.NONE)return i;if(n===Tt.SUM)return Ke(i);if(n===Tt.MEAN){if(o==null)return Ds(i);{let s=r.size/o.size,a=De(Ke(i),Ke(o));return s>1?De(a,ie(s)):a}}if(n===Tt.SUM_BY_NONZERO_WEIGHTS){if(o==null)return De(Ke(i),ie(r.size));{let s=$(o,No(r.shape)),a=pe(Ke(hf(s,ie(0))),"float32");return De(Ke(i),a)}}throw Error(`Unknown reduction: ${n}`)}var xn=b({computeWeightedLoss_:z7});function G7(t,e,n,r=Tt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","absoluteDifference"),i=y(e,"predictions","absoluteDifference"),s=null;n!=null&&(s=y(n,"weights","absoluteDifference")),ft(o.shape,i.shape,"Error in absoluteDifference: ");let a=nn(se(o,i));return xn(a,s,r)}var uP=b({absoluteDifference_:G7});function W7(t,e,n,r,o=Tt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","cosineDistance"),s=y(e,"predictions","cosineDistance"),a=null;r!=null&&(a=y(r,"weights","cosineDistance")),ft(i.shape,s.shape,"Error in cosineDistance: ");let l=ie(1),c=se(l,Ke($(i,s),n,!0));return xn(c,a,o)}var dP=b({cosineDistance_:W7});function q7(t,e,n,r=Tt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","hingeLoss"),i=y(e,"predictions","hingeLoss"),s=null;n!=null&&(s=y(n,"weights","hingeLoss")),ft(o.shape,i.shape,"Error in hingeLoss: ");let a=ie(1);o=se($(ie(2),o),a);let l=Gi(se(a,$(o,i)));return xn(l,s,r)}var fP=b({hingeLoss_:q7});function K7(t,e,n,r=1,o=Tt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","huberLoss"),s=y(e,"predictions","huberLoss"),a=null;n!=null&&(a=y(n,"weights","huberLoss")),ft(i.shape,s.shape,"Error in huberLoss: ");let l=ie(r),c=nn(se(s,i)),u=Ns(c,l),f=se(c,u),p=J($(ie(.5),rn(u)),$(l,f));return xn(p,a,o)}var pP=b({huberLoss_:K7});function Y7(t,e,n,r=1e-7,o=Tt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"labels","logLoss"),s=y(e,"predictions","logLoss"),a=null;n!=null&&(a=y(n,"weights","logLoss")),ft(i.shape,s.shape,"Error in logLoss: ");let l=ie(1),c=ie(r),u=hn($(i,ii(J(s,c)))),f=$(se(l,i),ii(J(se(l,s),c))),p=se(u,f);return xn(p,a,o)}var hP=b({logLoss_:Y7});function X7(t,e,n,r=Tt.SUM_BY_NONZERO_WEIGHTS){let o=y(t,"labels","meanSquaredError"),i=y(e,"predictions","meanSquaredError"),s=null;n!=null&&(s=y(n,"weights","meanSquaredError")),ft(o.shape,i.shape,"Error in meanSquaredError: ");let a=Ef(o,i);return xn(a,s,r)}var mP=b({meanSquaredError_:X7});function Z7(t,e){let n=y(t,"labels","sigmoidCrossEntropyWithLogits"),r=y(e,"logits","sigmoidCrossEntropyWithLogits");ft(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let o=Gi(r),i=$(r,n),s=sf(Mr(hn(nn(r))));return J(se(o,i),s)}function Q7(t,e,n,r=0,o=Tt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"multiClassLabels","sigmoidCrossEntropy"),s=y(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","sigmoidCrossEntropy")),ft(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=ie(r),u=ie(1),f=ie(.5);i=J($(i,se(u,c)),$(f,c))}let l=Z7(i,s);return xn(l,a,o)}var gP=b({sigmoidCrossEntropy_:Q7});function J7(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Mn((o,i,s)=>{let l=lf(i,[n],!0),c=se(pe(i,"float32"),l);s([o,c]);let u=hn($(c,o));return{value:Ke(u,[n]),gradFunc:(m,w)=>{let[x,C]=w,I=Hi(m.shape,[n]);return[$(R(m,I),se(pe(x,"float32"),Mr(C))),$(R(m,I),se(Mr(C),pe(x,"float32")))]}}})(t,e)}function e9(t,e,n,r=0,o=Tt.SUM_BY_NONZERO_WEIGHTS){let i=y(t,"onehotLabels","softmaxCrossEntropy"),s=y(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=y(n,"weights","softmaxCrossEntropy")),ft(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=ie(r),u=ie(1),f=ie(i.shape[1]);i=J($(i,se(u,c)),De(c,f))}let l=J7(i,s);return xn(l,a,o)}var yP=b({softmaxCrossEntropy_:e9});function t9(t,e,n,r){let o=y(t,"indices","sparseFillEmptyRows","int32"),i=y(e,"values","sparseFillEmptyRows"),s=y(n,"denseShape","sparseFillEmptyRows","int32"),a=y(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let l={indices:o,values:i,denseShape:s,defaultValue:a},c=_.runKernel(bS,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}var vP=b({sparseFillEmptyRows_:t9});function n9(t,e,n){let r=y(t,"inputIndices","sparseReshape","int32"),o=y(e,"inputShape","sparseReshape","int32"),i=y(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);let s={inputIndices:r,inputShape:o,newShape:i},a=_.runKernel(wS,s);return{outputIndices:a[0],outputShape:a[1]}}var bP=b({sparseReshape_:n9});function r9(t,e,n){let r=y(t,"data","sparseSegmentMean"),o=y(e,"indices","sparseSegmentMean","int32"),i=y(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(_S,s)}var wP=b({sparseSegmentMean_:r9});function o9(t,e,n){let r=y(t,"data","sparseSegmentSum"),o=y(e,"indices","sparseSegmentSum","int32"),i=y(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);let s={data:r,indices:o,segmentIds:i};return _.runKernel(ES,s)}var _P=b({sparseSegmentSum_:o9});function i9(t,e,n,r,o,i,s,a){let l=y(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=y(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:o,rightPad:i,padWidth:s,preserveShortSequences:a},f={data:l,dataSplits:c},p=_.runKernel(IS,f,u);return{nGrams:p[0],nGramsSplits:p[1]}}var EP=b({stringNGrams_:i9});function s9(t,e,n=!0){let r=y(t,"input","stringSplit","string"),o=y(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);let i={skipEmpty:n},s={input:r,delimiter:o},a=_.runKernel(DS,s,i);return{indices:a[0],values:a[1],shape:a[2]}}var SP=b({stringSplit_:s9});function a9(t,e){let n=y(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");let o={input:n};return _.runKernel(NS,o,r)}var xP=b({stringToHashBucketFast_:a9});function l9(t,e,n,r=!0){let o=y(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return _.runKernel(CS,{x:o},i)}var CP=b({staticRegexReplace_:l9});var TP={fft:ul,ifft:Ms,rfft:dl,irfft:_f},IP={hammingWindow:B2,hannWindow:vg,frame:bg,stft:H2},ks={flipLeftRight:z2,grayscaleToRGB:G2,resizeNearestNeighbor:rP,resizeBilinear:nP,rgbToGrayscale:W2,rotateWithOffset:q2,cropAndResize:U2,nonMaxSuppression:K2,nonMaxSuppressionAsync:Z2,nonMaxSuppressionWithScore:Q2,nonMaxSuppressionWithScoreAsync:J2,nonMaxSuppressionPadded:eP,nonMaxSuppressionPaddedAsync:tP,threshold:oP,transform:iP},DP={bandPart:sP,gramSchmidt:aP,qr:cP},NP={absoluteDifference:uP,computeWeightedLoss:xn,cosineDistance:dP,hingeLoss:fP,huberLoss:pP,logLoss:hP,meanSquaredError:mP,sigmoidCrossEntropy:gP,softmaxCrossEntropy:yP},AP={sparseFillEmptyRows:vP,sparseReshape:bP,sparseSegmentMean:wP,sparseSegmentSum:_P},MP={stringNGrams:EP,stringSplit:SP,stringToHashBucketFast:xP,staticRegexReplace:CP};var wT={};Ge(wT,{Serializable:()=>If,SerializationMap:()=>Sg,getRegisteredName:()=>u9,registerClass:()=>bT});var c9=new Map,vT=new Map,If=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},Sg=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function bT(t,e,n){S(t.className!=null,()=>"Class being registered does not have the static className property defined."),S(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),S(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);let r=n,o=e+">"+r;return Sg.register(t),c9.set(o,t),vT.set(t,o),t}function u9(t){return vT.has(t)?vT.get(t):t.className}var On=class extends If{minimize(e,n=!1,r){let{value:o,grads:i}=this.computeGradients(e,r);if(r!=null){let s=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(s)}else this.applyGradients(i);return Ct(i),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return lg(e,n)}dispose(){this.iterations_!=null&&Ct(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ie(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(On,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var Os=class extends On{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:oe(()=>zt(i).variable(s))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:oe(()=>zt(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;oe(()=>{let u=J($(l,this.rho),$(rn(a),1-this.rho)),f=$(De(zn(J(c,this.epsilon)),zn(J(l,this.epsilon))),a),p=J($(c,this.rho),$(rn(f),1-this.rho));l.assign(u),c.assign(p);let m=J($(f,-this.learningRate),i);i.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Ct(this.accumulatedGrads.map(e=>e.variable)),Ct(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}};var Rs=class extends On{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:oe(()=>To(i.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;let a=this.accumulatedGrads[o].variable;oe(()=>{let l=J(a,rn(s));a.assign(l);let c=J($(De(s,zn(J(l,_.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Ct(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}};var Ps=class extends On{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],oe(()=>{this.accBeta1=ie(n).variable(),this.accBeta2=ie(r).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{let r=se(1,this.accBeta1),o=se(1,this.accBeta2);n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:oe(()=>zt(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${i}/v`,variable:oe(()=>zt(a).variable(l))});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedSecondMoment[s].variable,p=J($(u,this.beta1),$(c,1-this.beta1)),m=J($(f,this.beta2),$(rn(c),1-this.beta2)),w=De(p,r),x=De(m,o);u.assign(p),f.assign(m);let C=J($(De(w,J(zn(x),this.epsilon)),-this.learningRate),a);a.assign(C)}),this.accBeta1.assign($(this.accBeta1,this.beta1)),this.accBeta2.assign($(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Ct(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),oe(()=>{this.accBeta1.assign(ri(this.beta1,this.iterations_+1)),this.accBeta2.assign(ri(this.beta2,this.iterations_+1))});let n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}};var Fs=class extends On{static get className(){return"Adamax"}constructor(e,n,r,o=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],oe(()=>{this.iteration=ie(0).variable(),this.accBeta1=ie(n).variable()}),o==null&&(this.epsilon=_.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{let r=se(1,this.accBeta1),o=De(-this.learningRate,J($(this.iteration,this.decay),1));n.forEach((i,s)=>{let a=_.registeredVariables[i],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${i}/m`,variable:zt(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${i}/v`,variable:zt(a).variable(l)});let c=Array.isArray(e)?e[s].tensor:e[i];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,f=this.accumulatedWeightedInfNorm[s].variable,p=J($(u,this.beta1),$(c,1-this.beta1)),m=$(f,this.beta2),w=nn(c),x=ff(m,w);u.assign(p),f.assign(x);let C=J($(De(o,r),De(p,J(x,this.epsilon))),a);a.assign(C)}),this.iteration.assign(J(this.iteration,1)),this.accBeta1.assign($(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Ct(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Ct(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}};var li=class extends On{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;let s=_.registeredVariables[r];oe(()=>{let a=J($(this.c,i),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Un(ie(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}};var Ls=class extends li{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ie(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:oe(()=>zt(i).variable(!1))});let s=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&oe(()=>{let l,c=J($(this.m,s),a);this.useNesterov?l=J($(this.c,J(a,$(c,this.m))),i):l=J($(this.c,c),i),s.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Ct(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}};var Vs=class extends On{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,o==null&&(this.epsilon=_.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{let i=_.registeredVariables[r],s=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:oe(()=>zt(i).variable(s))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:oe(()=>zt(i).variable(s))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:oe(()=>zt(i).variable(s))});let a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;let l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;oe(()=>{let u=J($(l,this.decay),$(rn(a),1-this.decay));if(this.centered){let f=this.accumulatedMeanGrads[o].variable,p=J($(f,this.decay),$(a,1-this.decay)),m=De($(a,this.learningRate),zn(se(u,J(rn(p),this.epsilon)))),w=J($(c,this.momentum),m);l.assign(u),f.assign(p),c.assign(w);let x=se(i,w);i.assign(x)}else{let f=J($(l,this.decay),$(rn(a),1-this.decay)),p=J($(c,this.momentum),De($(a,this.learningRate),zn(J(f,this.epsilon))));l.assign(f),c.assign(p);let m=se(i,p);i.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Ct(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Ct(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Ct(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);let n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}};var d9=[Os,Rs,Ps,Fs,Ls,Vs,li];function kP(){for(let t of d9)bT(t)}var zc={};Ge(zc,{CompositeArrayBuffer:()=>En,browserFiles:()=>RP,browserHTTPRequest:()=>$P,concatenateArrayBuffers:()=>AR,copyModel:()=>zR,decodeWeights:()=>eg,decodeWeightsStream:()=>tg,encodeWeights:()=>TR,fromMemory:()=>jP,fromMemorySync:()=>IT,getLoadHandlers:()=>RR,getModelArtifactsForJSON:()=>Oc,getModelArtifactsForJSONSync:()=>nx,getModelArtifactsInfoForJSON:()=>ei,getSaveHandlers:()=>OR,getWeightSpecs:()=>zd,http:()=>Cg,isHTTPScheme:()=>xg,listModels:()=>HR,loadWeights:()=>FP,moveModel:()=>GR,registerLoadRouter:()=>kR,registerSaveRouter:()=>MR,removeModel:()=>UR,weightsLoaderFactory:()=>CT,withSaveHandler:()=>BP,withSaveHandlerSync:()=>HP});var f9="model",p9=".json",h9=".weights.bin";function OP(t){return new Promise(e=>setTimeout(e)).then(t)}var _T=(()=>{class t{constructor(n){if(!ne().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(t.URL_SCHEME)&&(n=n.slice(t.URL_SCHEME.length)),(n==null||n.length===0)&&(n=f9),this.modelJsonFileName=n+p9,this.weightDataFileName=n+h9}async save(n){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=En.join(n.weightData),o=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let i=[{paths:["./"+this.weightDataFileName],weights:n.weightSpecs}],s=ng(n,i),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,await OP(()=>l.dispatchEvent(new MouseEvent("click"))),n.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=o,await OP(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ei(n)}}}}return t.URL_SCHEME="downloads://",t})();var ET=class{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{let r=new FileReader;r.onload=o=>{let i=JSON.parse(o.target.result),s=i.modelTopology;if(s==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:s});return}let l=Oc(i,c=>this.loadWeights(c));e(l)},r.onerror=o=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){let n=[],r=[];for(let s of e)n.push(...s.weights),r.push(...s.paths);let o=this.checkManifestAndWeightFiles(e),i=r.map(s=>this.loadWeightsFile(s,o[s]));return Promise.all(i).then(s=>[n,s])}loadWeightsFile(e,n){return new Promise((r,o)=>{let i=new FileReader;i.onload=s=>{let a=s.target.result;r(a)},i.onerror=s=>o(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){let n=[],r=this.weightsFiles.map(i=>tx(i.name)),o={};for(let i of e)i.paths.forEach(s=>{let a=tx(s);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);o[s]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return o}},m9=t=>ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_T.URL_SCHEME)?g9(t.slice(_T.URL_SCHEME.length)):null;tn.registerSaveRouter(m9);function g9(t="model"){return new _T(t)}function RP(t){return new ET(t)}function ST(t,e,n,r){s(t),n=n??0,r=r??1,a(n,r);let o=0,i=l=>(l.then(c=>{let u=n+ ++o/t.length*(r-n);return e(u),c}),l);function s(l){S(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){S(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),S(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),S(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}async function xT(t,e){e==null&&(e={});let n=e.fetchFunc==null?ne().platform.fetch:e.fetchFunc,r=t.map(f=>n(f,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await ST(r,e.onProgress,0,.5)).map(f=>f.arrayBuffer());return e.onProgress==null?await Promise.all(a):await ST(a,e.onProgress,.5,1)}function PP(t,e){var n;let r=e.fetchFunc==null?ne().platform.fetch:e.fetchFunc,o=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async s=>{for(var a;o<t.length;){i||(i=(await r(t[o],e.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=await i.read();if(l){o++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,o/t.length);continue}s.enqueue(c);return}s.close()}})}async function FP(t,e="",n,r){return CT(s=>xT(s,{requestInit:r}))(t,e,n)}function CT(t){return async(e,n="",r)=>{let o=e.map(()=>!1),i={},s=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((m,w)=>{let x=0;m.weights.forEach(C=>{let I="quantization"in C?C.quantization.dtype:C.dtype,P=Li[I]*Ce(C.shape),A=()=>{o[w]=!0,i[w]==null&&(i[w]=[]),i[w].push({manifestEntry:C,groupOffset:x,sizeBytes:P})};r!=null?r.forEach((k,V)=>{k===C.name&&(A(),s[V]=!0)}):A(),a.push(C.name),x+=P})}),!s.every(m=>m)){let m=r.filter((w,x)=>!s[x]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=o.reduce((m,w,x)=>(w&&m.push(x),m),[]),c=[];l.forEach(m=>{e[m].paths.forEach(w=>{let x=n+(n.endsWith("/")?"":"/")+w;c.push(x)})});let u=await t(c),f={},p=0;return l.forEach(m=>{let w=e[m].paths.length,x=new En(u.slice(p,p+w));i[m].forEach(I=>{let P=x.slice(I.groupOffset,I.groupOffset+I.sizeBytes),A=eg(P,[I.manifestEntry]);for(let k in A)f[k]=A[k]}),p+=w}),f}}var y9="application/octet-stream",v9="application/json",LP=(()=>{class t{constructor(n,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.weightUrlConverter=r.weightUrlConverter,r.fetchFunc!=null?(S(typeof r.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=r.fetchFunc):this.fetch=ne().platform.fetch,S(n!=null&&n.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(n)&&S(n.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${n.length}).`),this.path=n,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{},this.loadOptions=r}async save(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);r.body=new FormData;let o=[{paths:["./model.weights.bin"],weights:n.weightSpecs}],i=ng(n,o);if(r.body.append("model.json",new Blob([JSON.stringify(i)],{type:v9}),"model.json"),n.weightData!=null){let a=En.join(n.weightData);r.body.append("model.weights.bin",new Blob([a],{type:y9}),"model.weights.bin")}let s=await this.fetch(this.path,r);if(s.ok)return{modelArtifactsInfo:ei(n),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)}async loadModelJSON(){let n=await this.fetch(this.path,this.requestInit);if(!n.ok)throw new Error(`Request to ${this.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);let r;try{r=await n.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let o=r.modelTopology,i=r.weightsManifest;if(o==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return r}async load(){if(this.loadOptions.streamWeights)return this.loadStream();let n=await this.loadModelJSON();return Oc(n,r=>this.loadWeights(r))}async loadStream(){let n=await this.loadModelJSON(),r=await this.getWeightUrls(n.weightsManifest),o=zd(n.weightsManifest),i=()=>PP(r,this.loadOptions);return Object.assign(Object.assign({},n),{weightSpecs:o,getWeightStream:i})}async getWeightUrls(n){let r=Array.isArray(this.path)?this.path[1]:this.path,[o,i]=b9(r),s=this.weightPathPrefix||o,a=[],l=[];for(let c of n)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+i);return this.weightUrlConverter&&a.push(...await Promise.all(l)),a}async loadWeights(n){let r=await this.getWeightUrls(n),o=zd(n),i=await xT(r,this.loadOptions);return[o,i]}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function b9(t){let e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}function xg(t){return t.match(LP.URL_SCHEME_REGEX)!=null}var VP=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>xg(r)):n=xg(t),n)return Cg(t,e)}return null};tn.registerSaveRouter(VP);tn.registerLoadRouter(VP);function Cg(t,e){return new LP(t,e)}function $P(t,e){return Cg(t,e)}var Df=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},Tg=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},TT=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}};function jP(t,e,n,r){let o=arguments;return new TT(IT(...o))}function IT(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new Df(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Df({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Df({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function BP(t){return new Tg(t)}function HP(t){return new Tg(t)}var DT={};Ge(DT,{confusionMatrix:()=>UP});function w9(t,e,n){let r=y(t,"labels","confusionMatrix"),o=y(e,"predictions","confusionMatrix");S(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),S(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),S(o.rank===1,()=>`Expected the rank of predictions to be 1, but got ${o.rank}`),S(r.shape[0]===o.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${o.shape[0]}. Labels and predictions should have the same number of elements.`),S(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let i=As(pe(r,"int32"),n),s=As(pe(o,"int32"),n),a=fl(i),l=Me(a,s);return pe(l,"int32")}var UP=b({confusionMatrix_:w9});var Mo={};Ge(Mo,{draw:()=>D9,fromPixels:()=>N9,fromPixelsAsync:()=>C9,toPixels:()=>I9});var yl,zP=!1;function GP(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,o=!1,i=!1,s=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(za(Vm,_.backendName)!=null){let w={pixels:t},x={numChannels:e};return _.runKernel(Vm,w,x)}let[c,u]=o?[t.videoWidth,t.videoHeight]:[t.width,t.height],f;if(s)f=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)f=t.data;else if(i||o||a){if(yl==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")yl=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else yl=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});yl.canvas.width=c,yl.canvas.height=u,yl.drawImage(t,0,0,c,u),f=yl.getImageData(0,0,c,u).data}let p;if(e===4)p=new Int32Array(f);else{let w=c*u;p=new Int32Array(w*e);for(let x=0;x<w;x++)for(let C=0;C<e;++C)p[x*e+C]=f[x*4+C]}return xf(p,[u,c,e],"int32")}function _9(t){return t!=null&&t.data instanceof Uint8Array}function E9(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function S9(t){return t!=null&&t.width!==0&&t.height!==0}function x9(t){return E9()&&!(t instanceof ImageBitmap)&&S9(t)&&!_9(t)}async function C9(t,e=3){let n=null;if(ne().getBool("WRAP_TO_IMAGEBITMAP")&&x9(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return GP(n,e)}function WP(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);let e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function T9(t){let e=t?.alpha||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function I9(t,e){let n=y(t,"img","toPixels");if(!(t instanceof Ie)){let c=n;n=pe(c,"int32"),c.dispose()}WP(n);let[r,o]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],s=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(o*r*4);for(let c=0;c<r*o;++c){let u=[0,0,0,255];for(let p=0;p<i;p++){let m=s[c*i+p];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);i===1?(u[0]=m*a,u[1]=m*a,u[2]=m*a):u[p]=m*a}let f=c*4;l[f+0]=Math.round(u[0]),l[f+1]=Math.round(u[1]),l[f+2]=Math.round(u[2]),l[f+3]=Math.round(u[3])}if(e!=null){zP||za(Lm,_.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),zP=!0),e.width=o,e.height=r;let c=e.getContext("2d"),u=new ImageData(l,o,r);c.putImageData(u,0,0)}return n!==t&&n.dispose(),l}function D9(t,e,n){let r=y(t,"img","draw");if(!(t instanceof Ie)){let s=r;r=pe(s,"int32"),s.dispose()}WP(r),T9(n?.imageOptions);let o={image:r},i={canvas:e,options:n};_.runKernel(Lm,o,i)}var N9=b({fromPixels_:GP});var NT={};Ge(NT,{prepareAndValidate:()=>qP});function qP(t,e){let n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Ce(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let o=e.shape,i=o[o.length-1],s=1;for(let f=0;f<o.length-1;++f)s*=o[f];let a=t.shape,l=o.slice();l.pop();let c=1;for(let f=i;f<n;++f)c*=a[f],l.push(a[f]);let u=[...Zo(t.shape).map(f=>f/c),1].slice(0,i);return[l,s,c,u]}var Nf={};Ge(Nf,{assertParamsValid:()=>M9,computeFlatOffset:()=>F9,computeOutShape:()=>O9,getNormalizedAxes:()=>R9,isSliceContinous:()=>P9,maskToAxes:()=>k9,parseSliceParams:()=>L9,sliceInfo:()=>V9,startForAxis:()=>tF,startIndicesWithElidedDims:()=>QP,stopForAxis:()=>nF,stopIndicesWithElidedDims:()=>JP,stridesForAxis:()=>eF,stridesWithElidedDims:()=>YP});var AT=-2,A9=-1;function M9(t,e,n){let r=t.shape.length;S(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),S(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)S(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function k9(t){let e=[],n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function O9(t,e,n){let r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function YP(t,e,n,r){let o=[...t];for(let i=o.length;i<r.length;i++)o.push(1);for(let i=0;i<n;i++)i===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function XP(t,e,n){return n<=t?n:n-(e-1)}function ZP(t,e){let n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function R9(t,e,n,r,o,i,s,a,l){let c=t.length,u=new Array(c),f=new Array(c),p=new Array(c);if(e.length&&n>0){let m=e[0],w=n+1;u=QP(s,m,w,r,t),f=JP(a,m,w,o,t),p=YP(i,m,w,t)}else for(let m=0;m<c;m++)u[m]=tF(s,r,i,t,m,l),f[m]=nF(a,o,i,t,m,l),p[m]=eF(i,m,l);return{begin:u,end:f,strides:p}}function QP(t,e,n,r,o){let i=[...o],s=ZP(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=0;else{let l=XP(e,n,a),c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function JP(t,e,n,r,o){let i=[...o],s=ZP(n,e);for(let a=0;a<i.length;a++)if(s.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{let l=XP(e,n,a),c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){let l=o[a];i[a]<0&&(i[a]+=l),i[a]=Ec(0,i[a],o[a])}return i}function eF(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function tF(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),s=Ec(0,s,l-1),s}function nF(t,e,n,r,o,i){let s=e[o],a=n[o]||1;(t&1<<o||i&1<<o||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=r[o];return s<0&&(s+=l),a>0?s=Ec(0,s,l):s=Ec(-1,s,l-1),s}function P9(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function F9(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function L9(t,e,n){let r,o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(s=>{S(s!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(o).fill(-1):typeof n=="number"?i=[n,...new Array(o-1).fill(-1)]:n.length<o?i=n.concat(new Array(o-n.length).fill(-1)):i=n,i=i.map((s,a)=>s>=0?s:(S(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function V9(t,e,n,r,o,i,s,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,f={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:i,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let A=0;A<f.dims;A++)u&&(1<<A&a)!==0&&f.numAddAxisAfterEllipsis++,1<<A&s&&(u=!0);u||(f.ellipsisMask|=1<<f.dims,f.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};$9(f,p);let m=!0,w=!0,x=!0,C=[],I=[];for(let A=0;A<t.length;++A){if(p.strides[A]===0)throw Error(`strides[${A}] must be non-zero`);let k=!!(p.shrinkAxisMask&1<<A),V=t[A];if(V===-1){C.push(k?1:-1);continue}let L=[p.beginMask&1<<A,p.endMask&1<<A],H=[p.strides[A]>0?0:-1,p.strides[A]>0?V:V-1];if(k&&p.strides[A]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[A]===1;let G=!!(p.beginMask&1<<A&&p.endMask&1<<A);if(p.beginValid&&p.endValid){if(k){let fe=p.begin[A]<0?V+p.begin[A]:p.begin[A];if(p.begin[A]=fe,p.end[A]=p.begin[A]+1,fe<0||fe>=V)throw Error(`slice index ${p.begin[A]} of dimension ${A} out of bounds.`)}else p.begin[A]=KP(p.begin[A],0,p.strides[A],V,L,H),p.end[A]=KP(p.end[A],1,p.strides[A],V,L,H);let U=p.strides[A]===1&&p.begin[A]===0&&p.end[A]===V;m=m&&U,w=w&&(A===0&&p.strides[A]===1||U)}else m=m&&p.strides[A]===1&&G,w=w&&(A===0&&p.strides[A]===1||G);let W,X=!1;if(p.beginValid&&p.endValid?(W=p.end[A]-p.begin[A],X=!0):k?(W=1,X=!0):G&&V>=0&&(p.strides[A]<0?W=-V:W=V,X=!0),X){let U;W===0||W<0!=p.strides[A]<0?U=0:U=Math.trunc(W/p.strides[A])+(W%p.strides[A]!==0?1:0),C.push(U)}else C.push(-1)}for(let A=0;A<p.finalShapeGatherIndices.length;++A){let k=p.finalShapeGatherIndices[A];k>=0?I.push(C[k]):k===AT&&I.push(1)}return{finalShapeSparse:I.filter((A,k)=>p.finalShapeGatherIndices[k]!==AT),finalShape:I,isIdentity:m,sliceDim0:w,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function $9(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){let o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(AT),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(A9),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function KP(t,e,n,r,o,i){if(o[e])return n>0?i[e]:i[e+1&1];{let s=t<0?r+t:t;return s<i[0]?i[0]:s>i[1]?i[1]:s}}var rF="4.22.0";var Gc=class{static sgd(e){return new li(e)}static momentum(e,n,r=!1){return new Ls(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,i=!1){return new Vs(e,n,r,o,i)}static adam(e=.001,n=.9,r=.999,o=null){return new Ps(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new Os(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,i=0){return new Fs(e,n,r,o,i)}static adagrad(e,n=.1){return new Rs(e,n)}};var j9=Gc;var B9=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function oF(){return new Promise(t=>B9(()=>t()))}var OT={};Ge(OT,{ERF_A1:()=>oK,ERF_A2:()=>iK,ERF_A3:()=>sK,ERF_A4:()=>aK,ERF_A5:()=>lK,ERF_P:()=>rK,PARALLELIZE_THRESHOLD:()=>Ig,RowPartitionType:()=>Wi,SELU_SCALE:()=>nK,SELU_SCALEALPHA:()=>tK,applyActivation:()=>ml,assertAndGetBroadcastShape:()=>qe,assertAxesAreInnerMostDims:()=>A6,assertParamsConsistent:()=>H9,assignToTypedArray:()=>hK,axesAreInnerMostDims:()=>Qx,calculateShapes:()=>C2,checkEinsumDimSizes:()=>wK,checkPadOnDimRoundingMode:()=>Vt,combineLocations:()=>e2,combineRaggedTensorToTensorShapes:()=>z9,complexWithEvenIndex:()=>dK,complexWithOddIndex:()=>fK,computeConv2DInfo:()=>nl,computeConv3DInfo:()=>YR,computeDefaultPad:()=>Ex,computeDilation2DInfo:()=>D5,computeOptimalWindowSize:()=>K9,computeOutAndReduceShapes:()=>N6,computeOutShape:()=>U9,computePool2DInfo:()=>_x,computePool3DInfo:()=>N5,convertConv2DDataFormat:()=>XR,decodeEinsumEquation:()=>vK,eitherStridesOrDilationsAreOne:()=>An,expandShapeToKeepDim:()=>Hi,exponent:()=>gK,exponents:()=>mK,fromStringArrayToUint8:()=>BK,fromUint8ToStringArray:()=>jK,getAxesPermutation:()=>M6,getBroadcastDims:()=>JR,getComplexWithIndex:()=>pK,getEinsumComputePath:()=>_K,getEinsumPermutation:()=>bK,getFusedBiasGradient:()=>hl,getFusedDyActivation:()=>pl,getImageCenter:()=>Y9,getInnerMostAxes:()=>O6,getPermuted:()=>Z9,getRaggedRank:()=>W9,getReductionAxes:()=>ag,getReshaped:()=>X9,getReshapedPermuted:()=>Q9,getRowPartitionTypesHelper:()=>G9,getSliceBeginCoords:()=>J9,getSliceSize:()=>eK,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>CK,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>TK,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>IK,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>AK,getSparseReshapeInputOutputMismatchErrorMessage:()=>kK,getSparseReshapeInputOutputMultipleErrorMessage:()=>MK,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>DK,getSparseReshapeNegativeOutputDimErrorMessage:()=>NK,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>FK,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>OK,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>RK,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>PK,getUndoAxesPermutation:()=>k6,isIdentityPermutation:()=>EK,log:()=>nW,mergeRealAndImagArrays:()=>cK,prepareAndValidate:()=>qP,prepareSplitSize:()=>xK,segment_util:()=>kT,shouldFuse:()=>gl,slice_util:()=>Nf,splitRealAndImagArrays:()=>uK,stridesOrDilationsArePositive:()=>ti,tupleValuesAreOne:()=>tl,upcastType:()=>Xa,validateDefaultValueShape:()=>q9,validateInput:()=>Hc,validateUpdateShape:()=>cT,warn:()=>Qo});function H9(t,e){let n=t[0].length;t.forEach((o,i)=>{S(o.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),S(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=t[0];t.forEach((o,i)=>{for(let s=0;s<n;s++)S(s===e||o[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function U9(t,e){let n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}var Wi=(function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t})(Wi||{});function z9(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){let i=n[o],s=r[r.length-n.length+o],a=r[s];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${i} but shape[${o+t}] = ${a}`)}else r[s]=i}return r}function G9(t){let e={FIRST_DIM_SIZE:Wi.FIRST_DIM_SIZE,VALUE_ROWIDS:Wi.VALUE_ROWIDS,ROW_LENGTHS:Wi.ROW_LENGTHS,ROW_SPLITS:Wi.ROW_SPLITS,ROW_LIMITS:Wi.ROW_LIMITS,ROW_STARTS:Wi.ROW_STARTS},n=[];for(let r of t)if(r in e)n.push(e[r]);else break;return n}function W9(t){return t.length===0?0:t[0]===Wi.FIRST_DIM_SIZE?t.length-1:t.length}function q9(t,e){if(t==null||e==null)return;let n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){let i=t[o],s=e[o+1];if(i>=0&&s>=0&&i!==1&&i!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${i} but ragged tensor input.flatValues.shape[${o-t.length}] = ${s}`)}}var Ig=30;function K9(t){return t<=Ig?t:xc(t,Math.floor(Math.sqrt(t)))}function Y9(t,e,n){let r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}function X9(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);let i=e.length;for(let s=0;s<i;++s)o=o.concat([t[s+1]/e[s],e[s]]);o=o.concat(t.slice(i+1))}return o}function Z9(t,e,n=!0){let r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{let o=[],i=[];for(let s=1;s<t;++s)s>=e*2+1||s%2===1?i.push(s):o.push(s);r.push(...o),r.push(0),r.push(...i)}return r}function Q9(t,e,n,r=!0){let o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?o.push(e[i-1]*t[i]):o.push(t[i]/e[i-1]):o.push(t[i]);return o}function J9(t,e){let n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function eK(t,e,n){let r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}var tK=1.7580993408473768,nK=1.0507009873554805;var rK=.3275911,oK=.254829592,iK=-.284496736,sK=1.421413741,aK=-1.453152027,lK=1.061405429;function cK(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);let n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function uK(t){let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function dK(t){let e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function fK(t){let e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function pK(t,e){let n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function hK(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function mK(t,e){let n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){let i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function gK(t,e,n){let r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),i=Math.sin(r);return{real:o,imag:i}}var MT="->",yK=/->/g,iF=",",sF="...";function vK(t,e){t=t.replace(/\s/g,"");let n=(t.length-t.replace(yK,"").length)/MT.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${MT}").`);let[r,o]=t.split(MT);S(r.indexOf(sF)===-1,()=>`The ellipsis notation ("${sF}") is not supported yet.`);let i=r.split(iF),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<o.length;++p){let m=o[p];if(!i.some(w=>w.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let p=0;p<r.length;++p){let m=r[p];a.indexOf(m)===-1&&m!==iF&&a.push(m)}let l=new Array(i.length);for(let p=0;p<s;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let m=0;m<i[p].length;++m)l[p].push(a.indexOf(i[p][m]))}let c=a.length,u=o.length,f=[];for(let p=u;p<c;++p)f.push(p);return{allDims:a,summedDims:f,idDims:l}}function bK(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;let r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function wK(t,e,n){let r=new Array(t);for(let o=0;o<n.length;++o){let i=n[o].shape;for(let s=0;s<e[o].length;++s)r[e[o][s]]===void 0?r[e[o][s]]=i[s]:S(r[e[o][s]]===i[s],()=>`Expected dimension ${r[e[o][s]]} at axis ${s} of input shaped ${JSON.stringify(i)}, but got dimension ${i[s]}`)}}function _K(t,e){let n=t,r=[],o=0;t.length===0&&n.push(-1),o=t.length+1;for(let s=0;s<o;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let a=n[s],l=SK(e,a);for(let c of l)i.indexOf(c)===-1&&(r[s].push(c),i.push(c))}return{path:n,steps:r}}function EK(t){return t.every((e,n)=>e===n)}function SK(t,e){let n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function xK(t,e,n=0){let r=[];if(typeof e=="number")S(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{let o=e.reduce((s,a)=>(a===-1&&(s+=1),s),0);S(o<=1,()=>"There should be only one negative value in split array.");let i=e.indexOf(-1);if(i!==-1){let s=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-s}S(t.shape[n]===e.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}function CK(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function TK(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function IK(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function DK(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function NK(t,e){return`size ${t} must be non-negative, not ${e}`}function AK(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function MK(t,e){let n=Ce(t),r=Ce(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function kK(t,e){let n=Ce(t),r=Ce(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}function OK(){return"segment ids must be >= 0"}function RK(){return"segment ids are not increasing"}function PK(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function FK(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}var kT={};Ge(kT,{collectGatherOpShapeInfo:()=>$K,computeOutShape:()=>VK,segOpComputeOptimalWindowSize:()=>LK});function LK(t,e){let n=!1,r;for(t<=Ig?(r=t,n=!0):r=xc(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=xc(t,r+1);return r}function VK(t,e,n){let r=[],o=t.length;for(let i=0;i<o;i++)i!==e?r.push(t[i]):r.push(n);return r}function $K(t,e,n,r){let o=e.shape.length,i=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let f=0;f<r;++f)if(t.shape[f]!==e.shape[f])throw new Error(`x.shape[${f}]: ${t.shape[f]} should be equal to indices.shape[${f}]: ${e.shape[f]}.`);let s=t.shape[n],a=[],l=1,c=1,u=1;for(let f=0;f<r;++f)a.push(t.shape[f]),l*=t.shape[f];for(let f=r;f<n;f++)a.push(t.shape[f]),c*=t.shape[f];for(let f=r;f<o;f++)a.push(e.shape[f]);for(let f=n+1;f<i;f++)a.push(t.shape[f]),u*=t.shape[f];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function jK(t){try{return t.map(e=>Mc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function BK(t){return t.map(e=>Es(e))}var RT={};Ge(RT,{nonMaxSuppressionV3Impl:()=>wg,nonMaxSuppressionV4Impl:()=>_g,nonMaxSuppressionV5Impl:()=>Eg,whereImpl:()=>mg});kP();var HK=ne();HK.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var vr=(function(t){return t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF",t})(vr||{}),aF;(function(t){let e;(function(n){n[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"})(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(aF||(aF={}));var zK={};function Dg(t){return zK[t]}function g(t,e,n,r,o){let i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){let a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return $t(e.inputNames[c],n,r,o);if(i.type==="tensors"){let p=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((w,x)=>{var C;return((C=p[x])===null||C===void 0?void 0:C.op)!=="NoOp"}).map(w=>$t(w,n,r,o))}let u=$t(e.inputNames[c],n,r,o),f=u.dataSync();return i.type==="number"?f[0]:j.toNestedArray(u.shape,f)}let s=e.attrParams[t];return s&&s.value}function $t(t,e,n,r){let[o,i]=Wn(t,n);if(r!=null){let a=r.getHashTableHandleByName(o);if(a!=null)return a}let s=n.currentContextIds.find(a=>!!e[Ng(o,a)]);return s!==void 0?e[Ng(o,s)][i]:void 0}function PT(t,e,n){return e[Ng(t,n.currentContextId)]}function ko(t,e){let[n,r,o]=Wn(t,e);return[Ng(n,e&&e.currentContextId),r,o]}function Ng(t,e){return e?`${t}-${e}`:t}function Wn(t,e){if(t==="")return["",0,void 0];let n=e!=null&&e.parseNodeNameCache!=null;if(n){let i=e.parseNodeNameCache.get(t);if(i!=null)return i}let r=t.split(":"),o;if(r.length===1)o=[t,0,void 0];else{let i=r[0],s=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);o=[i,a,s]}return n&&e.parseNodeNameCache.set(t,o),o}function Mf(t,e,n){let r=g("pad",t,e,n);if(r==="explicit"){r=g("explicitPaddings",t,e,n);let o=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)o[i][0]=r[i*2],o[i][1]=r[i*2+1];return o}return r}function Oo(t){return t.kept?t:nr(t)}var FT={};Ge(FT,{json:()=>GK});var GK=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var LT={};Ge(LT,{json:()=>WK});var WK=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var VT={};Ge(VT,{json:()=>qK});var qK=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}];var $T={};Ge($T,{json:()=>KK});var KK=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}];var jT={};Ge(jT,{json:()=>YK});var YK=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}];var BT={};Ge(BT,{json:()=>XK});var XK=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}];var HT={};Ge(HT,{json:()=>ZK});var ZK=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}];var UT={};Ge(UT,{json:()=>QK});var QK=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}];var zT={};Ge(zT,{json:()=>JK});var JK=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var GT={};Ge(GT,{json:()=>eY});var eY=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}];var WT={};Ge(WT,{json:()=>tY});var tY=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}];var qT={};Ge(qT,{json:()=>nY});var nY=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}];var KT={};Ge(KT,{json:()=>rY});var rY=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}];var YT={};Ge(YT,{json:()=>oY});var oY=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}];var XT={};Ge(XT,{json:()=>iY});var iY=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}];var ZT={};Ge(ZT,{json:()=>sY});var sY=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}];var QT={};Ge(QT,{json:()=>aY});var aY=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}];var JT={};Ge(JT,{json:()=>lY});var lY=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}];var eI={};Ge(eI,{json:()=>cY});var cY=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var kf=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[FT,LT,VT,$T,jT,BT,HT,UT,zT,GT,WT,qT,KT,YT,XT,ZT,QT,JT,eI],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,o)=>(r[o.tfOpName]=o,r),{})}transformGraph(e,n={}){let r=e.node,o=[],i=[],s=[],a=r.reduce((x,C)=>(x[C.name]=this.mapNode(C),C.op.startsWith("Placeholder")?o.push(x[C.name]):C.op==="Const"?i.push(x[C.name]):(C.input==null||C.input.length===0)&&s.push(x[C.name]),x),{}),l=[],c=[],u={},f={};n!=null&&(u=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));let p=Object.keys(a);p.forEach(x=>{let C=a[x];C.inputNames.forEach((I,P)=>{let[A,,k]=ko(I),V=a[A];if(V.outputs!=null){let L=V.outputs.indexOf(k);if(L!==-1){let H=`${A}:${L}`;C.inputNames[P]=H}}C.inputs.push(V),V.children.push(C)})}),Object.keys(f).length===0?p.forEach(x=>{let C=a[x];C.children.length===0&&c.push(C)}):Object.keys(f).forEach(x=>{let[C]=ko(x),I=a[C];I!=null&&(I.signatureKey=f[x],c.push(I))}),Object.keys(u).length>0?Object.keys(u).forEach(x=>{let[C]=ko(x),I=a[C];I&&(I.signatureKey=u[x],l.push(I))}):l=o;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((x,C)=>(x[C.signature.name]=this.mapFunction(C),x),{}));let w={nodes:a,inputs:l,outputs:c,weights:i,placeholders:o,signature:n,functions:m};return s.length>0&&(w.initNodes=s),w}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){let n=Dg(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});let r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(o=>o.startsWith("^")?o.slice(1):o),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((o,i)=>(o[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},o),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((o,i)=>{let s=i.type,a;switch(i.type){case"string":a=Ag(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ag(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Lg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Lg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=kg(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=kg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Fg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Fg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=Mg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Mg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=$g(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=$g(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Pg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Pg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Vg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Vg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=Og(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Og(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Rg(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Rg(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=lF(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=lF(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return o[i.name]={value:a,type:s},o},{})),r}mapFunction(e){let n=e.nodeDef,r=[],o=[],i={};n!=null&&(i=n.reduce((f,p)=>(f[p.name]=this.mapNode(p),p.op==="Const"&&o.push(f[p.name]),f),{}));let s=[],a=[];e.signature.inputArg.forEach(f=>{let[p]=ko(f.name),m={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:tI(f.type),type:"dtype"}},children:[]};m.signatureKey=f.name,s.push(m),i[p]=m}),Object.keys(i).forEach(f=>{let p=i[f];p.inputNames.forEach((m,w)=>{let[x,,C]=ko(m),I=i[x];if(I.outputs!=null){let P=I.outputs.indexOf(C);if(P!==-1){let A=`${x}:${P}`;p.inputNames[w]=A}}p.inputs.push(I),I.children.push(p)})});let c=e.ret;e.signature.outputArg.forEach(f=>{let[p,m]=ko(c[f.name]),w=i[p];w!=null&&(w.defaultOutput=m,a.push(w))});let u=this.mapArgsToSignature(e);return{nodes:i,inputs:s,outputs:a,weights:o,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}};function uY(t){let e=ne().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function cF(t,e){let n=Array.isArray(t)?String.fromCharCode.apply(null,t):uY(t);return e?n:n.toLowerCase()}function Ag(t,e,n,r=!1){let o=t[e];return o!=null?cF(o.s,r):n}function Mg(t,e,n){let r=t[e];return r?r.b:n}function kg(t,e,n){let r=t[e]||{},o=r.i!=null?r.i:r.f!=null?r.f:n;return typeof o=="number"?o:parseInt(o,10)}function tI(t){switch(typeof t=="string"&&(t=vr[t]),t){case vr.DT_FLOAT:case vr.DT_HALF:return"float32";case vr.DT_INT32:case vr.DT_INT64:case vr.DT_INT8:case vr.DT_UINT8:return"int32";case vr.DT_BOOL:return"bool";case vr.DT_DOUBLE:return"float32";case vr.DT_STRING:return"string";case vr.DT_COMPLEX64:case vr.DT_COMPLEX128:return"complex64";default:return null}}function lF(t,e,n){let r=t[e];return r&&r.func?r.func.name:n}function Og(t,e,n){let r=t[e];return r&&r.type?tI(r.type):n}function Rg(t,e,n){let r=t[e];return r&&r.list&&r.list.type?r.list.type.map(o=>tI(o)):n}function uF(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Pg(t,e,n){let r=t[e];return r&&r.shape?uF(r.shape):n}function Fg(t,e,n){let r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(o=>typeof o=="number"?o:parseInt(o,10)):n}function Lg(t,e,n,r=!1){let o=t[e];return o&&o.list&&o.list.s?o.list.s.map(i=>cF(i,r)):n}function Vg(t,e,n){let r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(o=>uF(o)):n}function $g(t,e,n){let r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var jg=class{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(o=>this.getInput(o)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((o,i)=>(o[i]=this.getAttr(i),o),{}))}getInput(e){return $t(e,this.tensorMap,this.context)}getAttr(e,n){let r=this.node.rawAttrs[e];if(r.tensor!=null)return $t(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return kg(this.node.rawAttrs,e,n);if(r.s!=null)return Ag(this.node.rawAttrs,e,n);if(r.b!=null)return Mg(this.node.rawAttrs,e,n);if(r.shape!=null)return Pg(this.node.rawAttrs,e,n);if(r.type!=null)return Og(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Fg(this.node.rawAttrs,e,n);if(r.list.s!=null)return Lg(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Vg(this.node.rawAttrs,e,n);if(r.list.b!=null)return $g(this.node.rawAttrs,e,n);if(r.list.type!=null)return Rg(this.node.rawAttrs,e,n)}return n}};var He={};Ge(He,{OP_SCOPE_SUFFIX:()=>Qm,abs:()=>nn,acos:()=>cx,acosh:()=>ux,add:()=>J,addN:()=>dx,all:()=>fx,any:()=>px,argMax:()=>qd,argMin:()=>hx,asin:()=>mx,asinh:()=>gx,atan:()=>yx,atan2:()=>vx,atanh:()=>bx,avgPool:()=>Xd,avgPool3d:()=>Sx,basicLSTMCell:()=>xx,batchNorm:()=>$i,batchNorm2d:()=>Cx,batchNorm3d:()=>Tx,batchNorm4d:()=>Ix,batchToSpaceND:()=>Zd,bincount:()=>Qd,bitwiseAnd:()=>Dx,booleanMaskAsync:()=>T2,broadcastArgs:()=>Nx,broadcastTo:()=>rl,buffer:()=>Sn,cast:()=>pe,ceil:()=>Ax,clipByValue:()=>Mx,clone:()=>nr,complex:()=>Bn,concat:()=>lt,concat1d:()=>kx,concat2d:()=>Ox,concat3d:()=>Rx,concat4d:()=>Px,conv1d:()=>Fx,conv2d:()=>ji,conv2dTranspose:()=>Lx,conv3d:()=>Vx,conv3dTranspose:()=>$x,cos:()=>jx,cosh:()=>Bx,cosineWindow:()=>Uc,cumprod:()=>Hx,cumsum:()=>Ux,denseBincount:()=>zx,depthToSpace:()=>Gx,depthwiseConv2d:()=>ol,diag:()=>Wx,dilation2d:()=>qx,div:()=>De,divNoNan:()=>Kx,dot:()=>Yx,dropout:()=>O2,einsum:()=>Bi,elu:()=>Jd,enclosingPowerOfTwo:()=>gg,ensureShape:()=>Xx,equal:()=>Cs,erf:()=>Zx,euclideanNorm:()=>Jx,exp:()=>Mr,expandDims:()=>pn,expm1:()=>eC,eye:()=>ef,fft:()=>ul,fill:()=>To,floor:()=>tf,floorDiv:()=>Wd,fused:()=>yg,gather:()=>nf,gatherND:()=>M2,greater:()=>oi,greaterEqual:()=>rf,ifft:()=>Ms,imag:()=>zi,image:()=>ks,inTopKAsync:()=>R2,irfft:()=>_f,isFinite:()=>tC,isInf:()=>nC,isNaN:()=>rC,leakyRelu:()=>of,less:()=>jc,lessEqual:()=>sl,linalg:()=>DP,linspace:()=>oC,localResponseNormalization:()=>iC,log:()=>ii,log1p:()=>sf,logSigmoid:()=>sC,logSoftmax:()=>aC,logSumExp:()=>lf,logicalAnd:()=>Is,logicalNot:()=>cf,logicalOr:()=>uf,logicalXor:()=>lC,losses:()=>NP,lowerBound:()=>cC,matMul:()=>Me,max:()=>Io,maxPool:()=>df,maxPool3d:()=>uC,maxPoolWithArgmax:()=>dC,maximum:()=>ff,mean:()=>Ds,meshgrid:()=>fC,min:()=>$c,minimum:()=>Ns,mirrorPad:()=>pf,mod:()=>pC,moments:()=>hC,movingAverage:()=>I2,mul:()=>$,multiRNNCell:()=>mC,multinomial:()=>gC,neg:()=>hn,norm:()=>Ts,notEqual:()=>hf,oneHot:()=>As,ones:()=>No,onesLike:()=>yC,op:()=>b,outerProduct:()=>vC,pad:()=>kr,pad1d:()=>bC,pad2d:()=>wC,pad3d:()=>mf,pad4d:()=>_C,pool:()=>EC,pow:()=>ri,prelu:()=>yf,print:()=>Gd,prod:()=>SC,raggedGather:()=>xC,raggedRange:()=>CC,raggedTensorToTensor:()=>TC,rand:()=>IC,randomGamma:()=>VC,randomNormal:()=>vf,randomStandardNormal:()=>$C,randomUniform:()=>cl,randomUniformInt:()=>jC,range:()=>Zr,real:()=>si,reciprocal:()=>BC,relu:()=>Gi,relu6:()=>bf,reshape:()=>R,reverse:()=>gr,reverse1d:()=>HC,reverse2d:()=>UC,reverse3d:()=>zC,reverse4d:()=>GC,rfft:()=>dl,round:()=>wf,rsqrt:()=>WC,scalar:()=>ie,scatterND:()=>D2,searchSorted:()=>Bc,selu:()=>qC,separableConv2d:()=>KC,setdiff1dAsync:()=>YC,sigmoid:()=>rr,sign:()=>XC,signal:()=>IP,sin:()=>ZC,sinh:()=>QC,slice:()=>Ne,slice1d:()=>JC,slice2d:()=>eT,slice3d:()=>tT,slice4d:()=>nT,softmax:()=>rT,softplus:()=>af,spaceToBatchND:()=>gf,sparse:()=>AP,sparseToDense:()=>A2,spectral:()=>TP,split:()=>ai,sqrt:()=>zn,square:()=>rn,squaredDifference:()=>Ef,squeeze:()=>Gn,stack:()=>kn,step:()=>Sf,stridedSlice:()=>oT,string:()=>MP,sub:()=>se,sum:()=>Ke,tan:()=>iT,tanh:()=>Vc,tensor:()=>fn,tensor1d:()=>on,tensor2d:()=>Ao,tensor3d:()=>xf,tensor4d:()=>sT,tensor5d:()=>aT,tensor6d:()=>lT,tensorScatterUpdate:()=>uT,tile:()=>Ui,topk:()=>dT,transpose:()=>fl,truncatedNormal:()=>fT,unique:()=>pT,unsortedSegmentSum:()=>hT,unstack:()=>yr,upperBound:()=>mT,variable:()=>gT,where:()=>mr,whereAsync:()=>Tf,zeros:()=>Do,zerosLike:()=>zt});var dF=(t,e,n,r=He)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(g("a",t,e,n),g("b",t,e,n))];case"AddN":return[r.addN(g("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(g("a",t,e,n),g("b",t,e,n))];case"Mul":return[r.mul(g("a",t,e,n),g("b",t,e,n))];case"RealDiv":case"Div":return[r.div(g("a",t,e,n),g("b",t,e,n))];case"DivNoNan":return[r.divNoNan(g("a",t,e,n),g("b",t,e,n))];case"FloorDiv":return[r.floorDiv(g("a",t,e,n),g("b",t,e,n))];case"Sub":return[r.sub(g("a",t,e,n),g("b",t,e,n))];case"Minimum":return[r.minimum(g("a",t,e,n),g("b",t,e,n))];case"Maximum":return[r.maximum(g("a",t,e,n),g("b",t,e,n))];case"Pow":return[r.pow(g("a",t,e,n),g("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var fF=(t,e,n,r=He)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(g("x",t,e,n))];case"Acos":return[r.acos(g("x",t,e,n))];case"Acosh":return[r.acosh(g("x",t,e,n))];case"Asin":return[r.asin(g("x",t,e,n))];case"Asinh":return[r.asinh(g("x",t,e,n))];case"Atan":return[r.atan(g("x",t,e,n))];case"Atan2":return[r.atan2(g("x",t,e,n),g("y",t,e,n))];case"Atanh":return[r.atanh(g("x",t,e,n))];case"Ceil":return[r.ceil(g("x",t,e,n))];case"Complex":return[r.complex(g("real",t,e,n),g("imag",t,e,n))];case"Cos":return[r.cos(g("x",t,e,n))];case"Cosh":return[r.cosh(g("x",t,e,n))];case"Elu":return[r.elu(g("x",t,e,n))];case"Erf":return[r.erf(g("x",t,e,n))];case"Exp":return[r.exp(g("x",t,e,n))];case"Expm1":return[r.expm1(g("x",t,e,n))];case"Floor":return[r.floor(g("x",t,e,n))];case"Log":return[r.log(g("x",t,e,n))];case"Log1p":return[r.log1p(g("x",t,e,n))];case"Imag":return[r.imag(g("x",t,e,n))];case"Neg":return[r.neg(g("x",t,e,n))];case"Reciprocal":return[r.reciprocal(g("x",t,e,n))];case"Real":return[r.real(g("x",t,e,n))];case"Relu":return[r.relu(g("x",t,e,n))];case"Round":return[r.round(g("x",t,e,n))];case"Selu":return[r.selu(g("x",t,e,n))];case"Sigmoid":return[r.sigmoid(g("x",t,e,n))];case"Sin":return[r.sin(g("x",t,e,n))];case"Sign":return[r.sign(g("x",t,e,n))];case"Sinh":return[r.sinh(g("x",t,e,n))];case"Softplus":return[r.softplus(g("x",t,e,n))];case"Sqrt":return[r.sqrt(g("x",t,e,n))];case"Square":return[r.square(g("x",t,e,n))];case"Tanh":return[r.tanh(g("x",t,e,n))];case"Tan":return[r.tan(g("x",t,e,n))];case"ClipByValue":return[r.clipByValue(g("x",t,e,n),g("clipValueMin",t,e,n),g("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(g("x",t,e,n))];case"Rsqrt":return[r.rsqrt($t(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(g("x",t,e,n),g("alpha",t,e,n))];case"Prelu":return[r.prelu(g("x",t,e,n),g("alpha",t,e,n))];case"IsNan":return[r.isNaN($t(t.inputNames[0],e,n))];case"IsInf":return[r.isInf($t(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite($t(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function br(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){j.assert(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){let o=t[r],i=e[r];j.assert(o<0||i<0||o===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function pF(t){return!(typeof t=="number"||t.some(e=>e<0))}function Wc(t,e,n){let r=Bg(t,n),o=!pF(r);if(o&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(o&&e.forEach(i=>{r=Bg(i.shape,r)}),!pF(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Bg(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);let n=[];for(let r=0;r<t.length;++r){let o=t[r],i=e[r];if(o>=0&&i>=0&&o!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=o>=0?o:i}return n}var Hg=class{constructor(e,n,r,o,i,s,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=o,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=ie(0),Un(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),br(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Un(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,o)=>this.write(r,n[o]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let o=0;o<this.size();o++)e.push(o)}if(e.length===0)return fn([],[0].concat(this.elementShape));let r=this.readMany(e);return br(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),kn(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return fn([],[0].concat(this.elementShape));let n=[];for(let o=0;o<this.size();o++)n.push(o);let r=this.readMany(n);return br(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),lt(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);let r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,yr(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0,o=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=r===0?0:n.size/r,s=[];oe(()=>{n=R(n,[1,r,i]);for(let l=0;l<e.length;++l){let u=[0,l===0?0:o[l-1],0],f=[1,e[l],i];s[l]=R(Ne(n,u,f),this.elementShape)}return s});let a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,s)}};var qc=class t{get id(){return this.idTensor.id}constructor(e,n,r,o=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e?.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);br(n,i.shape,"TensorList shape mismatch: "),Un(i)}),this.idTensor=ie(0),this.maxNumElements=o,Un(this.idTensor)}copy(){return new t([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);br(e,this.elementShape,"TensorList shape mismatch: ");let o=Wc(this.elementShape,this.tensors,e);return oe(()=>{let i=this.tensors.map(s=>R(s,o));return kn(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let r=Wc(this.elementShape,this.tensors,e),o=this.tensors.pop();return o.kept=!1,br(o.shape,e,"TensorList shape mismatch: "),R(o,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(br(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Un(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let n=new t([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);br(this.tensors[e].shape,n,"TensorList shape mismatch: ");let o=Wc(this.elementShape,this.tensors,n);return R(this.tensors[e],o)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);br(this.elementShape,n.shape,"TensorList shape mismatch: "),Un(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);br(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());let o=Wc(this.elementShape,this.tensors,r);return e.length===0?fn([],[0].concat(o)):oe(()=>{let i=e.map(s=>R(this.tensors[s],o));return kn(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);br(this.elementShape,n,"TensorList shape mismatch: ");let r=Wc(this.elementShape,this.tensors,n);return this.size()===0?fn([],[0].concat(r)):oe(()=>{let o=this.tensors.map(i=>R(i,r));return lt(o,0)})}};function hF(t,e,n){let r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);let o=t.shape.slice(1);br(o,e,"TensorList shape mismatch: ");let i=yr(t);return new qc(i,e,r)}function mF(t,e,n,r){return new qc([],t,e,r)}function gF(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let o=Math.max(...e);if(r!=null&&r!==-1&&o>=r)throw new Error(`Max index must be < array size (${o}  vs. ${r})`);let i=new qc([],n,t.dtype,r),s=yr(t,0);return e.forEach((a,l)=>{i.setItem(a,s[l])}),i}function yF(t,e,n){let r=0,o=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);let i=t.shape.slice(1),s=Bg(i,n),a=r===0?0:t.size/r,l=oe(()=>{let u=[];t=R(t,[1,r,a]);for(let f=0;f<e.length;++f){let m=[0,f===0?0:o[f-1],0],w=[1,e[f],a];u[f]=R(Ne(t,m,w),s)}return t.dispose(),u}),c=new qc([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}var vF=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{let r=g("thenBranch",t,e,n),o=g("elseBranch",t,e,n),i=g("cond",t,e,n),s=g("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[o].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=g("body",t,e,n),o=g("cond",t,e,n),i=g("args",t,e,n),s=await n.functionMap[o].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id),l=await s[0].data();s.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){let u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let f=c.map(m=>m.id);u.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()});let p=await n.functionMap[o].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&f.indexOf(m.id)===-1&&m.dispose()})}return c}case"LoopCond":{let r=g("pred",t,e,n);return[Oo(r)]}case"Switch":{let r=g("pred",t,e,n),o=g("data",t,e,n);return o.kept||(o=Oo(o)),(await r.data())[0]?[void 0,o]:[o,void 0]}case"Merge":{let r=t.inputNames.find(o=>$t(o,e,n)!==void 0);if(r){let o=$t(r,e,n);return[Oo(o)]}return}case"Enter":{let r=g("frameName",t,e,n),o=g("tensor",t,e,n);return n.enterFrame(r),[Oo(o)]}case"Exit":{let r=g("tensor",t,e,n);return n.exitFrame(),[Oo(r)]}case"NextIteration":{let r=g("tensor",t,e,n);return n.nextIteration(),[Oo(r)]}case"TensorArrayV3":{let r=g("size",t,e,n),o=g("dtype",t,e,n),i=g("elementShape",t,e,n),s=g("dynamicSize",t,e,n),a=g("clearAfterRead",t,e,n),l=g("identicalElementShapes",t,e,n),c=g("name",t,e,n),u=new Hg(c,o,r,i,l,s,a);return n.addTensorArray(u),[u.idTensor,ie(1)]}case"TensorArrayWriteV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.write(o,i),[s.idTensor]}case"TensorArrayReadV3":{let r=g("tensorArrayId",t,e,n),o=g("index",t,e,n);return[n.getTensorArray(r.id).read(o)]}case"TensorArrayGatherV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("dtype",t,e,n);return[n.getTensorArray(r.id).gather(o,i)]}case"TensorArrayScatterV3":{let r=g("tensorArrayId",t,e,n),o=g("indices",t,e,n),i=g("tensor",t,e,n),s=n.getTensorArray(r.id);return s.scatter(o,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id),i=g("dtype",t,e,n);return[o.concat(i)]}case"TensorArraySplitV3":{let r=g("tensorArrayId",t,e,n),o=g("tensor",t,e,n),i=g("lengths",t,e,n),s=n.getTensorArray(r.id);return s.split(i,o),[s.idTensor]}case"TensorArraySizeV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return[ie(o.size(),"int32")]}case"TensorArrayCloseV3":{let r=g("tensorArrayId",t,e,n),o=n.getTensorArray(r.id);return o.clearAndClose(),[o.idTensor]}case"TensorListSetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("tensor",t,e,n),s=n.getTensorList(r.id);return s.setItem(o,i),[s.idTensor]}case"TensorListGetItem":{let r=g("tensorListId",t,e,n),o=g("index",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(o,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=g("indices",t,e,n),o=g("tensor",t,e,n),i=g("elementShape",t,e,n),s=g("numElements",t,e,n),a=gF(o,r,i,s);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r=g("elementShape",t,e,n),o=g("elementDType",t,e,n),i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";let s=g(i,t,e,n),a=t.op==="TensorListReserve"?-1:s,l=mF(r,o,s,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{let r=g("tensorListId",t,e,n),o=g("indices",t,e,n),i=g("elementShape",t,e,n),s=g("elementDType",t,e,n);return[n.getTensorList(r.id).gather(o,s,i)]}case"TensorListStack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=g("numElements",t,e,n);return[n.getTensorList(r.id).stack(o,i,s)]}case"TensorListFromTensor":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n),s=hF(r,o,i);return n.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id),i=g("dtype",t,e,n),s=g("elementShape",t,e,n);return[o.concat(i,s)]}case"TensorListPushBack":{let r=g("tensorListId",t,e,n),o=g("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(o),[i.idTensor]}case"TensorListPopBack":{let r=g("tensorListId",t,e,n),o=g("elementShape",t,e,n),i=g("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(o,i)]}case"TensorListSplit":{let r=g("tensor",t,e,n),o=g("elementShape",t,e,n),i=g("lengths",t,e,n),s=yF(r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListLength":{let r=g("tensorListId",t,e,n),o=n.getTensorList(r.id);return[ie(o.size(),"int32")]}case"TensorListResize":{let r=g("tensorListId",t,e,n),o=g("size",t,e,n),s=n.getTensorList(r.id).resize(o);return n.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};function bF(t,e,n){let[r,o]=g("fusedOps",t,e,n),i=r==="biasadd",s=!i,a=o==="prelu",l=r==="fusedbatchnorm",c=g("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=g("strides",t,e,n),f=Mf(t,e,n),p=g("dataFormat",t,e,n).toUpperCase(),m=g("dilations",t,e,n),[w,x]=g("args",t,e,n);s&&(x=w,w=void 0);let C=g("leakyreluAlpha",t,e,n);return{stride:u,pad:f,dataFormat:p,dilations:m,biasArg:w,preluArg:x,activationFunc:o,leakyreluAlpha:C}}var wF=(t,e,n,r=He)=>{switch(t.op){case"Conv1D":{let o=g("stride",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilation",t,e,n);return[r.conv1d(g("x",t,e,n),g("filter",t,e,n),o,i,s,a)]}case"Conv2D":{let o=g("strides",t,e,n),i=Mf(t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv2d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=bF(t,e,n);return[r.fused.conv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"FusedDepthwiseConv2dNative":{let{stride:o,pad:i,dataFormat:s,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:f}=bF(t,e,n);return[r.fused.depthwiseConv2d({x:g("x",t,e,n),filter:g("filter",t,e,n),strides:[o[1],o[2]],pad:i,dataFormat:s,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let o=g("outputShape",t,e,n),i=g("strides",t,e,n),s=Mf(t,e,n);return[r.conv2dTranspose(g("x",t,e,n),g("filter",t,e,n),o,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let o=g("strides",t,e,n),i=Mf(t,e,n),s=g("dilations",t,e,n),a=g("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(g("input",t,e,n),g("filter",t,e,n),[o[1],o[2]],i,a,[s[1],s[2]])]}case"Conv3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dataFormat",t,e,n).toUpperCase(),a=g("dilations",t,e,n);return[r.conv3d(g("x",t,e,n),g("filter",t,e,n),[o[1],o[2],o[3]],i,s,[a[1],a[2],a[3]])]}case"AvgPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPool":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i)]}case"MaxPoolWithArgmax":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n),a=g("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(g("x",t,e,n),[s[1],s[2]],[o[1],o[2]],i,a);return[l,c]}case"AvgPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.avgPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"MaxPool3D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("kernelSize",t,e,n);return[r.maxPool3d(g("x",t,e,n),[s[1],s[2],s[3]],[o[1],o[2],o[3]],i)]}case"Dilation2D":{let o=g("strides",t,e,n),i=g("pad",t,e,n),s=g("dilations",t,e,n),a=o[1],l=o[2],c=s[1],u=s[2];return[r.dilation2d(g("x",t,e,n),g("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var _F=(t,e,n,r=He)=>{switch(t.op){case"Fill":{let o=g("shape",t,e,n),i=g("dtype",t,e,n),s=g("value",t,e,n);return[r.fill(o,s,i)]}case"LinSpace":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("num",t,e,n);return[r.linspace(o,i,s)]}case"Multinomial":{let o=g("logits",t,e,n),i=g("numSamples",t,e,n),s=g("seed",t,e,n);return[r.multinomial(o,i,s)]}case"OneHot":{let o=g("indices",t,e,n),i=g("depth",t,e,n),s=g("onValue",t,e,n),a=g("offValue",t,e,n),l=g("dtype",t,e,n);return[r.oneHot(o,i,s,a,l)]}case"Ones":return[r.ones(g("shape",t,e,n),g("dtype",t,e,n))];case"OnesLike":return[r.onesLike(g("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(g("shape",t,e,n),g("dtype",t,e,n),g("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(g("shape",t,e,n),g("minval",t,e,n),g("maxval",t,e,n),g("seed",t,e,n))];case"Range":{let o=g("start",t,e,n),i=g("stop",t,e,n),s=g("step",t,e,n);return[r.range(o,i,s,g("dtype",t,e,n))]}case"TruncatedNormal":{let o=g("shape",t,e,n),i=g("mean",t,e,n),s=g("stdDev",t,e,n),a=g("seed",t,e,n);return[r.truncatedNormal(o,i,s,g("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(g("shape",t,e,n),g("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function nI(t,e,n){let r=g("boxes",t,e,n),o=g("scores",t,e,n),i=g("maxOutputSize",t,e,n),s=g("iouThreshold",t,e,n),a=g("scoreThreshold",t,e,n),l=g("softNmsSigma",t,e,n);return{boxes:r,scores:o,maxOutputSize:i,iouThreshold:s,scoreThreshold:a,softNmsSigma:l}}var EF=async(t,e,n,r,o=He)=>{switch(t.op){case"NonMaxSuppressionV5":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=nI(t,e,n),f=await o.image.nonMaxSuppressionWithScoreAsync(i,s,a,l,c,u);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=nI(t,e,n),u=g("padToMaxOutputSize",t,e,n),f=await o.image.nonMaxSuppressionPaddedAsync(i,s,a,l,c,u);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:i,scores:s,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=nI(t,e,n);return[await o.image.nonMaxSuppressionAsync(i,s,a,l,c)]}case"Where":{let i=o.cast(g("condition",t,e,n),"bool"),s=[await o.whereAsync(i)];return i.dispose(),s}case"ListDiff":return o.setdiff1dAsync(g("x",t,e,n),g("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};var SF=(t,e,n,r=He)=>{switch(t.op){case"LowerBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.lowerBound(o,i)]}case"TopKV2":{let o=g("x",t,e,n),i=g("k",t,e,n),s=g("sorted",t,e,n),a=r.topk(o,i,s);return[a.values,a.indices]}case"UpperBound":{let o=g("sortedSequence",t,e,n),i=g("values",t,e,n);return[r.upperBound(o,i)]}case"Unique":{let o=g("x",t,e,n),i=r.unique(o);return[i.values,i.indices]}case"UniqueV2":{let o=g("x",t,e,n),i=g("axis",t,e,n),s=r.unique(o,i);return[s.values,s.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var xF=(t,e,n,r=He)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":let o=g("default",t,e,n);return[$t(t.name,e,n)||o];case"Placeholder":return[$t(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let u=g("x",t,e,n);return[Oo(u)]}case"IdentityN":return g("x",t,e,n).map(u=>Oo(u));case"Snapshot":let i=g("x",t,e,n);return[Oo(i)];case"Shape":return[r.tensor1d(g("x",t,e,n).shape,"int32")];case"ShapeN":return g("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(g("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(g("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=g("x",t,e,n),a=g("data",t,e,n),l=g("message",t,e,n),c=g("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var Ug=class{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ie(0),this.tensorMap=new Map,Un(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ie(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);let r=await e.data();return this.tensorMap.forEach(o=>o.dispose()),this.tensorMap.clear(),oe(()=>{let o=yr(n),i=r.length,s=o.length;j.assert(i===s,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${s} elements.`);for(let a=0;a<i;a++){let l=r[a],c=o[a];Un(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);let r=await e.data();return oe(()=>{let o=[];for(let i=0;i<r.length;i++){let s=r[i],a=this.findWithDefault(s,n);o.push(a)}return kn(o)})}findWithDefault(e,n){let r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}};var CF=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{let o=r.getHashTableHandleByName(t.name);if(o!=null)return[o];{let i=g("keyDType",t,e,n),s=g("valueDType",t,e,n),a=new Ug(i,s);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("values",t,e,n);return[await r.getHashTableById(o.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let o=g("tableHandle",t,e,n,r),i=g("keys",t,e,n),s=g("defaultValue",t,e,n);return[await r.getHashTableById(o.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let o=g("tableHandle",t,e,n,r);return[r.getHashTableById(o.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var TF=(t,e,n,r=He)=>{switch(t.op){case"ResizeBilinear":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(o,[i[0],i[1]],s,a)]}case"ResizeNearestNeighbor":{let o=g("images",t,e,n),i=g("size",t,e,n),s=g("alignCorners",t,e,n),a=g("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s,a)]}case"CropAndResize":{let o=g("image",t,e,n),i=g("boxes",t,e,n),s=g("boxInd",t,e,n),a=g("cropSize",t,e,n),l=g("method",t,e,n),c=g("extrapolationValue",t,e,n);return[r.image.cropAndResize(o,i,s,a,l,c)]}case"ImageProjectiveTransformV3":{let o=g("images",t,e,n),i=g("transforms",t,e,n),s=g("outputShape",t,e,n),a=g("fillValue",t,e,n),l=g("interpolation",t,e,n),c=g("fillMode",t,e,n);return[r.image.transform(o,i,l.toLowerCase(),c.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var IF=(t,e,n,r=He)=>{switch(t.op){case"Equal":return[r.equal(g("a",t,e,n),g("b",t,e,n))];case"NotEqual":return[r.notEqual(g("a",t,e,n),g("b",t,e,n))];case"Greater":return[r.greater(g("a",t,e,n),g("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(g("a",t,e,n),g("b",t,e,n))];case"Less":return[r.less(g("a",t,e,n),g("b",t,e,n))];case"LessEqual":return[r.lessEqual(g("a",t,e,n),g("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(g("a",t,e,n),g("b",t,e,n))];case"LogicalNot":return[r.logicalNot(g("a",t,e,n))];case"LogicalOr":return[r.logicalOr(g("a",t,e,n),g("b",t,e,n))];case"Select":case"SelectV2":return[r.where(g("condition",t,e,n),g("a",t,e,n),g("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(g("a",t,e,n),g("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var DF=(t,e,n,r=He)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(g("a",t,e,n),g("b",t,e,n),g("transposeA",t,e,n),g("transposeB",t,e,n))];case"Einsum":return[r.einsum(g("equation",t,e,n),...g("tensors",t,e,n))];case"Transpose":return[r.transpose(g("x",t,e,n),g("perm",t,e,n))];case"_FusedMatMul":let[o,i]=g("fusedOps",t,e,n),s=o==="biasadd",a=i==="prelu",l=g("numArgs",t,e,n),c=g("leakyreluAlpha",t,e,n);if(s){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,f]=g("args",t,e,n);return[r.fused.matMul({a:g("a",t,e,n),b:g("b",t,e,n),transposeA:g("transposeA",t,e,n),transposeB:g("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:f,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(g("a",t,e,n),g("numLower",t,e,n),g("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var NF=(t,e,n,r=He)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(g("x",t,e,n),g("axis",t,e,n),g("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(g("x",t,e,n),g("mean",t,e,n),g("variance",t,e,n),g("offset",t,e,n),g("scale",t,e,n),g("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(g("x",t,e,n),g("radius",t,e,n),g("bias",t,e,n),g("alpha",t,e,n),g("beta",t,e,n))];case"Softmax":return[r.softmax(g("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var AF=(t,e,n,r=He)=>{switch(t.op){case"RaggedGather":{let{outputNestedSplits:o,outputDenseValues:i}=r.raggedGather(g("paramsNestedSplits",t,e,n),g("paramsDenseValues",t,e,n),g("indices",t,e,n),g("outputRaggedRank",t,e,n));return o.concat(i)}case"RaggedRange":{let{rtNestedSplits:o,rtDenseValues:i}=r.raggedRange(g("starts",t,e,n),g("limits",t,e,n),g("splits",t,e,n));return[o,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(g("shape",t,e,n),g("values",t,e,n),g("defaultValue",t,e,n),g("rowPartitionTensors",t,e,n),g("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var MF=(t,e,n,r=He)=>{switch(t.op){case"Max":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.max(g("x",t,e,n),a,l)]}case"Mean":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.mean(g("x",t,e,n),a,l)]}case"Min":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.min(g("x",t,e,n),a,l)]}case"Sum":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.sum(g("x",t,e,n),a,l)]}case"All":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.all(g("x",t,e,n),a,l)]}case"Any":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.any(g("x",t,e,n),a,l)]}case"ArgMax":{let a=g("axis",t,e,n);return[r.argMax(g("x",t,e,n),a)]}case"ArgMin":{let a=g("axis",t,e,n);return[r.argMin(g("x",t,e,n),a)]}case"Prod":{let a=g("axis",t,e,n),l=g("keepDims",t,e,n);return[r.prod(g("x",t,e,n),a,l)]}case"Cumprod":{let a=g("axis",t,e,n),l=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumprod(g("x",t,e,n),a,l,c)]}case"Cumsum":{let a=g("axis",t,e,n),l=g("exclusive",t,e,n),c=g("reverse",t,e,n);return[r.cumsum(g("x",t,e,n),a,l,c)]}case"Bincount":let o=g("x",t,e,n),i=g("weights",t,e,n),s=g("size",t,e,n);return[r.bincount(o,i,s)];case"DenseBincount":{let a=g("x",t,e,n),l=g("weights",t,e,n),c=g("size",t,e,n),u=g("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var kF=(t,e,n,r=He)=>{switch(t.op){case"ConcatV2":case"Concat":{let o=g("n",t,e,n),i=g("axis",t,e,n),s=g("tensors",t,e,n);return s=s.slice(0,o),[r.concat(s,i)]}case"Gather":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gather(o,r.cast(i,"int32"),0)]}case"GatherV2":{let o=g("axis",t,e,n),i=g("batchDims",t,e,n),s=g("x",t,e,n),a=g("indices",t,e,n);return[r.gather(s,r.cast(a,"int32"),o,i)]}case"Reverse":{let o=g("dims",t,e,n),i=[];for(let a=0;a<o.length;a++)o[a]&&i.push(a);let s=g("x",t,e,n);return[r.reverse(s,i)]}case"ReverseV2":{let o=g("axis",t,e,n),i=g("x",t,e,n);return[r.reverse(i,o)]}case"Slice":{let o=g("begin",t,e,n),i=g("size",t,e,n);return[r.slice(g("x",t,e,n),o,i)]}case"StridedSlice":{let o=g("begin",t,e,n),i=g("end",t,e,n),s=g("strides",t,e,n),a=g("beginMask",t,e,n),l=g("endMask",t,e,n),c=g("ellipsisMask",t,e,n),u=g("newAxisMask",t,e,n),f=g("shrinkAxisMask",t,e,n),p=g("x",t,e,n);return[r.stridedSlice(p,o,i,s,a,l,c,u,f)]}case"Pack":return oe(()=>{let o=g("axis",t,e,n),i=g("tensors",t,e,n),s=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{let u=j.arraysEqual(c.shape,s);if(!u&&!j.arraysEqual(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,o)]});case"Unpack":{let o=g("axis",t,e,n),i=g("tensor",t,e,n);return r.unstack(i,o)}case"Tile":{let o=g("reps",t,e,n);return[r.tile(g("x",t,e,n),o)]}case"Split":case"SplitV":{let o=g("axis",t,e,n),i=g("numOrSizeSplits",t,e,n),s=g("x",t,e,n);return r.split(s,i,o)}case"ScatterNd":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("shape",t,e,n);return[r.scatterND(o,i,s)]}case"GatherNd":{let o=g("x",t,e,n),i=g("indices",t,e,n);return[r.gatherND(o,i)]}case"SparseToDense":{let o=g("sparseIndices",t,e,n),i=g("outputShape",t,e,n),s=g("sparseValues",t,e,n),a=g("defaultValue",t,e,n);return[r.sparseToDense(o,s,i,s.dtype===a.dtype?a:r.cast(a,s.dtype))]}case"TensorScatterUpdate":{let o=g("indices",t,e,n),i=g("values",t,e,n),s=g("tensor",t,e,n);return[r.tensorScatterUpdate(s,o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};var OF=(t,e,n,r=He)=>{switch(t.op){case"SparseFillEmptyRows":{let{outputIndices:o,outputValues:i,emptyRowIndicator:s,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(g("indices",t,e,n),g("values",t,e,n),g("denseShape",t,e,n),g("defaultValue",t,e,n));return[o,i,s,a]}case"SparseReshape":{let{outputIndices:o,outputShape:i}=r.sparse.sparseReshape(g("inputIndices",t,e,n),g("inputShape",t,e,n),g("newShape",t,e,n));return[o,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(g("data",t,e,n),g("indices",t,e,n),g("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var RF=(t,e,n,r=He)=>{switch(t.op){case"FFT":return[r.fft(g("x",t,e,n))];case"IFFT":return[r.ifft(g("x",t,e,n))];case"RFFT":return[r.rfft(g("x",t,e,n))];case"IRFFT":return[r.irfft(g("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var PF=(t,e,n,r=He)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(g("input",t,e,n),g("pattern",t,e,n),g("rewrite",t,e,n),g("replaceGlobal",t,e,n))];case"StringNGrams":{let{nGrams:o,nGramsSplits:i}=r.string.stringNGrams(g("data",t,e,n),g("dataSplits",t,e,n),g("separator",t,e,n),g("nGramWidths",t,e,n),g("leftPad",t,e,n),g("rightPad",t,e,n),g("padWidth",t,e,n),g("preserveShortSequences",t,e,n));return[o,i]}case"StringSplit":{let{indices:o,values:i,shape:s}=r.string.stringSplit(g("input",t,e,n),g("delimiter",t,e,n),g("skipEmpty",t,e,n));return[o,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(g("input",t,e,n),g("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};var FF=(t,e,n,r=He)=>{switch(t.op){case"Cast":return[r.cast(g("x",t,e,n),g("dtype",t,e,n))];case"ExpandDims":{let o=g("axis",t,e,n);return[r.expandDims(g("x",t,e,n),o)]}case"Squeeze":{let o=g("axis",t,e,n);return[r.squeeze(g("x",t,e,n),o)]}case"Reshape":return[r.reshape(g("x",t,e,n),g("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(g("x",t,e,n),g("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(g("x",t,e,n),g("padding",t,e,n),g("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(g("x",t,e,n),g("padding",t,e,n),g("constantValue",t,e,n))];case"SpaceToBatchND":{let o=g("blockShape",t,e,n),i=g("paddings",t,e,n);return[r.spaceToBatchND(g("x",t,e,n),o,i)]}case"BatchToSpaceND":{let o=g("blockShape",t,e,n),i=g("crops",t,e,n);return[r.batchToSpaceND(g("x",t,e,n),o,i)]}case"DepthToSpace":{let o=g("blockSize",t,e,n),i=g("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(g("x",t,e,n),o,i)]}case"BroadcastTo":return[r.broadcastTo(g("x",t,e,n),g("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(g("s0",t,e,n),g("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function rI(t,e,n,r,o=oe){let i=((s,a,l)=>{switch(s.category){case"arithmetic":return o(()=>dF(s,a,l));case"basic_math":return o(()=>fF(s,a,l));case"control":return vF(s,a,l);case"convolution":return o(()=>wF(s,a,l));case"creation":return o(()=>_F(s,a,l));case"dynamic":return EF(s,a,l);case"evaluation":return o(()=>SF(s,a,l));case"image":return o(()=>TF(s,a,l));case"graph":return o(()=>xF(s,a,l));case"logical":return o(()=>IF(s,a,l));case"matrices":return o(()=>DF(s,a,l));case"normalization":return o(()=>NF(s,a,l));case"ragged":return o(()=>AF(s,a,l));case"reduction":return o(()=>MF(s,a,l));case"slice_join":return o(()=>kF(s,a,l));case"sparse":return o(()=>OF(s,a,l));case"spectral":return o(()=>RF(s,a,l));case"string":return o(()=>PF(s,a,l));case"transformation":return o(()=>FF(s,a,l));case"hash_table":return CF(s,a,l,r);case"custom":let c=Dg(s.op);if(c&&c.customExecutor)return c.customExecutor(new jg(s,a,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return j.isPromise(i)?i.then(s=>[].concat(s)):[].concat(i)}var Of=class{constructor(e={},n={},r={},o={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=o,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let n=0;n<this.contexts.length-1;n++){let r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}};function oI(t,e,n,r){let o=new Set,i=[],s=null,a=null,l=new Set,c=new Set(Object.keys(t).map(p=>Wn(p)[0]));r=r||[];let u=new Set(r.map(p=>Wn(p.name)[0])),f=[...e];for(;f.length>0;){let p=f.pop();if(($s(p)||FY(p)||LY(p))&&s==null&&(s=p,a=s.children.map(m=>m.name).filter(m=>o.has(m))),o.add(p.name),n[p.name]==null&&!c.has(p.name)&&!u.has(p.name)){if(p.inputs.length===0){i.push(p.name);continue}p.inputs.forEach(m=>{l.has(m.name)||(l.add(m.name),f.push(m))})}}return{inputs:t,outputs:e,usedNodes:o,missingInputs:i,dynamicNode:s,syncInputs:a}}function LF(t,e){let{usedNodes:n,inputs:r}=e,o=Object.keys(r).map(C=>Wn(C)[0]).map(C=>t.nodes[C]),i=t.initNodes||[],s=C=>n.has(typeof C=="string"?C:C.name);function a(C){return[...new Map(C.map(I=>[I.name,I])).values()]}let l=a([...o,...t.weights,...i]).filter(s),c=a([...l,...Object.values(t.nodes)]).filter(s),u=new Map(c.map(C=>[C.name,C])),f={};for(let C of c){f[C.name]=f[C.name]||0;for(let I of C.children)s(I)||(f[I.name]=Number.POSITIVE_INFINITY),f[I.name]=(f[I.name]||0)+1}let p=Object.entries(f).filter(([,C])=>C===0).map(([C])=>C),m=[...p];for(;p.length>0;){let C=p.pop(),I=u.get(C);for(let P of I.children.filter(s))--f[P.name]===0&&(m.push(P.name),p.push(P.name))}let w=m.map(C=>u.get(C)),x=MY(w,l);return kY(x,l),x}function MY(t,e){let n=new Map(t.map(s=>[s.name,s])),r=e.map(s=>s.name),o=new Set(r);for(;r.length>0;){let s=r.pop(),a=n.get(s);for(let l of a.children)!n.has(l.name)||o.has(l.name)||(o.add(l.name),r.push(l.name))}return t.filter(s=>o.has(s.name))}var Kc=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}};function kY(t,e){let n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),o=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),s=a=>i.has(typeof a=="string"?a:a.name);for(let a of t){for(let l of a.children.filter(s)){if(!n.has(l.name))throw new Kc(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Kc(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!o(a))for(let l of a.inputs){if(!n.has(l.name))throw new Kc(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Kc(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function VF(t){let e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>$s(a)?n:l),o=a=>{let l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(o).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let a=0;a<t.length;++a){let l=i[a];if(l===n)continue;let c=t[a],u=t[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}var OY=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),RY=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),PY=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function $s(t){return OY.has(t.op)}function FY(t){return RY.has(t.op)}function LY(t){return PY.has(t.op)}var Rf=class t{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let n=Object.keys(e).map(r=>e[r].map(o=>o.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new t(e.functions[r],this)})}getCompilationKey(e,n){let r=e.map(i=>i.name).sort(),o=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+o.join(this.SEPARATOR)}compile(e,n){let r=oI(e,n,this.weightMap,this._initNodes),{missingInputs:o,dynamicNode:i,syncInputs:s}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(o.length>0){let c=n.map(f=>f.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${o}]`)}let a=LF(this.graph,r),l=VF(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;let n=e.clone();return Un(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);let r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);let o=r.map(p=>this.graph.nodes[Wn(p)[0]]),i=n.map(p=>Wn(p)[0]),s=new Set(i),a=i.map(p=>this.graph.nodes[p]);a.length===0&&(a=this._outputs);let l=this.getCompilationKey(o,a),c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=ne().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let u={},f={};return oe(()=>{let p=new Of(this.weightMap,u,f,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(I=>{let[P,A]=Wn(I,p),k=[];k[A]=e[I],m[P]=k,this.keepIntermediateTensors&&(this.clonedTensorsMap[P]=this.cloneTensorList(k))});let w=this.getFrozenTensorIds(m),{orderedNodes:x,nodeLiveUntilMap:C}=c;for(let I of x){if(m[I.name])continue;let P=rI(I,m,p,this._resourceManager);if(j.isPromise(P))throw new Error(`The execution of the op '${I.op}' returned a promise. Please use model.executeAsync() instead.`);m[I.name]=P,this.keepIntermediateTensors&&(this.clonedTensorsMap[I.name]=this.cloneTensorList(P)),this.checkTensorForDisposalWithNodeLiveUntilInfo(I,m,p,w,s,C.get(I.name))}return this.parent==null&&p.dispose(w),n.map(I=>$t(I,m,p))})}getFrozenTensorIds(e){let n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(o=>o.id)));return new Set(n)}checkTensorForDisposal(e,n,r,o,i,s,a){if(!($s(n)||s.has(e))){for(let l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(let l of n.inputs){if($s(l))continue;let c=PT(l.name,r,o);if(c!=null)for(let u of c){if(!u||u.kept||i.has(u.id))continue;let f=a[u.id];f===1?(u.dispose(),delete a[u.id]):f!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,o,i,s){function a(l){return $s(l)||i.has(l.name)}if(!($s(e)||s==null))for(let l of s){if(a(l))continue;let c=PT(l.name,n,r);for(let u of c)!u||u.kept||o.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,o={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ne().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let s=new Of(this.weightMap,o,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let a=await this.executeWithControlFlow(e,s,n,r),l=n.map(p=>$t(p,a,s)),c=l.map(p=>p.id),u=Object.keys(e).map(p=>e[p].id),f=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(p=>{p.forEach(m=>{m&&!m.isDisposed&&!f.has(m.id)&&m.dispose()})}),this.parent==null&&s.dispose(f),l}async executeFunctionAsync(e,n,r){let o=e.reduce((i,s,a)=>(i[this.inputs[a].name]=s,i),{});return this._executeAsync(o,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,o){let i=Object.keys(e),s=i.map(k=>this.graph.nodes[Wn(k)[0]]),a=r.map(k=>Wn(k)[0]),l=new Set(a),c=a.map(k=>this.graph.nodes[k]);c.length===0&&(c=this._outputs);let{usedNodes:u,missingInputs:f,dynamicNode:p,syncInputs:m}=oI(e,c,this.weightMap,this._initNodes),w=[...s,...this.graph.weights,...this._initNodes||[]].map(k=>({node:k,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(e).forEach(k=>{let[V,L]=Wn(k),H=[];H[L]=e[k],x[V]=H});let C={},I=this.getFrozenTensorIds(x),P={};for(;w.length>0;){let k=this.processStack(s,w,n,x,P,I,l,C,u);await Promise.all(k)}p==null&&!o&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let A=c.filter(k=>!$s(k)&&!$t(k.name,x,n)).map(k=>k.name);if(A.length>0){let k="";throw p!=null&&(k=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${A}] from the provided inputs [${i}]. Consider providing the following inputs: [${f}]. ${k}`)}return x}processStack(e,n,r,o,i,s,a,l,c){let u=[];for(;n.length>0;){let f=n.pop();r.currentContext=f.contexts;let p="";if(f.node.op==="Enter"&&g("isConstant",f.node,o,r)&&([p]=ko(f.node.name,r)),o[f.node.name]==null){let m=rI(f.node,o,r,this._resourceManager);p||([p]=ko(f.node.name,r));let w=r.currentContext;j.isPromise(m)?u.push(m.then(x=>(o[p]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(x)),r.currentContext=w,this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c),x))):(o[p]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(m)),this.checkTensorForDisposal(p,f.node,o,r,s,a,l),this.processChildNodes(f.node,n,r,o,i,c))}else this.processChildNodes(f.node,n,r,o,i,c)}return u}processChildNodes(e,n,r,o,i,s){e.children.forEach(a=>{let[l]=ko(a.name,r);i[l]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!$t(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!$t(c,o,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{let r=e[n],[o]=Wn(n),i=this.graph.nodes[o];if(i.attrParams.shape&&i.attrParams.shape.value){let s=i.attrParams.shape.value,a=s.length===r.shape.length&&r.shape.every((l,c)=>s[c]===-1||s[c]===l);j.assert(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&j.assert(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;let o={};for(let i in e){let s=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];s!=null?o[s.name]=e[i]:o[i]=e[i]}return o}checkInputs(e){let n=Object.keys(e).filter(r=>{let[o]=Wn(r);return this.graph.nodes[o]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,o;let i=(o=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||o===void 0?void 0:o[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{let[r]=Wn(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}};var zg=class{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}};var VY="?tfjs-format=file",$Y="model.json",Gg=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=zc){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new zg}findIOHandler(){let e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return j.isPromise(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){let n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let n=await tg(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;let r=this.artifacts.modelTopology,o=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let i=this.artifacts.userDefinedMetadata;i.signature!=null&&(o=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=o,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new Rf(kf.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){let i=kf.Instance.transformGraph(e.modelInitializer);this.initializer=new Rf(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){let r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let n=e instanceof Ie?[e]:e,r={};return n.forEach((o,i)=>r[this.structuredOutputKeys[i]]=o),r}return e}predict(e,n){let r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){let r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Ie)&&!Array.isArray(e)){let i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(let s in i){let a=i[s];a.resourceId!=null&&(e[s]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];let r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let o=0;return this.inputNodes.reduce((i,s)=>{var a,l,c;let u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[s])===null||c===void 0?void 0:c.resourceId;return u!=null?i[s]=this.resourceIdToCapturedInput[u]:i[s]=e[o++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,r=Object.keys(n);for(let o=0;o<r.length;o++){let i=r[o],s=n[i];this.resourceIdToCapturedInput[s.resourceId]=e[o]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ct(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function Pf(t,e={},n=zc){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=jY(t));let r=new Gg(t,e,n);return await r.load(),r}function jY(t){return t.endsWith("/")||(t=t+"/"),`${t}${$Y}${VY}`}var sL=sv(jF());var uI=function(t,e){return uI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},uI(t,e)};function aL(t,e){function n(){this.constructor=t}uI(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qn=function(){return qn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},qn.apply(this,arguments)};function Ue(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(c){try{l(r.next(c))}catch(u){i(u)}}function a(c){try{l(r.throw(c))}catch(u){i(u)}}function l(c){var u;c.done?o(c.value):(u=c.value,u instanceof n?u:new n(function(f){f(u)})).then(s,a)}l((r=r.apply(t,e||[])).next())})}function ze(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(l){return function(c){return(function(u){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||u[0]!==6&&u[0]!==2)){s=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(u[0]===6&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(f){u=[6,f],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([l,c])}}}function ey(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function fI(t){return Ue(this,void 0,void 0,function(){var e,n;return ze(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof Ie?[4,Mo.toPixels(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=ey(t.width),e.height=ey(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function lL(t){return Ue(this,void 0,void 0,function(){var e,n,r,o,i,s;return ze(this,function(a){switch(a.label){case 0:return t instanceof Ie?(e=t.shape.slice(0,2),n=e[0],r=e[1],o=ImageData.bind,[4,Mo.toPixels(t)]):[3,2];case 1:return[2,new(o.apply(ImageData,[void 0,a.sent(),r,n]))];case 2:return i=document.createElement("canvas"),s=i.getContext("2d"),i.width=ey(t.width),i.height=ey(t.height),s.drawImage(t,0,0),[2,s.getImageData(0,0,i.width,i.height)]}})})}function cL(t){return Ue(this,void 0,void 0,function(){var e,n;return ze(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,fI(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,Mo.fromPixels(e,4)]}})})}function ny(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got "+t);if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got "+t)}function uL(t){var e=t.shape[2],n=qd(t,2),r=R(n,[-1]);return As(r,e)}function Wg(t,e){return oe(function(){return pe(oi(t,ie(e)),"int32")})}function BY(t,e){var n=e.shape,r=n[0],o=n[1],i=n[2];return oe(function(){var s=uL(e),a=pn(Zr(0,i,1,"int32"),1),l=pe(Me(s,a),"int32"),c=R(l,[r,o]),u=J(c,ie(1,"int32"));return se((function(f,p){return $(f,p)})(u,t),ie(1,"int32"))})}var dL=(function(){function t(e,n){this.model=e,this.outputStride=n;var r=this.model.inputs[0].shape;j.assert(r[1]===-1&&r[2]===-1,function(){return"Input shape ["+r[1]+", "+r[2]+"] must both be equal to or -1"})}return t.prototype.predict=function(e){var n=this;return oe(function(){var r=n.preprocessInput(pe(e,"float32")),o=pn(r,0),i=n.model.predict(o).map(function(a){return Gn(a,[0])}),s=n.nameOutputResults(i);return{heatmapScores:rr(s.heatmap),offsets:s.offsets,displacementFwd:s.displacementFwd,displacementBwd:s.displacementBwd,segmentation:s.segmentation,partHeatmaps:s.partHeatmaps,longOffsets:s.longOffsets,partOffsets:s.partOffsets}})},t.prototype.dispose=function(){this.model.dispose()},t})(),HY=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return aL(e,t),e.prototype.preprocessInput=function(n){return oe(function(){return se(De(n,127.5),1)})},e.prototype.nameOutputResults=function(n){return{offsets:n[0],segmentation:n[1],partHeatmaps:n[2],longOffsets:n[3],heatmap:n[4],displacementFwd:n[5],displacementBwd:n[6],partOffsets:n[7]}},e})(dL),ry=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Ro=ry.length,ty=ry.reduce(function(t,e,n){return t[e]=n,t},{});[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(t){var e=t[0],n=t[1];return[ty[e],ty[n]]});function pI(t,e,n){var r=t[0],o=t[1],i=e[0],s=e[1],a=n.top,l=n.bottom;return[s/(n.left+n.right+o),i/(a+l+r)]}function fL(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+Ro)}}function pL(t,e,n){var r=fL(t.heatmapY,t.heatmapX,t.id,n),o=r.y,i=r.x;return{x:t.heatmapX*e+i,y:t.heatmapY*e+o}}function BF(t,e,n){return t<e?e:t>n?n:t}function HF(t,e){return{x:t.x+e.x,y:t.y+e.y}}function UY(t,e,n){n===void 0&&(n=.3);for(var r=0,o=0,i=0;i<t.length;i++)e.keypoints[i].score>n&&(o+=1,r+=Math.pow(t[i].x-e.keypoints[i].position.x,2)+Math.pow(t[i].y-e.keypoints[i].position.y,2));return o===0?r=1/0:r/=o,r}function zY(t,e,n,r,o,i,s){for(var a=s[0],l=s[1],c=n(t),u=c.y*r+c.x,f=o[Ro*(2*u)+e],p=o[Ro*(2*u+1)+e],m=t.y+f,w=t.x+p,x=0;x<i;x++){m=Math.min(m,a-1);var C=n({x:w=Math.min(w,l-1),y:m}),I=C.y*r+C.x;m+=f=o[Ro*(2*I)+e],w+=p=o[Ro*(2*I+1)+e]}return{x:w,y:m}}function hL(t,e,n,r,o,i,s,a,l,c){for(var u=o[0],f=o[1],p=i[0],m=i[1],w=a[0],x=a[1],C=[],I=function(G){return(function(W,X,U,fe){var ue=X[0],Pe=X[1],Ve=U[0],Et=U[1],It=Math.round(((ue+W.y+1)*Et-1)/fe);return{x:Math.round(((Pe+W.x+1)*Ve-1)/fe),y:It}})(G,[u,f],[p,m],l)},P=0;P<r;P++){var A=zY(t,P,I,s,e,c,[w,x]);C.push(A)}for(var k=-1,V=1/0,L=0;L<n.length;L++){var H=UY(C,n[L]);H<V&&(k=L,V=H)}return k}function mL(t,e){var n=t[0],r=t[1];return[Math.round((r-1)/e+1),Math.round((n-1)/e+1)]}function gL(t,e,n,r,o,i,s,a,l,c,u){for(var f=s[0],p=s[1],m=t.shape,w=m[0],x=m[1],C=e.shape.slice(0,2),I=C[0],P=C[1],A=R(e,[I,P,2,Ro]),k=new Float32Array(u*Ro*3).fill(0),V=0;V<n.length;V++)for(var L=V*Ro*3,H=n[V],G=0;G<Ro;G++){var W=H.keypoints[G],X=L+3*G;k[X]=W.score,k[X+1]=W.position.y,k[X+2]=W.position.x}var U=pI([r,o],[f,p],a),fe=U[0],ue=U[1],Pe=fn(k,[u,Ro,3]),Ve=a.top,Et=a.left,It={variableNames:["segmentation","longOffsets","poses"],outputShape:[w,x],userCode:`
    int convertToPositionInOutput(int pos, int pad, float scale, int stride) {
      return round(((float(pos + pad) + 1.0) * scale - 1.0) / float(stride));
    }

    float convertToPositionInOutputFloat(
        int pos, int pad, float scale, int stride) {
      return ((float(pos + pad) + 1.0) * scale - 1.0) / float(stride);
    }

    float dist(float x1, float y1, float x2, float y2) {
      return pow(x1 - x2, 2.0) + pow(y1 - y2, 2.0);
    }

    float sampleLongOffsets(float h, float w, int d, int k) {
      float fh = fract(h);
      float fw = fract(w);
      int clH = int(ceil(h));
      int clW = int(ceil(w));
      int flH = int(floor(h));
      int flW = int(floor(w));
      float o11 = getLongOffsets(flH, flW, d, k);
      float o12 = getLongOffsets(flH, clW, d, k);
      float o21 = getLongOffsets(clH, flW, d, k);
      float o22 = getLongOffsets(clH, clW, d, k);
      float o1 = mix(o11, o12, fw);
      float o2 = mix(o21, o22, fw);
      return mix(o1, o2, fh);
    }

    int findNearestPose(int h, int w) {
      float prob = getSegmentation(h, w);
      if (prob < 1.0) {
        return -1;
      }

      // Done(Tyler): convert from output space h/w to strided space.
      float stridedH = convertToPositionInOutputFloat(
        h, `+Ve+", "+ue+", "+i+`);
      float stridedW = convertToPositionInOutputFloat(
        w, `+Et+", "+fe+", "+i+`);

      float minDist = 1000000.0;
      int iMin = -1;
      for (int i = 0; i < `+u+`; i++) {
        float curDistSum = 0.0;
        int numKpt = 0;
        for (int k = 0; k < `+Ro+`; k++) {
          float dy = sampleLongOffsets(stridedH, stridedW, 0, k);
          float dx = sampleLongOffsets(stridedH, stridedW, 1, k);

          float y = float(h) + dy;
          float x = float(w) + dx;

          for (int s = 0; s < `+l+`; s++) {
            int yRounded = round(min(y, float(`+(r-1)+`)));
            int xRounded = round(min(x, float(`+(o-1)+`)));

            float yStrided = convertToPositionInOutputFloat(
              yRounded, `+Ve+", "+ue+", "+i+`);
            float xStrided = convertToPositionInOutputFloat(
              xRounded, `+Et+", "+fe+", "+i+`);

            float dy = sampleLongOffsets(yStrided, xStrided, 0, k);
            float dx = sampleLongOffsets(yStrided, xStrided, 1, k);

            y = y + dy;
            x = x + dx;
          }

          float poseScore = getPoses(i, k, 0);
          float poseY = getPoses(i, k, 1);
          float poseX = getPoses(i, k, 2);
          if (poseScore > `+c+`) {
            numKpt = numKpt + 1;
            curDistSum = curDistSum + dist(x, y, poseX, poseY);
          }
        }
        if (numKpt > 0 && curDistSum / float(numKpt) < minDist) {
          minDist = curDistSum / float(numKpt);
          iMin = i;
        }
      }
      return iMin;
    }

    void main() {
        ivec2 coords = getOutputCoords();
        int nearestPose = findNearestPose(coords[0], coords[1]);
        setOutput(float(nearestPose));
      }
  `};return Ud().compileAndRun(It,[t,A,Pe])}function yL(){return Hd()==="webgl"}function GY(t,e,n,r,o,i,s,a,l,c,u,f){var p=s[0],m=s[1];return l===void 0&&(l=.2),c===void 0&&(c=8),u===void 0&&(u=.3),f===void 0&&(f=10),Ue(this,void 0,void 0,function(){var w,x,C,I,P;return ze(this,function(A){switch(A.label){case 0:return w=n.filter(function(k){return k.score>=l}),yL()?(C=oe(function(){var k=gL(t,e,w,r,o,i,[p,m],a,c,u,f),V=Jm().makeTensorFromDataId(k.dataId,k.shape,k.dtype);return w.map(function(L,H){return(function(G,W){return oe(function(){return pe(Cs(G,ie(W)),"int32")})})(V,H)})}),[4,Promise.all(C.map(function(k){return k.data()}))]):[3,2];case 1:return x=A.sent(),C.forEach(function(k){return k.dispose()}),[3,5];case 2:return[4,t.data()];case 3:return I=A.sent(),[4,e.data()];case 4:P=A.sent(),x=(function(k,V,L,H,G,W,X,U,fe,ue){var Pe=X[0],Ve=X[1];ue===void 0&&(ue=5);for(var Et=L.map(function(di){return new Uint8Array(H*G).fill(0)}),It=U.top,mn=U.left,Xt=pI([H,G],[Pe,Ve],U),ci=Xt[0],Us=Xt[1],ui=mL([Pe,Ve],W)[0],Or=0;Or<H;Or+=1)for(var Rr=0;Rr<G;Rr+=1){var Jr=Or*G+Rr;if(k[Jr]===1){var Pr=hL({x:Rr,y:Or},V,L,ue,[It,mn],[ci,Us],ui,[H,G],W,fe);Pr>=0&&(Et[Pr][Jr]=1)}}return Et})(I,P,w,r,o,i,[p,m],a,c),A.label=5;case 5:return[2,x.map(function(k,V){return{data:k,pose:w[V],width:o,height:r}})]}})})}function WY(t,e,n,r,o,i,s,a,l,c,u,f,p){var m=a[0],w=a[1];return c===void 0&&(c=.2),u===void 0&&(u=8),f===void 0&&(f=.3),p===void 0&&(p=10),Ue(this,void 0,void 0,function(){var x,C,I,P,A,k;return ze(this,function(V){switch(V.label){case 0:return x=r.filter(function(L){return L.score>=c}),yL()?(I=oe(function(){var L=gL(t,e,x,o,i,s,[m,w],l,u,f,p),H=Jm().makeTensorFromDataId(L.dataId,L.shape,L.dtype);return x.map(function(G,W){return(function(X,U,fe){return oe(function(){return se($(pe(Cs(X,ie(fe)),"int32"),J(U,1)),1)})})(H,n,W)})}),[4,Promise.all(I.map(function(L){return L.data()}))]):[3,2];case 1:return C=V.sent(),I.forEach(function(L){return L.dispose()}),[3,6];case 2:return[4,t.data()];case 3:return P=V.sent(),[4,e.data()];case 4:return A=V.sent(),[4,n.data()];case 5:k=V.sent(),C=(function(L,H,G,W,X,U,fe,ue,Pe,Ve,Et){var It=ue[0],mn=ue[1];Et===void 0&&(Et=5);for(var Xt=W.map(function(El){return new Int32Array(X*U).fill(-1)}),ci=Pe.top,Us=Pe.left,ui=pI([X,U],[It,mn],Pe),Or=ui[0],Rr=ui[1],Jr=mL([It,mn],fe)[0],Pr=0;Pr<X;Pr+=1)for(var di=0;di<U;di+=1){var Yi=Pr*U+di;if(L[Yi]===1){var zs=hL({x:di,y:Pr},H,W,Et,[ci,Us],[Or,Rr],Jr,[X,U],fe,Ve);zs>=0&&(Xt[zs][Yi]=G[Yi])}}return Xt})(P,A,k,x,o,i,s,[m,w],l,u),V.label=6;case 6:return[2,C.map(function(L,H){return{pose:x[H],data:L,height:o,width:i}})]}})})}function iI(t){return Math.floor(t/2)}var qY=(function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(iI(e),e);)this.exchange(e,iI(e)),e=iI(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t})();function KY(t,e,n,r,o,i){for(var s=i.shape,a=s[0],l=s[1],c=!0,u=Math.max(n-o,0),f=Math.min(n+o+1,a),p=u;p<f;++p){for(var m=Math.max(r-o,0),w=Math.min(r+o+1,l),x=m;x<w;++x)if(i.get(p,x,t)>e){c=!1;break}if(!c)break}return c}var vL=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(t){var e=t[0],n=t[1];return[ty[e],ty[n]]}),sI=vL.map(function(t){return t[1]}),UF=vL.map(function(t){return t[0]});function aI(t,e,n,r){return{y:BF(Math.round(t.y/e),0,n-1),x:BF(Math.round(t.x/e),0,r-1)}}function zF(t,e,n,r,o,i,s,a){a===void 0&&(a=2);for(var l=r.shape,c=l[0],u=l[1],f=(function(P,A,k){var V=k.shape[2]/2;return{y:k.get(A.y,A.x,P),x:k.get(A.y,A.x,V+P)}})(t,aI(e.position,i,c,u),s),p=HF(e.position,f),m=0;m<a;m++){var w=aI(p,i,c,u),x=fL(w.y,w.x,n,o);p=HF({x:w.x*i,y:w.y*i},{x:x.x,y:x.y})}var C=aI(p,i,c,u),I=r.get(C.y,C.x,n);return{position:p,part:ry[n],score:I}}function YY(t,e,n,r,o,i){var s=e.shape[2],a=sI.length,l=new Array(s),c=t.part,u=t.score,f=pL(c,r,n);l[c.id]={score:u,part:ry[c.id],position:f};for(var p=a-1;p>=0;--p){var m=sI[p],w=UF[p];l[m]&&!l[w]&&(l[w]=zF(p,l[m],w,e,n,r,i))}for(p=0;p<a;++p)m=UF[p],w=sI[p],l[m]&&!l[w]&&(l[w]=zF(p,l[m],w,e,n,r,o));return l}function bL(t,e,n,r){var o=n.x,i=n.y;return t.some(function(s){var a,l,c,u,f,p,m=s.keypoints[r].position;return a=i,l=o,c=m.y,u=m.x,(f=c-a)*f+(p=u-l)*p<=e})}function XY(t,e,n){var r=n.reduce(function(o,i,s){var a=i.position,l=i.score;return bL(t,e,a,s)||(o+=l),o},0);return r/n.length}function qg(t,e,n,r,o,i,s,a){s===void 0&&(s=.5),a===void 0&&(a=20);for(var l=[],c=(function(w,x,C){for(var I=C.shape,P=I[0],A=I[1],k=I[2],V=new qY(P*A*k,function(X){return X.score}),L=0;L<P;++L)for(var H=0;H<A;++H)for(var G=0;G<k;++G){var W=C.get(L,H,G);W<w||KY(G,W,L,H,x,C)&&V.enqueue({score:W,part:{heatmapY:L,heatmapX:H,id:G}})}return V})(s,1,t),u=a*a;l.length<i&&!c.empty();){var f=c.dequeue();if(!bL(l,u,pL(f.part,o,e),f.part.id)){var p=YY(f,t,e,o,n,r),m=XY(l,u,p);l.push({keypoints:p,score:m})}}return l}var Ff,ZY=[-123.15,-115.9,-103.06],QY=(function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return aL(e,t),e.prototype.preprocessInput=function(n){return J(n,ZY)},e.prototype.nameOutputResults=function(n){var r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],l=n[5];return{offsets:a,segmentation:n[6],partHeatmaps:l,longOffsets:s,heatmap:i,displacementFwd:o,displacementBwd:r,partOffsets:n[7]}},e})(dL),GF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/resnet50/",WF="https://storage.googleapis.com/tfjs-models/savedmodel/bodypix/mobilenet/";function Lf(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return(function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return(function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]})(t);if(t instanceof Ie)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function qF(t,e){return(function(n,r){return(n-1)%r==0})(t,e)?t:Math.floor(t/e)*e+1}var Vf={low:"low",medium:"medium",high:"high",full:"full"},JY=((Ff={})[Vf.low]=.25,Ff[Vf.medium]=.5,Ff[Vf.high]=.75,Ff[Vf.full]=1,Ff);function Kg(t,e,n){var r=n[0],o=n[1],i=(function(s){if(typeof s=="string"){var a=JY[s];return j.assert(typeof a=="number",function(){return"string value of inputResolution must be one of "+Object.values(Vf).join(",")+" but was "+s+"."}),a}return j.assert(typeof s=="number"&&s<=2&&s>=.1,function(){return"inputResolution must be a string or number between 0.1 and 2, but was "+s}),s})(t);return[qF(r*i,e),qF(o*i,e)]}function Yc(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],l=n[1],c=r[0],u=c[0],f=c[1],p=r[1],m=p[0],w=p[1];return o===void 0&&(o=!1),oe(function(){var x=ks.resizeBilinear(t,[a,l],!0);return o&&(x=rr(x)),(function(C,I,P){var A=I[0],k=I[1],V=P[0],L=V[0],H=V[1],G=P[1],W=G[0],X=G[1];return oe(function(){var U=pn(C);return Gn(ks.cropAndResize(U,[[L/(A+L+H-1),W/(k+W+X-1),(L+A-1)/(A+L+H-1),(W+k-1)/(k+W+X-1)]],[0],[A,k]),[0])})})(x,[i,s],[[u,f],[m,w]])})}function Yg(t,e){var n=e[0],r=e[1],o=Lf(t),i=o[0],s=o[1],a=r/n,l=[0,0,0,0],c=l[0],u=l[1],f=l[2],p=l[3];s/i<a?(c=0,u=0,f=Math.round(.5*(a*i-s)),p=Math.round(.5*(a*i-s))):(c=Math.round(.5*(1/a*s-i)),u=Math.round(.5*(1/a*s-i)),f=0,p=0);var m=oe(function(){var w=(function(x){return x instanceof Ie?x:Mo.fromPixels(x)})(t);return w=mf(w,[[c,u],[f,p],[0,0]]),ks.resizeBilinear(w,[n,r])});return{resized:m,padding:{top:c,left:f,right:p,bottom:u}}}function Xg(t){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function Zg(t,e,n,r,o){var i=e[0],s=e[1],a=n[0],l=n[1],c=(function(u,f,p,m,w){return m===void 0&&(m=0),w===void 0&&(w=0),p===1&&f===1&&m===0&&w===0?u:u.map(function(x){return(function(C,I,P,A,k){return A===void 0&&(A=0),k===void 0&&(k=0),{score:C.score,keypoints:C.keypoints.map(function(V){var L=V.score,H=V.part,G=V.position;return{score:L,part:H,position:{x:G.x*P+k,y:G.y*I+A}}})}})(x,f,p,m,w)})})(t,(i+r.top+r.bottom)/a,(s+r.left+r.right)/l,-r.top,-r.left);return o?(function(u,f){return f<=0?u:u.map(function(p){return(function(m,w){return{score:m.score,keypoints:m.keypoints.map(function(x){var C=x.score,I=x.part,P=x.position;return{score:C,part:I,position:{x:w-1-P.x,y:P.y}}})}})(p,f)})})(c,s):c}var KF={architecture:"MobileNetV1",outputStride:16,quantBytes:4,multiplier:.75},YF=["MobileNetV1","ResNet50"],XF={MobileNetV1:[8,16,32],ResNet50:[32,16]},ZF={MobileNetV1:[.5,.75,1],ResNet50:[1]},QF=[1,2,4],Qg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20},Jg={flipHorizontal:!1,internalResolution:"medium",segmentationThreshold:.7,maxDetections:10,scoreThreshold:.4,nmsRadius:20,minKeypointScore:.3,refineSteps:10};function JF(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".")}function eL(t){var e=t.segmentationThreshold,n=t.maxDetections,r=t.scoreThreshold,o=t.nmsRadius,i=t.minKeypointScore,s=t.refineSteps;if(e<0||e>1)throw new Error("segmentationThreshold "+e+". Should be in range [0.0, 1.0]");if(n<=0)throw new Error("Invalid maxDetections "+n+". Should be > 0");if(r<0||r>1)throw new Error("Invalid scoreThreshold "+r+". Should be in range [0.0, 1.0]");if(o<=0)throw new Error("Invalid nmsRadius "+o+".");if(i<0||i>1)throw new Error("Invalid minKeypointScore "+i+".Should be in range [0.0, 1.0]");if(s<=0||s>20)throw new Error("Invalid refineSteps "+s+".Should be in range [1, 20]")}var wL=(function(){function t(e){this.baseModel=e}return t.prototype.predictForPersonSegmentation=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForPersonSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,partHeatmapLogits:n.partHeatmaps,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd}},t.prototype.predictForMultiPersonInstanceSegmentationAndPart=function(e){var n=this.baseModel.predict(e);return{segmentLogits:n.segmentation,longOffsets:n.longOffsets,heatmapScores:n.heatmapScores,offsets:n.offsets,displacementFwd:n.displacementFwd,displacementBwd:n.displacementBwd,partHeatmaps:n.partHeatmaps}},t.prototype.segmentPersonActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=Lf(e),s=i[0],a=i[1],l=Kg(n,this.baseModel.outputStride,[s,a]),c=Yg(e,l),u=c.resized,f=c.padding,p=oe(function(){var P=o.predictForPersonSegmentation(u),A=P.segmentLogits,k=P.heatmapScores,V=P.offsets,L=P.displacementFwd,H=P.displacementBwd,G=u.shape,W=G[0],X=G[1],U=Yc(A,[s,a],[W,X],[[f.top,f.bottom],[f.left,f.right]],!0);return{segmentation:Wg(Gn(U),r),heatmapScores:k,offsets:V,displacementFwd:L,displacementBwd:H}}),m=p.segmentation,w=p.heatmapScores,x=p.offsets,C=p.displacementFwd,I=p.displacementBwd;return u.dispose(),{segmentation:m,heatmapScores:w,offsets:x,displacementFwd:C,displacementBwd:I,padding:f,internalResolutionHeightAndWidth:l}},t.prototype.segmentPerson=function(e,n){return n===void 0&&(n=Qg),Ue(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,C,I,P,A,k;return ze(this,function(V){switch(V.label){case 0:return JF(n=qn(qn({},Qg),n)),r=this.segmentPersonActivation(e,n.internalResolution,n.segmentationThreshold),o=r.segmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=V.sent(),o.dispose(),[4,Xg([i,s,a,l])];case 2:return x=V.sent(),C=x[0],I=x[1],P=x[2],A=x[3],k=Zg(k=qg(C,I,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:k}]}})})},t.prototype.segmentMultiPerson=function(e,n){return n===void 0&&(n=Jg),Ue(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,C,I,P,A,k,V,L,H,G=this;return ze(this,function(W){switch(W.label){case 0:return eL(n=qn(qn({},Jg),n)),r=Lf(e),o=r[0],i=r[1],s=Kg(n.internalResolution,this.baseModel.outputStride,[o,i]),a=Yg(e,s),l=a.resized,c=a.padding,u=oe(function(){var X,U=G.predictForMultiPersonInstanceSegmentationAndPart(l),fe=U.segmentLogits,ue=U.longOffsets,Pe=U.heatmapScores,Ve=U.offsets,Et=U.displacementFwd,It=U.displacementBwd,mn=Yc(fe,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0);return X=ue,{segmentation:Wg(Gn(mn),n.segmentationThreshold),longOffsets:X,heatmapScoresRaw:Pe,offsetsRaw:Ve,displacementFwdRaw:Et,displacementBwdRaw:It}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,C=u.displacementBwdRaw,[4,Xg([m,w,x,C])];case 1:return I=W.sent(),P=I[0],A=I[1],k=I[2],V=I[3],L=Zg(L=qg(P,A,k,V,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,GY(f,p,L,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return H=W.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),C.dispose(),[2,H]}})})},t.prototype.segmentPersonPartsActivation=function(e,n,r){var o=this;r===void 0&&(r=.5);var i=Lf(e),s=i[0],a=i[1],l=Kg(n,this.baseModel.outputStride,[s,a]),c=Yg(e,l),u=c.resized,f=c.padding,p=oe(function(){var P=o.predictForPersonSegmentationAndPart(u),A=P.segmentLogits,k=P.partHeatmapLogits,V=P.heatmapScores,L=P.offsets,H=P.displacementFwd,G=P.displacementBwd,W=u.shape,X=W[0],U=W[1],fe=Yc(A,[s,a],[X,U],[[f.top,f.bottom],[f.left,f.right]],!0),ue=Yc(k,[s,a],[X,U],[[f.top,f.bottom],[f.left,f.right]],!0);return{partSegmentation:BY(Wg(Gn(fe),r),ue),heatmapScores:V,offsets:L,displacementFwd:H,displacementBwd:G}}),m=p.partSegmentation,w=p.heatmapScores,x=p.offsets,C=p.displacementFwd,I=p.displacementBwd;return u.dispose(),{partSegmentation:m,heatmapScores:w,offsets:x,displacementFwd:C,displacementBwd:I,padding:f,internalResolutionHeightAndWidth:l}},t.prototype.segmentPersonParts=function(e,n){return n===void 0&&(n=Qg),Ue(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,C,I,P,A,k;return ze(this,function(V){switch(V.label){case 0:return JF(n=qn(qn({},Qg),n)),r=this.segmentPersonPartsActivation(e,n.internalResolution,n.segmentationThreshold),o=r.partSegmentation,i=r.heatmapScores,s=r.offsets,a=r.displacementFwd,l=r.displacementBwd,c=r.padding,u=r.internalResolutionHeightAndWidth,f=o.shape,p=f[0],m=f[1],[4,o.data()];case 1:return w=V.sent(),o.dispose(),[4,Xg([i,s,a,l])];case 2:return x=V.sent(),C=x[0],I=x[1],P=x[2],A=x[3],k=Zg(k=qg(C,I,P,A,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[p,m],u,c,!1),i.dispose(),s.dispose(),a.dispose(),l.dispose(),[2,{height:p,width:m,data:w,allPoses:k}]}})})},t.prototype.segmentMultiPersonParts=function(e,n){return n===void 0&&(n=Jg),Ue(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u,f,p,m,w,x,C,I,P,A,k,V,L,H,G,W=this;return ze(this,function(X){switch(X.label){case 0:return eL(n=qn(qn({},Jg),n)),r=Lf(e),o=r[0],i=r[1],s=Kg(n.internalResolution,this.baseModel.outputStride,[o,i]),a=Yg(e,s),l=a.resized,c=a.padding,u=oe(function(){var U=W.predictForMultiPersonInstanceSegmentationAndPart(l),fe=U.segmentLogits,ue=U.longOffsets,Pe=U.heatmapScores,Ve=U.offsets,Et=U.displacementFwd,It=U.displacementBwd,mn=U.partHeatmaps,Xt=Yc(fe,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),ci=Yc(mn,[o,i],s,[[c.top,c.bottom],[c.left,c.right]],!0),Us=ue,ui=Wg(Gn(Xt),n.segmentationThreshold),Or=(function(Rr){var Jr=Rr.shape,Pr=Jr[0],di=Jr[1],Yi=Jr[2];return oe(function(){var zs=uL(Rr),El=pn(Zr(0,Yi,1,"int32"),1),Gs=pe(Me(zs,El),"int32");return R(Gs,[Pr,di])})})(ci);return{segmentation:ui,longOffsets:Us,heatmapScoresRaw:Pe,offsetsRaw:Ve,displacementFwdRaw:Et,displacementBwdRaw:It,partSegmentation:Or}}),f=u.segmentation,p=u.longOffsets,m=u.heatmapScoresRaw,w=u.offsetsRaw,x=u.displacementFwdRaw,C=u.displacementBwdRaw,I=u.partSegmentation,[4,Xg([m,w,x,C])];case 1:return P=X.sent(),A=P[0],k=P[1],V=P[2],L=P[3],H=Zg(H=qg(A,k,V,L,this.baseModel.outputStride,n.maxDetections,n.scoreThreshold,n.nmsRadius),[o,i],s,c,!1),[4,WY(f,p,I,H,o,i,this.baseModel.outputStride,s,c,n.scoreThreshold,n.refineSteps,n.minKeypointScore,n.maxDetections)];case 2:return G=X.sent(),l.dispose(),f.dispose(),p.dispose(),m.dispose(),w.dispose(),x.dispose(),C.dispose(),I.dispose(),[2,G]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t})();function eX(t){return Ue(this,void 0,void 0,function(){var e,n,r,o,i,s;return ze(this,function(a){switch(a.label){case 0:if(e=t.outputStride,n=t.quantBytes,r=t.multiplier,Af==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return o=(function(l,c,u){var f={1:"100",.75:"075",.5:"050"},p="model-stride"+l+".json";return u===4?WF+"float/"+f[c]+"/"+p:WF+"quant"+u+"/"+f[c]+"/"+p})(e,r,n),[4,Pf(t.modelUrl||o)];case 1:return i=a.sent(),s=new HY(i,e),[2,new wL(s)]}})})}function tX(t){return Ue(this,void 0,void 0,function(){var e,n,r,o,i;return ze(this,function(s){switch(s.label){case 0:if(e=t.outputStride,n=t.quantBytes,Af==null)throw new Error(`Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this
        model.`);return r=(function(a,l){var c="model-stride"+a+".json";return l===4?GF+"float/"+c:GF+"quant"+l+"/"+c})(e,n),[4,Pf(t.modelUrl||r)];case 1:return o=s.sent(),i=new QY(o,e),[2,new wL(i)]}})})}function nX(t){return t===void 0&&(t=KF),Ue(this,void 0,void 0,function(){return ze(this,function(e){return(t=(function(n){if((n=n||KF).architecture==null&&(n.architecture="MobileNetV1"),YF.indexOf(n.architecture)<0)throw new Error("Invalid architecture "+n.architecture+". Should be one of "+YF);if(n.outputStride==null&&(n.outputStride=16),XF[n.architecture].indexOf(n.outputStride)<0)throw new Error("Invalid outputStride "+n.outputStride+". Should be one of "+XF[n.architecture]+" for architecture "+n.architecture+".");if(n.multiplier==null&&(n.multiplier=1),ZF[n.architecture].indexOf(n.multiplier)<0)throw new Error("Invalid multiplier "+n.multiplier+". Should be one of "+ZF[n.architecture]+" for architecture "+n.architecture+".");if(n.quantBytes==null&&(n.quantBytes=4),QF.indexOf(n.quantBytes)<0)throw new Error("Invalid quantBytes "+n.quantBytes+". Should be one of "+QF+" for architecture "+n.architecture+".");return n})(t)).architecture==="ResNet50"?[2,tX(t)]:t.architecture==="MobileNetV1"?[2,eX(t)]:[2,null]})})}var dI=["left_face","right_face","left_upper_arm_front","left_upper_arm_back","right_upper_arm_front","right_upper_arm_back","left_lower_arm_front","left_lower_arm_back","right_lower_arm_front","right_lower_arm_back","left_hand","right_hand","torso_front","torso_back","left_upper_leg_front","left_upper_leg_back","right_upper_leg_front","right_upper_leg_back","left_lower_leg_front","left_lower_leg_back","right_lower_leg_front","right_lower_leg_back","left_feet","right_feet"],tL=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,fI(this.mask)]})})},t.prototype.toImageData=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,this.mask]})})},t.prototype.toTensor=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,cL(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"imagedata"},t})();function rX(t){if(ny(t),t!==255)throw new Error("Foreground id must be 255 but got "+t);return"person"}function oX(t){if(ny(t),t>=dI.length)throw new Error("Invalid body part value "+t);return dI[t]}var iX=(function(){function t(e){this.bodyPixModel=e}return t.prototype.segmentPeople=function(e,n){return Ue(this,void 0,void 0,function(){var r,o,i,s;return ze(this,function(a){switch(a.label){case 0:return e instanceof ImageBitmap&&((r=document.createElement("canvas")).getContext("2d").drawImage(e,0,0),e=r),n.segmentBodyParts?n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPersonParts(e,n)]:[3,2]:[3,5];case 1:return i=a.sent(),[3,4];case 2:return[4,this.bodyPixModel.segmentPersonParts(e,n)];case 3:i=[a.sent()],a.label=4;case 4:return o=i.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===-1?(p[4*w]=dI.length,p[4*w+3]=0):(p[4*w]=m,p[4*w+3]=255)}),{maskValueToLabel:oX,mask:new tL(new ImageData(p,u,f))}}),[3,10];case 5:return n.multiSegmentation?[4,this.bodyPixModel.segmentMultiPerson(e,n)]:[3,7];case 6:return s=a.sent(),[3,9];case 7:return[4,this.bodyPixModel.segmentPerson(e,n)];case 8:s=[a.sent()],a.label=9;case 9:o=s.map(function(l){var c=l.data,u=l.width,f=l.height,p=new Uint8ClampedArray(u*f*4).fill(0);return c.forEach(function(m,w){m===0?(p[4*w]=0,p[4*w+3]=0):(p[4*w]=255,p[4*w+3]=255)}),{maskValueToLabel:rX,mask:new tL(new ImageData(p,u,f))}}),a.label=10;case 10:return[2,o]}})})},t.prototype.dispose=function(){this.bodyPixModel.dispose()},t.prototype.reset=function(){},t})();function sX(t){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,nX(t).then(function(n){return new iX(n)})]})})}var nL={runtime:"mediapipe",modelType:"general"},aX=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,lL(this.mask)]})})},t.prototype.toTensor=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,cL(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t})();function lX(t){return ny(t),"person"}var cX=(function(){function t(e){var n,r=this;this.selfieMode=!1;var o;this.selfieSegmentationSolution=new sL.SelfieSegmentation({locateFile:(n=e.locateFile)!==null&&n!==void 0?n:function(i,s){return e.solutionPath?e.solutionPath.replace(/\/+$/,"")+"/"+i:s+"/"+i}}),e.modelType==="landscape"?o=1:o=0,this.selfieSegmentationSolution.setOptions({modelSelection:o,selfieMode:this.selfieMode}),this.selfieSegmentationSolution.onResults(function(i){r.segmentation=[{maskValueToLabel:lX,mask:new aX(i.segmentationMask)}]})}return t.prototype.segmentPeople=function(e,n){return Ue(this,void 0,void 0,function(){var r,o;return ze(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.selfieSegmentationSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Ie?(o=ImageData.bind,[4,Mo.toPixels(e)]):[3,2];case 1:return r=new(o.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:r=e,i.label=3;case 3:return e=r,[4,this.selfieSegmentationSolution.send({image:e})];case 4:return i.sent(),[2,this.segmentation]}})})},t.prototype.dispose=function(){this.selfieSegmentationSolution.close()},t.prototype.reset=function(){this.selfieSegmentationSolution.reset(),this.segmentation=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.selfieSegmentationSolution.initialize()},t})();function uX(t){return Ue(this,void 0,void 0,function(){var e,n;return ze(this,function(r){switch(r.label){case 0:return e=(function(o){if(o==null)return qn({},nL);var i=qn({},o);return i.runtime="mediapipe",i.modelType==null&&(i.modelType=nL.modelType),i})(t),[4,(n=new cX(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function dX(t,e,n,r){var o=t.width,i=t.height,s=r?-1:1,a=Math.cos(t.rotation),l=Math.sin(t.rotation),c=t.xCenter,u=t.yCenter,f=1/e,p=1/n,m=new Array(16);return m[0]=o*a*s*f,m[1]=-i*l*f,m[2]=0,m[3]=(-.5*o*a*s+.5*i*l+c)*f,m[4]=o*l*s*p,m[5]=i*a*p,m[6]=0,m[7]=(-.5*i*a-.5*o*l*s+u)*p,m[8]=0,m[9]=0,m[10]=o*f,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,(function(w){if(w.length!==16)throw new Error("Array length must be 16 but got "+w.length);return[[w[0],w[1],w[2],w[3]],[w[4],w[5],w[6],w[7]],[w[8],w[9],w[10],w[11]],[w[12],w[13],w[14],w[15]]]})(m)}function _L(t){return t instanceof Ie?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function lI(t,e){j.assert(t.width!==0,function(){return e+" width cannot be 0."}),j.assert(t.height!==0,function(){return e+" height cannot be 0."})}function fX(t,e){var n=(function(r,o,i,s){var a=o-r,l=s-i;if(a===0)throw new Error("Original min and max are both "+r+", range cannot be 0.");var c=l/a;return{scale:c,offset:i-r*c}})(0,255,e[0],e[1]);return oe(function(){return J($(t,n.scale),n.offset)})}function pX(t,e,n){var r=e.outputTensorSize,o=e.keepAspectRatio,i=e.borderMode,s=e.outputTensorFloatRange,a=_L(t),l=(function(p,m){return m?{xCenter:m.xCenter*p.width,yCenter:m.yCenter*p.height,width:m.width*p.width,height:m.height*p.height,rotation:m.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}})(a,n),c=(function(p,m,w){if(w===void 0&&(w=!1),!w)return{top:0,left:0,right:0,bottom:0};var x=m.height,C=m.width;lI(m,"targetSize"),lI(p,"roi");var I,P,A=x/C,k=p.height/p.width,V=0,L=0;return A>k?(I=p.width,P=p.width*A,L=(1-k/A)/2):(I=p.height/A,P=p.height,V=(1-A/k)/2),p.width=I,p.height=P,{top:L,left:V,right:V,bottom:L}})(l,r,o),u=dX(l,a.width,a.height,!1),f=oe(function(){var p,m=(p=t)instanceof Ie?p:Mo.fromPixels(p),w=Ao((function(I,P,A){return lI(A,"inputResolution"),[1/A.width*I[0][0]*P.width,1/A.height*I[0][1]*P.width,I[0][3]*P.width,1/A.width*I[1][0]*P.height,1/A.height*I[1][1]*P.height,I[1][3]*P.height,0,0]})(u,a,r),[1,8]),x=i==="zero"?"constant":"nearest",C=ks.transform(pn(pe(m,"float32")),w,"bilinear",x,0,[r.height,r.width]);return s!=null?fX(C,s):C});return{imageTensor:f,padding:c,transformationMatrix:u}}function hX(t,e,n){return oe(function(){var r=Gn(t,[0]),o=r.shape[2];if(o===1){var i=r;switch(e.activation){case"none":break;case"sigmoid":i=rr(i);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported ("+e.activation+")")}var s=n?ks.resizeBilinear(i,[n.height,n.width]):i;return Gn(s,[2])}throw new Error("Unsupported number of tensor channels "+o)})}var rL={runtime:"tfjs",modelType:"general",modelUrl:"https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1"},oL={flipHorizontal:!1},mX={outputTensorSize:{width:256,height:256},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},gX={outputTensorSize:{width:256,height:144},keepAspectRatio:!1,borderMode:"zero",outputTensorFloatRange:[0,1]},yX={activation:"none"},vX=(function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,fI(this.mask)]})})},t.prototype.toImageData=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,lL(this.mask)]})})},t.prototype.toTensor=function(){return Ue(this,void 0,void 0,function(){return ze(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t})();function bX(t){return ny(t),"person"}var Xc,wX=(function(){function t(e,n){this.modelType=e,this.model=n}return t.prototype.segmentPeople=function(e,n){return Ue(this,void 0,void 0,function(){var r,o=this;return ze(this,function(i){return n=(function(s){if(s==null)return qn({},oL);var a=qn({},s);return a.flipHorizontal==null&&(a.flipHorizontal=oL.flipHorizontal),a})(n),e==null?(this.reset(),[2,[]]):(r=oe(function(){var s=pX(e,o.modelType==="general"?mX:gX).imageTensor,a=Ne(o.model.predict(s),[0,0,0,1],-1),l=_L(e),c=hX(a,yX,l),u=pn(c,2),f=kr(u,[[0,0],[0,0],[0,1]]);return pf(f,[[0,0],[0,0],[0,2]],"symmetric")}),[2,[{maskValueToLabel:bX,mask:new vX(r)}]])})})},t.prototype.dispose=function(){this.model.dispose()},t.prototype.reset=function(){},t})();function _X(t){return Ue(this,void 0,void 0,function(){var e,n,r;return ze(this,function(o){switch(o.label){case 0:return e=(function(i){if(i==null)return qn({},rL);var s=qn({},i);if(s.runtime="tfjs",s.modelType==null&&(s.modelType=rL.modelType),s.modelType!=="general"&&s.modelType!=="landscape")throw new Error("Model type must be one of general or landscape, but got "+s.modelType);return s.modelUrl==null&&(s.modelType==="general"?s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/general/1":s.modelUrl="https://tfhub.dev/mediapipe/tfjs-model/selfie_segmentation/landscape/1"),s})(t),n=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Pf(e.modelUrl,{fromTFHub:n})];case 1:return r=o.sent(),[2,new wX(e.modelType,r)]}})})}function EL(t,e){return Ue(this,void 0,void 0,function(){var n,r;return ze(this,function(o){switch(t){case Xc.MediaPipeSelfieSegmentation:if(n=void 0,(r=e)!=null){if(r.runtime==="tfjs")return[2,_X(r)];if(r.runtime==="mediapipe")return[2,uX(r)];n=r.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+n);case Xc.BodyPix:return[2,sX(r=e)];default:throw new Error(t+" is not a supported model name.")}})})}(function(t){t.BodyPix="BodyPix",t.MediaPipeSelfieSegmentation="MediaPipeSelfieSegmentation"})(Xc||(Xc={}));var EX="blurred",SX="blurred-mask",xX="mask";var CX="draw-image",cI={};function oy(t){if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas||typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)return(function(e){if("offsetHeight"in e&&e.offsetHeight!==0&&"offsetWidth"in e&&e.offsetWidth!==0)return[e.offsetHeight,e.offsetWidth];if(e.height!=null&&e.width!=null)return[e.height,e.width];throw new Error("HTMLImageElement must have height and width attributes set.")})(t);if(typeof ImageData<"u"&&t instanceof ImageData)return[t.height,t.width];if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)return(function(e){return e.hasAttribute("height")&&e.hasAttribute("width")?[e.height,e.width]:[e.videoHeight,e.videoWidth]})(t);if(t instanceof Ie)return[t.shape[0],t.shape[1]];throw new Error("error: Unknown input type: "+t+".")}function SL(t){return cI[t]||(cI[t]=(function(){if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(0,0);throw new Error("Cannot create a canvas in this context")})()),cI[t]}function xL(t,e){var n=SL(e);return(function(r,o){o.width=r.width,o.height=r.height,o.getContext("2d").putImageData(r,0,0)})(t,n),n}function $f(t,e,n,r,o,i){return Ue(this,void 0,void 0,function(){var s,a,l,c;return ze(this,function(u){switch(u.label){case 0:return e instanceof Ie?[4,Mo.toPixels(e)]:[3,2];case 1:s=u.sent(),a=oy(e),l=a[0],c=a[1],e=new ImageData(s,c,l),u.label=2;case 2:return e instanceof ImageData&&(e=xL(e,CX)),o==null||i==null?t.drawImage(e,n,r):t.drawImage(e,n,r,o,i),[2]}})})}function TX(t,e){return Ue(this,void 0,void 0,function(){var n,r,o;return ze(this,function(i){switch(i.label){case 0:return n=oy(t),r=n[0],o=n[1],e.width=o,e.height=r,[4,$f(e.getContext("2d"),t,0,0,o,r)];case 1:return i.sent(),[2]}})})}function IX(t){var e=t.getContext("2d");e.scale(-1,1),e.translate(-t.width,0)}function iL(t,e,n){return Ue(this,void 0,void 0,function(){return ze(this,function(r){switch(r.label){case 0:return t.globalCompositeOperation=n,[4,$f(t,e,0,0)];case 1:return r.sent(),[2]}})})}function DX(t,e,n){return Ue(this,void 0,void 0,function(){var r,o,i,s,a,l,c,u;return ze(this,function(f){switch(f.label){case 0:for(r=t.getContext("2d"),o=0,i=5,s=1/(2*Math.PI*i*i),a=n<3?1:2,c=-n;c<=n;c+=a)for(u=-n;u<=n;u+=a)l=s*Math.exp(-(u*u+c*c)/(2*i*i)),o+=l;c=-n,f.label=1;case 1:if(!(c<=n))return[3,6];u=-n,f.label=2;case 2:return u<=n?(r.globalAlpha=s*Math.exp(-(u*u+c*c)/(2*i*i))/o*n,[4,$f(r,e,u,c)]):[3,5];case 3:f.sent(),f.label=4;case 4:return u+=a,[3,2];case 5:return c+=a,[3,1];case 6:return r.globalAlpha=1,[2]}})})}function NX(t,e,n){return Ue(this,void 0,void 0,function(){var r,o,i,s;return ze(this,function(a){switch(a.label){case 0:return r=oy(t),o=r[0],i=r[1],s=n.getContext("2d"),n.width=i,n.height=o,s.clearRect(0,0,i,o),s.save(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?[4,DX(n,t,e)]:[3,2];case 1:return a.sent(),[3,4];case 2:return s.filter="blur("+e+"px)",[4,$f(s,t,0,0,i,o)];case 3:a.sent(),a.label=4;case 4:return s.restore(),[2]}})})}function CL(t,e,n){return Ue(this,void 0,void 0,function(){var r;return ze(this,function(o){switch(o.label){case 0:return r=SL(n),e!==0?[3,2]:[4,TX(t,r)];case 1:return o.sent(),[3,4];case 2:return[4,NX(t,e,r)];case 3:o.sent(),o.label=4;case 4:return[2,r]}})})}function AX(t,e,n,r,o,i){i===void 0&&(i={r:0,g:255,b:255,a:255});for(var s=-o;s<=o;s++)for(var a=-o;a<=o;a++)if(s!==0&&a!==0){var l=(e+s)*r+(n+a);t[4*l+0]=i.r,t[4*l+1]=i.g,t[4*l+2]=i.b,t[4*l+3]=i.a}}function MX(t,e,n,r,o,i,s){s===void 0&&(s=1);for(var a=0,l=-s;l<=s;l++)for(var c=-s;c<=s;c++)if(l!==0&&c!==0){var u=(e+l)*r+(n+c);(!o[t[4*u]]||t[4*u+3]<i)&&(a+=1)}return a>0}function hI(t,e,n,r,o,i){return e===void 0&&(e={r:0,g:0,b:0,a:0}),n===void 0&&(n={r:0,g:0,b:0,a:255}),r===void 0&&(r=!1),o===void 0&&(o=.5),i===void 0&&(i=Array.from(Array(256).keys())),Ue(this,void 0,void 0,function(){var s,a,l,c,u,f,p,m,w,x,C,I,P,A;return ze(this,function(k){switch(k.label){case 0:return(s=Array.isArray(t)?t:[t]).length===0?[2,null]:[4,Promise.all(s.map(function(V){return V.mask.toImageData()}))];case 1:for(a=k.sent(),l=a[0],c=l.width,u=l.height,f=new Uint8ClampedArray(c*u*4),p=Math.round(255*o),m=new Array(256).fill(!1),i.forEach(function(V){return m[V]=!0}),w=0;w<u;w++)for(x=0;x<c;x++)for(f[4*(C=w*c+x)+0]=n.r,f[4*C+1]=n.g,f[4*C+2]=n.b,f[4*C+3]=n.a,I=0,P=a;I<P.length;I++)A=P[I],m[A.data[4*C]]&&A.data[4*C+3]>=p&&(f[4*C]=e.r,f[4*C+1]=e.g,f[4*C+2]=e.b,f[4*C+3]=e.a,r&&w-1>=0&&w+1<u&&x-1>=0&&x+1<c&&MX(A.data,w,x,c,m,p)&&AX(f,w,x,c,1));return[2,new ImageData(f,c,u)]}})})}function kX(t,e,n){return Ue(this,void 0,void 0,function(){var r,o;return ze(this,function(i){switch(i.label){case 0:return[4,hI(t,{r:0,g:0,b:0,a:255},{r:0,g:0,b:0,a:0},!1,e)];case 1:return r=i.sent(),o=xL(r,xX),n===0?[2,o]:[2,CL(o,n,SX)]}})})}function TL(t,e,n,r,o,i,s){return r===void 0&&(r=.5),o===void 0&&(o=3),i===void 0&&(i=3),s===void 0&&(s=!1),Ue(this,void 0,void 0,function(){var a,l,c,u,f,p;return ze(this,function(m){switch(m.label){case 0:return[4,CL(e,o,EX)];case 1:return a=m.sent(),t.width=a.width,t.height=a.height,l=t.getContext("2d"),Array.isArray(n)&&n.length===0?(l.drawImage(a,0,0),[2]):[4,kX(n,r,i)];case 2:return c=m.sent(),l.save(),s&&IX(t),u=oy(e),f=u[0],p=u[1],[4,$f(l,e,0,0,p,f)];case 3:return m.sent(),[4,iL(l,c,"destination-in")];case 4:return m.sent(),[4,iL(l,a,"destination-over")];case 5:return m.sent(),l.restore(),[2]}})})}var DL=async()=>{let t=Xc.MediaPipeSelfieSegmentation;return EL(t,{runtime:"mediapipe",solutionPath:"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation",modelType:"general"})};var OX=["video"],RX=["canvas"],PX=["circle"],FX=["rectangle"],LX=["circleHandle"],VX=["mask"];function $X(t,e){if(t&1&&ht(0,"video",6),t&2){let n=et();Yu("srcObject",n.srcObject()),yn("width",n.width())}}function jX(t,e){if(t&1&&ht(0,"img",14),t&2){let n=et();Ln("transform",`scale(${n.blurCanvasScale()})`)}}var iy=class t{resizeObserver=null;video=bn("video");canvas=bn("canvas");circle=bn("circle");rectangle=bn("rectangle");circleHandle=bn("circleHandle");mask=bn("mask");srcObject=dt(void 0);width=wn(400);height=wn(300);blurCanvasScale=Dr(()=>{let e=this.width(),n=this.videoDO().settings.width;return e/(n||1)});videoDO=dt.required();el=M(at);x=ae(0);y=ae(0);selected=Ni();clipType=wn("none");showClippedHint=wn(!0);scale=dt(1);border=wn(!0);borderColor=wn("#ffffff");borderWidth=wn(4);circleProps=wn({cx:160,cy:120,r:120});rectProps=wn({x:0,y:0,width:320,height:240});constructor(){Ii(()=>{let e=this.videoDO();e&&(e.component=this)}),Ii(()=>{this.videoDO().backgroundType()==="none"?this.stopBackgroundEffect():this.startBackgroundEffect()}),xt(()=>{this.addDragNDrop(),this.addDragNDropCircle(),this.addCircleHandleDnD(),this.addDragNDropRect(),this.watchResize()})}onClick(e){this.selected.emit(this)}addCircleHandleDnD(){console.log("add drag n drop circle");let e=this.circleHandle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Dd(e),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx+this.circleProps().r,a=this.circleProps().cy}),n.subscribe(l=>{let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u;let f=o-this.circleProps().cx;this.circleProps.update(p=>he(B({},p),{r:f}))})}addDragNDropRect(){let e=this.rectangle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Dd(e),o=0,i=0,s=0,a=0,l="none",c=this.rectProps();r.subscribe(u=>{s=this.rectProps().x,a=this.rectProps().y,c=this.rectProps()}),n.subscribe(u=>{let f=u.deltaX/this.scale(),p=u.deltaY/this.scale();if(o=s+f,i=a+p,!(u.startOffsetX<10))if(u.startOffsetX/this.scale()>c.width-50){let w=u.originalEvent.x/this.scale()-c.x;this.rectProps.update(x=>he(B({},x),{width:Math.round(w)}))}else u.startOffsetY<10||u.startOffsetY>this.rectProps().height-10||this.rectProps.update(m=>he(B({},m),{x:o,y:i}))})}addDragNDropCircle(){console.log("add drag n drop circle");let e=this.circle()?.nativeElement;if(!e)return;let{dragMove$:n,dragStart$:r}=Dd(e),o=0,i=0,s=0,a=0;r.subscribe(l=>{s=this.circleProps().cx,a=this.circleProps().cy}),n.subscribe(l=>{let c=l.deltaX/this.scale(),u=l.deltaY/this.scale();o=s+c,i=a+u,this.circleProps.update(f=>he(B({},f),{cx:o,cy:i})),this.mask()?.nativeElement.setAttribute("cx",`${o}`),this.mask()?.nativeElement.setAttribute("cy",`${i}`),this.mask()?.nativeElement.setAttribute("r",`${this.circleProps().r}`)})}addDragNDrop(){console.log("add drag n drop");let{dragMove$:e,dragStart$:n}=Dd(this.el.nativeElement),r=0,o=0,i=this.el.nativeElement.getBoundingClientRect();n.subscribe(s=>{i=this.el.nativeElement.getBoundingClientRect(),r=this.x(),o=this.y()}),e.subscribe(s=>{if(console.log(s),s.startOffsetX<10)console.log("left resize");else if(s.startOffsetX>i.width-10){console.log("right resize");let l=s.originalEvent.x/this.scale()-i.left/this.scale();console.log("new width",l),this.width.set(Math.round(l))}else if(s.startOffsetY<10)console.log("top resize");else if(s.startOffsetY>i.height-10)console.log("bottom resize");else{console.log("move"),console.log("scale is",this.scale());let a=s.deltaX/this.scale(),l=s.deltaY/this.scale();this.x.set(r+a),this.y.set(o+l),this.el.nativeElement.style.transform=`translate(${r+a}px, ${o+l}px)`}})}watchResize(){this.resizeObserver=new ResizeObserver(e=>{for(let n of e)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;this.height.set(Math.round(i))}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}videoLoaded(e){this.video()?.nativeElement&&setTimeout(()=>{let r=this.el.nativeElement.getBoundingClientRect();this.height.set(Math.round(r.height/this.scale())),this.width.set(Math.round(r.width/this.scale()))},1e3)}segmenter=null;getSegmenter=async()=>(this.segmenter||(this.segmenter=await DL()),this.segmenter);animationId=null;async stopBackgroundEffect(){let e=this.canvas()?.nativeElement;e&&(e.style.display="none"),this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}async startBackgroundEffect(){let e=this.videoDO().backgroundType();e==="blur"?await this.blurBackground():e==="image"&&await this.changeBackground()}async blurBackground(){let e=await this.getSegmenter(),n=this.video()?.nativeElement,r=this.canvas()?.nativeElement;if(!n||!r)return;r.style.display="block",console.log("canvas size",r.width,r.height);let o=async()=>{let i=n.getBoundingClientRect(),s=this.videoDO().foregroundThreshold(),a=this.videoDO().edgeBlurAmount(),l=!1,c=this.videoDO().blurAmount();console.log("updated canvas size",r.width,r.height);let u=await e.segmentPeople(n);await TL(r,n,u,s,c,a,l),this.animationId=requestAnimationFrame(o)};this.animationId=requestAnimationFrame(o)}async changeBackground(){let e=this.video()?.nativeElement,n=this.canvas()?.nativeElement;if(!e||!n)return;n.style.display="block";let r=n.getContext("2d");if(!r)return;let o=await this.getSegmenter(),i=async()=>{console.log("process frame for remove"),r.drawImage(e,0,0);let s=await o.segmentPeople(e),c=await hI(s,{r:255,g:255,b:255,a:0},{r:0,g:0,b:0,a:255}),u=r.getImageData(0,0,e.videoWidth,e.videoHeight);for(let f=3;f<u.data.length;f+=4)c.data[f]===255&&(u.data[f]=0);r.putImageData(u,0,0),this.animationId=requestAnimationFrame(i)};this.animationId=requestAnimationFrame(i)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-video"]],viewQuery:function(n,r){n&1&&(un(r.video,OX,5),un(r.canvas,RX,5),un(r.circle,PX,5),un(r.rectangle,FX,5),un(r.circleHandle,LX,5),un(r.mask,VX,5)),n&2&&ur(6)},hostBindings:function(n,r){n&1&&Nt("click",function(i){return r.onClick(i)})},inputs:{srcObject:[1,"srcObject"],width:[1,"width"],height:[1,"height"],videoDO:[1,"videoDO"],clipType:[1,"clipType"],showClippedHint:[1,"showClippedHint"],scale:[1,"scale"],border:[1,"border"],borderColor:[1,"borderColor"],borderWidth:[1,"borderWidth"],circleProps:[1,"circleProps"],rectProps:[1,"rectProps"]},outputs:{width:"widthChange",height:"heightChange",selected:"selected",clipType:"clipTypeChange",showClippedHint:"showClippedHintChange",border:"borderChange",borderColor:"borderColorChange",borderWidth:"borderWidthChange",circleProps:"circlePropsChange",rectProps:"rectPropsChange"},decls:15,vars:30,consts:[["compositionsource",""],["video",""],["canvas",""],["rectangle",""],["circle",""],["circleHandle",""],["autoplay","",2,"position","absolute","left","0","top","0","opacity","0.2",3,"srcObject"],["autoplay","",3,"loadedmetadata","srcObject"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left",3,"transform"],[2,"position","absolute","top","0","left","0","transform-origin","top left"],[2,"position","absolute","top","0","left","0","width","100%","height","100%"],["fill","rgba(255, 0, 0, 0.1)"],["fill","rgba(255, 0, 0, 0.001)"],["stroke","black","stroke-width","5","fill","black",2,"cursor","pointer"],["src","/assets/images/ng.png",2,"position","absolute","top","0","left","0","transform-origin","top left"]],template:function(n,r){if(n&1){let o=vn();Qt(0,$X,1,2,"video",6),ot(1,"div",null,0)(3,"video",7,1),bo("loadedmetadata",function(s){return je(o),Be(r.videoLoaded(s))}),ut(),Qt(5,jX,1,2,"img",8),ht(6,"canvas",9,2),ut(),Ut(),ot(8,"svg",10),ht(9,"rect",11,3)(11,"circle",12,4)(13,"circle",13,5),ut()}if(n&2){Jt(r.showClippedHint()?0:-1),te(),Ln("clip-path",r.clipType()==="circle"?"circle("+r.circleProps().r+"px at "+r.circleProps().cx+"px "+r.circleProps().cy+"px)":r.clipType()==="rectangle"?`polygon(${r.rectProps().x}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y}px, ${r.rectProps().x+r.rectProps().width}px ${r.rectProps().y+r.rectProps().height}px, ${r.rectProps().x}px ${r.rectProps().y+r.rectProps().height}px)`:"none"),te(2),Yu("srcObject",r.srcObject()),yn("width",r.width()),te(2),Jt(r.videoDO().backgroundType()==="image"?5:-1),te(),Ln("transform",`scale(${r.blurCanvasScale()})`),yn("width",r.width())("height",r.height());let o=r.circleProps();te(3),Ln("visibility",r.clipType()==="rectangle"?"visible":"hidden"),yn("x",r.rectProps().x)("y",r.rectProps().y)("width",r.rectProps().width)("height",r.rectProps().height)("stroke",r.borderColor())("stroke-width",r.borderWidth()),te(2),Ln("visibility",r.clipType()==="circle"?"visible":"hidden"),yn("cx",o.cx)("cy",o.cy)("r",o.r)("stroke",r.borderColor())("stroke-width",r.borderWidth()),te(2),Ln("visibility",r.clipType()==="circle"?"visible":"hidden"),yn("cx",o.cx+o.r)("cy",o.cy)("r",10)}},styles:["[_nghost-%COMP%]{display:inline-block;position:absolute;top:0;left:0}"]})};var BX=["canvas"],Zc=class t{canvasElement=bn("canvas");canvas;ctx;canvasWidth=dt(800);canvasHeight=dt(600);videos=dt([]);background=dt("#000000");constructor(){xt(()=>{this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d")}),Ii(()=>{let e=this.background();this.draw()})}requestId=null;stopDrawing(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null)}startDrawing(){this.canvas=this.canvasElement()?.nativeElement,this.ctx=this.canvas?.getContext("2d");let e=()=>{this.draw(),this.requestId=requestAnimationFrame(e)};this.requestId=requestAnimationFrame(e)}draw(){if(!this.ctx||!this.canvas)return;let{width:e,height:n}=this.canvas;this.ctx.clearRect(0,0,e,n),this.ctx.fillStyle=this.background(),this.ctx.fillRect(0,0,e,n),this.videos().forEach(r=>{let o=r.component,i=o?.video()?.nativeElement;if(!o)return;let s=o.videoDO();if((s.backgroundType()==="blur"||s.backgroundType()==="image")&&(i=o.canvas()?.nativeElement),i)if(o&&o?.clipType()==="circle"){this.ctx?.save(),this.ctx?.beginPath();let{cx:a,cy:l,r:c}=o.circleProps();this.ctx?.arc(a+o.x(),l+o.y(),c,0,Math.PI*2,!1),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else if(o?.clipType()==="rectangle"){this.ctx?.save(),this.ctx?.beginPath();let{x:a,y:l,width:c,height:u}=o.rectProps();this.ctx?.moveTo(a+o.x()+20,l+o.y()),this.ctx?.lineTo(a+o.x()+c-20,l+o.y()),this.ctx?.quadraticCurveTo(a+o.x()+c,l+o.y(),a+o.x()+c,l+o.y()+20),this.ctx?.lineTo(a+o.x()+c,l+o.y()+u-20),this.ctx?.quadraticCurveTo(a+o.x()+c,l+o.y()+u,a+o.x()+c-20,l+o.y()+u),this.ctx?.lineTo(a+o.x()+20,l+o.y()+u),this.ctx?.quadraticCurveTo(a+o.x(),l+o.y()+u,a+o.x(),l+o.y()+u-20),this.ctx?.lineTo(a+o.x(),l+o.y()+20),this.ctx?.quadraticCurveTo(a+o.x(),l+o.y(),a+o.x()+20,l+o.y()),this.ctx?.closePath(),this.ctx.strokeStyle=o.borderColor(),this.ctx.lineWidth=o.borderWidth(),this.ctx?.stroke(),this.ctx?.clip(),this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height()),this.ctx?.restore()}else this.ctx?.drawImage(i,o.x(),o.y(),o.width(),o.height())})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-canvas"]],viewQuery:function(n,r){n&1&&un(r.canvasElement,BX,5),n&2&&ur()},inputs:{canvasWidth:[1,"canvasWidth"],canvasHeight:[1,"canvasHeight"],videos:[1,"videos"],background:[1,"background"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&ht(0,"canvas",null,0),n&2&&yn("width",r.canvasWidth())("height",r.canvasHeight())},styles:["[_nghost-%COMP%]{display:block}"]})};var js=class t{scale=ae(1);recordingWidth=ae(1920);recordingHeight=ae(1080);backgroundColor=ae("#000000");selectedVideo=ae(null);setSelectedVideo(e){this.selectedVideo.set(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var HX=["*"],sy=class t{settings=M(js);contentWidth=wn(400);contentHeight=wn(300);contentScale=wn(1);scaleChange=Ni();el=M(at);background=dt("#000000");resizeObserver=null;constructor(){xt(()=>{this.watchResize()})}watchResize(){this.resizeObserver=new ResizeObserver(e=>{for(let n of e)if(n.contentBoxSize){let r=n.contentBoxSize[0],o=r.inlineSize,i=r.blockSize;console.log("resize",o,i);let s=this.contentWidth()/this.contentHeight(),a=o/s,l=Math.min(o/this.contentWidth(),i/this.contentHeight());this.contentScale.set(l),this.scaleChange.emit(l),this.el.nativeElement.style.height=`${a}px`}console.log("Size changed")}),this.resizeObserver.observe(this.el.nativeElement)}ngOnDestroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-editor"]],inputs:{contentWidth:[1,"contentWidth"],contentHeight:[1,"contentHeight"],contentScale:[1,"contentScale"],background:[1,"background"]},outputs:{contentWidth:"contentWidthChange",contentHeight:"contentHeightChange",contentScale:"contentScaleChange",scaleChange:"scaleChange"},ngContentSelectors:HX,decls:3,vars:8,consts:[["content",""],[1,"content"]],template:function(n,r){n&1&&(ka(),ot(0,"div",1,0),Oa(2),ut()),n&2&&Ln("background-color",r.background())("transform",`scale(${r.contentScale()})`)("width",r.contentWidth(),"px")("height",r.contentHeight(),"px")},styles:["[_nghost-%COMP%]{display:block;overflow:hidden;border:solid 2px black}.content[_ngcontent-%COMP%]{transform-origin:top left}"]})};var UX="0.12.9",Rqe=`https://unpkg.com/@ffmpeg/core@${UX}/dist/umd/ffmpeg-core.js`,ct=(function(t){return t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT",t})(ct||{});var NL=(()=>{let t=0;return()=>t++})();var Lqe=new Error("unknown message type"),AL=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),ML=new Error("called FFmpeg.terminate()"),Vqe=new Error("failed to import ffmpeg-core.js");var ay=class{#t=null;#r={};#n={};#o=[];#i=[];loaded=!1;#s=()=>{this.#t&&(this.#t.onmessage=({data:{id:e,type:n,data:r}})=>{switch(n){case ct.LOAD:this.loaded=!0,this.#r[e](r);break;case ct.MOUNT:case ct.UNMOUNT:case ct.EXEC:case ct.FFPROBE:case ct.WRITE_FILE:case ct.READ_FILE:case ct.DELETE_FILE:case ct.RENAME:case ct.CREATE_DIR:case ct.LIST_DIR:case ct.DELETE_DIR:this.#r[e](r);break;case ct.LOG:this.#o.forEach(o=>o(r));break;case ct.PROGRESS:this.#i.forEach(o=>o(r));break;case ct.ERROR:this.#n[e](r);break}delete this.#r[e],delete this.#n[e]})};#e=({type:e,data:n},r=[],o)=>this.#t?new Promise((i,s)=>{let a=NL();this.#t&&this.#t.postMessage({id:a,type:e,data:n},r),this.#r[a]=i,this.#n[a]=s,o?.addEventListener("abort",()=>{s(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(AL);on(e,n){e==="log"?this.#o.push(n):e==="progress"&&this.#i.push(n)}off(e,n){e==="log"?this.#o=this.#o.filter(r=>r!==n):e==="progress"&&(this.#i=this.#i.filter(r=>r!==n))}load=(o={},{signal:r}={})=>{var i=o,{classWorkerURL:e}=i,n=ND(i,["classWorkerURL"]);return this.#t||(this.#t=e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("./worker.js",import.meta.url),{type:"module"}),this.#s()),this.#e({type:ct.LOAD,data:n},void 0,r)};exec=(e,n=-1,{signal:r}={})=>this.#e({type:ct.EXEC,data:{args:e,timeout:n}},void 0,r);ffprobe=(e,n=-1,{signal:r}={})=>this.#e({type:ct.FFPROBE,data:{args:e,timeout:n}},void 0,r);terminate=()=>{let e=Object.keys(this.#n);for(let n of e)this.#n[n](ML),delete this.#n[n],delete this.#r[n];this.#t&&(this.#t.terminate(),this.#t=null,this.loaded=!1)};writeFile=(e,n,{signal:r}={})=>{let o=[];return n instanceof Uint8Array&&o.push(n.buffer),this.#e({type:ct.WRITE_FILE,data:{path:e,data:n}},o,r)};mount=(e,n,r)=>{let o=[];return this.#e({type:ct.MOUNT,data:{fsType:e,options:n,mountPoint:r}},o)};unmount=e=>{let n=[];return this.#e({type:ct.UNMOUNT,data:{mountPoint:e}},n)};readFile=(e,n="binary",{signal:r}={})=>this.#e({type:ct.READ_FILE,data:{path:e,encoding:n}},void 0,r);deleteFile=(e,{signal:n}={})=>this.#e({type:ct.DELETE_FILE,data:{path:e}},void 0,n);rename=(e,n,{signal:r}={})=>this.#e({type:ct.RENAME,data:{oldPath:e,newPath:n}},void 0,r);createDir=(e,{signal:n}={})=>this.#e({type:ct.CREATE_DIR,data:{path:e}},void 0,n);listDir=(e,{signal:n}={})=>this.#e({type:ct.LIST_DIR,data:{path:e}},void 0,n);deleteDir=(e,{signal:n}={})=>this.#e({type:ct.DELETE_DIR,data:{path:e}},void 0,n)};var kL=new Error("failed to get response body reader"),OL=new Error("failed to complete download");var RL="Content-Length";var zX=t=>new Promise((e,n)=>{let r=new FileReader;r.onload=()=>{let{result:o}=r;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},r.onerror=o=>{n(Error(`File could not be read! Code=${o?.target?.error?.code||-1}`))},r.readAsArrayBuffer(t)}),mI=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await zX(t);else return new Uint8Array;return new Uint8Array(e)};var GX=async(t,e)=>{let n=await fetch(t),r;try{let o=parseInt(n.headers.get(RL)||"-1"),i=n.body?.getReader();if(!i)throw kL;let s=[],a=0;for(;;){let{done:u,value:f}=await i.read(),p=f?f.length:0;if(u){if(o!=-1&&o!==a)throw OL;e&&e({url:t,total:o,received:a,delta:p,done:u});break}s.push(f),a+=p,e&&e({url:t,total:o,received:a,delta:p,done:u})}let l=new Uint8Array(a),c=0;for(let u of s)l.set(u,c),c+=u.length;r=l.buffer}catch(o){console.log("failed to send download progress event: ",o),r=await n.arrayBuffer(),e&&e({url:t,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},gI=async(t,e,n=!1,r)=>{let o=n?await GX(t,r):await(await fetch(t)).arrayBuffer(),i=new Blob([o],{type:e});return URL.createObjectURL(i)};var jf=class{constructor(e,n,r){this.stream=e;this.device=n;this.type=r;this.settings=e.getVideoTracks()[0].getSettings()}id="";component;blured=ae(!1);blurAmount=ae(5);edgeBlurAmount=ae(15);foregroundThreshold=ae(.5);backgroundType=ae("none");settings},ly=class{constructor(e,n){this.stream=e;this.device=n}},cy=class{data=ae(null);width=0;height=0;startTime;endTime;codec="";progress=ae(0);file=ae(null);state=ae("pending");constructor(){}},uy=class{constructor(e){this.videoService=e}chunks=[];name;convertedData=ae(null);startTime;endTime;duration;convertedVideos=ae([]);getRecordingUrl(){console.log("chunks",this.chunks);let e=new Blob(this.chunks,{type:this.chunks[0].type});return URL.createObjectURL(e)}getConvertedUrl(e){let n=new Blob([e.file().buffer],{type:"video/mp4"});return n?URL.createObjectURL(n):null}download(){let e=document.createElement("a");e.href=this.getRecordingUrl(),e.download=this.name+".webm",e.dispatchEvent(new MouseEvent("click",{view:window}))}async convertRecording(e){await this.videoService.loadFFmpeg();let n=await this.videoService.convert(this.chunks,e);this.convertedVideos.update(r=>[...r,n])}downloadConverted(e){let n=document.createElement("a"),r=this.getConvertedUrl(e);r&&(n.href=r,n.download=this.name+".mp4",n.dispatchEvent(new MouseEvent("click",{view:window})))}};var Qc=class t{ffmpeg;currentConversion=null;constructor(){}async loadFFmpeg(){this.ffmpeg=new ay,this.ffmpeg.on("progress",n=>{console.log("ffmpeg progress",n.progress),this.currentConversion&&this.currentConversion.progress.set(n.progress)}),this.ffmpeg.on("log",({message:n})=>{console.log("ffmpeg message",n)});let e=await this.loadConfig();try{await this.ffmpeg.load(e)}catch(n){console.error(n)}}async loadConfig(){let e="https://unpkg.com/@ffmpeg/core@0.12.10/dist/esm";return{coreURL:await gI(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await gI(`${e}/ffmpeg-core.wasm`,"application/wasm"),classWorkerURL:"assets/ffmpeg/worker.js"}}async trimVideo(e,n,r){if(!this.ffmpeg){console.error("ffmpeg not loaded");return}let o=new Blob(e,{type:"video/webm"}),i="input.webm";return await this.ffmpeg.writeFile(i,await mI(o)),await this.ffmpeg.exec(["-i",i,"-ss",n.toString(),"-t",(r-n).toString(),"trimmed.mp4"]),console.log("conversion done"),await this.ffmpeg.readFile("trimmed.mp4")}async convert(e,n){let r=new cy;return r.state.set("processing"),this.currentConversion=r,this.doConversion(r,e,n),r}async doConversion(e,n,r){let o=new Blob(n,{type:"video/webm"}),i="input.webm";if(!this.ffmpeg){console.error("ffmpeg not loaded");return}await this.ffmpeg.writeFile(i,await mI(o)),await this.ffmpeg.exec(["-i",i,"-ss",r.startTime.toString(),"-t",(r.endTime-r.startTime).toString(),"-c:v","libx264","-preset",r.preset,"-r",r.frameRate.toString(),"-s",`${r.resolutionWidth}x${r.resolutionHeight}`,"-crf",r.crf.toString(),"output.mp4"]),console.log("conversion done");let s=await this.ffmpeg.readFile("output.mp4");e.file.set(s),e.state.set("done"),this.currentConversion=null}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var Bf=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},vl=class extends Bf{component;viewContainerRef;injector;projectableNodes;constructor(e,n,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=r,this.projectableNodes=o}},bl=class extends Bf{templateRef;viewContainerRef;context;injector;constructor(e,n,r,o){super(),this.templateRef=e,this.viewContainerRef=n,this.context=r,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},yI=class extends Bf{element;constructor(e){super(),this.element=e instanceof at?e.nativeElement:e}},Jc=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof vl)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof bl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof yI)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},dy=class extends Jc{outletElement;_appRef;_defaultInjector;constructor(e,n,r){super(),this.outletElement=e,this._appRef=n,this._defaultInjector=r}attachComponentPortal(e){let n;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,o=r.get(Ei,null,{optional:!0})||void 0;n=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:o,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>n.destroy())}else{let r=this._appRef,o=e.injector||this._defaultInjector||Je.NULL,i=o.get(Ft,r.injector);n=em(e.component,{elementInjector:o,environmentInjector:i,projectableNodes:e.projectableNodes||void 0}),r.attachView(n.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(n.hostView),n.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=e,n}attachTemplatePortal(e){let n=e.viewContainerRef,r=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(o=>this.outletElement.appendChild(o)),r.detectChanges(),this.setDisposeFn(()=>{let o=n.indexOf(r);o!==-1&&n.remove(o)}),this._attachedPortal=e,r}attachDomPortal=e=>{let n=e.element;n.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");n.parentNode.insertBefore(r,n),this.outletElement.appendChild(n),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(n,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},fy=(()=>{class t extends bl{constructor(){let n=M(ho),r=M(zr);super(n,r)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Kt({type:t,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[Jn]})}return t})();var vI=(()=>{class t extends Jc{_moduleRef=M(Ei,{optional:!0});_document=M(We);_viewContainerRef=M(zr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}attached=new nt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);let r=n.viewContainerRef!=null?n.viewContainerRef:this._viewContainerRef,o=r.createComponent(n.component,{index:r.length,injector:n.injector||r.injector,projectableNodes:n.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=n=>{let r=n.element;r.parentNode;let o=this._document.createComment("dom-portal");n.setAttachedHost(this),r.parentNode.insertBefore(o,r),this._getRootNode().appendChild(r),this._attachedPortal=n,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(r,o)})};_getRootNode(){let n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Kt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Jn]})}return t})();function PL(t){return t.buttons===0||t.detail===0}function FL(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var bI;function WX(){if(bI==null){let t=typeof document<"u"?document.head:null;bI=!!(t&&(t.createShadowRoot||t.attachShadow))}return bI}function LL(t){if(WX()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function py(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function qi(t){return t.composedPath?t.composedPath()[0]:t.target}var wI;try{wI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wI=!1}var wr=(()=>{class t{_platformId=M(fs);isBrowser=this._platformId?rk(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||wI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Hf;function qX(){if(Hf==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Hf=!0}))}finally{Hf=Hf||!1}return Hf}function VL(t){return qX()?t:!!t.capture}function eu(t){return t instanceof at?t.nativeElement:t}var KX=new re("cdk-input-modality-detector-options"),YX={ignoreKeys:[18,17,224,91,16]},$L=650,_I={passive:!0,capture:!0},XX=(()=>{class t{_platform=M(wr);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Ot(null);_options;_lastTouchMs=0;_onKeydown=n=>{this._options?.ignoreKeys?.some(r=>r===n.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=qi(n))};_onMousedown=n=>{Date.now()-this._lastTouchMs<$L||(this._modality.next(PL(n)?"keyboard":"mouse"),this._mostRecentTarget=qi(n))};_onTouchstart=n=>{if(FL(n)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qi(n)};constructor(){let n=M(Ye),r=M(We),o=M(KX,{optional:!0});if(this._options=B(B({},YX),o),this.modalityDetected=this._modality.pipe(Av(1)),this.modalityChanged=this.modalityDetected.pipe(Gp()),this._platform.isBrowser){let i=M(Fn).createRenderer(null,null);this._listenerCleanups=n.runOutsideAngular(()=>[i.listen(r,"keydown",this._onKeydown,_I),i.listen(r,"mousedown",this._onMousedown,_I),i.listen(r,"touchstart",this._onTouchstart,_I)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(n=>n())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),my=(function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t})(my||{}),ZX=new re("cdk-focus-monitor-default-options"),hy=VL({passive:!0,capture:!0}),jL=(()=>{class t{_ngZone=M(Ye);_platform=M(wr);_inputModalityDetector=M(XX);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=M(We);_stopInputModalityDetector=new Ae;constructor(){let n=M(ZX,{optional:!0});this._detectionMode=n?.detectionMode||my.IMMEDIATE}_rootNodeFocusAndBlurListener=n=>{let r=qi(n);for(let o=r;o;o=o.parentElement)n.type==="focus"?this._onFocus(n,o):this._onBlur(n,o)};monitor(n,r=!1){let o=eu(n);if(!this._platform.isBrowser||o.nodeType!==1)return ve();let i=LL(o)||this._document,s=this._elementInfo.get(o);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new Ae,rootNode:i};return this._elementInfo.set(o,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){let r=eu(n),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(n,r,o){let i=eu(n),s=this._document.activeElement;i===s?this._getClosestElementsInfo(i).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof i.focus=="function"&&i.focus(o))}ngOnDestroy(){this._elementInfo.forEach((n,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===my.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,r){n.classList.toggle("cdk-focused",!!r),n.classList.toggle("cdk-touch-focused",r==="touch"),n.classList.toggle("cdk-keyboard-focused",r==="keyboard"),n.classList.toggle("cdk-mouse-focused",r==="mouse"),n.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(n,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=n,this._originFromTouchInteraction=n==="touch"&&r,this._detectionMode===my.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?$L:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(n,r){let o=this._elementInfo.get(r),i=qi(n);!o||!o.checkChildren&&r!==i||this._originChanged(r,this._getFocusOrigin(i),o)}_onBlur(n,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&n.relatedTarget instanceof Node&&r.contains(n.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(n,r){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(r))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;let r=n.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,hy),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,hy)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Bt(this._stopInputModalityDetector)).subscribe(i=>{this._setOrigin(i,!0)}))}_removeGlobalListeners(n){let r=n.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hy),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hy),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,r,o){this._setClasses(n,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(n){let r=[];return this._elementInfo.forEach((o,i)=>{(i===n||o.checkChildren&&i.contains(n))&&r.push([i,o])}),r}_isLastInteractionFromInputLabel(n){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===n||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA"||n.disabled)return!1;let i=n.labels;if(i){for(let s=0;s<i.length;s++)if(i[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var gy=new WeakMap,Uf=(()=>{class t{_appRef;_injector=M(Je);_environmentInjector=M(Ft);load(n){let r=this._appRef=this._appRef||this._injector.get(Ir),o=gy.get(r);o||(o={loaders:new Set,refs:[]},gy.set(r,o),r.onDestroy(()=>{gy.get(r)?.refs.forEach(i=>i.destroy()),gy.delete(r)})),o.loaders.has(n)||(o.loaders.add(n),o.refs.push(em(n,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var BL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();function EI(t){return Array.isArray(t)?t:[t]}var xI=(()=>{class t{_platform=M(wr);constructor(){}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return JX(n)&&getComputedStyle(n).visibility==="visible"}isTabbable(n){if(!this._platform.isBrowser)return!1;let r=QX(aZ(n));if(r&&(HL(r)===-1||!this.isVisible(r)))return!1;let o=n.nodeName.toLowerCase(),i=HL(n);return n.hasAttribute("contenteditable")?i!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!iZ(n)?!1:o==="audio"?n.hasAttribute("controls")?i!==-1:!1:o==="video"?i===-1?!1:i!==null?!0:this._platform.FIREFOX||n.hasAttribute("controls"):n.tabIndex>=0}isFocusable(n,r){return sZ(n)&&!this.isDisabled(n)&&(r?.ignoreVisibility||this.isVisible(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function QX(t){try{return t.frameElement}catch{return null}}function JX(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function eZ(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function tZ(t){return rZ(t)&&t.type=="hidden"}function nZ(t){return oZ(t)&&t.hasAttribute("href")}function rZ(t){return t.nodeName.toLowerCase()=="input"}function oZ(t){return t.nodeName.toLowerCase()=="a"}function UL(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function HL(t){if(!UL(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function iZ(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function sZ(t){return tZ(t)?!1:eZ(t)||nZ(t)||t.hasAttribute("contenteditable")||UL(t)}function aZ(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var SI=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,n,r,o,i=!1,s){this._element=e,this._checker=n,this._ngZone=r,this._document=o,this._injector=s,i||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let r=this._getFirstTabbableElement(n);return r?.focus(e),!!r}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=0;r<n.length;r++){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[r]):null;if(o)return o}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let r=n.length-1;r>=0;r--){let o=n[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[r]):null;if(o)return o}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?xt(e,{injector:this._injector}):setTimeout(e)}},zL=(()=>{class t{_checker=M(xI);_ngZone=M(Ye);_document=M(We);_injector=M(Je);constructor(){M(Uf).load(BL)}create(n,r=!1){return new SI(n,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GL(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function CI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Yt(t){return t==null?"":typeof t=="string"?t:`${t}px`}var lZ=new re("cdk-dir-doc",{providedIn:"root",factory:cZ});function cZ(){return M(We)}var uZ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function dZ(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?uZ.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var zf=(()=>{class t{get value(){return this.valueSignal()}valueSignal=ae("ltr");change=new nt;constructor(){let n=M(lZ,{optional:!0});if(n){let r=n.body?n.body.dir:null,o=n.documentElement?n.documentElement.dir:null;this.valueSignal.set(dZ(r||o||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wl;function WL(){if(wl==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return wl=!1,wl;if(document.documentElement?.style&&"scrollBehavior"in document.documentElement.style)wl=!0;else{let t=Element.prototype.scrollTo;t?wl=!/\{\s*\[native code\]\s*\}/.test(t.toString()):wl=!1}}return wl}var fZ=20,TI=(()=>{class t{_ngZone=M(Ye);_platform=M(wr);_renderer=M(Fn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Ae;_scrolledCount=0;scrollContainers=new Map;register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){let r=this.scrollContainers.get(n);r&&(r.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=fZ){return this._platform.isBrowser?new Te(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let o=n>0?this._scrolled.pipe(zp(n)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ve()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((n,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(n,r){let o=this.getAncestorScrollContainers(n);return this.scrolled(r).pipe(Rt(i=>!i||o.indexOf(i)>-1))}getAncestorScrollContainers(n){let r=[];return this.scrollContainers.forEach((o,i)=>{this._scrollableContainsElement(i,n)&&r.push(i)}),r}_scrollableContainsElement(n,r){let o=eu(r),i=n.getElementRef().nativeElement;do if(o==i)return!0;while(o=o.parentElement);return!1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pZ=20,Gf=(()=>{class t{_platform=M(wr);_listeners;_viewportSize;_change=new Ae;_document=M(We);constructor(){let n=M(Ye),r=M(Fn).createRenderer(null,null);n.runOutsideAngular(()=>{if(this._platform.isBrowser){let o=i=>this._change.next(i);this._listeners=[r.listen("window","resize",o),r.listen("window","orientationchange",o)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(n=>n()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){let n=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+o,right:n.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let n=this._document,r=this._getWindow(),o=n.documentElement,i=o.getBoundingClientRect(),s=-i.top||n.body.scrollTop||r.scrollY||o.scrollTop||0,a=-i.left||n.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:s,left:a}}change(n=pZ){return n>0?this._change.pipe(zp(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var II={},yy=(()=>{class t{_appId=M(rc);getId(n){return this._appId!=="ng"&&(n+=this._appId),II.hasOwnProperty(n)||(II[n]=0),`${n}${II[n]++}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qL=WL();function xy(t){return new vy(t.get(Gf),t.get(We))}var vy=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,n){this._viewportRuler=e,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Yt(-this._previousScrollPosition.left),e.style.top=Yt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,r=e.style,o=n.style,i=r.scrollBehavior||"",s=o.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),qL&&(r.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),qL&&(r.scrollBehavior=i,o.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.documentElement,r=this._viewportRuler.getViewportSize();return n.scrollHeight>r.height||n.scrollWidth>r.width}};function eV(t,e){return new by(t.get(TI),t.get(Ye),t.get(Gf),e)}var by=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,n,r,o){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=r,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Rt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Wf=class{enable(){}disable(){}attach(){}};function DI(t,e){return e.some(n=>{let r=t.bottom<n.top,o=t.top>n.bottom,i=t.right<n.left,s=t.left>n.right;return r||o||i||s})}function KL(t,e){return e.some(n=>{let r=t.top<n.top,o=t.bottom>n.bottom,i=t.left<n.left,s=t.right>n.right;return r||o||i||s})}function tV(t,e){return new wy(t.get(TI),t.get(Gf),t.get(Ye),e)}var wy=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:o}=this._viewportRuler.getViewportSize();DI(n,[{width:r,height:o,bottom:o,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},nV=(()=>{class t{_injector=M(Je);constructor(){}noop=()=>new Wf;close=n=>eV(this._injector,n);block=()=>xy(this._injector);reposition=n=>tV(this._injector,n);static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bs=class{positionStrategy;scrollStrategy=new Wf;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let n=Object.keys(e);for(let r of n)e[r]!==void 0&&(this[r]=e[r])}}};var _y=class{connectionPair;scrollableViewProperties;constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var rV=(()=>{class t{_attachedOverlays=[];_document=M(We);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){let r=this._attachedOverlays.indexOf(n);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oV=(()=>{class t extends rV{_ngZone=M(Ye);_renderer=M(Fn).createRenderer(null,null);_cleanupKeydown;add(n){super.add(n),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=n=>{let r=this._attachedOverlays;for(let o=r.length-1;o>-1;o--)if(r[o]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[o]._keydownEvents.next(n));break}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iV=(()=>{class t extends rV{_platform=M(wr);_ngZone=M(Ye);_renderer=M(Fn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(n){if(super.add(n),!this._isAttached){let r=this._document.body,o={capture:!0},i=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[i.listen(r,"pointerdown",this._pointerDownListener,o),i.listen(r,"click",this._clickListener,o),i.listen(r,"auxclick",this._clickListener,o),i.listen(r,"contextmenu",this._clickListener,o)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(n=>n()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=n=>{this._pointerDownEventTarget=qi(n)};_clickListener=n=>{let r=qi(n),o=n.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){let a=i[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(YL(a.overlayElement,r)||YL(a.overlayElement,o))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n)}};static \u0275fac=(()=>{let n;return function(o){return(n||(n=Ur(t)))(o||t)}})();static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YL(t,e){let n=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===t)return!0;r=n&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var sV=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,o){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),Cy=(()=>{class t{_platform=M(wr);_containerElement;_document=M(We);_styleLoader=M(Uf);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n="cdk-overlay-container";if(this._platform.isBrowser||CI()){let o=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let i=0;i<o.length;i++)o[i].remove()}let r=this._document.createElement("div");r.classList.add(n),CI()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(sV)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NI=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,n,r,o){this._renderer=n,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=n.listen(this.element,"click",o)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},tu=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Ae;_attachments=new Ae;_detachments=new Ae;_positionStrategy;_scrollStrategy;_locationChanges=vt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Ae;_outsidePointerEvents=new Ae;_afterNextRenderRef;constructor(e,n,r,o,i,s,a,l,c,u=!1,f,p){this._portalOutlet=e,this._host=n,this._pane=r,this._config=o,this._ngZone=i,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=f,this._renderer=p,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=xt(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=B(B({},this._config),e),this._updateElementSize()}setDirection(e){this._config=he(B({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Yt(this._config.width),e.height=Yt(this._config.height),e.minWidth=Yt(this._config.minWidth),e.minHeight=Yt(this._config.minHeight),e.maxWidth=Yt(this._config.maxWidth),e.maxHeight=Yt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new NI(this._document,this._renderer,this._ngZone,n=>{this._backdropClick.next(n)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,n,r){let o=EI(n||[]).filter(i=>!!i);o.length&&(r?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=xt(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(n){if(e)throw n;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},XL="cdk-overlay-connected-position-bounding-box",mZ=/([A-Za-z%]+)$/;function aV(t,e){return new Ey(e,t.get(Gf),t.get(We),t.get(wr),t.get(Cy))}var Ey=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Ae;_resizeSubscription=vt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,n,r,o,i){this._viewportRuler=n,this._document=r,this._platform=o,this._overlayContainer=i,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(XL),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,r=this._viewportRect,o=this._containerRect,i=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,o,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){i.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(i.length){let a=null,l=-1;for(let c of i){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&_l(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,r){let o;if(r.originX=="center")o=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;o=r.originX=="start"?s:a}n.left<0&&(o-=n.left);let i;return r.originY=="center"?i=e.top+e.height/2:i=r.originY=="top"?e.top:e.bottom,n.top<0&&(i-=n.top),{x:o,y:i}}_getOverlayPoint(e,n,r){let o;r.overlayX=="center"?o=-n.width/2:r.overlayX==="start"?o=this._isRtl()?-n.width:0:o=this._isRtl()?0:-n.width;let i;return r.overlayY=="center"?i=-n.height/2:i=r.overlayY=="top"?0:-n.height,{x:e.x+o,y:e.y+i}}_getOverlayFit(e,n,r,o){let i=QL(n),{x:s,y:a}=e,l=this._getOffset(o,"x"),c=this._getOffset(o,"y");l&&(s+=l),c&&(a+=c);let u=0-s,f=s+i.width-r.width,p=0-a,m=a+i.height-r.height,w=this._subtractOverflows(i.width,u,f),x=this._subtractOverflows(i.height,p,m),C=w*x;return{visibleArea:C,isCompletelyWithinViewport:i.width*i.height===C,fitsInViewportVertically:x===i.height,fitsInViewportHorizontally:w==i.width}}_canFitWithFlexibleDimensions(e,n,r){if(this._hasFlexibleDimensions){let o=r.bottom-n.y,i=r.right-n.x,s=ZL(this._overlayRef.getConfig().minHeight),a=ZL(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=o,c=e.fitsInViewportHorizontally||a!=null&&a<=i;return l&&c}return!1}_pushOverlayOnScreen(e,n,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let o=QL(n),i=this._viewportRect,s=Math.max(e.x+o.width-i.width,0),a=Math.max(e.y+o.height-i.height,0),l=Math.max(i.top-r.top-e.y,0),c=Math.max(i.left-r.left-e.x,0),u=0,f=0;return o.width<=i.width?u=c||-s:u=e.x<this._viewportMargin?i.left-r.left-e.x:0,o.height<=i.height?f=l||-a:f=e.y<this._viewportMargin?i.top-r.top-e.y:0,this._previousPushAmount={x:u,y:f},{x:e.x+u,y:e.y+f}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!gZ(this._lastScrollVisibility,r)){let o=new _y(e,r);this._positionChanges.next(o)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,o=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let i=0;i<n.length;i++)n[i].style.transformOrigin=`${r} ${o}`}_calculateBoundingBoxRect(e,n){let r=this._viewportRect,o=this._isRtl(),i,s,a;if(n.overlayY==="top")s=e.y,i=r.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,i=r.height-a+this._viewportMargin;else{let m=Math.min(r.bottom-e.y+r.top,e.y),w=this._lastBoundingBoxSize.height;i=m*2,s=e.y-m,i>w&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-w/2)}let l=n.overlayX==="start"&&!o||n.overlayX==="end"&&o,c=n.overlayX==="end"&&!o||n.overlayX==="start"&&o,u,f,p;if(c)p=r.width-e.x+this._viewportMargin*2,u=e.x-this._viewportMargin;else if(l)f=e.x,u=r.right-e.x;else{let m=Math.min(r.right-e.x+r.left,e.x),w=this._lastBoundingBoxSize.width;u=m*2,f=e.x-m,u>w&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-w/2)}return{top:s,left:f,bottom:a,right:p,width:u,height:i}}_setBoundingBoxStyles(e,n){let r=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let i=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;o.height=Yt(r.height),o.top=Yt(r.top),o.bottom=Yt(r.bottom),o.width=Yt(r.width),o.left=Yt(r.left),o.right=Yt(r.right),n.overlayX==="center"?o.alignItems="center":o.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?o.justifyContent="center":o.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",i&&(o.maxHeight=Yt(i)),s&&(o.maxWidth=Yt(s))}this._lastBoundingBoxSize=r,_l(this._boundingBox.style,o)}_resetBoundingBoxStyles(){_l(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){_l(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let r={},o=this._hasExactPosition(),i=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(o){let u=this._viewportRuler.getViewportScrollPosition();_l(r,this._getExactOverlayY(n,e,u)),_l(r,this._getExactOverlayX(n,e,u))}else r.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(o?r.maxHeight=Yt(s.maxHeight):i&&(r.maxHeight="")),s.maxWidth&&(o?r.maxWidth=Yt(s.maxWidth):i&&(r.maxWidth="")),_l(this._pane.style,r)}_getExactOverlayY(e,n,r){let o={top:"",bottom:""},i=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;o.bottom=`${s-(i.y+this._overlayRect.height)}px`}else o.top=Yt(i.y);return o}_getExactOverlayX(e,n,r){let o={left:"",right:""},i=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,r));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;o.right=`${a-(i.x+this._overlayRect.width)}px`}else o.left=Yt(i.x);return o}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),r=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:KL(e,r),isOriginOutsideView:DI(e,r),isOverlayClipped:KL(n,r),isOverlayOutsideView:DI(n,r)}}_subtractOverflows(e,...n){return n.reduce((r,o)=>r-Math.max(o,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&EI(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof at)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+n,height:r,width:n}}};function _l(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ZL(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(mZ);return!n||n==="px"?parseFloat(e):null}return t||null}function QL(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function gZ(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var JL="cdk-global-overlay-wrapper";function Ty(t){return new Sy}var Sy=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(JL),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:o,height:i,maxWidth:s,maxHeight:a}=r,l=(o==="100%"||o==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(i==="100%"||i==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,f=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",w="",x="";l?x="flex-start":u==="center"?(x="center",p?w=f:m=f):p?u==="left"||u==="end"?(x="flex-end",m=f):(u==="right"||u==="start")&&(x="flex-start",w=f):u==="left"||u==="start"?(x="flex-start",m=f):(u==="right"||u==="end")&&(x="flex-end",w=f),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":w,n.justifyContent=x,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,r=n.style;n.classList.remove(JL),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},lV=(()=>{class t{_injector=M(Je);constructor(){}global(){return Ty()}flexibleConnectedTo(n){return aV(this._injector,n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Iy(t,e){t.get(Uf).load(sV);let n=t.get(Cy),r=t.get(We),o=t.get(yy),i=t.get(Ir),s=t.get(zf),a=r.createElement("div"),l=r.createElement("div");l.id=o.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),n.getContainerElement().appendChild(a);let c=new dy(l,i,t),u=new Bs(e),f=t.get(Si,null,{optional:!0})||t.get(Fn).createRenderer(null,null);return u.direction=u.direction||s.value,new tu(c,a,l,u,t.get(Ye),t.get(oV),r,t.get(hs),t.get(iV),e?.disableAnimations??t.get(_w,null,{optional:!0})==="NoopAnimations",t.get(Ft),f)}var AI=(()=>{class t{scrollStrategies=M(nV);_positionBuilder=M(lV);_injector=M(Je);constructor(){}create(n){return Iy(this._injector,n)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vZ(t,e){}var nu=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var bZ=(()=>{class t extends Jc{_elementRef=M(at);_focusTrapFactory=M(zL);_config;_interactivityChecker=M(xI);_ngZone=M(Ye);_focusMonitor=M(jL);_renderer=M(Si);_changeDetectorRef=M(Ra);_injector=M(Je);_platform=M(wr);_document=M(We);_portalOutlet;_focusTrapped=new Ae;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=M(nu,{optional:!0})||new nu,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){let r=this._ariaLabelledByQueue.indexOf(n);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),r}attachTemplatePortal(n){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),r}attachDomPortal=n=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(n);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,r){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{i(),s(),n.removeAttribute("tabindex")},i=this._renderer.listen(n,"blur",o),s=this._renderer.listen(n,"mousedown",o)})),n.focus(r)}_focusByCssSelector(n,r){let o=this._elementRef.nativeElement.querySelector(n);o&&this._forceFocus(o,r)}_trapFocus(n){this._isDestroyed||xt(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(n);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(n)||this._focusDialogContainer(n);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',n);break;default:this._focusByCssSelector(this._config.autoFocus,n);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let n=this._config.restoreFocus,r=null;if(typeof n=="string"?r=this._document.querySelector(n):typeof n=="boolean"?r=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(r=n),this._config.restoreFocus&&r&&typeof r.focus=="function"){let o=py(),i=this._elementRef.nativeElement;(!o||o===this._document.body||o===i||i.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(n){this._elementRef.nativeElement.focus?.(n)}_containsFocus(){let n=this._elementRef.nativeElement,r=py();return n===r||n.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=py()))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,o){if(r&1&&Zu(vI,7),r&2){let i;Qu(i=Ju())&&(o._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,o){r&2&&yn("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Jn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,o){r&1&&oc(0,vZ,0,0,"ng-template",0)},dependencies:[vI],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),Ki=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Ae;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,n){this.overlayRef=e,this.config=n,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!GL(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this._canClose(e)){let r=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let n=this.config;return!!this.containerInstance&&(!n.closePredicate||n.closePredicate(e,n,this.componentInstance))}},wZ=new re("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=M(Je);return()=>xy(t)}}),qf=new re("DialogData"),_Z=new re("DefaultDialogConfig");function EZ(t){let e=ae(t),n=new nt;return{valueSignal:e,get value(){return e()},change:n,ngOnDestroy(){n.complete()}}}var Dy=(()=>{class t{_injector=M(Je);_defaultOptions=M(_Z,{optional:!0});_parentDialog=M(t,{optional:!0,skipSelf:!0});_overlayContainer=M(Cy);_idGenerator=M(yy);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Ae;_afterOpenedAtThisLevel=new Ae;_ariaHiddenElements=new Map;_scrollStrategy=M(wZ);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=sa(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ao(void 0)));constructor(){}open(n,r){let o=this._defaultOptions||new nu;r=B(B({},o),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let i=this._getOverlayConfig(r),s=Iy(this._injector,i),a=new Ki(s,r),l=this._attachContainer(s,a,r);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(Pn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(n,a,l,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){MI(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(r=>r.id===n)}ngOnDestroy(){MI(this._openDialogsAtThisLevel,n=>{n.config.closeOnDestroy===!1&&this._removeOpenDialog(n,!1)}),MI(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){let r=new Bs({positionStrategy:n.positionStrategy||Ty().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation,disableAnimations:n.disableAnimations});return n.backdropClass&&(r.backdropClass=n.backdropClass),r}_attachContainer(n,r,o){let i=o.injector||o.viewContainerRef?.injector,s=[{provide:nu,useValue:o},{provide:Ki,useValue:r},{provide:tu,useValue:n}],a;o.container?typeof o.container=="function"?a=o.container:(a=o.container.type,s.push(...o.container.providers(o))):a=bZ;let l=new vl(a,o.viewContainerRef,Je.create({parent:i||this._injector,providers:s}));return n.attach(l).instance}_attachDialogContent(n,r,o,i){if(n instanceof ho){let s=this._createInjector(i,r,o,void 0),a={$implicit:i.data,dialogRef:r};i.templateContext&&(a=B(B({},a),typeof i.templateContext=="function"?i.templateContext():i.templateContext)),o.attachTemplatePortal(new bl(n,null,a,s))}else{let s=this._createInjector(i,r,o,this._injector),a=o.attachComponentPortal(new vl(n,i.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(n,r,o,i){let s=n.injector||n.viewContainerRef?.injector,a=[{provide:qf,useValue:n.data},{provide:Ki,useValue:r}];return n.providers&&(typeof n.providers=="function"?a.push(...n.providers(r,n,o)):a.push(...n.providers)),n.direction&&(!s||!s.get(zf,null,{optional:!0}))&&a.push({provide:zf,useValue:EZ(n.direction)}),Je.create({parent:s||i,providers:a})}_removeOpenDialog(n,r){let o=this.openDialogs.indexOf(n);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(n){if(n.parentElement){let r=n.parentElement.children;for(let o=r.length-1;o>-1;o--){let i=r[o];i!==n&&i.nodeName!=="SCRIPT"&&i.nodeName!=="STYLE"&&!i.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function MI(t,e){let n=t.length;for(;n--;)e(t[n])}function SZ(t,e){if(t&1){let n=vn();ot(0,"div",1),bo("click",function(){let o=je(n).$implicit,i=et();return Be(i.selectDevice(o))}),de(1),ut()}if(t&2){let n=e.$implicit;te(),Ko(" ",n.label||"Unnamed Device"," ")}}var Ny=class t{data=M(qf);dialogRef=M(Ki);devices=ae([]);constructor(){this.getDevices()}async getDevices(){let n=(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind===this.data);this.devices.set(n)}selectDevice(e){this.dialogRef.close({data:e})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-device-chooser"]],decls:2,vars:0,consts:[[1,"item"],[1,"item",3,"click"]],template:function(n,r){n&1&&yo(0,SZ,2,1,"div",0,xi),n&2&&vo(r.devices())},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;background:#1e1e1e;box-shadow:0 10px 16px #00000059,0 2px 5px #00000059,inset 0 .5px #ffffff14,inset 0 0 .5px #ffffff59;padding:.5rem;border-radius:.8125rem}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-left:10px;margin-right:10px;border-radius:5px;padding:6px 3px}.item[_ngcontent-%COMP%]:hover{background-color:#383838}"],changeDetection:0})};var Ay=io(document,"pointermove").pipe(Er()),My=io(document,"pointerup").pipe(Er());function kI(t,e=new Ot(!1)){let n=io(t,"pointerdown").pipe(Rt(a=>(console.log(a.button),!a.target.attributes.preventselection&&a.button===0)),Pt(a=>{!(a.target instanceof HTMLInputElement)&&e.getValue()===!1&&(a.preventDefault(),a.stopPropagation())}),Ee(a=>{let l=t.getBoundingClientRect(),c=a.pageX-l.left,u=a.pageY-l.top;return{pageY:a.pageY,pageX:a.pageX,offsetX:c,offsetY:u,calcOffsetX:c,calcOffsetY:u,target:t}}),Er()),r=n.pipe(Xe(a=>Ay.pipe(Ee(l=>he(B(B({},a),l),{offsetX:a.offsetX,offsetY:a.offsetY})),Pn(1)).pipe(Bt(My))),Er()),o=r.pipe(Xe(a=>Ay.pipe(Ee(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),Bt(My))),Er()),i=r.pipe(Xe(a=>Ay.pipe(ao(a),Ee(l=>({originalEvent:l,deltaX:l.pageX-a.pageX,deltaY:l.pageY-a.pageY,startOffsetX:a.offsetX,startOffsetY:a.offsetY})),Bt(My),es()))),s=n.pipe(Xe(a=>My.pipe(Bt(Ay))));return{dragStart$:e.pipe(Xe(a=>a?so:r)),dragMove$:e.pipe(Xe(a=>a?so:o)),dragEnd$:e.pipe(Xe(a=>a?so:i)),click$:e.pipe(Xe(a=>a?so:s))}}var cV=(()=>{class t{el=M(at);positioning="absolute";axis="both";resizable=!0;minWidth=0;minHeight=0;minX=dt();maxX=dt();minY=dt();maxY=dt();positionUpdated=new nt;dragStart=Ni();dragEnd=Ni();widthUpdated=new nt;heightUpdated=new nt;onDestroy$=new Ae;resizeOffset=5;ngAfterViewInit(){let n=this.el?.nativeElement,r=n.parentElement,o=r.getBoundingClientRect(),i=n.getBoundingClientRect(),s=u=>{this.positioning!=="none"&&(n.style.width=`${u}px`),this.widthUpdated.emit(u)},a=u=>{this.positioning!=="none"&&(n.style.height=`${u}px`),this.heightUpdated.emit(u)},l=(u,f)=>{typeof this.minX()=="number"&&(u=Math.max(this.minX(),u)),typeof this.minY()=="number"&&(f=Math.max(this.minY(),f)),typeof this.maxY()=="number"&&(f=Math.min(this.maxY(),f)),typeof this.maxX()=="number"&&(u=Math.min(this.maxX(),u)),this.positioning==="absolute"?((this.axis==="both"||this.axis==="horizontal")&&(n.style.left=`${u}px`),(this.axis==="both"||this.axis==="vertical")&&(n.style.top=`${f}px`)):this.positioning==="transform"&&(this.axis==="both"?n.style.transform=`translate(${u}px, ${f}px)`:this.axis==="vertical"?n.style.transform=`translateY(${f}px)`:n.style.transform=`translateX(${u}px)`),this.positionUpdated.emit({x:u,y:f})},c=kI(n);c.dragStart$.pipe(Bt(this.onDestroy$)).subscribe(()=>{i=n.getBoundingClientRect(),o=r.getBoundingClientRect(),this.dragStart.emit()}),c.dragMove$.pipe(Bt(this.onDestroy$)).subscribe(u=>{this.resizeOffset=this.resizable?this.resizeOffset:0,console.log("start offset x/y",u.startOffsetX);let f=u.startOffsetY>i.height-this.resizeOffset,p=u.startOffsetX<this.resizeOffset,m=u.startOffsetX>i.width-this.resizeOffset,w=u.startOffsetY<this.resizeOffset;if(!this.resizable||!f&&!p&&!m&&!w){let x=u.originalEvent.x-u.startOffsetX,C=u.originalEvent.y-u.startOffsetY,I=x-o.left,P=C-o.top;l(I,P)}else if(f){let x=u.originalEvent.y-i.top+i.height-u.startOffsetY;x=Math.max(x,this.minHeight),a(x)}else if(m){let x=u.originalEvent.x-i.left+i.width-u.startOffsetX;x=Math.max(x,this.minWidth),console.log("set width",x),s(x)}else if(p){let x=u.originalEvent.x-u.startOffsetX-o.left,C=u.originalEvent.y-u.startOffsetY-o.top,I=i.left-o.left+i.width-x;I>this.minWidth&&(l(x,C),s(I))}else if(w){let x=u.originalEvent.x-u.startOffsetX-o.left,C=u.originalEvent.y-u.startOffsetY-o.top,I=i.top-o.top+i.height-C;I>this.minHeight&&(l(x,C),a(I))}}),c.dragStart$.pipe(Bt(this.onDestroy$)).subscribe(()=>{}),c.dragEnd$.pipe(Bt(this.onDestroy$)).subscribe(()=>{this.dragEnd.emit()})}ngDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Kt({type:t,selectors:[["","draggable",""]],inputs:{positioning:"positioning",axis:"axis",resizable:"resizable",minWidth:"minWidth",minHeight:"minHeight",minX:[1,"minX"],maxX:[1,"maxX"],minY:[1,"minY"],maxY:[1,"maxY"]},outputs:{positionUpdated:"positionUpdated",dragStart:"dragStart",dragEnd:"dragEnd",widthUpdated:"widthUpdated",heightUpdated:"heightUpdated"}})}return t})();var uV=["*"];function xZ(t,e){t&1&&(q(0,"div",2)(1,"div",3),Oa(2),K()())}function CZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",1),ut())}function TZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",2),ut())}function IZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",3),ut())}function DZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",4),ut())}function NZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",5),ut())}function AZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",6),ut())}function MZ(t,e){t&1&&(Ut(),ot(0,"svg",0),ht(1,"path",7),ut())}function kZ(t,e){if(t&1&&(q(0,"div",0)(1,"span"),de(2),K()()),t&2){let n=et();te(2),Ti(n.prefix())}}function OZ(t,e){if(t&1&&(de(0),q(1,"div",0),en(2,"ed-icon",2),K()),t&2){let n=et();Ko(" ",n.suffixIcon()," "),te(2),cn("icon",n.prefixIcon())}}function RZ(t,e){if(t&1&&(q(0,"div",0)(1,"span"),de(2),K()()),t&2){let n=et();te(2),Ti(n.suffix())}}function PZ(t,e){if(t&1&&(q(0,"div",0),en(1,"ed-icon",2),K()),t&2){let n=et();te(),cn("icon",n.prefixIcon())}}var dV=(()=>{class t{value=wn("#ff0000");writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){this.onTouched=n}onChange=()=>{};onTouched=()=>{};static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["color"]],inputs:{value:[1,"value"]},outputs:{value:"valueChange"},features:[Gr([{provide:ys,useExisting:cr(()=>t),multi:!0}])],decls:4,vars:4,consts:[["type","color",3,"ngModelChange","ngModel"],[1,"color-icon"],["type","text",3,"ngModelChange","ngModel"]],template:function(r,o){r&1&&(q(0,"label")(1,"input",0),Mt("ngModelChange",function(s){return Lt(o.value,s)||(o.value=s),s}),K(),en(2,"div",1),q(3,"input",2),Mt("ngModelChange",function(s){return Lt(o.value,s)||(o.value=s),s}),K()()),r&2&&(te(),At("ngModel",o.value),te(),Ln("background-color",o.value()),te(),At("ngModel",o.value))},dependencies:[Oi,$a,ja,vs],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box;color:var(--form-item-color)}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}input[_ngcontent-%COMP%]{background:transparent;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[type=color][_ngcontent-%COMP%]{-webkit-appearance:none;padding:0;border:none}label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;height:1.5rem}label[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{visibility:hidden;width:1px;height:1px}label[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:.3125rem;border:solid 1px var(--form-border)}"],changeDetection:0})}return t})(),ru=(()=>{class t{value=dt();select=M(Kf);elementRef=M(at);onSelect(){console.log("option selected",this.value()),this.select.selected.set(this.value())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ed-select-option"]],hostVars:2,hostBindings:function(r,o){r&1&&Nt("click",function(){return o.onSelect()}),r&2&&Ci("selected",o.select.selected()===o.value)},inputs:{value:[1,"value"]},ngContentSelectors:uV,decls:1,vars:0,template:function(r,o){r&1&&(ka(),Oa(0))},styles:["[_nghost-%COMP%]{display:block;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color);padding:5px 10px;border-radius:.3125rem;cursor:pointer}[_nghost-%COMP%]:hover{background:#0f8be8}"]})}return t})(),Kf=(()=>{class t{selected=wn();options=qM(ru);contentTemplate=bn(fy);writeValue(n){this.selected.set(n)}registerOnChange(n){this.selected.subscribe(n)}registerOnTouched(n){this.onTouched=n}onTouched=()=>{};overlayRef=null;elementRef=M(at);change=Ni();overlay=M(AI);label=Dr(()=>{let n=this.selected();return n||"Select..."});selectedOption=Dr(()=>this.options().find(n=>n.value===this.selected()));constructor(){Ii(()=>{let n=this.selected();this.change.emit(n?n.value:null),this.hide()})}toggleDropdown(){this.showDropdown()}showDropdown(){this.overlayRef=this.overlay.create(this.getOverlayConfig()),this.overlayRef.attach(this.contentTemplate()),this.overlayRef.backdropClick().subscribe(()=>this.hide())}hide(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}getOverlayConfig(){let n=this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withPush(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:4},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-4}]),r=this.overlay.scrollStrategies.reposition();return new Bs({positionStrategy:n,scrollStrategy:r,hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop"})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ed-select"]],contentQueries:function(r,o,i){r&1&&Kw(i,o.options,ru,4),r&2&&ur()},viewQuery:function(r,o){r&1&&un(o.contentTemplate,fy,5),r&2&&ur()},inputs:{selected:[1,"selected"]},outputs:{selected:"selectedChange",change:"change"},features:[Gr([{provide:ys,useExisting:cr(()=>t),multi:!0}])],ngContentSelectors:uV,decls:4,vars:1,consts:[[1,"custom-select",3,"click"],["cdk-portal","","cdkPortal","",1,"dropdown"],[1,"custom-dropdown-menu",2,"width","100%"],[1,"dropdown-options-container"]],template:function(r,o){r&1&&(ka(),q(0,"label",0),Nt("click",function(){return o.toggleDropdown()}),q(1,"span"),de(2),K()(),oc(3,xZ,3,0,"ng-template",1)),r&2&&(te(2),Ti(o.label()))},dependencies:[fy],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px #444444;padding-left:6px;padding-right:6px;box-sizing:border-box;cursor:pointer}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}label[_ngcontent-%COMP%]{display:flex;gap:5px;height:1.5rem;align-items:center;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}.custom-dropdown-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#1e1e1e;box-shadow:0 10px 16px #00000059,0 2px 5px #00000059,inset 0 .5px #ffffff14,inset 0 0 .5px #ffffff59;padding:.5rem;border-radius:.8125rem;min-width:150px;z-index:1000}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1e1e1e;text-align:left;border-radius:3px;line-height:24px;height:auto}.custom-dropdown-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0f8be8}"],changeDetection:0})}return t})();var FZ=(()=>{class t{icon=dt();static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["ed-icon"]],inputs:{icon:[1,"icon"]},decls:7,vars:1,consts:[["width","24","height","24","fill","none","viewBox","0 0 24 24"],["fill","#c3c3c3","fill-rule","evenodd","d","M8.9 6h-.02c-.403 0-.735 0-1.006.022-.28.023-.54.072-.782.196a2 2 0 0 0-.874.874c-.124.243-.173.501-.196.782C6 8.144 6 8.477 6 8.88v.62a.5.5 0 0 0 1 0v-.6c0-.428 0-.72.019-.944.018-.22.05-.332.09-.41a1 1 0 0 1 .437-.437c.078-.04.19-.072.41-.09C8.18 7 8.472 7 8.9 7h.6a.5.5 0 0 0 0-1zm6.2 0h.02c.403 0 .735 0 1.006.022.281.023.54.072.782.196a2 2 0 0 1 .874.874c.124.243.173.501.196.782.022.27.022.603.022 1.005V9.5a.5.5 0 0 1-1 0v-.6c0-.428 0-.72-.019-.944-.018-.22-.05-.332-.09-.41a1 1 0 0 0-.437-.437c-.078-.04-.19-.072-.41-.09A13 13 0 0 0 15.1 7h-.6a.5.5 0 0 1 0-1zm.02 12h-.62a.5.5 0 0 1 0-1h.6c.428 0 .72 0 .944-.019.22-.018.332-.05.41-.09a1 1 0 0 0 .437-.437c.04-.078.072-.19.09-.41.019-.225.019-.516.019-.944v-.6a.5.5 0 0 1 1 0v.62c0 .403 0 .735-.022 1.006-.023.281-.072.54-.196.782a2 2 0 0 1-.874.874c-.243.124-.501.173-.782.196-.27.022-.603.022-1.005.022M8.9 18h-.02c-.403 0-.735 0-1.006-.022-.281-.023-.54-.072-.782-.196a2 2 0 0 1-.874-.874c-.124-.243-.173-.501-.196-.782A13 13 0 0 1 6 15.12v-.62a.5.5 0 0 1 1 0v.6c0 .428 0 .72.019.944.018.22.05.332.09.41a1 1 0 0 0 .437.437c.078.04.19.072.41.09.225.019.516.019.944.019h.6a.5.5 0 0 1 0 1z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M4.886 3.21a1 1 0 0 1 .812-.19l7.698 1.56.338.076a7.67 7.67 0 0 1 5.806 7.266v.346l-.008.329 1.197 1.197a1 1 0 0 1 0 1.414l-5.523 5.522a1 1 0 0 1-1.413 0l-1.198-1.197-.328.008a7.67 7.67 0 0 1-7.612-5.806l-.077-.338L3.02 5.7a1 1 0 0 1 .274-.906l1.5-1.5zm.674 9.99a6.666 6.666 0 0 0 6.383 5.342h.3l.756-.018 1.5 1.5 5.523-5.522-1.5-1.5.018-.756a6.67 6.67 0 0 0-5.048-6.619l-.295-.066L5.5 4l-.396.397 5.16 5.16A3 3 0 0 1 12 9.001 3.001 3.001 0 0 1 12 15a3 3 0 0 1-2.444-4.737l-5.16-5.16L4 5.5zM12 10.001a2 2 0 0 0-2 2l.01.204a2 2 0 0 0 1.786 1.785L12 14a2 2 0 0 0 1.989-1.795l.01-.204a2 2 0 0 0-1.795-1.99z"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M18 5H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1M6 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M19.5 4a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V5h-6.5v14H15a.5.5 0 0 1 0 1H9a.5.5 0 0 1 0-1h2.5V5H5v2.5a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5z"],["fill","var(--fpl-icon-color, var(--color-icon))","d","M18 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zM6 5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1zm2.725 5.582a.5.5 0 0 1 .629.064l6.5 6.5a.5.5 0 1 1-.707.707L9 11.708l-2.146 2.146a.5.5 0 1 1-.708-.707l2.5-2.5zM14.5 7a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5m0 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M9 8.5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1H13a4 4 0 0 0-4-4zM9 12v3h3a3 3 0 0 0-3-3","clip-rule","evenodd"],["fill","var(--fpl-icon-color, var(--color-icon))","fill-rule","evenodd","d","M6 6.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5M7 10v1h10v-1zm-.25-1a.75.75 0 0 0-.75.75v1.5c0 .414.336.75.75.75h10.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 0-.75-.75zM7 17v-2h10v2zm-1-2.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-.75.75H6.75a.75.75 0 0 1-.75-.75z","clip-rule","evenodd"]],template:function(r,o){r&1&&Qt(0,CZ,2,0,":svg:svg",0)(1,TZ,2,0,":svg:svg",0)(2,IZ,2,0,":svg:svg",0)(3,DZ,2,0,":svg:svg",0)(4,NZ,2,0,":svg:svg",0)(5,AZ,2,0,":svg:svg",0)(6,MZ,2,0,":svg:svg",0),r&2&&Jt(o.icon()==="iconRadius"?0:o.icon()==="pen"?1:o.icon()==="container"?2:o.icon()==="text"?3:o.icon()==="image"?4:o.icon()==="rotate"?5:o.icon()==="strokeWeight"?6:-1)},styles:["[_nghost-%COMP%]{display:inline-flex}"],changeDetection:0})}return t})(),ky=(()=>{class t{prefixIcon=dt();suffixIcon=dt();el=M(at);writeValue(n){this.value.set(n)}registerOnChange(n){this.value.subscribe(n)}registerOnTouched(n){}value=wn("");type=dt("text");prefix=dt("");suffix=dt("");constructor(){xt(()=>{this.initDrag()})}initDrag(){let{dragStart$:n,dragMove$:r,dragEnd$:o}=kI(this.el.nativeElement),i=this.value();n.subscribe(s=>{i=this.value()}),r.subscribe(s=>{this.value.set(Math.round(i+s.deltaX))})}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ze({type:t,selectors:[["input-component"]],inputs:{prefixIcon:[1,"prefixIcon"],suffixIcon:[1,"suffixIcon"],value:[1,"value"],type:[1,"type"],prefix:[1,"prefix"],suffix:[1,"suffix"]},outputs:{value:"valueChange"},features:[Gr([{provide:ys,useExisting:cr(()=>t),multi:!0}])],decls:7,vars:6,consts:[[1,"icon"],[3,"ngModelChange","ngModel"],[3,"icon"]],template:function(r,o){r&1&&(q(0,"label"),Qt(1,kZ,3,1,"div",0),Qt(2,OZ,3,2),q(3,"div")(4,"input",1),Mt("ngModelChange",function(s){return Lt(o.value,s)||(o.value=s),s}),K()(),Qt(5,RZ,3,1,"div",0),Qt(6,PZ,2,1,"div",0),K()),r&2&&(te(),Jt(o.prefix()&&o.prefix()!==""?1:-1),te(),Jt(o.prefixIcon()?2:-1),te(2),At("ngModel",o.value),yn("type",o.type()),te(),Jt(o.suffix()&&o.suffix()!==""?5:-1),te(),Jt(o.suffixIcon()?6:-1))},dependencies:[Oi,$a,ja,vs,FZ],styles:["[_nghost-%COMP%]{display:inline-block;background:var(--form-bg);border-radius:.3125rem;font-size:11px;border:solid 1px transparent;box-sizing:border-box}[_nghost-%COMP%]:hover{border:solid 1px var(--form-border)}[_nghost-%COMP%]:focus-within{border:solid 1px var(--form-border-highlight)}input-group[_nghost-%COMP%], input-group   [_nghost-%COMP%]{flex:1;border-radius:0}input-group[_nghost-%COMP%]:first-child, input-group   [_nghost-%COMP%]:first-child{border-top-left-radius:.3125rem;border-bottom-left-radius:.3125rem}input-group[_nghost-%COMP%]:last-child, input-group   [_nghost-%COMP%]:last-child{border-top-right-radius:.3125rem;border-bottom-right-radius:.3125rem}label[_ngcontent-%COMP%]{display:flex;gap:3px;height:1.5rem;align-items:center;padding-left:.3rem;padding-right:.3rem}.icon[_ngcontent-%COMP%]{display:flex;align-items:center;width:24px;height:24px;line-height:24px;justify-content:center;color:var(--form-item-color-secondary);font-family:var(--font-family)}input[_ngcontent-%COMP%]{background:transparent;width:100%;outline:none;border:none;font-family:var(--font-family);font-size:.6875rem;line-height:1.5rem;color:var(--form-item-color)}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}"],changeDetection:0})}return t})();var LZ=["timeline"],VZ=["videoPlayer"],ou=class t{timelineEl=bn("timeline");dialogRef=M(Ki);data=M(qf);videoPlayer=bn("videoPlayer");videoElement;crf=ae(23);preset=ae("medium");frameRate=ae(20);resolutionWidth=ae(480);resolutionHeight=ae(360);timelineWidth=ae(0);start=ae(0);end=ae(0);duration=ae(0);startTime=Dr(()=>parseFloat((this.start()/this.timelineWidth()*this.duration()).toFixed(2)));endTime=Dr(()=>parseFloat((this.end()/this.timelineWidth()*this.duration()).toFixed(2)));constructor(){xt(()=>{this.videoElement=this.videoPlayer()?.nativeElement,this.videoElement.src=this.data.getRecordingUrl(),this.timelineWidth.set(this.timelineEl()?.nativeElement.getBoundingClientRect().width||0),this.end.set(this.timelineWidth())})}dragStart(){console.log("drag started"),this.timelineWidth.set(this.timelineEl()?.nativeElement.getBoundingClientRect().width||0)}leftDragUpdated(e){console.log("left drag updated",e),this.start.set(e.x);let n=this.start()/this.timelineWidth()*this.duration();this.videoElement&&(this.videoElement.currentTime=n)}rightDragUpdated(e){console.log("right drag updated",e),this.end.set(e.x);let n=this.end()/this.timelineWidth()*this.duration();this.videoElement&&(this.videoElement.currentTime=n)}onVideoLoaded(e){let n=e.target;console.log("video loaded",n.duration),this.duration.set(n.duration)}exportVideo(){this.dialogRef.close({data:{crf:this.crf(),preset:this.preset(),frameRate:this.frameRate(),resolutionWidth:this.resolutionWidth(),resolutionHeight:this.resolutionHeight(),startTime:this.startTime(),endTime:this.endTime()}})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-video-editor"]],viewQuery:function(n,r){n&1&&(un(r.timelineEl,LZ,5),un(r.videoPlayer,VZ,5)),n&2&&ur(2)},decls:45,vars:21,consts:[["videoPlayer",""],["timeline",""],["controls","",3,"loadedmetadata"],[1,"timeline"],[1,"clip"],[1,"thumb","start",3,"dragStart","positionUpdated","draggable","resizable","minY","maxY","minX","maxX"],[1,"thumb","end",3,"dragStart","positionUpdated","draggable","resizable","minY","maxY","minX","maxX"],[1,"properties-panel_row"],["type","number",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","ultrafast"],["value","superfast"],["value","veryfast"],["value","faster"],["value","fast"],["value","medium"],["value","slow"],["value","slower"],["value","veryslow"],["prefix","W","type","number",3,"ngModelChange","ngModel"],["prefix","H","type","number",3,"ngModelChange","ngModel"],[3,"click"]],template:function(n,r){if(n&1){let o=vn();q(0,"video",2,0),Nt("loadedmetadata",function(s){return je(o),Be(r.onVideoLoaded(s))}),K(),q(2,"div",3,1),en(4,"div",4),q(5,"div",5),Nt("dragStart",function(){return je(o),Be(r.dragStart())})("positionUpdated",function(s){return je(o),Be(r.leftDragUpdated(s))}),K(),q(6,"div",6),Nt("dragStart",function(){return je(o),Be(r.dragStart())})("positionUpdated",function(s){return je(o),Be(r.rightDragUpdated(s))}),K()(),de(7),q(8,"div",7)(9,"label"),de(10,"Video Quality (CRF)"),K(),q(11,"input-component",8),Mt("ngModelChange",function(s){return je(o),Lt(r.crf,s)||(r.crf=s),Be(s)}),K()(),q(12,"div",7)(13,"label"),de(14,"Preset"),K(),q(15,"ed-select",9),Mt("ngModelChange",function(s){return je(o),Lt(r.preset,s)||(r.preset=s),Be(s)}),q(16,"ed-select-option",10),de(17,"Ultrafast"),K(),q(18,"ed-select-option",11),de(19,"Superfast"),K(),q(20,"ed-select-option",12),de(21,"Veryfast"),K(),q(22,"ed-select-option",13),de(23,"Faster"),K(),q(24,"ed-select-option",14),de(25,"Fast"),K(),q(26,"ed-select-option",15),de(27,"Medium"),K(),q(28,"ed-select-option",16),de(29,"Slow"),K(),q(30,"ed-select-option",17),de(31,"Slower"),K(),q(32,"ed-select-option",18),de(33,"Veryslow"),K()()(),q(34,"div",7)(35,"label"),de(36,"Frame Rate"),K(),q(37,"input-component",8),Mt("ngModelChange",function(s){return je(o),Lt(r.frameRate,s)||(r.frameRate=s),Be(s)}),K()(),q(38,"div",7)(39,"label"),de(40,"Resolution"),K(),q(41,"input-component",19),Mt("ngModelChange",function(s){return je(o),Lt(r.resolutionWidth,s)||(r.resolutionWidth=s),Be(s)}),K(),q(42,"input-component",20),Mt("ngModelChange",function(s){return je(o),Lt(r.resolutionHeight,s)||(r.resolutionHeight=s),Be(s)}),K()(),q(43,"button",21),Nt("click",function(){return je(o),Be(r.exportVideo())}),de(44,"Export Video"),K()}n&2&&(te(4),Ln("width",r.end()-r.start()+10,"px")("transform","translateX("+r.start()+"px)"),te(),cn("resizable",!1)("minY",0)("maxY",0)("minX",0)("maxX",r.timelineWidth()-10),te(),cn("resizable",!1)("minY",0)("maxY",0)("minX",0)("maxX",r.timelineWidth()-10),te(),Xh(" ",r.startTime(),`
-
`,r.endTime()," "),te(4),At("ngModel",r.crf),te(4),At("ngModel",r.preset),te(22),At("ngModel",r.frameRate),te(4),At("ngModel",r.resolutionWidth),te(),At("ngModel",r.resolutionHeight))},dependencies:[ky,Oi,ja,vs,Kf,ru,cV],styles:["[_nghost-%COMP%]{background:#1e1e1e;box-shadow:0 10px 16px #00000059,0 2px 5px #00000059,inset 0 .5px #ffffff14,inset 0 0 .5px #ffffff59;padding:.5rem;border-radius:.8125rem;display:block;background:#222;width:100%;height:100%;--timeline-height: 30px}.properties-panel_row[_ngcontent-%COMP%]{display:flex;margin-bottom:5px;align-items:center;gap:5px}.properties-panel_row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap;min-width:105px}video[_ngcontent-%COMP%]{width:100%;height:auto}.timeline[_ngcontent-%COMP%]{position:relative;height:var(--timeline-height);background:#333;margin-top:10px}.thumb[_ngcontent-%COMP%]{position:absolute;top:0;width:10px;height:100%;background:#666;cursor:ew-resize;opacity:.001}.thumb.start[_ngcontent-%COMP%]{left:0}.thumb.end[_ngcontent-%COMP%]{right:0}.clip[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:var(--timeline-height);background:var(--highlight-color);border-radius:10px;pointer-events:none}"]})};var Hs=class t{videoService=M(Qc);recorder=null;recordingCount=ae(1);isRecording=ae(!1);recordings=ae([]);videos=ae([]);audioSources=ae([]);audioStream=null;canvasComponent=void 0;videoCount=0;dialog=M(Dy);constructor(){}async getDesktopStream(){let e=await navigator.mediaDevices.getDisplayMedia({video:!0}),n=new jf(e,void 0,"screen");n.id=`video-${this.videoCount++}`,e.getVideoTracks().forEach(r=>{console.log("track",r.getSettings()),r.onended=()=>{console.log("track ended")}}),n.stream=e,this.videos.update(r=>[...r,n])}async getWebcamDevices(){let e=await this.openDeviceChoiceDialog("videoinput"),n=await navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:e.deviceId?{exact:e.deviceId}:void 0}}),r=new jf(n,e,"webcam");n.getVideoTracks().forEach(o=>{console.log("webcam track",o.getSettings())}),r.id=`video-${this.videoCount++}`,this.videos.update(o=>[...o,r])}async openDeviceChoiceDialog(e){let n=this.dialog.open(Ny,{height:" 250px",width:"300px",panelClass:"editor-dialog",data:e});return(await Tv(n.closed)).data}async getAudioStream(){let e=await this.openDeviceChoiceDialog("audioinput"),n=await navigator.mediaDevices.getUserMedia({audio:{deviceId:e.deviceId?{exact:e.deviceId}:void 0,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:!1}),r=new ly(n,e);this.audioSources.update(o=>[...o,r])}startRecording(){console.log("startRecording called",this.canvasComponent),this.isRecording.set(!0),this.canvasComponent&&(console.log("start drawing"),this.canvasComponent.startDrawing());let e=`recording-${this.recordingCount()}`;this.recordingCount.set(this.recordingCount()+1);let n=new uy(this.videoService);if(n.name=e,this.recordings.update(s=>[...s,n]),!this.canvasComponent||!this.canvasComponent.ctx||!this.canvasComponent.canvas){console.log("no canvas component");return}let r=this.canvasComponent.canvas.captureStream(30),o=new MediaStream([...r.getTracks(),...this.audioStream?.getTracks()||[]]),i=[];this.recorder=new MediaRecorder(o,{mimeType:"video/webm;codecs=vp9"}),this.recorder.ondataavailable=s=>{console.log("data available",s.data),i.push(s.data)},this.recorder.onstop=()=>{this.isRecording.set(!1),this.canvasComponent&&this.canvasComponent.stopDrawing(),this.recordings.update(s=>{let a=s[s.length-1];return a&&(a.chunks=i),[...s]})},console.log("start recording"),this.recorder.start()}stopRecording(){this.recorder?.stop()}bringToFront(e){let n=this.videos().filter(r=>r!==e);return this.videos.set([...n,e]),[...n]}openExportSettings(e){this.dialog.open(ou,{data:e}).closed.subscribe(r=>{console.log("export settings closed",r),e.convertRecording(r.data)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var Oy=class t{dialog=M(Dy);open(e){let n=this.dialog.open(ou,{height:"600px",width:"800px",panelClass:"editor-dialog",data:e})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var $Z=["canvas"],Ry=class t{stream=dt.required();canvas=bn("canvas");canvasCtx=null;audioCtx;analyser;dataArray;bufferLength=0;width=ae(160);height=ae(20);constructor(){xt(()=>{let e=this.canvas()?.nativeElement;e&&(this.canvasCtx=e.getContext("2d"),this.prepare(),this.draw())})}prepare(){let e=this.stream();if(!e)return;this.audioCtx=new AudioContext,this.analyser=this.audioCtx.createAnalyser(),this.audioCtx.createMediaStreamSource(e).connect(this.analyser),this.analyser.connect(this.audioCtx.destination),this.analyser.fftSize=64,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-15,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength)}draw(){if(!this.analyser||!this.dataArray||!this.canvasCtx)return;let e=requestAnimationFrame(this.draw.bind(this));this.canvasCtx.fillStyle="rgb(0, 0, 0)",this.canvasCtx.fillRect(0,0,this.width(),this.height()),this.canvasCtx.lineTo(this.width(),this.height()/2),this.canvasCtx.stroke(),this.analyser.getByteFrequencyData(this.dataArray);let n=this.width()/this.bufferLength;for(let r=0;r<this.bufferLength;r++){let o=r*n,i=(1-this.dataArray[r]/255)*this.height();this.canvasCtx.fillStyle=`rgb(${i+100} 50 50)`,this.canvasCtx.fillRect(o,i,n,this.height()-i)}}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-audio-visualizer"]],viewQuery:function(n,r){n&1&&un(r.canvas,$Z,5),n&2&&ur()},inputs:{stream:[1,"stream"]},decls:2,vars:2,consts:[["canvas",""]],template:function(n,r){n&1&&ht(0,"canvas",null,0),n&2&&yn("width",r.width())("height",r.height())},styles:["[_nghost-%COMP%]{display:block}"]})};function jZ(t,e){if(t&1){let n=vn();q(0,"div",2)(1,"label"),de(2,"Border"),K(),q(3,"color",5),Mt("ngModelChange",function(o){je(n),et(2);let i=er(13);return Lt(i.borderColor,o)||(i.borderColor=o),Be(o)}),K(),q(4,"input-component",16),Mt("ngModelChange",function(o){je(n),et(2);let i=er(13);return Lt(i.borderWidth,o)||(i.borderWidth=o),Be(o)}),K()()}if(t&2){et(2);let n=er(13);te(3),At("ngModel",n.borderColor),te(),At("ngModel",n.borderWidth)}}function BZ(t,e){if(t&1){let n=vn();q(0,"div",2)(1,"label"),de(2,"Blur"),K(),q(3,"input",17),Mt("ngModelChange",function(o){je(n),et(2);let i=er(13);return Lt(i.videoDO().blurAmount,o)||(i.videoDO().blurAmount=o),Be(o)}),K()(),q(4,"div",2)(5,"label"),de(6,"Edge Blur"),K(),q(7,"input",17),Mt("ngModelChange",function(o){je(n),et(2);let i=er(13);return Lt(i.videoDO().edgeBlurAmount,o)||(i.videoDO().edgeBlurAmount=o),Be(o)}),K()(),q(8,"div",2)(9,"label"),de(10,"FG. Thr."),K(),q(11,"input",18),Mt("ngModelChange",function(o){je(n),et(2);let i=er(13);return Lt(i.videoDO().foregroundThreshold,o)||(i.videoDO().foregroundThreshold=o),Be(o)}),K()()}if(t&2){et(2);let n=er(13);te(3),cn("min",0),At("ngModel",n.videoDO().blurAmount),te(4),cn("min",0),At("ngModel",n.videoDO().edgeBlurAmount),te(4),cn("min",0),At("ngModel",n.videoDO().foregroundThreshold)}}function HZ(t,e){if(t&1){let n=vn();q(0,"div",1)(1,"h2"),de(2,"Clipping"),K()(),q(3,"div",2)(4,"label"),de(5,"Type"),K(),q(6,"ed-select",5),Mt("ngModelChange",function(o){je(n),et();let i=er(13);return Lt(i.clipType,o)||(i.clipType=o),Be(o)}),q(7,"ed-select-option",9),de(8,"None"),K(),q(9,"ed-select-option",10),de(10,"Circle"),K(),q(11,"ed-select-option",11),de(12,"Rectangle"),K()()(),Qt(13,jZ,5,2,"div",2),q(14,"div",1)(15,"h2"),de(16,"Background"),K()(),q(17,"div",2)(18,"label"),de(19,"Type"),K(),q(20,"ed-select",5),Mt("ngModelChange",function(o){je(n),et();let i=er(13);return Lt(i.videoDO().backgroundType,o)||(i.videoDO().backgroundType=o),Be(o)}),q(21,"ed-select-option",9),de(22,"None"),K(),q(23,"ed-select-option",12),de(24,"Blur"),K(),q(25,"ed-select-option",13),de(26,"Image"),K()()(),Qt(27,BZ,12,6),q(28,"div",2)(29,"button",14),Nt("click",function(){je(n);let o=et(),i=er(13);return Be(o.recordingService.bringToFront(i.videoDO()))}),de(30," Bring to Front "),K()(),q(31,"input",15),Mt("ngModelChange",function(o){je(n),et();let i=er(13);return Lt(i.showClippedHint,o)||(i.showClippedHint=o),Be(o)}),K()}if(t&2){et();let n=er(13);te(6),At("ngModel",n.clipType),te(7),Jt(n.clipType()!=="none"?13:-1),te(7),At("ngModel",n.videoDO().backgroundType),te(7),Jt(n.videoDO().backgroundType()==="blur"?27:-1),te(4),At("ngModel",n.showClippedHint)}}function UZ(t,e){t&1&&de(0," Converting... ")}function zZ(t,e){t&1&&de(0," Error during conversion. ")}function GZ(t,e){if(t&1){let n=vn();q(0,"button",14),Nt("click",function(){je(n);let o=et().$implicit,i=et().$implicit;return Be(i.downloadConverted(o))}),de(1,"Download"),K()}}function WZ(t,e){if(t&1&&(q(0,"div"),Qt(1,UZ,1,0)(2,zZ,1,0)(3,GZ,2,0,"button"),de(4),K()),t&2){let n=e.$implicit;te(),Jt(n.state()==="processing"?1:n.state()==="error"?2:n.state()==="done"?3:-1),te(3),Ko(" ",n.progress(),"% ")}}function qZ(t,e){if(t&1){let n=vn();q(0,"div"),de(1),q(2,"button",14),Nt("click",function(){let o=je(n).$implicit;return Be(o.download())}),de(3,"Download"),K(),q(4,"button",14),Nt("click",function(){let o=je(n).$implicit,i=et();return Be(i.editorService.open(o))}),de(5,"Edit"),K(),q(6,"div"),yo(7,WZ,5,2,"div",null,xi),K()()}if(t&2){let n=e.$implicit;te(),Ko(" ",n.name," "),te(6),vo(n.convertedVideos())}}function KZ(t,e){t&1&&(Ut(),q(0,"svg",19),en(1,"circle",20)(2,"path",21)(3,"path",22),K())}function YZ(t,e){t&1&&(Ut(),q(0,"svg",19),en(1,"path",23),K())}function XZ(t,e){if(t&1&&(q(0,"div",8),Qt(1,KZ,4,0,":svg:svg",19)(2,YZ,2,0,":svg:svg",19),q(3,"label"),de(4),K()()),t&2){let n=e.$implicit;et();let r=er(13);Ci("selected",(r==null?null:r.videoDO())===n),te(),Jt(n.type==="webcam"?1:2),te(3),Ti((n.device==null?null:n.device.label)||"Unnamed Device")}}function ZZ(t,e){if(t&1&&(q(0,"div",8),Ut(),q(1,"svg",24),en(2,"path",25),K(),Sa(),q(3,"label"),de(4),K(),en(5,"app-audio-visualizer",26),K()),t&2){let n=e.$implicit;te(4),Ti(n.device.label||"Unnamed Device"),te(),cn("stream",n.stream)}}var Py=class t{settings=M(js);recordingService=M(Hs);editorService=M(Oy);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-sidebar"]],decls:22,vars:5,consts:[[1,"properties-panel"],[1,"properties-panel_header"],[1,"properties-panel_row"],["prefix","W",3,"ngModelChange","ngModel"],["prefix","H",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[2,"padding","20px"],[1,"audio-item",3,"selected"],[1,"audio-item"],["value","none"],["value","circle"],["value","rectangle"],["value","blur"],["value","image"],[3,"click"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["type","range","max","50",3,"ngModelChange","min","ngModel"],["type","range","max","1","step","0.01",3,"ngModelChange","min","ngModel"],["width","16px","height","16px","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","13","r","3","stroke","#fff","stroke-width","1.5"],["d","M2 13.3636C2 10.2994 2 8.76721 2.74902 7.6666C3.07328 7.19014 3.48995 6.78104 3.97524 6.46268C4.69555 5.99013 5.59733 5.82123 6.978 5.76086C7.63685 5.76086 8.20412 5.27068 8.33333 4.63636C8.52715 3.68489 9.37805 3 10.3663 3H13.6337C14.6219 3 15.4728 3.68489 15.6667 4.63636C15.7959 5.27068 16.3631 5.76086 17.022 5.76086C18.4027 5.82123 19.3044 5.99013 20.0248 6.46268C20.51 6.78104 20.9267 7.19014 21.251 7.6666C22 8.76721 22 10.2994 22 13.3636C22 16.4279 22 17.9601 21.251 19.0607C20.9267 19.5371 20.51 19.9462 20.0248 20.2646C18.9038 21 17.3433 21 14.2222 21H9.77778C6.65675 21 5.09624 21 3.97524 20.2646C3.48995 19.9462 3.07328 19.5371 2.74902 19.0607C2.53746 18.7498 2.38566 18.4045 2.27673 18","stroke","#fff","stroke-width","1","stroke-linecap","round"],["d","M19 10H18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M12 20.5H16M12 20.5H8M12 20.5V16.5M12 16.5C16 16.5 19.5 16.1667 20 15.8333C20.5 15.5 21 12.6667 21 10C21 7.33333 20.5 4.5 20 4.16667C19.5 3.83333 16 3.5 12 3.5C8 3.5 4.5 3.83333 4 4.16667C3.5 4.5 3 7.33333 3 10C3 12.6667 3.5 15.5 4 15.8333C4.5 16.1667 8 16.5 12 16.5Z","stroke","#fff","stroke-width","1","stroke-linecap","round","stroke-linejoin","round"],["width","16px","height","16px","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",2,"flex-shrink","0"],["d","M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z","stroke","#fff","stroke-width","1","stroke-linecap","round","stroke-linejoin","round"],[3,"stream"]],template:function(n,r){if(n&1){let o=vn();q(0,"div",0)(1,"div",1)(2,"h2"),de(3,"Canvas"),K()(),q(4,"div",2)(5,"label"),de(6,"Size"),K(),q(7,"input-component",3),Mt("ngModelChange",function(s){return je(o),Lt(r.settings.recordingWidth,s)||(r.settings.recordingWidth=s),Be(s)}),K(),q(8,"input-component",4),Mt("ngModelChange",function(s){return je(o),Lt(r.settings.recordingHeight,s)||(r.settings.recordingHeight=s),Be(s)}),K()(),q(9,"div",2)(10,"label"),de(11,"BG Color"),K(),q(12,"color",5),Mt("ngModelChange",function(s){return je(o),Lt(r.settings.backgroundColor,s)||(r.settings.backgroundColor=s),Be(s)}),K()(),Zh(13),Qt(14,HZ,32,5),K(),yo(15,qZ,9,1,"div",null,xi),q(17,"div",6),yo(18,XZ,5,4,"div",7,xi),yo(20,ZZ,6,2,"div",8,xi),K()}if(n&2){te(7),At("ngModel",r.settings.recordingWidth),te(),At("ngModel",r.settings.recordingHeight),te(4),At("ngModel",r.settings.backgroundColor),te();let o=Yw(r.settings.selectedVideo());te(),Jt(o?14:-1),te(),vo(r.recordingService.recordings()),te(3),vo(r.recordingService.videos()),te(2),vo(r.recordingService.audioSources())}},dependencies:[Oi,$a,o0,n0,ja,vs,ky,dV,Kf,ru,Ry],styles:["[_nghost-%COMP%]{display:block;width:280px;background:#181818;flex-shrink:0;border-left:solid 1px #484848}.properties-panel_row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{white-space:nowrap;min-width:50px}.audio-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.audio-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex-shrink:1;white-space:nowrap}.audio-item.selected[_ngcontent-%COMP%]{background:#333}"]})};function QZ(t,e){t&1&&(Ut(),ot(0,"svg",2),ht(1,"rect",11),ut())}function JZ(t,e){t&1&&(Ut(),ot(0,"svg",3)(1,"g",12),ht(2,"circle",13),ut(),ot(3,"defs")(4,"filter",14),ht(5,"feFlood",15)(6,"feBlend",16)(7,"feColorMatrix",17)(8,"feOffset",18)(9,"feGaussianBlur",19)(10,"feComposite",20)(11,"feColorMatrix",21)(12,"feBlend",22),ut()()())}var Fy=class t{recordingService=M(Hs);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-controls"]],decls:15,vars:1,consts:[[2,"display","flex","align-items","center","gap","10px"],[1,"btn",3,"click"],["width","21","height","21","viewBox","0 0 21 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","19","height","19","viewBox","0 0 19 19","fill","none","xmlns","http://www.w3.org/2000/svg"],[1,"btn-small",3,"click"],["width","24px","height","24px","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["cx","12","cy","13","r","3","stroke","#fff","stroke-width","1.5"],["d","M2 13.3636C2 10.2994 2 8.76721 2.74902 7.6666C3.07328 7.19014 3.48995 6.78104 3.97524 6.46268C4.69555 5.99013 5.59733 5.82123 6.978 5.76086C7.63685 5.76086 8.20412 5.27068 8.33333 4.63636C8.52715 3.68489 9.37805 3 10.3663 3H13.6337C14.6219 3 15.4728 3.68489 15.6667 4.63636C15.7959 5.27068 16.3631 5.76086 17.022 5.76086C18.4027 5.82123 19.3044 5.99013 20.0248 6.46268C20.51 6.78104 20.9267 7.19014 21.251 7.6666C22 8.76721 22 10.2994 22 13.3636C22 16.4279 22 17.9601 21.251 19.0607C20.9267 19.5371 20.51 19.9462 20.0248 20.2646C18.9038 21 17.3433 21 14.2222 21H9.77778C6.65675 21 5.09624 21 3.97524 20.2646C3.48995 19.9462 3.07328 19.5371 2.74902 19.0607C2.53746 18.7498 2.38566 18.4045 2.27673 18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M19 10H18","stroke","#fff","stroke-width","1.5","stroke-linecap","round"],["d","M12 20.5H16M12 20.5H8M12 20.5V16.5M12 16.5C16 16.5 19.5 16.1667 20 15.8333C20.5 15.5 21 12.6667 21 10C21 7.33333 20.5 4.5 20 4.16667C19.5 3.83333 16 3.5 12 3.5C8 3.5 4.5 3.83333 4 4.16667C3.5 4.5 3 7.33333 3 10C3 12.6667 3.5 15.5 4 15.8333C4.5 16.1667 8 16.5 12 16.5Z","stroke","#fff","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z","stroke","#fff","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["width","21","height","21","rx","5","fill","#D9D9D9"],["filter","url(#filter0_i_2_5)"],["cx","9.5","cy","9.5","r","9.5","fill","#FE3030"],["id","filter0_i_2_5","x","0","y","0","width","19","height","21","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["mode","normal","in","SourceGraphic","in2","BackgroundImageFix","result","shape"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","2"],["stdDeviation","1"],["in2","hardAlpha","operator","arithmetic","k2","-1","k3","1"],["type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"],["mode","normal","in2","shape","result","effect1_innerShadow_2_5"]],template:function(n,r){n&1&&(ot(0,"div",0)(1,"div",1),bo("click",function(){return r.recordingService.isRecording()?r.recordingService.stopRecording():r.recordingService.startRecording()}),Qt(2,QZ,2,0,":svg:svg",2)(3,JZ,13,0,":svg:svg",3),ut(),ot(4,"div",4),bo("click",function(){return r.recordingService.getWebcamDevices()}),Ut(),ot(5,"svg",5),ht(6,"circle",6)(7,"path",7)(8,"path",8),ut()(),Sa(),ot(9,"div",4),bo("click",function(){return r.recordingService.getDesktopStream()}),Ut(),ot(10,"svg",5),ht(11,"path",9),ut()(),Sa(),ot(12,"div",4),bo("click",function(){return r.recordingService.getAudioStream()}),Ut(),ot(13,"svg",5),ht(14,"path",10),ut()()()),n&2&&(te(2),Jt(r.recordingService.isRecording()?2:3))},styles:['[_nghost-%COMP%]{width:100%;height:100px;z-index:1000;background:#181818;border-top:solid 1px #484848;display:flex;align-items:center;justify-items:center;justify-content:center}.btn[_ngcontent-%COMP%]{position:relative;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-items:center;justify-content:center;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(360deg,#303030 .06%,#1e1e1e 99.94%)}.btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:50%;z-index:-1;background:linear-gradient(202.15deg,#646361 -9.36%,#242424 58.02%)}.btn-small[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:10px;background:linear-gradient(179.93deg,#303030 .06%,#1e1e1e 99.94%)}.btn-small[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-1px;border-radius:10px;z-index:-1;background:linear-gradient(223deg,#646361 -9.36%,#242424 58.02%);transition:all .3s}.btn-small[_ngcontent-%COMP%]:hover:before{background:linear-gradient(43deg,#646361 -9.36%,#242424 58.02%)}']})};var eQ=(t,e)=>e.id;function tQ(t,e){if(t&1){let n=vn();q(0,"app-video",10,1),Nt("selected",function(o){je(n);let i=et();return Be(i.settings.setSelectedVideo(o))}),K()}if(t&2){let n=e.$implicit,r=et();cn("scale",r.settings.scale())("width",r.settings.recordingWidth())("srcObject",n.stream)("videoDO",n)}}function nQ(t,e){if(t&1&&(q(0,"h3"),de(1,"Playback"),K(),en(2,"video",11,2)),t&2){let n=et();te(2),cn("src",n.currentVideo(),xw)}}var Ly=class t{title=ae("demo");videoService=M(Qc);recordingService=M(Hs);currentVideo=ae(null);settings=M(js);canvasComponent=bn(Zc);downloadData=null;constructor(){xt(()=>{console.log("canvas component",this.canvasComponent()),this.recordingService.canvasComponent=this.canvasComponent()})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ze({type:t,selectors:[["app-root"]],viewQuery:function(n,r){n&1&&un(r.canvasComponent,Zc,5),n&2&&ur()},decls:12,vars:11,consts:[["canvasComponent",""],["screenVideo",""],["playbackVideo",""],[2,"display","flex","width","100%","height","100%","overflow","hidden"],[2,"display","flex","flex-direction","column","width","100%","overflow","hidden","height","100%"],[2,"padding","40px","background","#222","overflow","hidden","flex","1","display","flex","align-items","center","justify-content","center"],[2,"width","100%",3,"scaleChange","background","contentWidth","contentHeight"],[3,"scale","width","srcObject","videoDO"],[2,"width","100%","display","none",3,"background","contentWidth","contentHeight"],[3,"background","canvasHeight","canvasWidth","videos"],[3,"selected","scale","width","srcObject","videoDO"],["controls","",3,"src"]],template:function(n,r){if(n&1){let o=vn();q(0,"div",3)(1,"div",4)(2,"div",5)(3,"app-editor",6),Nt("scaleChange",function(s){return je(o),Be(r.settings.scale.set(s))}),yo(4,tQ,2,4,"app-video",7,eQ),K()(),en(6,"app-controls"),K(),en(7,"app-sidebar"),K(),Qt(8,nQ,4,1),q(9,"app-editor",8),en(10,"app-canvas",9,0),K()}n&2&&(te(3),cn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),te(),vo(r.recordingService.videos()),te(4),Jt(r.currentVideo()?8:-1),te(),cn("background",r.settings.backgroundColor())("contentWidth",r.settings.recordingWidth())("contentHeight",r.settings.recordingHeight()),te(),cn("background",r.settings.backgroundColor())("canvasHeight",r.settings.recordingHeight())("canvasWidth",r.settings.recordingWidth())("videos",r.recordingService.videos()))},dependencies:[Oi,iy,Zc,sy,Py,Fy],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background:#121212;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;overflow:hidden;box-sizing:border-box}"]})};h_(Ly,rO).catch(t=>console.error(t));
